/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD.
If you want to view the source, please visit the repository of this plugin.
*/
"use strict";var od=Object.create;var Hi=Object.defineProperty;var ad=Object.getOwnPropertyDescriptor;var ld=Object.getOwnPropertyNames;var cd=Object.getPrototypeOf,hd=Object.prototype.hasOwnProperty;var ud=(c,_,v)=>_ in c?Hi(c,_,{enumerable:!0,configurable:!0,writable:!0,value:v}):c[_]=v;var ze=(c,_)=>()=>(_||c((_={exports:{}}).exports,_),_.exports),Ue=(c,_)=>{for(var v in _)Hi(c,v,{get:_[v],enumerable:!0})},gl=(c,_,v,x)=>{if(_&&typeof _=="object"||typeof _=="function")for(let y of ld(_))!hd.call(c,y)&&y!==v&&Hi(c,y,{get:()=>_[y],enumerable:!(x=ad(_,y))||x.enumerable});return c};var Yt=(c,_,v)=>(v=c!=null?od(cd(c)):{},gl(_||!c||!c.__esModule?Hi(v,"default",{value:c,enumerable:!0}):v,c)),dd=c=>gl(Hi({},"__esModule",{value:!0}),c);var Ke=(c,_,v)=>(ud(c,typeof _!="symbol"?_+"":_,v),v),xn=(c,_,v)=>{if(!_.has(c))throw TypeError("Cannot "+v)};var Ce=(c,_,v)=>(xn(c,_,"read from private field"),v?v.call(c):_.get(c)),Ae=(c,_,v)=>{if(_.has(c))throw TypeError("Cannot add the same private member more than once");_ instanceof WeakSet?_.add(c):_.set(c,v)},Ye=(c,_,v,x)=>(xn(c,_,"write to private field"),x?x.call(c,v):_.set(c,v),v);var xe=(c,_,v)=>(xn(c,_,"access private method"),v);var Ol=ze((Os,Zn)=>{(function(c,_){if(typeof Os=="object"&&typeof Zn=="object")Zn.exports=_();else if(typeof define=="function"&&define.amd)define([],_);else{var v=_();for(var x in v)(typeof Os=="object"?Os:c)[x]=v[x]}})(self,function(){return(()=>{"use strict";var c={4567:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;let u=n(9042),h=n(6114),a=n(9924),o=n(3656),m=n(844),p=n(5596),i=n(9631);class e extends m.Disposable{constructor(f,s){super(),this._terminal=f,this._renderService=s,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityTreeRoot=document.createElement("div"),this._accessibilityTreeRoot.classList.add("xterm-accessibility"),this._accessibilityTreeRoot.tabIndex=0,this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let g=0;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);if(this._topBoundaryFocusListener=g=>this._handleBoundaryFocus(g,0),this._bottomBoundaryFocusListener=g=>this._handleBoundaryFocus(g,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityTreeRoot.appendChild(this._rowContainer),this._renderRowsDebouncer=new a.TimeBasedDebouncer(this._renderRows.bind(this)),this._refreshRows(),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityTreeRoot.appendChild(this._liveRegion),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityTreeRoot),this.register(this._renderRowsDebouncer),this.register(this._terminal.onResize(g=>this._handleResize(g.rows))),this.register(this._terminal.onRender(g=>this._refreshRows(g.start,g.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(g=>this._handleChar(g))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(g=>this._handleTab(g))),this.register(this._terminal.onKey(g=>this._handleKey(g.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new p.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,o.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this.register((0,m.toDisposable)(()=>{(0,i.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0}))}_handleBoundaryFocus(f,s){let g=f.target,L=this._rowElements[s===0?1:this._rowElements.length-2];if(g.getAttribute("aria-posinset")===(s===0?"1":`${this._terminal.buffer.lines.length}`)||f.relatedTarget!==L)return;let b,R;if(s===0?(b=g,R=this._rowElements.pop(),this._rowContainer.removeChild(R)):(b=this._rowElements.shift(),R=g,this._rowContainer.removeChild(b)),b.removeEventListener("focus",this._topBoundaryFocusListener),R.removeEventListener("focus",this._bottomBoundaryFocusListener),s===0){let E=this._createAccessibilityTreeNode();this._rowElements.unshift(E),this._rowContainer.insertAdjacentElement("afterbegin",E)}else{let E=this._createAccessibilityTreeNode();this._rowElements.push(E),this._rowContainer.appendChild(E)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(s===0?-1:1),this._rowElements[s===0?1:this._rowElements.length-2].focus(),f.preventDefault(),f.stopImmediatePropagation()}_handleResize(f){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let s=this._rowContainer.children.length;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);for(;this._rowElements.length>f;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let f=document.createElement("div");return f.setAttribute("role","listitem"),f.tabIndex=-1,this._refreshRowDimensions(f),f}_handleTab(f){for(let s=0;s<f;s++)this._handleChar(" ")}_handleChar(f){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==f&&(this._charsToAnnounce+=f):this._charsToAnnounce+=f,f===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)),h.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityTreeRoot.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,h.isMac&&(0,i.removeElementFromParent)(this._liveRegion)}_handleKey(f){this._clearLiveRegion(),/\p{Control}/u.test(f)||this._charsToConsume.push(f)}_refreshRows(f,s){this._renderRowsDebouncer.refresh(f,s,this._terminal.rows)}_renderRows(f,s){let g=this._terminal.buffer,L=g.lines.length.toString();for(let b=f;b<=s;b++){let R=g.translateBufferLineToString(g.ydisp+b,!0),E=(g.ydisp+b+1).toString(),w=this._rowElements[b];w&&(R.length===0?w.innerText="\xA0":w.textContent=R,w.setAttribute("aria-posinset",E),w.setAttribute("aria-setsize",L))}this._announceCharacters()}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityTreeRoot.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let f=0;f<this._terminal.rows;f++)this._refreshRowDimensions(this._rowElements[f])}}_refreshRowDimensions(f){f.style.height=`${this._renderService.dimensions.css.cell.height}px`}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}}t.AccessibilityManager=e},3614:(y,t)=>{function n(o){return o.replace(/\r?\n/g,"\r")}function u(o,m){return m?"\x1B[200~"+o+"\x1B[201~":o}function h(o,m,p){o=u(o=n(o),p.decPrivateModes.bracketedPasteMode),p.triggerDataEvent(o,!0),m.value=""}function a(o,m,p){let i=p.getBoundingClientRect(),e=o.clientX-i.left-10,d=o.clientY-i.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${e}px`,m.style.top=`${d}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=n,t.bracketTextForPaste=u,t.copyHandler=function(o,m){o.clipboardData&&o.clipboardData.setData("text/plain",m.selectionText),o.preventDefault()},t.handlePasteEvent=function(o,m,p){o.stopPropagation(),o.clipboardData&&h(o.clipboardData.getData("text/plain"),m,p)},t.paste=h,t.moveTextAreaUnderMouseCursor=a,t.rightClickHandler=function(o,m,p,i,e){a(o,m,p),e&&i.rightClickSelect(o),m.value=i.selectionText,m.select()}},7239:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;let u=n(1505);t.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(h,a,o){this._css.set(h,a,o)}getCss(h,a){return this._css.get(h,a)}setColor(h,a,o){this._color.set(h,a,o)}getColor(h,a){return this._color.get(h,a)}clear(){this._color.clear(),this._css.clear()}}},9631:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeElementFromParent=void 0,t.removeElementFromParent=function(...n){var u;for(let h of n)(u=h==null?void 0:h.parentElement)===null||u===void 0||u.removeChild(h)}},3656:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(n,u,h,a){n.addEventListener(u,h,a);let o=!1;return{dispose:()=>{o||(o=!0,n.removeEventListener(u,h,a))}}}},6465:function(y,t,n){var u=this&&this.__decorate||function(e,d,f,s){var g,L=arguments.length,b=L<3?d:s===null?s=Object.getOwnPropertyDescriptor(d,f):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,d,f,s);else for(var R=e.length-1;R>=0;R--)(g=e[R])&&(b=(L<3?g(b):L>3?g(d,f,b):g(d,f))||b);return L>3&&b&&Object.defineProperty(d,f,b),b},h=this&&this.__param||function(e,d){return function(f,s){d(f,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;let a=n(2585),o=n(8460),m=n(844),p=n(3656),i=class extends m.Disposable{constructor(e){super(),this._bufferService=e,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._activeLine=-1,this._onShowLinkUnderline=this.register(new o.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new o.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{this._lastMouseEvent=void 0}))}get currentLink(){return this._currentLink}registerLinkProvider(e){return this._linkProviders.push(e),{dispose:()=>{let d=this._linkProviders.indexOf(e);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(e,d,f){this._element=e,this._mouseService=d,this._renderService=f,this.register((0,p.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,p.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(e){if(this._lastMouseEvent=e,!this._element||!this._mouseService)return;let d=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;let f=e.composedPath();for(let s=0;s<f.length;s++){let g=f[s];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,d){var f,s;this._activeProviderReplies&&d||((f=this._activeProviderReplies)===null||f===void 0||f.forEach(L=>{L==null||L.forEach(b=>{b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let g=!1;for(let[L,b]of this._linkProviders.entries())d?!((s=this._activeProviderReplies)===null||s===void 0)&&s.get(L)&&(g=this._checkLinkProviderResult(L,e,g)):b.provideLinks(e.y,R=>{var E,w;if(this._isMouseOut)return;let k=R==null?void 0:R.map(M=>({link:M}));(E=this._activeProviderReplies)===null||E===void 0||E.set(L,k),g=this._checkLinkProviderResult(L,e,g),((w=this._activeProviderReplies)===null||w===void 0?void 0:w.size)===this._linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,d){let f=new Set;for(let s=0;s<d.size;s++){let g=d.get(s);if(g)for(let L=0;L<g.length;L++){let b=g[L],R=b.link.range.start.y<e?0:b.link.range.start.x,E=b.link.range.end.y>e?this._bufferService.cols:b.link.range.end.x;for(let w=R;w<=E;w++){if(f.has(w)){g.splice(L--,1);break}f.add(w)}}}}_checkLinkProviderResult(e,d,f){var s;if(!this._activeProviderReplies)return f;let g=this._activeProviderReplies.get(e),L=!1;for(let b=0;b<e;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(L=!0);if(!L&&g){let b=g.find(R=>this._linkAtPosition(R.link,d));b&&(f=!0,this._handleNewLink(b))}if(this._activeProviderReplies.size===this._linkProviders.length&&!f)for(let b=0;b<this._activeProviderReplies.size;b++){let R=(s=this._activeProviderReplies.get(b))===null||s===void 0?void 0:s.find(E=>this._linkAtPosition(E.link,d));if(R){f=!0,this._handleNewLink(R);break}}return f}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._element||!this._mouseService||!this._currentLink)return;let d=this._positionFromMouseEvent(e,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!d||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(e.link,d)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var f,s;return(s=(f=this._currentLink)===null||f===void 0?void 0:f.state)===null||s===void 0?void 0:s.decorations.pointerCursor},set:f=>{var s,g;!((s=this._currentLink)===null||s===void 0)&&s.state&&this._currentLink.state.decorations.pointerCursor!==f&&(this._currentLink.state.decorations.pointerCursor=f,this._currentLink.state.isHovered&&((g=this._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",f)))}},underline:{get:()=>{var f,s;return(s=(f=this._currentLink)===null||f===void 0?void 0:f.state)===null||s===void 0?void 0:s.decorations.underline},set:f=>{var s,g,L;!((s=this._currentLink)===null||s===void 0)&&s.state&&((L=(g=this._currentLink)===null||g===void 0?void 0:g.state)===null||L===void 0?void 0:L.decorations.underline)!==f&&(this._currentLink.state.decorations.underline=f,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,f))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(f=>{let s=f.start===0?0:f.start+1+this._bufferService.buffer.ydisp,g=this._currentLink?this._lastMouseEvent:void 0;if(this._clearCurrentLink(s,f.end+1+this._bufferService.buffer.ydisp),g&&this._element){let L=this._positionFromMouseEvent(g,this._element,this._mouseService);L&&this._askForLink(L,!1)}})))}_linkHover(e,d,f){var s;!((s=this._currentLink)===null||s===void 0)&&s.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(f,d.text)}_fireUnderlineEvent(e,d){let f=e.range,s=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(f.start.x-1,f.start.y-s-1,f.end.x,f.end.y-s-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)}_linkLeave(e,d,f){var s;!((s=this._currentLink)===null||s===void 0)&&s.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(f,d.text)}_linkAtPosition(e,d){let f=e.range.start.y*this._bufferService.cols+e.range.start.x,s=e.range.end.y*this._bufferService.cols+e.range.end.x,g=d.y*this._bufferService.cols+d.x;return f<=g&&g<=s}_positionFromMouseEvent(e,d,f){let s=f.getCoords(e,d,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,d,f,s,g){return{x1:e,y1:d,x2:f,y2:s,cols:this._bufferService.cols,fg:g}}};i=u([h(0,a.IBufferService)],i),t.Linkifier2=i},9042:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(y,t,n){var u=this&&this.__decorate||function(i,e,d,f){var s,g=arguments.length,L=g<3?e:f===null?f=Object.getOwnPropertyDescriptor(e,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(i,e,d,f);else for(var b=i.length-1;b>=0;b--)(s=i[b])&&(L=(g<3?s(L):g>3?s(e,d,L):s(e,d))||L);return g>3&&L&&Object.defineProperty(e,d,L),L},h=this&&this.__param||function(i,e){return function(d,f){e(d,f,i)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkProvider=void 0;let a=n(511),o=n(2585),m=class{constructor(i,e,d){this._bufferService=i,this._optionsService=e,this._oscLinkService=d}provideLinks(i,e){var d;let f=this._bufferService.buffer.lines.get(i-1);if(!f)return void e(void 0);let s=[],g=this._optionsService.rawOptions.linkHandler,L=new a.CellData,b=f.getTrimmedLength(),R=-1,E=-1,w=!1;for(let k=0;k<b;k++)if(E!==-1||f.hasContent(k)){if(f.loadCell(k,L),L.hasExtendedAttrs()&&L.extended.urlId){if(E===-1){E=k,R=L.extended.urlId;continue}w=L.extended.urlId!==R}else E!==-1&&(w=!0);if(w||E!==-1&&k===b-1){let M=(d=this._oscLinkService.getLinkData(R))===null||d===void 0?void 0:d.uri;if(M){let D={start:{x:E+1,y:i},end:{x:k+(w||k!==b-1?0:1),y:i}},P=!1;if(!(g!=null&&g.allowNonHttpProtocols))try{let W=new URL(M);["http:","https:"].includes(W.protocol)||(P=!0)}catch(W){P=!0}P||s.push({text:M,range:D,activate:(W,F)=>g?g.activate(W,F,D):p(0,F),hover:(W,F)=>{var $;return($=g==null?void 0:g.hover)===null||$===void 0?void 0:$.call(g,W,F,D)},leave:(W,F)=>{var $;return($=g==null?void 0:g.leave)===null||$===void 0?void 0:$.call(g,W,F,D)}})}w=!1,L.hasExtendedAttrs()&&L.extended.urlId?(E=k,R=L.extended.urlId):(E=-1,R=-1)}}e(s)}};function p(i,e){if(confirm(`Do you want to navigate to ${e}?

WARNING: This link could potentially be dangerous`)){let d=window.open();if(d){try{d.opener=null}catch(f){}d.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}}m=u([h(0,o.IBufferService),h(1,o.IOptionsService),h(2,o.IOscLinkService)],m),t.OscLinkProvider=m},6193:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0,t.RenderDebouncer=class{constructor(n,u){this._parentWindow=n,this._renderCallback=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,u,h){this._rowCount=h,n=n!==void 0?n:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let n=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},5596:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;let u=n(844);class h extends u.Disposable{constructor(o){super(),this._parentWindow=o,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,u.toDisposable)(()=>{this.clearListener()}))}setListener(o){this._listener&&this.clearListener(),this._listener=o,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var o;this._outerListener&&((o=this._resolutionMediaMatchList)===null||o===void 0||o.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}t.ScreenDprMonitor=h},3236:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;let u=n(2950),h=n(1680),a=n(3614),o=n(2584),m=n(5435),p=n(9312),i=n(6114),e=n(3656),d=n(9042),f=n(4567),s=n(1296),g=n(7399),L=n(8460),b=n(8437),R=n(3230),E=n(4725),w=n(428),k=n(8934),M=n(6465),D=n(5114),P=n(8969),W=n(8055),F=n(4269),$=n(5941),A=n(3107),U=n(5744),N=n(9074),z=n(2585),K=n(3730),Q=n(844),oe=n(6731),ee=typeof window!="undefined"?window.document:null;class ne extends P.CoreTerminal{constructor(V={}){super(V),this.browser=i,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._onCursorMove=this.register(new L.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new L.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new L.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new L.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new L.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new L.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new L.EventEmitter),this._onBlur=this.register(new L.EventEmitter),this._onA11yCharEmitter=this.register(new L.EventEmitter),this._onA11yTabEmitter=this.register(new L.EventEmitter),this._onWillOpen=this.register(new L.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(M.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(K.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(N.DecorationService),this._instantiationService.setService(z.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((q,te)=>this.refresh(q,te))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(q=>this._reportWindowsOptions(q))),this.register(this._inputHandler.onColor(q=>this._handleColorEvent(q))),this.register((0,L.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,L.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,L.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,L.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(q=>this._afterResize(q.cols,q.rows))),this.register((0,Q.toDisposable)(()=>{var q,te;this._customKeyEventHandler=void 0,(te=(q=this.element)===null||q===void 0?void 0:q.parentNode)===null||te===void 0||te.removeChild(this.element)}))}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(V){if(this._themeService)for(let q of V){let te,ce="";switch(q.index){case 256:te="foreground",ce="10";break;case 257:te="background",ce="11";break;case 258:te="cursor",ce="12";break;default:te="ansi",ce="4;"+q.index}switch(q.type){case 0:let Ee=W.color.toColorRGB(te==="ansi"?this._themeService.colors.ansi[q.index]:this._themeService.colors[te]);this.coreService.triggerDataEvent(`${o.C0.ESC}]${ce};${(0,$.toRgbString)(Ee)}${o.C1_ESCAPED.ST}`);break;case 1:if(te==="ansi")this._themeService.modifyColors(re=>re.ansi[q.index]=W.rgba.toColor(...q.color));else{let re=te;this._themeService.modifyColors(ke=>ke[re]=W.rgba.toColor(...q.color))}break;case 2:this._themeService.restoreColor(q.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(V){var q;V?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new f.AccessibilityManager(this,this._renderService)):((q=this._accessibilityManager)===null||q===void 0||q.dispose(),this._accessibilityManager=void 0)}_handleTextAreaFocus(V){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(o.C0.ESC+"[I"),this.updateCursorStyle(V),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var V;return(V=this.textarea)===null||V===void 0?void 0:V.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(o.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let V=this.buffer.ybase+this.buffer.y,q=this.buffer.lines.get(V);if(!q)return;let te=Math.min(this.buffer.x,this.cols-1),ce=this._renderService.dimensions.css.cell.height,Ee=q.getWidth(te),re=this._renderService.dimensions.css.cell.width*Ee,ke=this.buffer.y*this._renderService.dimensions.css.cell.height,Z=te*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Z+"px",this.textarea.style.top=ke+"px",this.textarea.style.width=re+"px",this.textarea.style.height=ce+"px",this.textarea.style.lineHeight=ce+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,e.addDisposableDomListener)(this.element,"copy",q=>{this.hasSelection()&&(0,a.copyHandler)(q,this._selectionService)}));let V=q=>(0,a.handlePasteEvent)(q,this.textarea,this.coreService);this.register((0,e.addDisposableDomListener)(this.textarea,"paste",V)),this.register((0,e.addDisposableDomListener)(this.element,"paste",V)),i.isFirefox?this.register((0,e.addDisposableDomListener)(this.element,"mousedown",q=>{q.button===2&&(0,a.rightClickHandler)(q,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,e.addDisposableDomListener)(this.element,"contextmenu",q=>{(0,a.rightClickHandler)(q,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),i.isLinux&&this.register((0,e.addDisposableDomListener)(this.element,"auxclick",q=>{q.button===1&&(0,a.moveTextAreaUnderMouseCursor)(q,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,e.addDisposableDomListener)(this.textarea,"keyup",V=>this._keyUp(V),!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keydown",V=>this._keyDown(V),!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keypress",V=>this._keyPress(V),!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionupdate",V=>this._compositionHelper.compositionupdate(V))),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,e.addDisposableDomListener)(this.textarea,"input",V=>this._inputEvent(V),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(V){var q;if(!V)throw new Error("Terminal requires a parent element.");V.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=V.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),V.appendChild(this.element);let te=ee.createDocumentFragment();this._viewportElement=ee.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),te.appendChild(this._viewportElement),this._viewportScrollArea=ee.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=ee.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=ee.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),te.appendChild(this.screenElement),this.textarea=ee.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",d.promptLabel),i.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(D.CoreBrowserService,this.textarea,(q=this._document.defaultView)!==null&&q!==void 0?q:window),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,e.addDisposableDomListener)(this.textarea,"focus",ce=>this._handleTextAreaFocus(ce))),this.register((0,e.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(w.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(oe.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(F.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(R.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ce=>this._onRender.fire(ce))),this.onResize(ce=>this._renderService.resize(ce.cols,ce.rows)),this._compositionView=ee.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(u.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(te);try{this._onWillOpen.fire(this.element)}catch(ce){}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(k.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(h.Viewport,ce=>this.scrollLines(ce,!0,1),this._viewportElement,this._viewportScrollArea),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(p.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ce=>this.scrollLines(ce.amount,ce.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ce=>this._renderService.handleSelectionChanged(ce.start,ce.end,ce.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ce=>{this.textarea.value=ce,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ce=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,e.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(A.BufferDecorationRenderer,this.screenElement)),this.register((0,e.addDisposableDomListener)(this.element,"mousedown",ce=>this._selectionService.handleMouseDown(ce))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new f.AccessibilityManager(this,this._renderService)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ce=>this._handleScreenReaderModeOptionChange(ce))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(U.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ce=>{!this._overviewRulerRenderer&&ce&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(U.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(s.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let V=this,q=this.element;function te(re){let ke=V._mouseService.getMouseReportCoords(re,V.screenElement);if(!ke)return!1;let Z,Me;switch(re.overrideType||re.type){case"mousemove":Me=32,re.buttons===void 0?(Z=3,re.button!==void 0&&(Z=re.button<3?re.button:3)):Z=1&re.buttons?0:4&re.buttons?1:2&re.buttons?2:3;break;case"mouseup":Me=0,Z=re.button<3?re.button:3;break;case"mousedown":Me=1,Z=re.button<3?re.button:3;break;case"wheel":if(V.viewport.getLinesScrolled(re)===0)return!1;Me=re.deltaY<0?0:1,Z=4;break;default:return!1}return!(Me===void 0||Z===void 0||Z>4)&&V.coreMouseService.triggerMouseEvent({col:ke.col,row:ke.row,x:ke.x,y:ke.y,button:Z,action:Me,ctrl:re.ctrlKey,alt:re.altKey,shift:re.shiftKey})}let ce={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Ee={mouseup:re=>(te(re),re.buttons||(this._document.removeEventListener("mouseup",ce.mouseup),ce.mousedrag&&this._document.removeEventListener("mousemove",ce.mousedrag)),this.cancel(re)),wheel:re=>(te(re),this.cancel(re,!0)),mousedrag:re=>{re.buttons&&te(re)},mousemove:re=>{re.buttons||te(re)}};this.register(this.coreMouseService.onProtocolChange(re=>{re?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(re)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&re?ce.mousemove||(q.addEventListener("mousemove",Ee.mousemove),ce.mousemove=Ee.mousemove):(q.removeEventListener("mousemove",ce.mousemove),ce.mousemove=null),16&re?ce.wheel||(q.addEventListener("wheel",Ee.wheel,{passive:!1}),ce.wheel=Ee.wheel):(q.removeEventListener("wheel",ce.wheel),ce.wheel=null),2&re?ce.mouseup||(ce.mouseup=Ee.mouseup):(this._document.removeEventListener("mouseup",ce.mouseup),ce.mouseup=null),4&re?ce.mousedrag||(ce.mousedrag=Ee.mousedrag):(this._document.removeEventListener("mousemove",ce.mousedrag),ce.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,e.addDisposableDomListener)(q,"mousedown",re=>{if(re.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(re))return te(re),ce.mouseup&&this._document.addEventListener("mouseup",ce.mouseup),ce.mousedrag&&this._document.addEventListener("mousemove",ce.mousedrag),this.cancel(re)})),this.register((0,e.addDisposableDomListener)(q,"wheel",re=>{if(!ce.wheel){if(!this.buffer.hasScrollback){let ke=this.viewport.getLinesScrolled(re);if(ke===0)return;let Z=o.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(re.deltaY<0?"A":"B"),Me="";for(let he=0;he<Math.abs(ke);he++)Me+=Z;return this.coreService.triggerDataEvent(Me,!0),this.cancel(re,!0)}return this.viewport.handleWheel(re)?this.cancel(re):void 0}},{passive:!1})),this.register((0,e.addDisposableDomListener)(q,"touchstart",re=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(re),this.cancel(re)},{passive:!0})),this.register((0,e.addDisposableDomListener)(q,"touchmove",re=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(re)?void 0:this.cancel(re)},{passive:!1}))}refresh(V,q){var te;(te=this._renderService)===null||te===void 0||te.refreshRows(V,q)}updateCursorStyle(V){var q;!((q=this._selectionService)===null||q===void 0)&&q.shouldColumnSelect(V)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(V,q,te=0){super.scrollLines(V,q,te),this.refresh(0,this.rows-1)}paste(V){(0,a.paste)(V,this.textarea,this.coreService)}attachCustomKeyEventHandler(V){this._customKeyEventHandler=V}registerLinkProvider(V){return this.linkifier2.registerLinkProvider(V)}registerCharacterJoiner(V){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let q=this._characterJoinerService.register(V);return this.refresh(0,this.rows-1),q}deregisterCharacterJoiner(V){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(V)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}addMarker(V){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+V)}registerDecoration(V){return this._decorationService.registerDecoration(V)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(V,q,te){this._selectionService.setSelection(V,q,te)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var V;(V=this._selectionService)===null||V===void 0||V.clearSelection()}selectAll(){var V;(V=this._selectionService)===null||V===void 0||V.selectAll()}selectLines(V,q){var te;(te=this._selectionService)===null||te===void 0||te.selectLines(V,q)}_keyDown(V){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1)return!1;let q=this.browser.isMac&&this.options.macOptionIsMeta&&V.altKey;if(!q&&!this._compositionHelper.keydown(V))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;q||V.key!=="Dead"&&V.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let te=(0,g.evaluateKeyboardEvent)(V,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(V),te.type===3||te.type===2){let ce=this.rows-1;return this.scrollLines(te.type===2?-ce:ce),this.cancel(V,!0)}return te.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,V)||(te.cancel&&this.cancel(V,!0),!te.key||!!(V.key&&!V.ctrlKey&&!V.altKey&&!V.metaKey&&V.key.length===1&&V.key.charCodeAt(0)>=65&&V.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(te.key!==o.C0.ETX&&te.key!==o.C0.CR||(this.textarea.value=""),this._onKey.fire({key:te.key,domEvent:V}),this._showCursor(),this.coreService.triggerDataEvent(te.key,!0),!this.optionsService.rawOptions.screenReaderMode||V.altKey||V.ctrlKey?this.cancel(V,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(V,q){let te=V.isMac&&!this.options.macOptionIsMeta&&q.altKey&&!q.ctrlKey&&!q.metaKey||V.isWindows&&q.altKey&&q.ctrlKey&&!q.metaKey||V.isWindows&&q.getModifierState("AltGraph");return q.type==="keypress"?te:te&&(!q.keyCode||q.keyCode>47)}_keyUp(V){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1||(function(q){return q.keyCode===16||q.keyCode===17||q.keyCode===18}(V)||this.focus(),this.updateCursorStyle(V),this._keyPressHandled=!1)}_keyPress(V){let q;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1)return!1;if(this.cancel(V),V.charCode)q=V.charCode;else if(V.which===null||V.which===void 0)q=V.keyCode;else{if(V.which===0||V.charCode===0)return!1;q=V.which}return!(!q||(V.altKey||V.ctrlKey||V.metaKey)&&!this._isThirdLevelShift(this.browser,V)||(q=String.fromCharCode(q),this._onKey.fire({key:q,domEvent:V}),this._showCursor(),this.coreService.triggerDataEvent(q,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(V){if(V.data&&V.inputType==="insertText"&&(!V.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let q=V.data;return this.coreService.triggerDataEvent(q,!0),this.cancel(V),!0}return!1}resize(V,q){V!==this.cols||q!==this.rows?super.resize(V,q):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(V,q){var te,ce;(te=this._charSizeService)===null||te===void 0||te.measure(),(ce=this.viewport)===null||ce===void 0||ce.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let V=1;V<this.rows;V++)this.buffer.lines.push(this.buffer.getBlankLine(b.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}}reset(){var V,q;this.options.rows=this.rows,this.options.cols=this.cols;let te=this._customKeyEventHandler;this._setup(),super.reset(),(V=this._selectionService)===null||V===void 0||V.reset(),this._decorationService.reset(),this._customKeyEventHandler=te,this.refresh(0,this.rows-1),(q=this.viewport)===null||q===void 0||q.syncScrollArea()}clearTextureAtlas(){var V;(V=this._renderService)===null||V===void 0||V.clearTextureAtlas()}_reportFocus(){var V;!((V=this.element)===null||V===void 0)&&V.classList.contains("focus")?this.coreService.triggerDataEvent(o.C0.ESC+"[I"):this.coreService.triggerDataEvent(o.C0.ESC+"[O")}_reportWindowsOptions(V){if(this._renderService)switch(V){case m.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let q=this._renderService.dimensions.css.canvas.width.toFixed(0),te=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${o.C0.ESC}[4;${te};${q}t`);break;case m.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let ce=this._renderService.dimensions.css.cell.width.toFixed(0),Ee=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${o.C0.ESC}[6;${Ee};${ce}t`)}}cancel(V,q){if(this.options.cancelEvents||q)return V.preventDefault(),V.stopPropagation(),!1}}t.Terminal=ne},9924:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0,t.TimeBasedDebouncer=class{constructor(n,u=1e3){this._renderCallback=n,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,u,h){this._rowCount=h,n=n!==void 0?n:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;let a=Date.now();if(a-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=a,this._innerRefresh();else if(!this._additionalRefreshRequested){let o=a-this._lastRefreshMs,m=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let n=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,u)}}},1680:function(y,t,n){var u=this&&this.__decorate||function(e,d,f,s){var g,L=arguments.length,b=L<3?d:s===null?s=Object.getOwnPropertyDescriptor(d,f):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,d,f,s);else for(var R=e.length-1;R>=0;R--)(g=e[R])&&(b=(L<3?g(b):L>3?g(d,f,b):g(d,f))||b);return L>3&&b&&Object.defineProperty(d,f,b),b},h=this&&this.__param||function(e,d){return function(f,s){d(f,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;let a=n(844),o=n(3656),m=n(4725),p=n(2585),i=class extends a.Disposable{constructor(e,d,f,s,g,L,b,R,E){super(),this._scrollLines=e,this._viewportElement=d,this._scrollArea=f,this._bufferService=s,this._optionsService=g,this._charSizeService=L,this._renderService=b,this._coreBrowserService=R,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,o.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(E.colors),this.register(E.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea(),0)}_handleThemeChange(e){this._viewportElement.style.backgroundColor=e.background.css}_refresh(e){if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let d=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==d&&(this._lastRecordedBufferHeight=d,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let e=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==e&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=e),this._refreshAnimationFrame=null}syncScrollArea(e=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(e)}_handleScroll(e){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);let d=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(d)}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let e=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(e*(this._smoothScrollState.target-this._smoothScrollState.origin)),e<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(e,d){let f=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(d<0&&this._viewportElement.scrollTop!==0||d>0&&f<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)}handleWheel(e){let d=this._getPixelsScrolled(e);return d!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+d:this._smoothScrollState.target+=d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=d,this._bubbleScroll(e,d))}_getPixelsScrolled(e){if(e.deltaY===0||e.shiftKey)return 0;let d=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?d*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._currentRowHeight*this._bufferService.rows),d}getLinesScrolled(e){if(e.deltaY===0||e.shiftKey)return 0;let d=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(d/=this._currentRowHeight+0,this._wheelPartialScroll+=d,d=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._bufferService.rows),d}_applyScrollModifier(e,d){let f=this._optionsService.rawOptions.fastScrollModifier;return f==="alt"&&d.altKey||f==="ctrl"&&d.ctrlKey||f==="shift"&&d.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(e){this._lastTouchY=e.touches[0].pageY}handleTouchMove(e){let d=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,d!==0&&(this._viewportElement.scrollTop+=d,this._bubbleScroll(e,d))}};i=u([h(3,p.IBufferService),h(4,p.IOptionsService),h(5,m.ICharSizeService),h(6,m.IRenderService),h(7,m.ICoreBrowserService),h(8,m.IThemeService)],i),t.Viewport=i},3107:function(y,t,n){var u=this&&this.__decorate||function(e,d,f,s){var g,L=arguments.length,b=L<3?d:s===null?s=Object.getOwnPropertyDescriptor(d,f):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,d,f,s);else for(var R=e.length-1;R>=0;R--)(g=e[R])&&(b=(L<3?g(b):L>3?g(d,f,b):g(d,f))||b);return L>3&&b&&Object.defineProperty(d,f,b),b},h=this&&this.__param||function(e,d){return function(f,s){d(f,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecorationRenderer=void 0;let a=n(3656),o=n(4725),m=n(844),p=n(2585),i=class extends m.Disposable{constructor(e,d,f,s){super(),this._screenElement=e,this._bufferService=d,this._decorationService=f,this._renderService=s,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,a.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(g=>this._removeDecoration(g))),this.register((0,m.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var d;let f=document.createElement("div");f.classList.add("xterm-decoration"),f.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,f.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+"px",f.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",f.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let s=(d=e.options.x)!==null&&d!==void 0?d:0;return s&&s>this._bufferService.cols&&(f.style.display="none"),this._refreshXPosition(e,f),f}_refreshStyle(e){let d=e.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let f=this._decorationElements.get(e);f||(f=this._createElement(e),e.element=f,this._decorationElements.set(e,f),this._container.appendChild(f)),f.style.top=d*this._renderService.dimensions.css.cell.height+"px",f.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(f)}}_refreshXPosition(e,d=e.element){var f;if(!d)return;let s=(f=e.options.x)!==null&&f!==void 0?f:0;(e.options.anchor||"left")==="right"?d.style.right=s?s*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=s?s*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(e){var d;(d=this._decorationElements.get(e))===null||d===void 0||d.remove(),this._decorationElements.delete(e),e.dispose()}};i=u([h(1,p.IBufferService),h(2,p.IDecorationService),h(3,o.IRenderService)],i),t.BufferDecorationRenderer=i},5871:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorZoneStore=void 0,t.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(let u of this._zones)if(u.color===n.options.overviewRulerOptions.color&&u.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,n.marker.line))return;if(this._lineAdjacentToZone(u,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(u,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,u){return u>=n.startBufferLine&&u<=n.endBufferLine}_lineAdjacentToZone(n,u,h){return u>=n.startBufferLine-this._linePadding[h||"full"]&&u<=n.endBufferLine+this._linePadding[h||"full"]}_addLineToZone(n,u){n.startBufferLine=Math.min(n.startBufferLine,u),n.endBufferLine=Math.max(n.endBufferLine,u)}}},5744:function(y,t,n){var u=this&&this.__decorate||function(g,L,b,R){var E,w=arguments.length,k=w<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,b):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(g,L,b,R);else for(var M=g.length-1;M>=0;M--)(E=g[M])&&(k=(w<3?E(k):w>3?E(L,b,k):E(L,b))||k);return w>3&&k&&Object.defineProperty(L,b,k),k},h=this&&this.__param||function(g,L){return function(b,R){L(b,R,g)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewRulerRenderer=void 0;let a=n(5871),o=n(3656),m=n(4725),p=n(844),i=n(2585),e={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},f={full:0,left:0,center:0,right:0},s=class extends p.Disposable{constructor(g,L,b,R,E,w,k){var M;super(),this._viewportElement=g,this._screenElement=L,this._bufferService=b,this._decorationService=R,this._renderService=E,this._optionsService=w,this._coreBrowseService=k,this._colorZoneStore=new a.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(M=this._viewportElement.parentElement)===null||M===void 0||M.insertBefore(this._canvas,this._viewportElement);let D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,p.toDisposable)(()=>{var P;(P=this._canvas)===null||P===void 0||P.remove()}))}get _width(){return this._optionsService.options.overviewRulerWidth||0}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,o.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let g=Math.floor(this._canvas.width/3),L=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=g,d.center=L,d.right=g,this._refreshDrawHeightConstants(),f.full=0,f.left=0,f.center=d.left,f.right=d.left+d.center}_refreshDrawHeightConstants(){e.full=Math.round(2*this._coreBrowseService.dpr);let g=this._canvas.height/this._bufferService.buffer.lines.length,L=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowseService.dpr);e.left=L,e.center=L,e.right=L}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*e.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let L of this._decorationService.decorations)this._colorZoneStore.addDecoration(L);this._ctx.lineWidth=1;let g=this._colorZoneStore.zones;for(let L of g)L.position!=="full"&&this._renderColorZone(L);for(let L of g)L.position==="full"&&this._renderColorZone(L);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(f[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-e[g.position||"full"]/2),d[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+e[g.position||"full"]))}_queueRefresh(g,L){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=L||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s=u([h(2,i.IBufferService),h(3,i.IDecorationService),h(4,m.IRenderService),h(5,i.IOptionsService),h(6,m.ICoreBrowserService)],s),t.OverviewRulerRenderer=s},2950:function(y,t,n){var u=this&&this.__decorate||function(i,e,d,f){var s,g=arguments.length,L=g<3?e:f===null?f=Object.getOwnPropertyDescriptor(e,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(i,e,d,f);else for(var b=i.length-1;b>=0;b--)(s=i[b])&&(L=(g<3?s(L):g>3?s(e,d,L):s(e,d))||L);return g>3&&L&&Object.defineProperty(e,d,L),L},h=this&&this.__param||function(i,e){return function(d,f){e(d,f,i)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;let a=n(4725),o=n(2585),m=n(2584),p=class{constructor(i,e,d,f,s,g){this._textarea=i,this._compositionView=e,this._bufferService=d,this._optionsService=f,this._coreService=s,this._renderService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(i){this._compositionView.textContent=i.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(i){if(this._isComposing||this._isSendingComposition){if(i.keyCode===229||i.keyCode===16||i.keyCode===17||i.keyCode===18)return!1;this._finalizeComposition(!1)}return i.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(i){if(this._compositionView.classList.remove("active"),this._isComposing=!1,i){let e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;let e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){let i=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let e=this._textarea.value,d=e.replace(i,"");this._dataAlreadySent=d,e.length>i.length?this._coreService.triggerDataEvent(d,!0):e.length<i.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):e.length===i.length&&e!==i&&this._coreService.triggerDataEvent(e,!0)}},0)}updateCompositionElements(i){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,f=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,s=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=s+"px",this._compositionView.style.top=f+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let g=this._compositionView.getBoundingClientRect();this._textarea.style.left=s+"px",this._textarea.style.top=f+"px",this._textarea.style.width=Math.max(g.width,1)+"px",this._textarea.style.height=Math.max(g.height,1)+"px",this._textarea.style.lineHeight=g.height+"px"}i||setTimeout(()=>this.updateCompositionElements(!0),0)}}};p=u([h(2,o.IBufferService),h(3,o.IOptionsService),h(4,o.ICoreService),h(5,a.IRenderService)],p),t.CompositionHelper=p},9806:(y,t)=>{function n(u,h,a){let o=a.getBoundingClientRect(),m=u.getComputedStyle(a),p=parseInt(m.getPropertyValue("padding-left")),i=parseInt(m.getPropertyValue("padding-top"));return[h.clientX-o.left-p,h.clientY-o.top-i]}Object.defineProperty(t,"__esModule",{value:!0}),t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=n,t.getCoords=function(u,h,a,o,m,p,i,e,d){if(!p)return;let f=n(u,h,a);return f?(f[0]=Math.ceil((f[0]+(d?i/2:0))/i),f[1]=Math.ceil(f[1]/e),f[0]=Math.min(Math.max(f[0],1),o+(d?1:0)),f[1]=Math.min(Math.max(f[1],1),m),f):void 0}},9504:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;let u=n(2584);function h(e,d,f,s){let g=e-a(e,f),L=d-a(d,f),b=Math.abs(g-L)-function(R,E,w){let k=0,M=R-a(R,w),D=E-a(E,w);for(let P=0;P<Math.abs(M-D);P++){let W=o(R,E)==="A"?-1:1,F=w.buffer.lines.get(M+W*P);F!=null&&F.isWrapped&&k++}return k}(e,d,f);return i(b,p(o(e,d),s))}function a(e,d){let f=0,s=d.buffer.lines.get(e),g=s==null?void 0:s.isWrapped;for(;g&&e>=0&&e<d.rows;)f++,s=d.buffer.lines.get(--e),g=s==null?void 0:s.isWrapped;return f}function o(e,d){return e>d?"A":"B"}function m(e,d,f,s,g,L){let b=e,R=d,E="";for(;b!==f||R!==s;)b+=g?1:-1,g&&b>L.cols-1?(E+=L.buffer.translateBufferLineToString(R,!1,e,b),b=0,e=0,R++):!g&&b<0&&(E+=L.buffer.translateBufferLineToString(R,!1,0,e+1),b=L.cols-1,e=b,R--);return E+L.buffer.translateBufferLineToString(R,!1,e,b)}function p(e,d){let f=d?"O":"[";return u.C0.ESC+f+e}function i(e,d){e=Math.floor(e);let f="";for(let s=0;s<e;s++)f+=d;return f}t.moveToCellSequence=function(e,d,f,s){let g=f.buffer.x,L=f.buffer.y;if(!f.buffer.hasScrollback)return function(E,w,k,M,D,P){return h(w,M,D,P).length===0?"":i(m(E,w,E,w-a(w,D),!1,D).length,p("D",P))}(g,L,0,d,f,s)+h(L,d,f,s)+function(E,w,k,M,D,P){let W;W=h(w,M,D,P).length>0?M-a(M,D):w;let F=M,$=function(A,U,N,z,K,Q){let oe;return oe=h(N,z,K,Q).length>0?z-a(z,K):U,A<N&&oe<=z||A>=N&&oe<z?"C":"D"}(E,w,k,M,D,P);return i(m(E,W,k,F,$==="C",D).length,p($,P))}(g,L,e,d,f,s);let b;if(L===d)return b=g>e?"D":"C",i(Math.abs(g-e),p(b,s));b=L>d?"D":"C";let R=Math.abs(L-d);return i(function(E,w){return w.cols-E}(L>d?e:g,f)+(R-1)*f.cols+1+((L>d?g:e)-1),p(b,s))}},1296:function(y,t,n){var u=this&&this.__decorate||function(E,w,k,M){var D,P=arguments.length,W=P<3?w:M===null?M=Object.getOwnPropertyDescriptor(w,k):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(E,w,k,M);else for(var F=E.length-1;F>=0;F--)(D=E[F])&&(W=(P<3?D(W):P>3?D(w,k,W):D(w,k))||W);return P>3&&W&&Object.defineProperty(w,k,W),W},h=this&&this.__param||function(E,w){return function(k,M){w(k,M,E)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;let a=n(9631),o=n(3787),m=n(2223),p=n(6171),i=n(4725),e=n(8055),d=n(8460),f=n(844),s=n(2585),g="xterm-dom-renderer-owner-",L="xterm-focus",b=1,R=class extends f.Disposable{constructor(E,w,k,M,D,P,W,F,$,A){super(),this._element=E,this._screenElement=w,this._viewportElement=k,this._linkifier2=M,this._charSizeService=P,this._optionsService=W,this._bufferService=F,this._coreBrowserService=$,this._terminalClass=b++,this._rowElements=[],this._cellToRowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add("xterm-rows"),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add("xterm-selection"),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,p.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(A.onChangeColors(U=>this._injectCss(U))),this._injectCss(A.colors),this._rowFactory=D.createInstance(o.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(U=>this._handleLinkHover(U))),this.register(this._linkifier2.onHideLinkUnderline(U=>this._handleLinkLeave(U))),this.register((0,f.toDisposable)(()=>{this._element.classList.remove(g+this._terminalClass),(0,a.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement)}))}_updateDimensions(){let E=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*E,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*E),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/E),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/E),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let k of this._rowElements)k.style.width=`${this.dimensions.css.canvas.width}px`,k.style.height=`${this.dimensions.css.cell.height}px`,k.style.lineHeight=`${this.dimensions.css.cell.height}px`,k.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let w=`${this._terminalSelector} .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: ${this.dimensions.css.cell.width}px}`;this._dimensionsStyleElement.textContent=w,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(E){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let w=`${this._terminalSelector} .xterm-rows { color: ${E.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px;}`;w+=`${this._terminalSelector} span:not(.${o.BOLD_CLASS}) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.${o.BOLD_CLASS} { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.${o.ITALIC_CLASS} { font-style: italic;}`,w+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",w+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${E.cursor.css};  color: ${E.cursorAccent.css}; } 50% {  background-color: ${E.cursorAccent.css};  color: ${E.cursor.css}; }}`,w+=`${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${o.CURSOR_CLASS}.${o.CURSOR_STYLE_BLOCK_CLASS} { outline: 1px solid ${E.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .xterm-rows.xterm-focus .${o.CURSOR_CLASS}.${o.CURSOR_BLINK_CLASS}:not(.${o.CURSOR_STYLE_BLOCK_CLASS}) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${o.CURSOR_CLASS}.${o.CURSOR_BLINK_CLASS}.${o.CURSOR_STYLE_BLOCK_CLASS} { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${o.CURSOR_CLASS}.${o.CURSOR_STYLE_BLOCK_CLASS} { background-color: ${E.cursor.css}; color: ${E.cursorAccent.css};}${this._terminalSelector} .xterm-rows .${o.CURSOR_CLASS}.${o.CURSOR_STYLE_BAR_CLASS} { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${E.cursor.css} inset;}${this._terminalSelector} .xterm-rows .${o.CURSOR_CLASS}.${o.CURSOR_STYLE_UNDERLINE_CLASS} { box-shadow: 0 -1px 0 ${E.cursor.css} inset;}`,w+=`${this._terminalSelector} .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .xterm-selection div { position: absolute; background-color: ${E.selectionBackgroundOpaque.css};}${this._terminalSelector} .xterm-selection div { position: absolute; background-color: ${E.selectionInactiveBackgroundOpaque.css};}`;for(let[k,M]of E.ansi.entries())w+=`${this._terminalSelector} .xterm-fg-${k} { color: ${M.css}; }${this._terminalSelector} .xterm-bg-${k} { background-color: ${M.css}; }`;w+=`${this._terminalSelector} .xterm-fg-${m.INVERTED_DEFAULT_COLOR} { color: ${e.color.opaque(E.background).css}; }${this._terminalSelector} .xterm-bg-${m.INVERTED_DEFAULT_COLOR} { background-color: ${E.foreground.css}; }`,this._themeStyleElement.textContent=w}handleDevicePixelRatioChange(){this._updateDimensions()}_refreshRowElements(E,w){for(let k=this._rowElements.length;k<=w;k++){let M=document.createElement("div");this._rowContainer.appendChild(M),this._rowElements.push(M)}for(;this._rowElements.length>w;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(E,w){this._refreshRowElements(E,w),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions()}handleBlur(){this._rowContainer.classList.remove(L)}handleFocus(){this._rowContainer.classList.add(L)}handleSelectionChanged(E,w,k){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.handleSelectionChanged(E,w,k),this.renderRows(0,this._bufferService.rows-1),!E||!w)return;let M=E[1]-this._bufferService.buffer.ydisp,D=w[1]-this._bufferService.buffer.ydisp,P=Math.max(M,0),W=Math.min(D,this._bufferService.rows-1);if(P>=this._bufferService.rows||W<0)return;let F=document.createDocumentFragment();if(k){let $=E[0]>w[0];F.appendChild(this._createSelectionElement(P,$?w[0]:E[0],$?E[0]:w[0],W-P+1))}else{let $=M===P?E[0]:0,A=P===D?w[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(P,$,A));let U=W-P-1;if(F.appendChild(this._createSelectionElement(P+1,0,this._bufferService.cols,U)),P!==W){let N=D===W?w[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(W,0,N))}}this._selectionContainer.appendChild(F)}_createSelectionElement(E,w,k,M=1){let D=document.createElement("div");return D.style.height=M*this.dimensions.css.cell.height+"px",D.style.top=E*this.dimensions.css.cell.height+"px",D.style.left=w*this.dimensions.css.cell.width+"px",D.style.width=this.dimensions.css.cell.width*(k-w)+"px",D}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions()}clear(){for(let E of this._rowElements)E.replaceChildren()}renderRows(E,w){let k=this._bufferService.buffer.ybase+this._bufferService.buffer.y,M=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),D=this._optionsService.rawOptions.cursorBlink;for(let P=E;P<=w;P++){let W=this._rowElements[P],F=P+this._bufferService.buffer.ydisp,$=this._bufferService.buffer.lines.get(F),A=this._optionsService.rawOptions.cursorStyle;this._cellToRowElements[P]&&this._cellToRowElements[P].length===this._bufferService.cols||(this._cellToRowElements[P]=new Int16Array(this._bufferService.cols)),W.replaceChildren(this._rowFactory.createRow($,F,F===k,A,M,D,this.dimensions.css.cell.width,this._bufferService.cols,this._cellToRowElements[P]))}}get _terminalSelector(){return`.${g}${this._terminalClass}`}_handleLinkHover(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!0)}_handleLinkLeave(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!1)}_setCellUnderline(E,w,k,M,D,P){if(E=this._cellToRowElements[k][E],w=this._cellToRowElements[M][w],E!==-1&&w!==-1)for(;E!==w||k!==M;){let W=this._rowElements[k];if(!W)return;let F=W.children[E];F&&(F.style.textDecoration=P?"underline":"none"),++E>=D&&(E=0,k++)}}};R=u([h(4,s.IInstantiationService),h(5,i.ICharSizeService),h(6,s.IOptionsService),h(7,s.IBufferService),h(8,i.ICoreBrowserService),h(9,i.IThemeService)],R),t.DomRenderer=R},3787:function(y,t,n){var u=this&&this.__decorate||function(b,R,E,w){var k,M=arguments.length,D=M<3?R:w===null?w=Object.getOwnPropertyDescriptor(R,E):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(b,R,E,w);else for(var P=b.length-1;P>=0;P--)(k=b[P])&&(D=(M<3?k(D):M>3?k(R,E,D):k(R,E))||D);return M>3&&D&&Object.defineProperty(R,E,D),D},h=this&&this.__param||function(b,R){return function(E,w){R(E,w,b)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=t.CURSOR_STYLE_UNDERLINE_CLASS=t.CURSOR_STYLE_BAR_CLASS=t.CURSOR_STYLE_BLOCK_CLASS=t.CURSOR_BLINK_CLASS=t.CURSOR_CLASS=t.STRIKETHROUGH_CLASS=t.UNDERLINE_CLASS=t.ITALIC_CLASS=t.DIM_CLASS=t.BOLD_CLASS=void 0;let a=n(2223),o=n(643),m=n(511),p=n(2585),i=n(8055),e=n(4725),d=n(4269),f=n(6171),s=n(3734);t.BOLD_CLASS="xterm-bold",t.DIM_CLASS="xterm-dim",t.ITALIC_CLASS="xterm-italic",t.UNDERLINE_CLASS="xterm-underline",t.STRIKETHROUGH_CLASS="xterm-strikethrough",t.CURSOR_CLASS="xterm-cursor",t.CURSOR_BLINK_CLASS="xterm-cursor-blink",t.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",t.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",t.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";let g=class{constructor(b,R,E,w,k,M,D){this._document=b,this._characterJoinerService=R,this._optionsService=E,this._coreBrowserService=w,this._coreService=k,this._decorationService=M,this._themeService=D,this._workCell=new m.CellData,this._columnSelectMode=!1}handleSelectionChanged(b,R,E){this._selectionStart=b,this._selectionEnd=R,this._columnSelectMode=E}createRow(b,R,E,w,k,M,D,P,W){let F=this._document.createDocumentFragment(),$=this._characterJoinerService.getJoinedCharacters(R),A=0;for(let K=Math.min(b.length,P)-1;K>=0;K--)if(b.loadCell(K,this._workCell).getCode()!==o.NULL_CELL_CODE||E&&K===k){A=K+1;break}let U=this._themeService.colors,N=-1,z=0;for(;z<A;z++){b.loadCell(z,this._workCell);let K=this._workCell.getWidth();if(K===0){W[z]=N;continue}let Q=!1,oe=z,ee=this._workCell;if($.length>0&&z===$[0][0]){Q=!0;let he=$.shift();ee=new d.JoinedCellData(this._workCell,b.translateToString(!0,he[0],he[1]),he[1]-he[0]),oe=he[1]-1,K=ee.getWidth()}let ne=this._document.createElement("span");if(K>1&&(ne.style.width=D*K+"px"),Q&&(ne.style.display="inline",k>=z&&k<=oe&&(k=z)),!this._coreService.isCursorHidden&&E&&z===k)switch(ne.classList.add(t.CURSOR_CLASS),M&&ne.classList.add(t.CURSOR_BLINK_CLASS),w){case"bar":ne.classList.add(t.CURSOR_STYLE_BAR_CLASS);break;case"underline":ne.classList.add(t.CURSOR_STYLE_UNDERLINE_CLASS);break;default:ne.classList.add(t.CURSOR_STYLE_BLOCK_CLASS)}if(ee.isBold()&&ne.classList.add(t.BOLD_CLASS),ee.isItalic()&&ne.classList.add(t.ITALIC_CLASS),ee.isDim()&&ne.classList.add(t.DIM_CLASS),ee.isInvisible()?ne.textContent=o.WHITESPACE_CELL_CHAR:ne.textContent=ee.getChars()||o.WHITESPACE_CELL_CHAR,ee.isUnderline()&&(ne.classList.add(`${t.UNDERLINE_CLASS}-${ee.extended.underlineStyle}`),ne.textContent===" "&&(ne.textContent="\xA0"),!ee.isUnderlineColorDefault()))if(ee.isUnderlineColorRGB())ne.style.textDecorationColor=`rgb(${s.AttributeData.toColorRGB(ee.getUnderlineColor()).join(",")})`;else{let he=ee.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ee.isBold()&&he<8&&(he+=8),ne.style.textDecorationColor=U.ansi[he].css}ee.isStrikethrough()&&ne.classList.add(t.STRIKETHROUGH_CLASS);let G=ee.getFgColor(),V=ee.getFgColorMode(),q=ee.getBgColor(),te=ee.getBgColorMode(),ce=!!ee.isInverse();if(ce){let he=G;G=q,q=he;let qt=V;V=te,te=qt}let Ee,re,ke=!1;this._decorationService.forEachDecorationAtCell(z,R,void 0,he=>{he.options.layer!=="top"&&ke||(he.backgroundColorRGB&&(te=50331648,q=he.backgroundColorRGB.rgba>>8&16777215,Ee=he.backgroundColorRGB),he.foregroundColorRGB&&(V=50331648,G=he.foregroundColorRGB.rgba>>8&16777215,re=he.foregroundColorRGB),ke=he.options.layer==="top")});let Z=this._isCellInSelection(z,R),Me;switch(ke||U.selectionForeground&&Z&&(V=50331648,G=U.selectionForeground.rgba>>8&16777215,re=U.selectionForeground),Z&&(Ee=this._coreBrowserService.isFocused?U.selectionBackgroundOpaque:U.selectionInactiveBackgroundOpaque,ke=!0),ke&&ne.classList.add("xterm-decoration-top"),te){case 16777216:case 33554432:Me=U.ansi[q],ne.classList.add(`xterm-bg-${q}`);break;case 50331648:Me=i.rgba.toColor(q>>16,q>>8&255,255&q),this._addStyle(ne,`background-color:#${L((q>>>0).toString(16),"0",6)}`);break;default:ce?(Me=U.foreground,ne.classList.add(`xterm-bg-${a.INVERTED_DEFAULT_COLOR}`)):Me=U.background}switch(Ee||ee.isDim()&&(Ee=i.color.multiplyOpacity(Me,.5)),V){case 16777216:case 33554432:ee.isBold()&&G<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(G+=8),this._applyMinimumContrast(ne,Me,U.ansi[G],ee,Ee,void 0)||ne.classList.add(`xterm-fg-${G}`);break;case 50331648:let he=i.rgba.toColor(G>>16&255,G>>8&255,255&G);this._applyMinimumContrast(ne,Me,he,ee,Ee,re)||this._addStyle(ne,`color:#${L(G.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(ne,Me,U.foreground,ee,Ee,void 0)||ce&&ne.classList.add(`xterm-fg-${a.INVERTED_DEFAULT_COLOR}`)}F.appendChild(ne),W[z]=++N,z=oe}return z<P-1&&W.subarray(z).fill(++N),F}_applyMinimumContrast(b,R,E,w,k,M){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,f.excludeFromContrastRatioDemands)(w.getCode()))return!1;let D;return k||M||(D=this._themeService.colors.contrastCache.getColor(R.rgba,E.rgba)),D===void 0&&(D=i.color.ensureContrastRatio(k||R,M||E,this._optionsService.rawOptions.minimumContrastRatio),this._themeService.colors.contrastCache.setColor((k||R).rgba,(M||E).rgba,D!=null?D:null)),!!D&&(this._addStyle(b,`color:${D.css}`),!0)}_addStyle(b,R){b.setAttribute("style",`${b.getAttribute("style")||""}${R};`)}_isCellInSelection(b,R){let E=this._selectionStart,w=this._selectionEnd;return!(!E||!w)&&(this._columnSelectMode?E[0]<=w[0]?b>=E[0]&&R>=E[1]&&b<w[0]&&R<=w[1]:b<E[0]&&R>=E[1]&&b>=w[0]&&R<=w[1]:R>E[1]&&R<w[1]||E[1]===w[1]&&R===E[1]&&b>=E[0]&&b<w[0]||E[1]<w[1]&&R===w[1]&&b<w[0]||E[1]<w[1]&&R===E[1]&&b>=E[0])}};function L(b,R,E){for(;b.length<E;)b=R+b;return b}g=u([h(1,e.ICharacterJoinerService),h(2,p.IOptionsService),h(3,e.ICoreBrowserService),h(4,p.ICoreService),h(5,p.IDecorationService),h(6,e.IThemeService)],g),t.DomRendererRowFactory=g},2223:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;let u=n(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(y,t)=>{function n(u){return 57508<=u&&u<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderDimensions=t.excludeFromContrastRatioDemands=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},t.isPowerlineGlyph=n,t.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},t.excludeFromContrastRatioDemands=function(u){return n(u)||function(h){return 9472<=h&&h<=9631}(u)},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0,t.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let n=this.selectionStart,u=this.selectionEnd;return!(!n||!u)&&(n[1]>u[1]||n[1]===u[1]&&n[0]>u[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(y,t,n){var u=this&&this.__decorate||function(e,d,f,s){var g,L=arguments.length,b=L<3?d:s===null?s=Object.getOwnPropertyDescriptor(d,f):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,d,f,s);else for(var R=e.length-1;R>=0;R--)(g=e[R])&&(b=(L<3?g(b):L>3?g(d,f,b):g(d,f))||b);return L>3&&b&&Object.defineProperty(d,f,b),b},h=this&&this.__param||function(e,d){return function(f,s){d(f,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;let a=n(2585),o=n(8460),m=n(844),p=class extends m.Disposable{constructor(e,d,f){super(),this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=this.register(new o.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new i(e,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};p=u([h(2,a.IOptionsService)],p),t.CharSizeService=p;class i{constructor(d,f,s){this._document=d,this._parentElement=f,this._optionsService=s,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let d=this._measureElement.getBoundingClientRect();return d.width!==0&&d.height!==0&&(this._result.width=d.width,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(y,t,n){var u=this&&this.__decorate||function(d,f,s,g){var L,b=arguments.length,R=b<3?f:g===null?g=Object.getOwnPropertyDescriptor(f,s):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(d,f,s,g);else for(var E=d.length-1;E>=0;E--)(L=d[E])&&(R=(b<3?L(R):b>3?L(f,s,R):L(f,s))||R);return b>3&&R&&Object.defineProperty(f,s,R),R},h=this&&this.__param||function(d,f){return function(s,g){f(s,g,d)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;let a=n(3734),o=n(643),m=n(511),p=n(2585);class i extends a.AttributeData{constructor(f,s,g){super(),this.content=0,this.combinedData="",this.fg=f.fg,this.bg=f.bg,this.combinedData=s,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(f){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=i;let e=class Ml{constructor(f){this._bufferService=f,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(f){let s={id:this._nextCharacterJoinerId++,handler:f};return this._characterJoiners.push(s),s.id}deregister(f){for(let s=0;s<this._characterJoiners.length;s++)if(this._characterJoiners[s].id===f)return this._characterJoiners.splice(s,1),!0;return!1}getJoinedCharacters(f){if(this._characterJoiners.length===0)return[];let s=this._bufferService.buffer.lines.get(f);if(!s||s.length===0)return[];let g=[],L=s.translateToString(!0),b=0,R=0,E=0,w=s.getFg(0),k=s.getBg(0);for(let M=0;M<s.getTrimmedLength();M++)if(s.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==k){if(M-b>1){let D=this._getJoinedRanges(L,E,R,s,b);for(let P=0;P<D.length;P++)g.push(D[P])}b=M,E=R,w=this._workCell.fg,k=this._workCell.bg}R+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){let M=this._getJoinedRanges(L,E,R,s,b);for(let D=0;D<M.length;D++)g.push(M[D])}return g}_getJoinedRanges(f,s,g,L,b){let R=f.substring(s,g),E=[];try{E=this._characterJoiners[0].handler(R)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{let k=this._characterJoiners[w].handler(R);for(let M=0;M<k.length;M++)Ml._mergeRanges(E,k[M])}catch(k){console.error(k)}return this._stringRangesToCellRanges(E,L,b),E}_stringRangesToCellRanges(f,s,g){let L=0,b=!1,R=0,E=f[L];if(E){for(let w=g;w<this._bufferService.cols;w++){let k=s.getWidth(w),M=s.getString(w).length||o.WHITESPACE_CELL_CHAR.length;if(k!==0){if(!b&&E[0]<=R&&(E[0]=w,b=!0),E[1]<=R){if(E[1]=w,E=f[++L],!E)break;E[0]<=R?(E[0]=w,b=!0):b=!1}R+=M}}E&&(E[1]=this._bufferService.cols)}}static _mergeRanges(f,s){let g=!1;for(let L=0;L<f.length;L++){let b=f[L];if(g){if(s[1]<=b[0])return f[L-1][1]=s[1],f;if(s[1]<=b[1])return f[L-1][1]=Math.max(s[1],b[1]),f.splice(L,1),f;f.splice(L,1),L--}else{if(s[1]<=b[0])return f.splice(L,0,s),f;if(s[1]<=b[1])return b[0]=Math.min(s[0],b[0]),f;s[0]<b[1]&&(b[0]=Math.min(s[0],b[0]),g=!0)}}return g?f[f.length-1][1]=s[1]:f.push(s),f}};e=u([h(0,p.IBufferService)],e),t.CharacterJoinerService=e},5114:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0,t.CoreBrowserService=class{constructor(n,u){this._textarea=n,this.window=u,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(y,t,n){var u=this&&this.__decorate||function(p,i,e,d){var f,s=arguments.length,g=s<3?i:d===null?d=Object.getOwnPropertyDescriptor(i,e):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(p,i,e,d);else for(var L=p.length-1;L>=0;L--)(f=p[L])&&(g=(s<3?f(g):s>3?f(i,e,g):f(i,e))||g);return s>3&&g&&Object.defineProperty(i,e,g),g},h=this&&this.__param||function(p,i){return function(e,d){i(e,d,p)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;let a=n(4725),o=n(9806),m=class{constructor(p,i){this._renderService=p,this._charSizeService=i}getCoords(p,i,e,d,f){return(0,o.getCoords)(window,p,i,e,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,f)}getMouseReportCoords(p,i){let e=(0,o.getCoordsRelativeToElement)(window,p,i);if(!(!this._charSizeService.hasValidSize||e[0]<0||e[1]<0||e[0]>=this._renderService.dimensions.css.canvas.width||e[1]>=this._renderService.dimensions.css.canvas.height))return{col:Math.floor(e[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(e[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(e[0]),y:Math.floor(e[1])}}};m=u([h(0,a.IRenderService),h(1,a.ICharSizeService)],m),t.MouseService=m},3230:function(y,t,n){var u=this&&this.__decorate||function(g,L,b,R){var E,w=arguments.length,k=w<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,b):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(g,L,b,R);else for(var M=g.length-1;M>=0;M--)(E=g[M])&&(k=(w<3?E(k):w>3?E(L,b,k):E(L,b))||k);return w>3&&k&&Object.defineProperty(L,b,k),k},h=this&&this.__param||function(g,L){return function(b,R){L(b,R,g)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;let a=n(6193),o=n(8460),m=n(844),p=n(5596),i=n(3656),e=n(2585),d=n(4725),f=n(7226),s=class extends m.Disposable{constructor(g,L,b,R,E,w,k,M){if(super(),this._rowCount=g,this._charSizeService=R,this._pausedResizeTask=new f.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new o.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new o.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new o.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new o.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this.register({dispose:()=>{var D;return(D=this._renderer)===null||D===void 0?void 0:D.dispose()}}),this._renderDebouncer=new a.RenderDebouncer(k.window,(D,P)=>this._renderRows(D,P)),this.register(this._renderDebouncer),this._screenDprMonitor=new p.ScreenDprMonitor(k.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var D;return(D=this._renderer)===null||D===void 0?void 0:D.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(E.onDecorationRegistered(()=>this._fullRefresh())),this.register(E.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register((0,i.addDisposableDomListener)(k.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(M.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in k.window){let D=new k.window.IntersectionObserver(P=>this._handleIntersectionChange(P[P.length-1]),{threshold:0});D.observe(L),this.register({dispose:()=>D.disconnect()})}}get dimensions(){return this._renderer.dimensions}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,L,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,L,this._rowCount))}_renderRows(g,L){this._renderer&&(this._renderer.renderRows(g,L),this._needsSelectionRefresh&&(this._renderer.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:L}),this._onRender.fire({start:g,end:L}),this._isNextRenderRedrawOnly=!0)}resize(g,L){this._rowCount=L,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer&&(this._renderer.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions))}hasRenderer(){return!!this._renderer}setRenderer(g){var L;(L=this._renderer)===null||L===void 0||L.dispose(),this._renderer=g,this._renderer.onRequestRedraw(b=>this.refreshRows(b.start,b.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var g,L;this._renderer&&((L=(g=this._renderer).clearTextureAtlas)===null||L===void 0||L.call(g),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer&&(this._renderer.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,L){this._renderer&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.handleResize(g,L)):this._renderer.handleResize(g,L),this._fullRefresh())}handleCharSizeChanged(){var g;(g=this._renderer)===null||g===void 0||g.handleCharSizeChanged()}handleBlur(){var g;(g=this._renderer)===null||g===void 0||g.handleBlur()}handleFocus(){var g;(g=this._renderer)===null||g===void 0||g.handleFocus()}handleSelectionChanged(g,L,b){var R;this._selectionState.start=g,this._selectionState.end=L,this._selectionState.columnSelectMode=b,(R=this._renderer)===null||R===void 0||R.handleSelectionChanged(g,L,b)}handleCursorMove(){var g;(g=this._renderer)===null||g===void 0||g.handleCursorMove()}clear(){var g;(g=this._renderer)===null||g===void 0||g.clear()}};s=u([h(2,e.IOptionsService),h(3,d.ICharSizeService),h(4,e.IDecorationService),h(5,e.IBufferService),h(6,d.ICoreBrowserService),h(7,d.IThemeService)],s),t.RenderService=s},9312:function(y,t,n){var u=this&&this.__decorate||function(E,w,k,M){var D,P=arguments.length,W=P<3?w:M===null?M=Object.getOwnPropertyDescriptor(w,k):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(E,w,k,M);else for(var F=E.length-1;F>=0;F--)(D=E[F])&&(W=(P<3?D(W):P>3?D(w,k,W):D(w,k))||W);return P>3&&W&&Object.defineProperty(w,k,W),W},h=this&&this.__param||function(E,w){return function(k,M){w(k,M,E)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;let a=n(6114),o=n(456),m=n(511),p=n(8460),i=n(4725),e=n(2585),d=n(9806),f=n(9504),s=n(844),g=n(4841),L=String.fromCharCode(160),b=new RegExp(L,"g"),R=class extends s.Disposable{constructor(E,w,k,M,D,P,W,F,$){super(),this._element=E,this._screenElement=w,this._linkifier=k,this._bufferService=M,this._coreService=D,this._mouseService=P,this._optionsService=W,this._renderService=F,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new m.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new p.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new p.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new p.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=A=>this._handleMouseMove(A),this._mouseUpListener=A=>this._handleMouseUp(A),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(A=>this._handleTrim(A)),this.register(this._bufferService.buffers.onBufferActivate(A=>this._handleBufferActivate(A))),this.enable(),this._model=new o.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,s.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let E=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!E||!w||E[0]===w[0]&&E[1]===w[1])}get selectionText(){let E=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!E||!w)return"";let k=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(E[0]===w[0])return"";let D=E[0]<w[0]?E[0]:w[0],P=E[0]<w[0]?w[0]:E[0];for(let W=E[1];W<=w[1];W++){let F=k.translateBufferLineToString(W,!0,D,P);M.push(F)}}else{let D=E[1]===w[1]?w[0]:void 0;M.push(k.translateBufferLineToString(E[1],!0,E[0],D));for(let P=E[1]+1;P<=w[1]-1;P++){let W=k.lines.get(P),F=k.translateBufferLineToString(P,!0);W!=null&&W.isWrapped?M[M.length-1]+=F:M.push(F)}if(E[1]!==w[1]){let P=k.lines.get(w[1]),W=k.translateBufferLineToString(w[1],!0,0,w[0]);P&&P.isWrapped?M[M.length-1]+=W:M.push(W)}}return M.map(D=>D.replace(b," ")).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(E){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),a.isLinux&&E&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(E){let w=this._getMouseBufferCoords(E),k=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(k&&M&&w)&&this._areCoordsInSelection(w,k,M)}isCellInSelection(E,w){let k=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!k||!M)&&this._areCoordsInSelection([E,w],k,M)}_areCoordsInSelection(E,w,k){return E[1]>w[1]&&E[1]<k[1]||w[1]===k[1]&&E[1]===w[1]&&E[0]>=w[0]&&E[0]<k[0]||w[1]<k[1]&&E[1]===k[1]&&E[0]<k[0]||w[1]<k[1]&&E[1]===w[1]&&E[0]>=w[0]}_selectWordAtCursor(E,w){var k,M;let D=(M=(k=this._linkifier.currentLink)===null||k===void 0?void 0:k.link)===null||M===void 0?void 0:M.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,g.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let P=this._getMouseBufferCoords(E);return!!P&&(this._selectWordAt(P,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(E,w){this._model.clearSelection(),E=Math.max(E,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,E],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(E){this._model.handleTrim(E)&&this.refresh()}_getMouseBufferCoords(E){let w=this._mouseService.getCoords(E,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(E){let w=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,E,this._screenElement)[1],k=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=k?0:(w>k&&(w-=k),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(E){return a.isMac?E.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:E.shiftKey}handleMouseDown(E){if(this._mouseDownTimeStamp=E.timeStamp,(E.button!==2||!this.hasSelection)&&E.button===0){if(!this._enabled){if(!this.shouldForceSelection(E))return;E.stopPropagation()}E.preventDefault(),this._dragScrollAmount=0,this._enabled&&E.shiftKey?this._handleIncrementalClick(E):E.detail===1?this._handleSingleClick(E):E.detail===2?this._handleDoubleClick(E):E.detail===3&&this._handleTripleClick(E),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(E){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(E))}_handleSingleClick(E){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(E)?3:0,this._model.selectionStart=this._getMouseBufferCoords(E),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(E){this._selectWordAtCursor(E,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(E){let w=this._getMouseBufferCoords(E);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(E){return E.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(E){if(E.stopImmediatePropagation(),!this._model.selectionStart)return;let w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(E),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(E),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let k=this._bufferService.buffer;if(this._model.selectionEnd[1]<k.lines.length){let M=k.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let E=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(E.ydisp+this._bufferService.rows,E.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=E.ydisp),this.refresh()}}_handleMouseUp(E){let w=E.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&E.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let k=this._mouseService.getCoords(E,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(k&&k[0]!==void 0&&k[1]!==void 0){let M=(0,f.moveToCellSequence)(k[0]-1,k[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let E=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,k=!(!E||!w||E[0]===w[0]&&E[1]===w[1]);k?E&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&E[0]===this._oldSelectionStart[0]&&E[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(E,w,k)):this._oldHasSelection&&this._fireOnSelectionChange(E,w,k)}_fireOnSelectionChange(E,w,k){this._oldSelectionStart=E,this._oldSelectionEnd=w,this._oldHasSelection=k,this._onSelectionChange.fire()}_handleBufferActivate(E){this.clearSelection(),this._trimListener.dispose(),this._trimListener=E.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(E,w){let k=w;for(let M=0;w>=M;M++){let D=E.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?k--:D>1&&w!==M&&(k+=D-1)}return k}setSelection(E,w,k){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[E,w],this._model.selectionStartLength=k,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(E){this._isClickInSelection(E)||(this._selectWordAtCursor(E,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(E,w,k=!0,M=!0){if(E[0]>=this._bufferService.cols)return;let D=this._bufferService.buffer,P=D.lines.get(E[1]);if(!P)return;let W=D.translateBufferLineToString(E[1],!1),F=this._convertViewportColToCharacterIndex(P,E[0]),$=F,A=E[0]-F,U=0,N=0,z=0,K=0;if(W.charAt(F)===" "){for(;F>0&&W.charAt(F-1)===" ";)F--;for(;$<W.length&&W.charAt($+1)===" ";)$++}else{let ee=E[0],ne=E[0];P.getWidth(ee)===0&&(U++,ee--),P.getWidth(ne)===2&&(N++,ne++);let G=P.getString(ne).length;for(G>1&&(K+=G-1,$+=G-1);ee>0&&F>0&&!this._isCharWordSeparator(P.loadCell(ee-1,this._workCell));){P.loadCell(ee-1,this._workCell);let V=this._workCell.getChars().length;this._workCell.getWidth()===0?(U++,ee--):V>1&&(z+=V-1,F-=V-1),F--,ee--}for(;ne<P.length&&$+1<W.length&&!this._isCharWordSeparator(P.loadCell(ne+1,this._workCell));){P.loadCell(ne+1,this._workCell);let V=this._workCell.getChars().length;this._workCell.getWidth()===2?(N++,ne++):V>1&&(K+=V-1,$+=V-1),$++,ne++}}$++;let Q=F+A-U+z,oe=Math.min(this._bufferService.cols,$-F+U+N-z-K);if(w||W.slice(F,$).trim()!==""){if(k&&Q===0&&P.getCodePoint(0)!==32){let ee=D.lines.get(E[1]-1);if(ee&&P.isWrapped&&ee.getCodePoint(this._bufferService.cols-1)!==32){let ne=this._getWordAt([this._bufferService.cols-1,E[1]-1],!1,!0,!1);if(ne){let G=this._bufferService.cols-ne.start;Q-=G,oe+=G}}}if(M&&Q+oe===this._bufferService.cols&&P.getCodePoint(this._bufferService.cols-1)!==32){let ee=D.lines.get(E[1]+1);if(ee!=null&&ee.isWrapped&&ee.getCodePoint(0)!==32){let ne=this._getWordAt([0,E[1]+1],!1,!1,!0);ne&&(oe+=ne.length)}}return{start:Q,length:oe}}}_selectWordAt(E,w){let k=this._getWordAt(E,w);if(k){for(;k.start<0;)k.start+=this._bufferService.cols,E[1]--;this._model.selectionStart=[k.start,E[1]],this._model.selectionStartLength=k.length}}_selectToWordAt(E){let w=this._getWordAt(E,!0);if(w){let k=E[1];for(;w.start<0;)w.start+=this._bufferService.cols,k--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,k++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,k]}}_isCharWordSeparator(E){return E.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(E.getChars())>=0}_selectLineAt(E){let w=this._bufferService.buffer.getWrappedRangeForLine(E),k={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,g.getRangeLength)(k,this._bufferService.cols)}};R=u([h(3,e.IBufferService),h(4,e.ICoreService),h(5,i.IMouseService),h(6,e.IOptionsService),h(7,i.IRenderService),h(8,i.ICoreBrowserService)],R),t.SelectionService=R},4725:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IThemeService=t.ICharacterJoinerService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;let u=n(8343);t.ICharSizeService=(0,u.createDecorator)("CharSizeService"),t.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),t.IMouseService=(0,u.createDecorator)("MouseService"),t.IRenderService=(0,u.createDecorator)("RenderService"),t.ISelectionService=(0,u.createDecorator)("SelectionService"),t.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),t.IThemeService=(0,u.createDecorator)("ThemeService")},6731:function(y,t,n){var u=this&&this.__decorate||function(R,E,w,k){var M,D=arguments.length,P=D<3?E:k===null?k=Object.getOwnPropertyDescriptor(E,w):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(R,E,w,k);else for(var W=R.length-1;W>=0;W--)(M=R[W])&&(P=(D<3?M(P):D>3?M(E,w,P):M(E,w))||P);return D>3&&P&&Object.defineProperty(E,w,P),P},h=this&&this.__param||function(R,E){return function(w,k){E(w,k,R)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeService=t.DEFAULT_ANSI_COLORS=void 0;let a=n(7239),o=n(8055),m=n(8460),p=n(844),i=n(2585),e=o.css.toColor("#ffffff"),d=o.css.toColor("#000000"),f=o.css.toColor("#ffffff"),s=o.css.toColor("#000000"),g={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let R=[o.css.toColor("#2e3436"),o.css.toColor("#cc0000"),o.css.toColor("#4e9a06"),o.css.toColor("#c4a000"),o.css.toColor("#3465a4"),o.css.toColor("#75507b"),o.css.toColor("#06989a"),o.css.toColor("#d3d7cf"),o.css.toColor("#555753"),o.css.toColor("#ef2929"),o.css.toColor("#8ae234"),o.css.toColor("#fce94f"),o.css.toColor("#729fcf"),o.css.toColor("#ad7fa8"),o.css.toColor("#34e2e2"),o.css.toColor("#eeeeec")],E=[0,95,135,175,215,255];for(let w=0;w<216;w++){let k=E[w/36%6|0],M=E[w/6%6|0],D=E[w%6];R.push({css:o.channels.toCss(k,M,D),rgba:o.channels.toRgba(k,M,D)})}for(let w=0;w<24;w++){let k=8+10*w;R.push({css:o.channels.toCss(k,k,k),rgba:o.channels.toRgba(k,k,k)})}return R})());let L=class extends p.Disposable{constructor(R){super(),this._optionsService=R,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._contrastCache=new a.ColorContrastCache,this._colors={foreground:e,background:d,cursor:f,cursorAccent:s,selectionForeground:void 0,selectionBackgroundTransparent:g,selectionBackgroundOpaque:o.color.blend(d,g),selectionInactiveBackgroundTransparent:g,selectionInactiveBackgroundOpaque:o.color.blend(d,g),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(R={}){let E=this._colors;if(E.foreground=b(R.foreground,e),E.background=b(R.background,d),E.cursor=b(R.cursor,f),E.cursorAccent=b(R.cursorAccent,s),E.selectionBackgroundTransparent=b(R.selectionBackground,g),E.selectionBackgroundOpaque=o.color.blend(E.background,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundTransparent=b(R.selectionInactiveBackground,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundOpaque=o.color.blend(E.background,E.selectionInactiveBackgroundTransparent),E.selectionForeground=R.selectionForeground?b(R.selectionForeground,o.NULL_COLOR):void 0,E.selectionForeground===o.NULL_COLOR&&(E.selectionForeground=void 0),o.color.isOpaque(E.selectionBackgroundTransparent)&&(E.selectionBackgroundTransparent=o.color.opacity(E.selectionBackgroundTransparent,.3)),o.color.isOpaque(E.selectionInactiveBackgroundTransparent)&&(E.selectionInactiveBackgroundTransparent=o.color.opacity(E.selectionInactiveBackgroundTransparent,.3)),E.ansi=t.DEFAULT_ANSI_COLORS.slice(),E.ansi[0]=b(R.black,t.DEFAULT_ANSI_COLORS[0]),E.ansi[1]=b(R.red,t.DEFAULT_ANSI_COLORS[1]),E.ansi[2]=b(R.green,t.DEFAULT_ANSI_COLORS[2]),E.ansi[3]=b(R.yellow,t.DEFAULT_ANSI_COLORS[3]),E.ansi[4]=b(R.blue,t.DEFAULT_ANSI_COLORS[4]),E.ansi[5]=b(R.magenta,t.DEFAULT_ANSI_COLORS[5]),E.ansi[6]=b(R.cyan,t.DEFAULT_ANSI_COLORS[6]),E.ansi[7]=b(R.white,t.DEFAULT_ANSI_COLORS[7]),E.ansi[8]=b(R.brightBlack,t.DEFAULT_ANSI_COLORS[8]),E.ansi[9]=b(R.brightRed,t.DEFAULT_ANSI_COLORS[9]),E.ansi[10]=b(R.brightGreen,t.DEFAULT_ANSI_COLORS[10]),E.ansi[11]=b(R.brightYellow,t.DEFAULT_ANSI_COLORS[11]),E.ansi[12]=b(R.brightBlue,t.DEFAULT_ANSI_COLORS[12]),E.ansi[13]=b(R.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),E.ansi[14]=b(R.brightCyan,t.DEFAULT_ANSI_COLORS[14]),E.ansi[15]=b(R.brightWhite,t.DEFAULT_ANSI_COLORS[15]),R.extendedAnsi){let w=Math.min(E.ansi.length-16,R.extendedAnsi.length);for(let k=0;k<w;k++)E.ansi[k+16]=b(R.extendedAnsi[k],t.DEFAULT_ANSI_COLORS[k+16])}this._contrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(R){this._restoreColor(R),this._onChangeColors.fire(this.colors)}_restoreColor(R){if(R!==void 0)switch(R){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[R]=this._restoreColors.ansi[R]}else for(let E=0;E<this._restoreColors.ansi.length;++E)this._colors.ansi[E]=this._restoreColors.ansi[E]}modifyColors(R){R(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(R,E){if(R!==void 0)try{return o.css.toColor(R)}catch(w){}return E}L=u([h(0,i.IOptionsService)],L),t.ThemeService=L},6349:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;let u=n(8460),h=n(844);class a extends h.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;let p=new Array(m);for(let i=0;i<Math.min(m,this.length);i++)p[i]=this._array[this._getCyclicIndex(i)];this._array=p,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let p=this._length;p<m;p++)this._array[p]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,p){this._array[this._getCyclicIndex(m)]=p}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,p,...i){if(p){for(let e=m;e<this._length-p;e++)this._array[this._getCyclicIndex(e)]=this._array[this._getCyclicIndex(e+p)];this._length-=p,this.onDeleteEmitter.fire({index:m,amount:p})}for(let e=this._length-1;e>=m;e--)this._array[this._getCyclicIndex(e+i.length)]=this._array[this._getCyclicIndex(e)];for(let e=0;e<i.length;e++)this._array[this._getCyclicIndex(m+e)]=i[e];if(i.length&&this.onInsertEmitter.fire({index:m,amount:i.length}),this._length+i.length>this._maxLength){let e=this._length+i.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=i.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,p,i){if(!(p<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(let d=p-1;d>=0;d--)this.set(m+d+i,this.get(m+d));let e=m+p+i-this._length;if(e>0)for(this._length+=e;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let e=0;e<p;e++)this.set(m+e+i,this.get(m+e))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}t.CircularList=a},1439:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function n(u,h=5){if(typeof u!="object")return u;let a=Array.isArray(u)?[]:{};for(let o in u)a[o]=h<=1?u[o]:u[o]&&n(u[o],h-1);return a}},8055:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;let u=n(6114),h=0,a=0,o=0,m=0;var p,i,e;function d(s){let g=s.toString(16);return g.length<2?"0"+g:g}function f(s,g){return s<g?(g+.05)/(s+.05):(s+.05)/(g+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},function(s){s.toCss=function(g,L,b,R){return R!==void 0?`#${d(g)}${d(L)}${d(b)}${d(R)}`:`#${d(g)}${d(L)}${d(b)}`},s.toRgba=function(g,L,b,R=255){return(g<<24|L<<16|b<<8|R)>>>0}}(p=t.channels||(t.channels={})),function(s){function g(L,b){return m=Math.round(255*b),[h,a,o]=e.toChannels(L.rgba),{css:p.toCss(h,a,o,m),rgba:p.toRgba(h,a,o,m)}}s.blend=function(L,b){if(m=(255&b.rgba)/255,m===1)return{css:b.css,rgba:b.rgba};let R=b.rgba>>24&255,E=b.rgba>>16&255,w=b.rgba>>8&255,k=L.rgba>>24&255,M=L.rgba>>16&255,D=L.rgba>>8&255;return h=k+Math.round((R-k)*m),a=M+Math.round((E-M)*m),o=D+Math.round((w-D)*m),{css:p.toCss(h,a,o),rgba:p.toRgba(h,a,o)}},s.isOpaque=function(L){return(255&L.rgba)==255},s.ensureContrastRatio=function(L,b,R){let E=e.ensureContrastRatio(L.rgba,b.rgba,R);if(E)return e.toColor(E>>24&255,E>>16&255,E>>8&255)},s.opaque=function(L){let b=(255|L.rgba)>>>0;return[h,a,o]=e.toChannels(b),{css:p.toCss(h,a,o),rgba:b}},s.opacity=g,s.multiplyOpacity=function(L,b){return m=255&L.rgba,g(L,m*b/255)},s.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(t.color||(t.color={})),function(s){let g,L;if(!u.isNode){let b=document.createElement("canvas");b.width=1,b.height=1;let R=b.getContext("2d",{willReadFrequently:!0});R&&(g=R,g.globalCompositeOperation="copy",L=g.createLinearGradient(0,0,1,1))}s.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return h=parseInt(b.slice(1,2).repeat(2),16),a=parseInt(b.slice(2,3).repeat(2),16),o=parseInt(b.slice(3,4).repeat(2),16),e.toColor(h,a,o);case 5:return h=parseInt(b.slice(1,2).repeat(2),16),a=parseInt(b.slice(2,3).repeat(2),16),o=parseInt(b.slice(3,4).repeat(2),16),m=parseInt(b.slice(4,5).repeat(2),16),e.toColor(h,a,o,m);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}let R=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(R)return h=parseInt(R[1]),a=parseInt(R[2]),o=parseInt(R[3]),m=Math.round(255*(R[5]===void 0?1:parseFloat(R[5]))),e.toColor(h,a,o,m);if(!g||!L)throw new Error("css.toColor: Unsupported css format");if(g.fillStyle=L,g.fillStyle=b,typeof g.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(g.fillRect(0,0,1,1),[h,a,o,m]=g.getImageData(0,0,1,1).data,m!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(h,a,o,m),css:b}}}(t.css||(t.css={})),function(s){function g(L,b,R){let E=L/255,w=b/255,k=R/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))}s.relativeLuminance=function(L){return g(L>>16&255,L>>8&255,255&L)},s.relativeLuminance2=g}(i=t.rgb||(t.rgb={})),function(s){function g(b,R,E){let w=b>>24&255,k=b>>16&255,M=b>>8&255,D=R>>24&255,P=R>>16&255,W=R>>8&255,F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));for(;F<E&&(D>0||P>0||W>0);)D-=Math.max(0,Math.ceil(.1*D)),P-=Math.max(0,Math.ceil(.1*P)),W-=Math.max(0,Math.ceil(.1*W)),F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));return(D<<24|P<<16|W<<8|255)>>>0}function L(b,R,E){let w=b>>24&255,k=b>>16&255,M=b>>8&255,D=R>>24&255,P=R>>16&255,W=R>>8&255,F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));for(;F<E&&(D<255||P<255||W<255);)D=Math.min(255,D+Math.ceil(.1*(255-D))),P=Math.min(255,P+Math.ceil(.1*(255-P))),W=Math.min(255,W+Math.ceil(.1*(255-W))),F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));return(D<<24|P<<16|W<<8|255)>>>0}s.ensureContrastRatio=function(b,R,E){let w=i.relativeLuminance(b>>8),k=i.relativeLuminance(R>>8);if(f(w,k)<E){if(k<w){let P=g(b,R,E),W=f(w,i.relativeLuminance(P>>8));if(W<E){let F=L(b,R,E);return W>f(w,i.relativeLuminance(F>>8))?P:F}return P}let M=L(b,R,E),D=f(w,i.relativeLuminance(M>>8));if(D<E){let P=g(b,R,E);return D>f(w,i.relativeLuminance(P>>8))?M:P}return M}},s.reduceLuminance=g,s.increaseLuminance=L,s.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},s.toColor=function(b,R,E,w){return{css:p.toCss(b,R,E,w),rgba:p.toRgba(b,R,E,w)}}}(e=t.rgba||(t.rgba={})),t.toPaddedHex=d,t.contrastRatio=f},8969:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;let u=n(844),h=n(2585),a=n(4348),o=n(7866),m=n(744),p=n(7302),i=n(6975),e=n(8460),d=n(1753),f=n(1480),s=n(7994),g=n(9282),L=n(5435),b=n(5981),R=n(2660),E=!1;class w extends u.Disposable{constructor(M){super(),this._onBinary=this.register(new e.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new e.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new e.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new e.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new e.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new e.EventEmitter),this._instantiationService=new a.InstantiationService,this.optionsService=this.register(new p.OptionsService(M)),this._instantiationService.setService(h.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(h.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(o.LogService)),this._instantiationService.setService(h.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(i.CoreService)),this._instantiationService.setService(h.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(h.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(f.UnicodeService)),this._instantiationService.setService(h.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(s.CharsetService),this._instantiationService.setService(h.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(R.OscLinkService),this._instantiationService.setService(h.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new L.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,e.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,e.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,e.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,e.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onSpecificOptionChange("windowsMode",D=>this._handleWindowsModeOptionChange(D))),this.register(this._bufferService.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((D,P)=>this._inputHandler.parse(D,P))),this.register((0,e.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed)),this.register((0,u.toDisposable)(()=>{var D;(D=this._windowsMode)===null||D===void 0||D.dispose(),this._windowsMode=void 0}))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new e.EventEmitter),this._onScroll.event(M=>{var D;(D=this._onScrollApi)===null||D===void 0||D.fire(M.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(M){for(let D in M)this.optionsService.options[D]=M[D]}write(M,D){this._writeBuffer.write(M,D)}writeSync(M,D){this._logService.logLevel<=h.LogLevelEnum.WARN&&!E&&(this._logService.warn("writeSync is unreliable and will be removed soon."),E=!0),this._writeBuffer.writeSync(M,D)}resize(M,D){isNaN(M)||isNaN(D)||(M=Math.max(M,m.MINIMUM_COLS),D=Math.max(D,m.MINIMUM_ROWS),this._bufferService.resize(M,D))}scroll(M,D=!1){this._bufferService.scroll(M,D)}scrollLines(M,D,P){this._bufferService.scrollLines(M,D,P)}scrollPages(M){this._bufferService.scrollPages(M)}scrollToTop(){this._bufferService.scrollToTop()}scrollToBottom(){this._bufferService.scrollToBottom()}scrollToLine(M){this._bufferService.scrollToLine(M)}registerEscHandler(M,D){return this._inputHandler.registerEscHandler(M,D)}registerDcsHandler(M,D){return this._inputHandler.registerDcsHandler(M,D)}registerCsiHandler(M,D){return this._inputHandler.registerCsiHandler(M,D)}registerOscHandler(M,D){return this._inputHandler.registerOscHandler(M,D)}_setup(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsModeOptionChange(M){var D;M?this._enableWindowsMode():((D=this._windowsMode)===null||D===void 0||D.dispose(),this._windowsMode=void 0)}_enableWindowsMode(){if(!this._windowsMode){let M=[];M.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.registerCsiHandler({final:"H"},()=>((0,g.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsMode={dispose:()=>{for(let D of M)D.dispose()}}}}}t.CoreTerminal=w},8460:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===n)return void this._listeners.splice(u,1)}}})),this._event}fire(n,u){let h=[];for(let a=0;a<this._listeners.length;a++)h.push(this._listeners[a]);for(let a=0;a<h.length;a++)h[a].call(void 0,n,u)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},t.forwardEvent=function(n,u){return n(h=>u.fire(h))}},5435:function(y,t,n){var u=this&&this.__decorate||function($,A,U,N){var z,K=arguments.length,Q=K<3?A:N===null?N=Object.getOwnPropertyDescriptor(A,U):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate($,A,U,N);else for(var oe=$.length-1;oe>=0;oe--)(z=$[oe])&&(Q=(K<3?z(Q):K>3?z(A,U,Q):z(A,U))||Q);return K>3&&Q&&Object.defineProperty(A,U,Q),Q},h=this&&this.__param||function($,A){return function(U,N){A(U,N,$)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;let a=n(2584),o=n(7116),m=n(2015),p=n(844),i=n(482),e=n(8437),d=n(8460),f=n(643),s=n(511),g=n(3734),L=n(2585),b=n(6242),R=n(6351),E=n(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},k=131072;function M($,A){if($>24)return A.setWinLines||!1;switch($){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var D;(function($){$[$.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",$[$.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D=t.WindowsOptionsReportType||(t.WindowsOptionsReportType={}));let P=0;class W extends p.Disposable{constructor(A,U,N,z,K,Q,oe,ee,ne=new m.EscapeSequenceParser){super(),this._bufferService=A,this._charsetService=U,this._coreService=N,this._logService=z,this._optionsService=K,this._oscLinkService=Q,this._coreMouseService=oe,this._unicodeService=ee,this._parser=ne,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new i.StringToUtf32,this._utf8Decoder=new i.Utf8ToUtf32,this._workCell=new s.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=e.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(G=>this._activeBuffer=G.activeBuffer)),this._parser.setCsiHandlerFallback((G,V)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(G),params:V.toArray()})}),this._parser.setEscHandlerFallback(G=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(G)})}),this._parser.setExecuteHandlerFallback(G=>{this._logService.debug("Unknown EXECUTE code: ",{code:G})}),this._parser.setOscHandlerFallback((G,V,q)=>{this._logService.debug("Unknown OSC code: ",{identifier:G,action:V,data:q})}),this._parser.setDcsHandlerFallback((G,V,q)=>{V==="HOOK"&&(q=q.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(G),action:V,payload:q})}),this._parser.setPrintHandler((G,V,q)=>this.print(G,V,q)),this._parser.registerCsiHandler({final:"@"},G=>this.insertChars(G)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},G=>this.scrollLeft(G)),this._parser.registerCsiHandler({final:"A"},G=>this.cursorUp(G)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},G=>this.scrollRight(G)),this._parser.registerCsiHandler({final:"B"},G=>this.cursorDown(G)),this._parser.registerCsiHandler({final:"C"},G=>this.cursorForward(G)),this._parser.registerCsiHandler({final:"D"},G=>this.cursorBackward(G)),this._parser.registerCsiHandler({final:"E"},G=>this.cursorNextLine(G)),this._parser.registerCsiHandler({final:"F"},G=>this.cursorPrecedingLine(G)),this._parser.registerCsiHandler({final:"G"},G=>this.cursorCharAbsolute(G)),this._parser.registerCsiHandler({final:"H"},G=>this.cursorPosition(G)),this._parser.registerCsiHandler({final:"I"},G=>this.cursorForwardTab(G)),this._parser.registerCsiHandler({final:"J"},G=>this.eraseInDisplay(G,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},G=>this.eraseInDisplay(G,!0)),this._parser.registerCsiHandler({final:"K"},G=>this.eraseInLine(G,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},G=>this.eraseInLine(G,!0)),this._parser.registerCsiHandler({final:"L"},G=>this.insertLines(G)),this._parser.registerCsiHandler({final:"M"},G=>this.deleteLines(G)),this._parser.registerCsiHandler({final:"P"},G=>this.deleteChars(G)),this._parser.registerCsiHandler({final:"S"},G=>this.scrollUp(G)),this._parser.registerCsiHandler({final:"T"},G=>this.scrollDown(G)),this._parser.registerCsiHandler({final:"X"},G=>this.eraseChars(G)),this._parser.registerCsiHandler({final:"Z"},G=>this.cursorBackwardTab(G)),this._parser.registerCsiHandler({final:"`"},G=>this.charPosAbsolute(G)),this._parser.registerCsiHandler({final:"a"},G=>this.hPositionRelative(G)),this._parser.registerCsiHandler({final:"b"},G=>this.repeatPrecedingCharacter(G)),this._parser.registerCsiHandler({final:"c"},G=>this.sendDeviceAttributesPrimary(G)),this._parser.registerCsiHandler({prefix:">",final:"c"},G=>this.sendDeviceAttributesSecondary(G)),this._parser.registerCsiHandler({final:"d"},G=>this.linePosAbsolute(G)),this._parser.registerCsiHandler({final:"e"},G=>this.vPositionRelative(G)),this._parser.registerCsiHandler({final:"f"},G=>this.hVPosition(G)),this._parser.registerCsiHandler({final:"g"},G=>this.tabClear(G)),this._parser.registerCsiHandler({final:"h"},G=>this.setMode(G)),this._parser.registerCsiHandler({prefix:"?",final:"h"},G=>this.setModePrivate(G)),this._parser.registerCsiHandler({final:"l"},G=>this.resetMode(G)),this._parser.registerCsiHandler({prefix:"?",final:"l"},G=>this.resetModePrivate(G)),this._parser.registerCsiHandler({final:"m"},G=>this.charAttributes(G)),this._parser.registerCsiHandler({final:"n"},G=>this.deviceStatus(G)),this._parser.registerCsiHandler({prefix:"?",final:"n"},G=>this.deviceStatusPrivate(G)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},G=>this.softReset(G)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},G=>this.setCursorStyle(G)),this._parser.registerCsiHandler({final:"r"},G=>this.setScrollRegion(G)),this._parser.registerCsiHandler({final:"s"},G=>this.saveCursor(G)),this._parser.registerCsiHandler({final:"t"},G=>this.windowOptions(G)),this._parser.registerCsiHandler({final:"u"},G=>this.restoreCursor(G)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},G=>this.insertColumns(G)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},G=>this.deleteColumns(G)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},G=>this.selectProtected(G)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},G=>this.requestMode(G,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},G=>this.requestMode(G,!1)),this._parser.setExecuteHandler(a.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(a.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(a.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(a.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(a.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(a.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(a.C1.IND,()=>this.index()),this._parser.setExecuteHandler(a.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(a.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(G=>(this.setTitle(G),this.setIconName(G),!0))),this._parser.registerOscHandler(1,new b.OscHandler(G=>this.setIconName(G))),this._parser.registerOscHandler(2,new b.OscHandler(G=>this.setTitle(G))),this._parser.registerOscHandler(4,new b.OscHandler(G=>this.setOrReportIndexedColor(G))),this._parser.registerOscHandler(8,new b.OscHandler(G=>this.setHyperlink(G))),this._parser.registerOscHandler(10,new b.OscHandler(G=>this.setOrReportFgColor(G))),this._parser.registerOscHandler(11,new b.OscHandler(G=>this.setOrReportBgColor(G))),this._parser.registerOscHandler(12,new b.OscHandler(G=>this.setOrReportCursorColor(G))),this._parser.registerOscHandler(104,new b.OscHandler(G=>this.restoreIndexedColor(G))),this._parser.registerOscHandler(110,new b.OscHandler(G=>this.restoreFgColor(G))),this._parser.registerOscHandler(111,new b.OscHandler(G=>this.restoreBgColor(G))),this._parser.registerOscHandler(112,new b.OscHandler(G=>this.restoreCursorColor(G))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let G in o.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:G},()=>this.selectCharset("("+G)),this._parser.registerEscHandler({intermediates:")",final:G},()=>this.selectCharset(")"+G)),this._parser.registerEscHandler({intermediates:"*",final:G},()=>this.selectCharset("*"+G)),this._parser.registerEscHandler({intermediates:"+",final:G},()=>this.selectCharset("+"+G)),this._parser.registerEscHandler({intermediates:"-",final:G},()=>this.selectCharset("-"+G)),this._parser.registerEscHandler({intermediates:".",final:G},()=>this.selectCharset("."+G)),this._parser.registerEscHandler({intermediates:"/",final:G},()=>this.selectCharset("/"+G));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(G=>(this._logService.error("Parsing error: ",G),G)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new R.DcsHandler((G,V)=>this.requestStatusString(G,V)))}getAttrData(){return this._curAttrData}_preserveStack(A,U,N,z){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=U,this._parseStack.decodedLength=N,this._parseStack.position=z}_logSlowResolvingAsync(A){this._logService.logLevel<=L.LogLevelEnum.WARN&&Promise.race([A,new Promise((U,N)=>setTimeout(()=>N("#SLOW_TIMEOUT"),5e3))]).catch(U=>{if(U!=="#SLOW_TIMEOUT")throw U;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(A,U){let N,z=this._activeBuffer.x,K=this._activeBuffer.y,Q=0,oe=this._parseStack.paused;if(oe){if(N=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,U))return this._logSlowResolvingAsync(N),N;z=this._parseStack.cursorStartX,K=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>k&&(Q=this._parseStack.position+k)}if(this._logService.logLevel<=L.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?` "${A}"`:` "${Array.prototype.map.call(A,ee=>String.fromCharCode(ee)).join("")}"`),typeof A=="string"?A.split("").map(ee=>ee.charCodeAt(0)):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<k&&(this._parseBuffer=new Uint32Array(Math.min(A.length,k))),oe||this._dirtyRowTracker.clearRange(),A.length>k)for(let ee=Q;ee<A.length;ee+=k){let ne=ee+k<A.length?ee+k:A.length,G=typeof A=="string"?this._stringDecoder.decode(A.substring(ee,ne),this._parseBuffer):this._utf8Decoder.decode(A.subarray(ee,ne),this._parseBuffer);if(N=this._parser.parse(this._parseBuffer,G))return this._preserveStack(z,K,G,ee),this._logSlowResolvingAsync(N),N}else if(!oe){let ee=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer);if(N=this._parser.parse(this._parseBuffer,ee))return this._preserveStack(z,K,ee,0),this._logSlowResolvingAsync(N),N}this._activeBuffer.x===z&&this._activeBuffer.y===K||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(A,U,N){let z,K,Q=this._charsetService.charset,oe=this._optionsService.rawOptions.screenReaderMode,ee=this._bufferService.cols,ne=this._coreService.decPrivateModes.wraparound,G=this._coreService.modes.insertMode,V=this._curAttrData,q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&N-U>0&&q.getWidth(this._activeBuffer.x-1)===2&&q.setCellFromCodePoint(this._activeBuffer.x-1,0,1,V.fg,V.bg,V.extended);for(let te=U;te<N;++te){if(z=A[te],K=this._unicodeService.wcwidth(z),z<127&&Q){let ce=Q[String.fromCharCode(z)];ce&&(z=ce.charCodeAt(0))}if(oe&&this._onA11yChar.fire((0,i.stringFromCodePoint)(z)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),K||!this._activeBuffer.x){if(this._activeBuffer.x+K-1>=ee){if(ne){for(;this._activeBuffer.x<ee;)q.setCellFromCodePoint(this._activeBuffer.x++,0,1,V.fg,V.bg,V.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=ee-1,K===2)continue}if(G&&(q.insertCells(this._activeBuffer.x,K,this._activeBuffer.getNullCell(V),V),q.getWidth(ee-1)===2&&q.setCellFromCodePoint(ee-1,f.NULL_CELL_CODE,f.NULL_CELL_WIDTH,V.fg,V.bg,V.extended)),q.setCellFromCodePoint(this._activeBuffer.x++,z,K,V.fg,V.bg,V.extended),K>0)for(;--K;)q.setCellFromCodePoint(this._activeBuffer.x++,0,0,V.fg,V.bg,V.extended)}else q.getWidth(this._activeBuffer.x-1)?q.addCodepointToCell(this._activeBuffer.x-1,z):q.addCodepointToCell(this._activeBuffer.x-2,z)}N-U>0&&(q.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<ee&&N-U>0&&q.getWidth(this._activeBuffer.x)===0&&!q.hasContent(this._activeBuffer.x)&&q.setCellFromCodePoint(this._activeBuffer.x,0,1,V.fg,V.bg,V.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(A,U){return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,U):this._parser.registerCsiHandler(A,N=>!M(N.params[0],this._optionsService.rawOptions.windowOptions)||U(N))}registerDcsHandler(A,U){return this._parser.registerDcsHandler(A,new R.DcsHandler(U))}registerEscHandler(A,U){return this._parser.registerEscHandler(A,U)}registerOscHandler(A,U){return this._parser.registerOscHandler(A,new b.OscHandler(U))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0)&&A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);U.hasWidth(this._activeBuffer.x)&&!U.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(A=this._bufferService.cols-1){this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(A,U){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+U):(this._activeBuffer.x=A,this._activeBuffer.y=U),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(A,U){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+U)}cursorUp(A){let U=this._activeBuffer.y-this._activeBuffer.scrollTop;return U>=0?this._moveCursor(0,-Math.min(U,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0}cursorDown(A){let U=this._activeBuffer.scrollBottom-this._activeBuffer.y;return U>=0?this._moveCursor(0,Math.min(U,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0}cursorForward(A){return this._moveCursor(A.params[0]||1,0),!0}cursorBackward(A){return this._moveCursor(-(A.params[0]||1),0),!0}cursorNextLine(A){return this.cursorDown(A),this._activeBuffer.x=0,!0}cursorPrecedingLine(A){return this.cursorUp(A),this._activeBuffer.x=0,!0}cursorCharAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0}charPosAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(A){return this._moveCursor(A.params[0]||1,0),!0}linePosAbsolute(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0}vPositionRelative(A){return this._moveCursor(0,A.params[0]||1),!0}hVPosition(A){return this.cursorPosition(A),!0}tabClear(A){let U=A.params[0];return U===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:U===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let U=A.params[0]||1;for(;U--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let U=A.params[0]||1;for(;U--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(A){let U=A.params[0];return U===1&&(this._curAttrData.bg|=536870912),U!==2&&U!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(A,U,N,z=!1,K=!1){let Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);Q.replaceCells(U,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),K),z&&(Q.isWrapped=!1)}_resetBufferLine(A,U=!1){let N=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);N.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),U),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+A),N.isWrapped=!1}eraseInDisplay(A,U=!1){let N;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for(N=this._activeBuffer.y,this._dirtyRowTracker.markDirty(N),this._eraseInBufferLine(N++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,U);N<this._bufferService.rows;N++)this._resetBufferLine(N,U);this._dirtyRowTracker.markDirty(N);break;case 1:for(N=this._activeBuffer.y,this._dirtyRowTracker.markDirty(N),this._eraseInBufferLine(N,0,this._activeBuffer.x+1,!0,U),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(N+1).isWrapped=!1);N--;)this._resetBufferLine(N,U);this._dirtyRowTracker.markDirty(0);break;case 2:for(N=this._bufferService.rows,this._dirtyRowTracker.markDirty(N-1);N--;)this._resetBufferLine(N,U);this._dirtyRowTracker.markDirty(0);break;case 3:let z=this._activeBuffer.lines.length-this._bufferService.rows;z>0&&(this._activeBuffer.lines.trimStart(z),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-z,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-z,0),this._onScroll.fire(0))}return!0}eraseInLine(A,U=!1){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,U);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,U);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,U)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(A){this._restrictCursor();let U=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let N=this._activeBuffer.ybase+this._activeBuffer.y,z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,K=this._bufferService.rows-1+this._activeBuffer.ybase-z+1;for(;U--;)this._activeBuffer.lines.splice(K-1,1),this._activeBuffer.lines.splice(N,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(A){this._restrictCursor();let U=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let N=this._activeBuffer.ybase+this._activeBuffer.y,z;for(z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-z;U--;)this._activeBuffer.lines.splice(N,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(A){this._restrictCursor();let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return U&&(U.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(A){this._restrictCursor();let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return U&&(U.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(A){let U=A.params[0]||1;for(;U--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(A){let U=A.params[0]||1;for(;U--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(e.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let U=A.params[0]||1;for(let N=this._activeBuffer.scrollTop;N<=this._activeBuffer.scrollBottom;++N){let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);z.deleteCells(0,U,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let U=A.params[0]||1;for(let N=this._activeBuffer.scrollTop;N<=this._activeBuffer.scrollBottom;++N){let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);z.insertCells(0,U,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let U=A.params[0]||1;for(let N=this._activeBuffer.scrollTop;N<=this._activeBuffer.scrollBottom;++N){let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);z.insertCells(this._activeBuffer.x,U,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let U=A.params[0]||1;for(let N=this._activeBuffer.scrollTop;N<=this._activeBuffer.scrollBottom;++N){let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);z.deleteCells(this._activeBuffer.x,U,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(A){this._restrictCursor();let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return U&&(U.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(A){if(!this._parser.precedingCodepoint)return!0;let U=A.params[0]||1,N=new Uint32Array(U);for(let z=0;z<U;++z)N[z]=this._parser.precedingCodepoint;return this.print(N,0,N.length),!0}sendDeviceAttributesPrimary(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(a.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(a.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(a.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(a.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(a.C0.ESC+"[>83;40003;0c")),!0}_is(A){return(this._optionsService.rawOptions.termName+"").indexOf(A)===0}setMode(A){for(let U=0;U<A.length;U++)switch(A.params[U]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(A){for(let U=0;U<A.length;U++)switch(A.params[U]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),this._charsetService.setgCharset(1,o.DEFAULT_CHARSET),this._charsetService.setgCharset(2,o.DEFAULT_CHARSET),this._charsetService.setgCharset(3,o.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(A){for(let U=0;U<A.length;U++)switch(A.params[U]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(A){for(let U=0;U<A.length;U++)switch(A.params[U]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[U]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(A,U){let N=this._coreService.decPrivateModes,{activeProtocol:z,activeEncoding:K}=this._coreMouseService,Q=this._coreService,{buffers:oe,cols:ee}=this._bufferService,{active:ne,alt:G}=oe,V=this._optionsService.rawOptions,q=re=>re?1:2,te=A.params[0];return ce=te,Ee=U?te===2?3:te===4?q(Q.modes.insertMode):te===12?4:te===20?q(V.convertEol):0:te===1?q(N.applicationCursorKeys):te===3?V.windowOptions.setWinLines?ee===80?2:ee===132?1:0:0:te===6?q(N.origin):te===7?q(N.wraparound):te===8?3:te===9?q(z==="X10"):te===12?q(V.cursorBlink):te===25?q(!Q.isCursorHidden):te===45?q(N.reverseWraparound):te===66?q(N.applicationKeypad):te===1e3?q(z==="VT200"):te===1002?q(z==="DRAG"):te===1003?q(z==="ANY"):te===1004?q(N.sendFocus):te===1005?4:te===1006?q(K==="SGR"):te===1015?4:te===1016?q(K==="SGR_PIXELS"):te===1048?1:te===47||te===1047||te===1049?q(ne===G):te===2004?q(N.bracketedPasteMode):0,Q.triggerDataEvent(`${a.C0.ESC}[${U?"":"?"}${ce};${Ee}$y`),!0;var ce,Ee}_updateAttrColor(A,U,N,z,K){return U===2?(A|=50331648,A&=-16777216,A|=g.AttributeData.fromColorRGB([N,z,K])):U===5&&(A&=-50331904,A|=33554432|255&N),A}_extractColor(A,U,N){let z=[0,0,-1,0,0,0],K=0,Q=0;do{if(z[Q+K]=A.params[U+Q],A.hasSubParams(U+Q)){let oe=A.getSubParams(U+Q),ee=0;do z[1]===5&&(K=1),z[Q+ee+1+K]=oe[ee];while(++ee<oe.length&&ee+Q+1+K<z.length);break}if(z[1]===5&&Q+K>=2||z[1]===2&&Q+K>=5)break;z[1]&&(K=1)}while(++Q+U<A.length&&Q+K<z.length);for(let oe=2;oe<z.length;++oe)z[oe]===-1&&(z[oe]=0);switch(z[0]){case 38:N.fg=this._updateAttrColor(N.fg,z[1],z[3],z[4],z[5]);break;case 48:N.bg=this._updateAttrColor(N.bg,z[1],z[3],z[4],z[5]);break;case 58:N.extended=N.extended.clone(),N.extended.underlineColor=this._updateAttrColor(N.extended.underlineColor,z[1],z[3],z[4],z[5])}return Q}_processUnderline(A,U){U.extended=U.extended.clone(),(!~A||A>5)&&(A=1),U.extended.underlineStyle=A,U.fg|=268435456,A===0&&(U.fg&=-268435457),U.updateExtended()}_processSGR0(A){A.fg=e.DEFAULT_ATTR_DATA.fg,A.bg=e.DEFAULT_ATTR_DATA.bg,A.extended=A.extended.clone(),A.extended.underlineStyle=0,A.extended.underlineColor&=-67108864,A.updateExtended()}charAttributes(A){if(A.length===1&&A.params[0]===0)return this._processSGR0(this._curAttrData),!0;let U=A.length,N,z=this._curAttrData;for(let K=0;K<U;K++)N=A.params[K],N>=30&&N<=37?(z.fg&=-50331904,z.fg|=16777216|N-30):N>=40&&N<=47?(z.bg&=-50331904,z.bg|=16777216|N-40):N>=90&&N<=97?(z.fg&=-50331904,z.fg|=16777224|N-90):N>=100&&N<=107?(z.bg&=-50331904,z.bg|=16777224|N-100):N===0?this._processSGR0(z):N===1?z.fg|=134217728:N===3?z.bg|=67108864:N===4?(z.fg|=268435456,this._processUnderline(A.hasSubParams(K)?A.getSubParams(K)[0]:1,z)):N===5?z.fg|=536870912:N===7?z.fg|=67108864:N===8?z.fg|=1073741824:N===9?z.fg|=2147483648:N===2?z.bg|=134217728:N===21?this._processUnderline(2,z):N===22?(z.fg&=-134217729,z.bg&=-134217729):N===23?z.bg&=-67108865:N===24?(z.fg&=-268435457,this._processUnderline(0,z)):N===25?z.fg&=-536870913:N===27?z.fg&=-67108865:N===28?z.fg&=-1073741825:N===29?z.fg&=2147483647:N===39?(z.fg&=-67108864,z.fg|=16777215&e.DEFAULT_ATTR_DATA.fg):N===49?(z.bg&=-67108864,z.bg|=16777215&e.DEFAULT_ATTR_DATA.bg):N===38||N===48||N===58?K+=this._extractColor(A,K,z):N===59?(z.extended=z.extended.clone(),z.extended.underlineColor=-1,z.updateExtended()):N===100?(z.fg&=-67108864,z.fg|=16777215&e.DEFAULT_ATTR_DATA.fg,z.bg&=-67108864,z.bg|=16777215&e.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",N);return!0}deviceStatus(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(`${a.C0.ESC}[0n`);break;case 6:let U=this._activeBuffer.y+1,N=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[${U};${N}R`)}return!0}deviceStatusPrivate(A){if(A.params[0]===6){let U=this._activeBuffer.y+1,N=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[?${U};${N}R`)}return!0}softReset(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(A){let U=A.params[0]||1;switch(U){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let N=U%2==1;return this._optionsService.options.cursorBlink=N,!0}setScrollRegion(A){let U=A.params[0]||1,N;return(A.length<2||(N=A.params[1])>this._bufferService.rows||N===0)&&(N=this._bufferService.rows),N>U&&(this._activeBuffer.scrollTop=U-1,this._activeBuffer.scrollBottom=N-1,this._setCursor(0,0)),!0}windowOptions(A){if(!M(A.params[0],this._optionsService.rawOptions.windowOptions))return!0;let U=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:U!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${a.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:U!==0&&U!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),U!==0&&U!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:U!==0&&U!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),U!==0&&U!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0}setIconName(A){return this._iconName=A,!0}setOrReportIndexedColor(A){let U=[],N=A.split(";");for(;N.length>1;){let z=N.shift(),K=N.shift();if(/^\d+$/.exec(z)){let Q=parseInt(z);if(0<=Q&&Q<256)if(K==="?")U.push({type:0,index:Q});else{let oe=(0,E.parseColor)(K);oe&&U.push({type:1,index:Q,color:oe})}}}return U.length&&this._onColor.fire(U),!0}setHyperlink(A){let U=A.split(";");return!(U.length<2)&&(U[1]?this._createHyperlink(U[0],U[1]):!U[0]&&this._finishHyperlink())}_createHyperlink(A,U){this._getCurrentLinkId()&&this._finishHyperlink();let N=A.split(":"),z,K=N.findIndex(Q=>Q.startsWith("id="));return K!==-1&&(z=N[K].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:z,uri:U}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(A,U){let N=A.split(";");for(let z=0;z<N.length&&!(U>=this._specialColors.length);++z,++U)if(N[z]==="?")this._onColor.fire([{type:0,index:this._specialColors[U]}]);else{let K=(0,E.parseColor)(N[z]);K&&this._onColor.fire([{type:1,index:this._specialColors[U],color:K}])}return!0}setOrReportFgColor(A){return this._setOrReportSpecialColor(A,0)}setOrReportBgColor(A){return this._setOrReportSpecialColor(A,1)}setOrReportCursorColor(A){return this._setOrReportSpecialColor(A,2)}restoreIndexedColor(A){if(!A)return this._onColor.fire([{type:2}]),!0;let U=[],N=A.split(";");for(let z=0;z<N.length;++z)if(/^\d+$/.exec(N[z])){let K=parseInt(N[z]);0<=K&&K<256&&U.push({type:2,index:K})}return U.length&&this._onColor.fire(U),!0}restoreFgColor(A){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(A){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(A){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),!0}selectCharset(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(w[A[0]],o.CHARSETS[A[1]]||o.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=e.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=e.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(A){return this._charsetService.setgLevel(A),!0}screenAlignmentPattern(){let A=new s.CellData;A.content=4194304|"E".charCodeAt(0),A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(let U=0;U<this._bufferService.rows;++U){let N=this._activeBuffer.ybase+this._activeBuffer.y+U,z=this._activeBuffer.lines.get(N);z&&(z.fill(A),z.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(A,U){let N=this._bufferService.buffer,z=this._optionsService.rawOptions;return(K=>(this._coreService.triggerDataEvent(`${a.C0.ESC}${K}${a.C0.ESC}\\`),!0))(A==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:A==='"p'?'P1$r61;1"p':A==="r"?`P1$r${N.scrollTop+1};${N.scrollBottom+1}r`:A==="m"?"P1$r0m":A===" q"?`P1$r${{block:2,underline:4,bar:6}[z.cursorStyle]-(z.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(A,U){this._dirtyRowTracker.markRangeDirty(A,U)}}t.InputHandler=W;let F=class{constructor($){this._bufferService=$,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty($){$<this.start?this.start=$:$>this.end&&(this.end=$)}markRangeDirty($,A){$>A&&(P=$,$=A,A=P),$<this.start&&(this.start=$),A>this.end&&(this.end=A)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};F=u([h(0,L.IBufferService)],F)},844:(y,t)=>{function n(u){for(let h of u)h.dispose();u.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){let h=this._disposables.indexOf(u);h!==-1&&this._disposables.splice(h,1)}},t.toDisposable=function(u){return{dispose:u}},t.disposeArray=n,t.getDisposeArrayDisposable=function(u){return{dispose:()=>n(u)}}},1505:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(h,a,o){this._data[h]||(this._data[h]={}),this._data[h][a]=o}get(h,a){return this._data[h]?this._data[h][a]:void 0}clear(){this._data={}}}t.TwoKeyMap=n,t.FourKeyMap=class{constructor(){this._data=new n}set(u,h,a,o,m){this._data.get(u,h)||this._data.set(u,h,new n),this._data.get(u,h).set(a,o,m)}get(u,h,a,o){var m;return(m=this._data.get(u,h))===null||m===void 0?void 0:m.get(a,o)}clear(){this._data.clear()}}},6114:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode=typeof navigator=="undefined";let n=t.isNode?"node":navigator.userAgent,u=t.isNode?"node":navigator.platform;t.isFirefox=n.includes("Firefox"),t.isLegacyEdge=n.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(n),t.getSafariVersion=function(){if(!t.isSafari)return 0;let h=n.match(/Version\/(\d+)/);return h===null||h.length<2?0:parseInt(h[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),t.isIpad=u==="iPad",t.isIphone=u==="iPhone",t.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),t.isLinux=u.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(n)},6106:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SortedList=void 0;let n=0;t.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(n=this._search(this._getKey(u),0,this._array.length-1),this._array.splice(n,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;let h=this._getKey(u);if(h===void 0||(n=this._search(h,0,this._array.length-1),n===-1)||this._getKey(this._array[n])!==h)return!1;do if(this._array[n]===u)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===h);return!1}*getKeyIterator(u){if(this._array.length!==0&&(n=this._search(u,0,this._array.length-1),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===u))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===u)}forEachByKey(u,h){if(this._array.length!==0&&(n=this._search(u,0,this._array.length-1),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===u))do h(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===u)}values(){return this._array.values()}_search(u,h,a){if(a<h)return h;let o=Math.floor((h+a)/2),m=this._getKey(this._array[o]);if(m>u)return this._search(u,h,o-1);if(m<u)return this._search(u,o+1,a);for(;o>0&&this._getKey(this._array[o-1])===u;)o--;return o}}},7226:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;let u=n(6114);class h{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let p=0,i=0,e=m.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),i=Math.max(p,i),d=m.timeRemaining(),1.5*i>d)return e-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(e-p))}ms`),void this._start();e=d}this.clear()}}class a extends h{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){let p=Date.now()+m;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}t.PriorityTaskQueue=a,t.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends h{_requestCallback(o){return requestIdleCallback(o)}_cancelCallback(o){cancelIdleCallback(o)}}:a,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(o){this._queue.clear(),this._queue.enqueue(o)}flush(){this._queue.flush()}}},9282:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;let u=n(643);t.updateWindowsModeWrappedState=function(h){let a=h.buffer.lines.get(h.buffer.ybase+h.buffer.y-1),o=a==null?void 0:a.get(h.cols-1),m=h.buffer.lines.get(h.buffer.ybase+h.buffer.y);m&&o&&(m.isWrapped=o[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&o[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(a){return[a>>>16&255,a>>>8&255,255&a]}static fromColorRGB(a){return(255&a[0])<<16|(255&a[1])<<8|255&a[2]}clone(){let a=new n;return a.fg=this.fg,a.bg=this.bg,a.extended=this.extended.clone(),a}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}t.AttributeData=n;class u{constructor(a=0,o=0){this._ext=0,this._urlId=0,this._ext=a,this._urlId=o}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(a){this._ext=a}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(a){this._ext&=-469762049,this._ext|=a<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(a){this._ext&=-67108864,this._ext|=67108863&a}get urlId(){return this._urlId}set urlId(a){this._urlId=a}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}t.ExtendedAttrs=u},9092:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferStringIterator=t.Buffer=t.MAX_BUFFER_SIZE=void 0;let u=n(6349),h=n(8437),a=n(511),o=n(643),m=n(4634),p=n(4863),i=n(7116),e=n(3734),d=n(7226);t.MAX_BUFFER_SIZE=4294967295,t.Buffer=class{constructor(s,g,L){this._hasScrollback=s,this._optionsService=g,this._bufferService=L,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=h.DEFAULT_ATTR_DATA.clone(),this.savedCharset=i.DEFAULT_CHARSET,this.markers=[],this._nullCell=a.CellData.fromCharData([0,o.NULL_CELL_CHAR,o.NULL_CELL_WIDTH,o.NULL_CELL_CODE]),this._whitespaceCell=a.CellData.fromCharData([0,o.WHITESPACE_CELL_CHAR,o.WHITESPACE_CELL_WIDTH,o.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new d.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(s){return s?(this._nullCell.fg=s.fg,this._nullCell.bg=s.bg,this._nullCell.extended=s.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new e.ExtendedAttrs),this._nullCell}getWhitespaceCell(s){return s?(this._whitespaceCell.fg=s.fg,this._whitespaceCell.bg=s.bg,this._whitespaceCell.extended=s.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new e.ExtendedAttrs),this._whitespaceCell}getBlankLine(s,g){return new h.BufferLine(this._bufferService.cols,this.getNullCell(s),g)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let s=this.ybase+this.y-this.ydisp;return s>=0&&s<this._rows}_getCorrectBufferLength(s){if(!this._hasScrollback)return s;let g=s+this._optionsService.rawOptions.scrollback;return g>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:g}fillViewportRows(s){if(this.lines.length===0){s===void 0&&(s=h.DEFAULT_ATTR_DATA);let g=this._rows;for(;g--;)this.lines.push(this.getBlankLine(s))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(s,g){let L=this.getNullCell(h.DEFAULT_ATTR_DATA),b=0,R=this._getCorrectBufferLength(g);if(R>this.lines.maxLength&&(this.lines.maxLength=R),this.lines.length>0){if(this._cols<s)for(let w=0;w<this.lines.length;w++)b+=+this.lines.get(w).resize(s,L);let E=0;if(this._rows<g)for(let w=this._rows;w<g;w++)this.lines.length<g+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new h.BufferLine(s,L)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new h.BufferLine(s,L)));else for(let w=this._rows;w>g;w--)this.lines.length>g+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(R<this.lines.maxLength){let w=this.lines.length-R;w>0&&(this.lines.trimStart(w),this.ybase=Math.max(this.ybase-w,0),this.ydisp=Math.max(this.ydisp-w,0),this.savedY=Math.max(this.savedY-w,0)),this.lines.maxLength=R}this.x=Math.min(this.x,s-1),this.y=Math.min(this.y,g-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,s-1),this.scrollTop=0}if(this.scrollBottom=g-1,this._isReflowEnabled&&(this._reflow(s,g),this._cols>s))for(let E=0;E<this.lines.length;E++)b+=+this.lines.get(E).resize(s,L);this._cols=s,this._rows=g,this._memoryCleanupQueue.clear(),b>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let s=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,s=!1);let g=0;for(;this._memoryCleanupPosition<this.lines.length;)if(g+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),g>100)return!0;return s}get _isReflowEnabled(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(s,g){this._cols!==s&&(s>this._cols?this._reflowLarger(s,g):this._reflowSmaller(s,g))}_reflowLarger(s,g){let L=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,s,this.ybase+this.y,this.getNullCell(h.DEFAULT_ATTR_DATA));if(L.length>0){let b=(0,m.reflowLargerCreateNewLayout)(this.lines,L);(0,m.reflowLargerApplyNewLayout)(this.lines,b.layout),this._reflowLargerAdjustViewport(s,g,b.countRemoved)}}_reflowLargerAdjustViewport(s,g,L){let b=this.getNullCell(h.DEFAULT_ATTR_DATA),R=L;for(;R-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<g&&this.lines.push(new h.BufferLine(s,b))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-L,0)}_reflowSmaller(s,g){let L=this.getNullCell(h.DEFAULT_ATTR_DATA),b=[],R=0;for(let E=this.lines.length-1;E>=0;E--){let w=this.lines.get(E);if(!w||!w.isWrapped&&w.getTrimmedLength()<=s)continue;let k=[w];for(;w.isWrapped&&E>0;)w=this.lines.get(--E),k.unshift(w);let M=this.ybase+this.y;if(M>=E&&M<E+k.length)continue;let D=k[k.length-1].getTrimmedLength(),P=(0,m.reflowSmallerGetNewLineLengths)(k,this._cols,s),W=P.length-k.length,F;F=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+W):Math.max(0,this.lines.length-this.lines.maxLength+W);let $=[];for(let Q=0;Q<W;Q++){let oe=this.getBlankLine(h.DEFAULT_ATTR_DATA,!0);$.push(oe)}$.length>0&&(b.push({start:E+k.length+R,newLines:$}),R+=$.length),k.push(...$);let A=P.length-1,U=P[A];U===0&&(A--,U=P[A]);let N=k.length-W-1,z=D;for(;N>=0;){let Q=Math.min(z,U);if(k[A]===void 0)break;if(k[A].copyCellsFrom(k[N],z-Q,U-Q,Q,!0),U-=Q,U===0&&(A--,U=P[A]),z-=Q,z===0){N--;let oe=Math.max(N,0);z=(0,m.getWrappedLineTrimmedLength)(k,oe,this._cols)}}for(let Q=0;Q<k.length;Q++)P[Q]<s&&k[Q].setCell(P[Q],L);let K=W-F;for(;K-- >0;)this.ybase===0?this.y<g-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+R)-g&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+W,this.ybase+g-1)}if(b.length>0){let E=[],w=[];for(let A=0;A<this.lines.length;A++)w.push(this.lines.get(A));let k=this.lines.length,M=k-1,D=0,P=b[D];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+R);let W=0;for(let A=Math.min(this.lines.maxLength-1,k+R-1);A>=0;A--)if(P&&P.start>M+W){for(let U=P.newLines.length-1;U>=0;U--)this.lines.set(A--,P.newLines[U]);A++,E.push({index:M+1,amount:P.newLines.length}),W+=P.newLines.length,P=b[++D]}else this.lines.set(A,w[M--]);let F=0;for(let A=E.length-1;A>=0;A--)E[A].index+=F,this.lines.onInsertEmitter.fire(E[A]),F+=E[A].amount;let $=Math.max(0,k+R-this.lines.maxLength);$>0&&this.lines.onTrimEmitter.fire($)}}stringIndexToBufferIndex(s,g,L=!1){for(;g;){let b=this.lines.get(s);if(!b)return[-1,-1];let R=L?b.getTrimmedLength():b.length;for(let E=0;E<R;++E)if(b.get(E)[o.CHAR_DATA_WIDTH_INDEX]&&(g-=b.get(E)[o.CHAR_DATA_CHAR_INDEX].length||1),g<0)return[s,E];s++}return[s,0]}translateBufferLineToString(s,g,L=0,b){let R=this.lines.get(s);return R?R.translateToString(g,L,b):""}getWrappedRangeForLine(s){let g=s,L=s;for(;g>0&&this.lines.get(g).isWrapped;)g--;for(;L+1<this.lines.length&&this.lines.get(L+1).isWrapped;)L++;return{first:g,last:L}}setupTabStops(s){for(s!=null?this.tabs[s]||(s=this.prevStop(s)):(this.tabs={},s=0);s<this._cols;s+=this._optionsService.rawOptions.tabStopWidth)this.tabs[s]=!0}prevStop(s){for(s==null&&(s=this.x);!this.tabs[--s]&&s>0;);return s>=this._cols?this._cols-1:s<0?0:s}nextStop(s){for(s==null&&(s=this.x);!this.tabs[++s]&&s<this._cols;);return s>=this._cols?this._cols-1:s<0?0:s}clearMarkers(s){this._isClearing=!0;for(let g=0;g<this.markers.length;g++)this.markers[g].line===s&&(this.markers[g].dispose(),this.markers.splice(g--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let s=0;s<this.markers.length;s++)this.markers[s].dispose(),this.markers.splice(s--,1);this._isClearing=!1}addMarker(s){let g=new p.Marker(s);return this.markers.push(g),g.register(this.lines.onTrim(L=>{g.line-=L,g.line<0&&g.dispose()})),g.register(this.lines.onInsert(L=>{g.line>=L.index&&(g.line+=L.amount)})),g.register(this.lines.onDelete(L=>{g.line>=L.index&&g.line<L.index+L.amount&&g.dispose(),g.line>L.index&&(g.line-=L.amount)})),g.register(g.onDispose(()=>this._removeMarker(g))),g}_removeMarker(s){this._isClearing||this.markers.splice(this.markers.indexOf(s),1)}iterator(s,g,L,b,R){return new f(this,s,g,L,b,R)}};class f{constructor(g,L,b=0,R=g.lines.length,E=0,w=0){this._buffer=g,this._trimRight=L,this._startIndex=b,this._endIndex=R,this._startOverscan=E,this._endOverscan=w,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}hasNext(){return this._current<this._endIndex}next(){let g=this._buffer.getWrappedRangeForLine(this._current);g.first<this._startIndex-this._startOverscan&&(g.first=this._startIndex-this._startOverscan),g.last>this._endIndex+this._endOverscan&&(g.last=this._endIndex+this._endOverscan),g.first=Math.max(g.first,0),g.last=Math.min(g.last,this._buffer.lines.length);let L="";for(let b=g.first;b<=g.last;++b)L+=this._buffer.translateBufferLineToString(b,this._trimRight);return this._current=g.last+1,{range:g,content:L}}}t.BufferStringIterator=f},8437:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;let u=n(482),h=n(643),a=n(511),o=n(3734);t.DEFAULT_ATTR_DATA=Object.freeze(new o.AttributeData);let m=0;class p{constructor(e,d,f=!1){this.isWrapped=f,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);let s=d||a.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let g=0;g<e;++g)this.setCell(g,s);this.length=e}get(e){let d=this._data[3*e+0],f=2097151&d;return[this._data[3*e+1],2097152&d?this._combined[e]:f?(0,u.stringFromCodePoint)(f):"",d>>22,2097152&d?this._combined[e].charCodeAt(this._combined[e].length-1):f]}set(e,d){this._data[3*e+1]=d[h.CHAR_DATA_ATTR_INDEX],d[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=d[1],this._data[3*e+0]=2097152|e|d[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=d[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){let d=this._data[3*e+0];return 2097152&d?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&d}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){let d=this._data[3*e+0];return 2097152&d?this._combined[e]:2097151&d?(0,u.stringFromCodePoint)(2097151&d):""}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,d){return m=3*e,d.content=this._data[m+0],d.fg=this._data[m+1],d.bg=this._data[m+2],2097152&d.content&&(d.combinedData=this._combined[e]),268435456&d.bg&&(d.extended=this._extendedAttrs[e]),d}setCell(e,d){2097152&d.content&&(this._combined[e]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[e]=d.extended),this._data[3*e+0]=d.content,this._data[3*e+1]=d.fg,this._data[3*e+2]=d.bg}setCellFromCodePoint(e,d,f,s,g,L){268435456&g&&(this._extendedAttrs[e]=L),this._data[3*e+0]=d|f<<22,this._data[3*e+1]=s,this._data[3*e+2]=g}addCodepointToCell(e,d){let f=this._data[3*e+0];2097152&f?this._combined[e]+=(0,u.stringFromCodePoint)(d):(2097151&f?(this._combined[e]=(0,u.stringFromCodePoint)(2097151&f)+(0,u.stringFromCodePoint)(d),f&=-2097152,f|=2097152):f=d|4194304,this._data[3*e+0]=f)}insertCells(e,d,f,s){if((e%=this.length)&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new o.ExtendedAttrs),d<this.length-e){let g=new a.CellData;for(let L=this.length-e-d-1;L>=0;--L)this.setCell(e+d+L,this.loadCell(e+L,g));for(let L=0;L<d;++L)this.setCell(e+L,f)}else for(let g=e;g<this.length;++g)this.setCell(g,f);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new o.ExtendedAttrs)}deleteCells(e,d,f,s){if(e%=this.length,d<this.length-e){let g=new a.CellData;for(let L=0;L<this.length-e-d;++L)this.setCell(e+L,this.loadCell(e+d+L,g));for(let L=this.length-d;L<this.length;++L)this.setCell(L,f)}else for(let g=e;g<this.length;++g)this.setCell(g,f);e&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new o.ExtendedAttrs),this.getWidth(e)!==0||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new o.ExtendedAttrs)}replaceCells(e,d,f,s,g=!1){if(g)for(e&&this.getWidth(e-1)===2&&!this.isProtected(e-1)&&this.setCellFromCodePoint(e-1,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new o.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new o.ExtendedAttrs);e<d&&e<this.length;)this.isProtected(e)||this.setCell(e,f),e++;else for(e&&this.getWidth(e-1)===2&&this.setCellFromCodePoint(e-1,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new o.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new o.ExtendedAttrs);e<d&&e<this.length;)this.setCell(e++,f)}resize(e,d){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let f=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*f)this._data=new Uint32Array(this._data.buffer,0,f);else{let s=new Uint32Array(f);s.set(this._data),this._data=s}for(let s=this.length;s<e;++s)this.setCell(s,d)}else{this._data=this._data.subarray(0,f);let s=Object.keys(this._combined);for(let L=0;L<s.length;L++){let b=parseInt(s[L],10);b>=e&&delete this._combined[b]}let g=Object.keys(this._extendedAttrs);for(let L=0;L<g.length;L++){let b=parseInt(g[L],10);b>=e&&delete this._extendedAttrs[b]}}return this.length=e,4*f*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,d=!1){if(d)for(let f=0;f<this.length;++f)this.isProtected(f)||this.setCell(f,e);else{this._combined={},this._extendedAttrs={};for(let f=0;f<this.length;++f)this.setCell(f,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(let d in e._combined)this._combined[d]=e._combined[d];this._extendedAttrs={};for(let d in e._extendedAttrs)this._extendedAttrs[d]=e._extendedAttrs[d];this.isWrapped=e.isWrapped}clone(){let e=new p(0);e._data=new Uint32Array(this._data),e.length=this.length;for(let d in this._combined)e._combined[d]=this._combined[d];for(let d in this._extendedAttrs)e._extendedAttrs[d]=this._extendedAttrs[d];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,d,f,s,g){let L=e._data;if(g)for(let R=s-1;R>=0;R--){for(let E=0;E<3;E++)this._data[3*(f+R)+E]=L[3*(d+R)+E];268435456&L[3*(d+R)+2]&&(this._extendedAttrs[f+R]=e._extendedAttrs[d+R])}else for(let R=0;R<s;R++){for(let E=0;E<3;E++)this._data[3*(f+R)+E]=L[3*(d+R)+E];268435456&L[3*(d+R)+2]&&(this._extendedAttrs[f+R]=e._extendedAttrs[d+R])}let b=Object.keys(e._combined);for(let R=0;R<b.length;R++){let E=parseInt(b[R],10);E>=d&&(this._combined[E-d+f]=e._combined[E])}}translateToString(e=!1,d=0,f=this.length){e&&(f=Math.min(f,this.getTrimmedLength()));let s="";for(;d<f;){let g=this._data[3*d+0],L=2097151&g;s+=2097152&g?this._combined[d]:L?(0,u.stringFromCodePoint)(L):h.WHITESPACE_CELL_CHAR,d+=g>>22||1}return s}}t.BufferLine=p},4841:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(n,u){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return u*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(y,t)=>{function n(u,h,a){if(h===u.length-1)return u[h].getTrimmedLength();let o=!u[h].hasContent(a-1)&&u[h].getWidth(a-1)===1,m=u[h+1].getWidth(0)===2;return o&&m?a-1:a}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(u,h,a,o,m){let p=[];for(let i=0;i<u.length-1;i++){let e=i,d=u.get(++e);if(!d.isWrapped)continue;let f=[u.get(i)];for(;e<u.length&&d.isWrapped;)f.push(d),d=u.get(++e);if(o>=i&&o<e){i+=f.length-1;continue}let s=0,g=n(f,s,h),L=1,b=0;for(;L<f.length;){let E=n(f,L,h),w=E-b,k=a-g,M=Math.min(w,k);f[s].copyCellsFrom(f[L],b,g,M,!1),g+=M,g===a&&(s++,g=0),b+=M,b===E&&(L++,b=0),g===0&&s!==0&&f[s-1].getWidth(a-1)===2&&(f[s].copyCellsFrom(f[s-1],a-1,g++,1,!1),f[s-1].setCell(a-1,m))}f[s].replaceCells(g,a,m);let R=0;for(let E=f.length-1;E>0&&(E>s||f[E].getTrimmedLength()===0);E--)R++;R>0&&(p.push(i+f.length-R),p.push(R)),i+=f.length-1}return p},t.reflowLargerCreateNewLayout=function(u,h){let a=[],o=0,m=h[o],p=0;for(let i=0;i<u.length;i++)if(m===i){let e=h[++o];u.onDeleteEmitter.fire({index:i-p,amount:e}),i+=e-1,p+=e,m=h[++o]}else a.push(i);return{layout:a,countRemoved:p}},t.reflowLargerApplyNewLayout=function(u,h){let a=[];for(let o=0;o<h.length;o++)a.push(u.get(h[o]));for(let o=0;o<a.length;o++)u.set(o,a[o]);u.length=h.length},t.reflowSmallerGetNewLineLengths=function(u,h,a){let o=[],m=u.map((d,f)=>n(u,f,h)).reduce((d,f)=>d+f),p=0,i=0,e=0;for(;e<m;){if(m-e<a){o.push(m-e);break}p+=a;let d=n(u,i,h);p>d&&(p-=d,i++);let f=u[i].getWidth(p-1)===2;f&&p--;let s=f?a-1:a;o.push(s),e+=s}return o},t.getWrappedLineTrimmedLength=n},5295:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;let u=n(9092),h=n(8460),a=n(844);class o extends a.Disposable{constructor(p,i){super(),this._optionsService=p,this._bufferService=i,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(p){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(p),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(p,i){this._normal.resize(p,i),this._alt.resize(p,i),this.setupTabStops(p)}setupTabStops(p){this._normal.setupTabStops(p),this._alt.setupTabStops(p)}}t.BufferSet=o},511:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;let u=n(482),h=n(643),a=n(3734);class o extends a.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new a.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let i=new o;return i.setFromCharData(p),i}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[h.CHAR_DATA_ATTR_INDEX],this.bg=0;let i=!1;if(p[h.CHAR_DATA_CHAR_INDEX].length>2)i=!0;else if(p[h.CHAR_DATA_CHAR_INDEX].length===2){let e=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=e&&e<=56319){let d=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(e-55296)+d-56320+65536|p[h.CHAR_DATA_WIDTH_INDEX]<<22:i=!0}else i=!0}else this.content=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[h.CHAR_DATA_WIDTH_INDEX]<<22;i&&(this.combinedData=p[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[h.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},643:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;let u=n(8460),h=n(844);class a{constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=a._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,h.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}t.Marker=a,a._nextId=1},7116:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},t.CHARSETS.A={"#":"\xA3"},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},t.CHARSETS.C=t.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},t.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},t.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},t.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},t.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},t.CHARSETS.E=t.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},t.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},t.CHARSETS.H=t.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},t.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(y,t)=>{var n,u;Object.defineProperty(t,"__esModule",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL="\x7F"}(n=t.C0||(t.C0={})),(u=t.C1||(t.C1={})).PAD="\x80",u.HOP="\x81",u.BPH="\x82",u.NBH="\x83",u.IND="\x84",u.NEL="\x85",u.SSA="\x86",u.ESA="\x87",u.HTS="\x88",u.HTJ="\x89",u.VTS="\x8A",u.PLD="\x8B",u.PLU="\x8C",u.RI="\x8D",u.SS2="\x8E",u.SS3="\x8F",u.DCS="\x90",u.PU1="\x91",u.PU2="\x92",u.STS="\x93",u.CCH="\x94",u.MW="\x95",u.SPA="\x96",u.EPA="\x97",u.SOS="\x98",u.SGCI="\x99",u.SCI="\x9A",u.CSI="\x9B",u.ST="\x9C",u.OSC="\x9D",u.PM="\x9E",u.APC="\x9F",(t.C1_ESCAPED||(t.C1_ESCAPED={})).ST=`${n.ESC}\\`},7399:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;let u=n(2584),h={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(a,o,m,p){let i={type:0,cancel:!1,key:void 0},e=(a.shiftKey?1:0)|(a.altKey?2:0)|(a.ctrlKey?4:0)|(a.metaKey?8:0);switch(a.keyCode){case 0:a.key==="UIKeyInputUpArrow"?i.key=o?u.C0.ESC+"OA":u.C0.ESC+"[A":a.key==="UIKeyInputLeftArrow"?i.key=o?u.C0.ESC+"OD":u.C0.ESC+"[D":a.key==="UIKeyInputRightArrow"?i.key=o?u.C0.ESC+"OC":u.C0.ESC+"[C":a.key==="UIKeyInputDownArrow"&&(i.key=o?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:if(a.altKey){i.key=u.C0.ESC+u.C0.DEL;break}i.key=u.C0.DEL;break;case 9:if(a.shiftKey){i.key=u.C0.ESC+"[Z";break}i.key=u.C0.HT,i.cancel=!0;break;case 13:i.key=a.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,i.cancel=!0;break;case 27:i.key=u.C0.ESC,a.altKey&&(i.key=u.C0.ESC+u.C0.ESC),i.cancel=!0;break;case 37:if(a.metaKey)break;e?(i.key=u.C0.ESC+"[1;"+(e+1)+"D",i.key===u.C0.ESC+"[1;3D"&&(i.key=u.C0.ESC+(m?"b":"[1;5D"))):i.key=o?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(a.metaKey)break;e?(i.key=u.C0.ESC+"[1;"+(e+1)+"C",i.key===u.C0.ESC+"[1;3C"&&(i.key=u.C0.ESC+(m?"f":"[1;5C"))):i.key=o?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(a.metaKey)break;e?(i.key=u.C0.ESC+"[1;"+(e+1)+"A",m||i.key!==u.C0.ESC+"[1;3A"||(i.key=u.C0.ESC+"[1;5A")):i.key=o?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(a.metaKey)break;e?(i.key=u.C0.ESC+"[1;"+(e+1)+"B",m||i.key!==u.C0.ESC+"[1;3B"||(i.key=u.C0.ESC+"[1;5B")):i.key=o?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:a.shiftKey||a.ctrlKey||(i.key=u.C0.ESC+"[2~");break;case 46:i.key=e?u.C0.ESC+"[3;"+(e+1)+"~":u.C0.ESC+"[3~";break;case 36:i.key=e?u.C0.ESC+"[1;"+(e+1)+"H":o?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:i.key=e?u.C0.ESC+"[1;"+(e+1)+"F":o?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:a.shiftKey?i.type=2:a.ctrlKey?i.key=u.C0.ESC+"[5;"+(e+1)+"~":i.key=u.C0.ESC+"[5~";break;case 34:a.shiftKey?i.type=3:a.ctrlKey?i.key=u.C0.ESC+"[6;"+(e+1)+"~":i.key=u.C0.ESC+"[6~";break;case 112:i.key=e?u.C0.ESC+"[1;"+(e+1)+"P":u.C0.ESC+"OP";break;case 113:i.key=e?u.C0.ESC+"[1;"+(e+1)+"Q":u.C0.ESC+"OQ";break;case 114:i.key=e?u.C0.ESC+"[1;"+(e+1)+"R":u.C0.ESC+"OR";break;case 115:i.key=e?u.C0.ESC+"[1;"+(e+1)+"S":u.C0.ESC+"OS";break;case 116:i.key=e?u.C0.ESC+"[15;"+(e+1)+"~":u.C0.ESC+"[15~";break;case 117:i.key=e?u.C0.ESC+"[17;"+(e+1)+"~":u.C0.ESC+"[17~";break;case 118:i.key=e?u.C0.ESC+"[18;"+(e+1)+"~":u.C0.ESC+"[18~";break;case 119:i.key=e?u.C0.ESC+"[19;"+(e+1)+"~":u.C0.ESC+"[19~";break;case 120:i.key=e?u.C0.ESC+"[20;"+(e+1)+"~":u.C0.ESC+"[20~";break;case 121:i.key=e?u.C0.ESC+"[21;"+(e+1)+"~":u.C0.ESC+"[21~";break;case 122:i.key=e?u.C0.ESC+"[23;"+(e+1)+"~":u.C0.ESC+"[23~";break;case 123:i.key=e?u.C0.ESC+"[24;"+(e+1)+"~":u.C0.ESC+"[24~";break;default:if(!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)if(m&&!p||!a.altKey||a.metaKey)!m||a.altKey||a.ctrlKey||a.shiftKey||!a.metaKey?a.key&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&a.keyCode>=48&&a.key.length===1?i.key=a.key:a.key&&a.ctrlKey&&(a.key==="_"&&(i.key=u.C0.US),a.key==="@"&&(i.key=u.C0.NUL)):a.keyCode===65&&(i.type=1);else{let d=h[a.keyCode],f=d==null?void 0:d[a.shiftKey?1:0];if(f)i.key=u.C0.ESC+f;else if(a.keyCode>=65&&a.keyCode<=90){let s=a.ctrlKey?a.keyCode-64:a.keyCode+32,g=String.fromCharCode(s);a.shiftKey&&(g=g.toUpperCase()),i.key=u.C0.ESC+g}else if(a.keyCode===32)i.key=u.C0.ESC+(a.ctrlKey?u.C0.NUL:" ");else if(a.key==="Dead"&&a.code.startsWith("Key")){let s=a.code.slice(3,4);a.shiftKey||(s=s.toLowerCase()),i.key=u.C0.ESC+s,i.cancel=!0}}else a.keyCode>=65&&a.keyCode<=90?i.key=String.fromCharCode(a.keyCode-64):a.keyCode===32?i.key=u.C0.NUL:a.keyCode>=51&&a.keyCode<=55?i.key=String.fromCharCode(a.keyCode-51+27):a.keyCode===56?i.key=u.C0.DEL:a.keyCode===219?i.key=u.C0.ESC:a.keyCode===220?i.key=u.C0.FS:a.keyCode===221&&(i.key=u.C0.GS)}return i}},482:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},t.utf32ToString=function(n,u=0,h=n.length){let a="";for(let o=u;o<h;++o){let m=n[o];m>65535?(m-=65536,a+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):a+=String.fromCharCode(m)}return a},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,u){let h=n.length;if(!h)return 0;let a=0,o=0;if(this._interim){let m=n.charCodeAt(o++);56320<=m&&m<=57343?u[a++]=1024*(this._interim-55296)+m-56320+65536:(u[a++]=this._interim,u[a++]=m),this._interim=0}for(let m=o;m<h;++m){let p=n.charCodeAt(m);if(55296<=p&&p<=56319){if(++m>=h)return this._interim=p,a;let i=n.charCodeAt(m);56320<=i&&i<=57343?u[a++]=1024*(p-55296)+i-56320+65536:(u[a++]=p,u[a++]=i)}else p!==65279&&(u[a++]=p)}return a}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,u){let h=n.length;if(!h)return 0;let a,o,m,p,i=0,e=0,d=0;if(this.interim[0]){let g=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let b,R=0;for(;(b=63&this.interim[++R])&&R<4;)L<<=6,L|=b;let E=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=E-R;for(;d<w;){if(d>=h)return 0;if(b=n[d++],(192&b)!=128){d--,g=!0;break}this.interim[R++]=b,L<<=6,L|=63&b}g||(E===2?L<128?d--:u[i++]=L:E===3?L<2048||L>=55296&&L<=57343||L===65279||(u[i++]=L):L<65536||L>1114111||(u[i++]=L)),this.interim.fill(0)}let f=h-4,s=d;for(;s<h;){for(;!(!(s<f)||128&(a=n[s])||128&(o=n[s+1])||128&(m=n[s+2])||128&(p=n[s+3]));)u[i++]=a,u[i++]=o,u[i++]=m,u[i++]=p,s+=4;if(a=n[s++],a<128)u[i++]=a;else if((224&a)==192){if(s>=h)return this.interim[0]=a,i;if(o=n[s++],(192&o)!=128){s--;continue}if(e=(31&a)<<6|63&o,e<128){s--;continue}u[i++]=e}else if((240&a)==224){if(s>=h)return this.interim[0]=a,i;if(o=n[s++],(192&o)!=128){s--;continue}if(s>=h)return this.interim[0]=a,this.interim[1]=o,i;if(m=n[s++],(192&m)!=128){s--;continue}if(e=(15&a)<<12|(63&o)<<6|63&m,e<2048||e>=55296&&e<=57343||e===65279)continue;u[i++]=e}else if((248&a)==240){if(s>=h)return this.interim[0]=a,i;if(o=n[s++],(192&o)!=128){s--;continue}if(s>=h)return this.interim[0]=a,this.interim[1]=o,i;if(m=n[s++],(192&m)!=128){s--;continue}if(s>=h)return this.interim[0]=a,this.interim[1]=o,this.interim[2]=m,i;if(p=n[s++],(192&p)!=128){s--;continue}if(e=(7&a)<<18|(63&o)<<12|(63&m)<<6|63&p,e<65536||e>1114111)continue;u[i++]=e}}return i}}},225:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;let n=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],h;t.UnicodeV6=class{constructor(){if(this.version="6",!h){h=new Uint8Array(65536),h.fill(1),h[0]=0,h.fill(0,1,32),h.fill(0,127,160),h.fill(2,4352,4448),h[9001]=2,h[9002]=2,h.fill(2,11904,42192),h[12351]=1,h.fill(2,44032,55204),h.fill(2,63744,64256),h.fill(2,65040,65050),h.fill(2,65072,65136),h.fill(2,65280,65377),h.fill(2,65504,65511);for(let a=0;a<n.length;++a)h.fill(0,n[a][0],n[a][1]+1)}}wcwidth(a){return a<32?0:a<127?1:a<65536?h[a]:function(o,m){let p,i=0,e=m.length-1;if(o<m[0][0]||o>m[e][1])return!1;for(;e>=i;)if(p=i+e>>1,o>m[p][1])i=p+1;else{if(!(o<m[p][0]))return!0;e=p-1}return!1}(a,u)?0:a>=131072&&a<=196605||a>=196608&&a<=262141?2:1}}},5981:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;let u=n(8460),h=n(844);class a extends h.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,p){if(p!==void 0&&this._syncCalls>p)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let i;for(this._isSyncWriting=!0;i=this._writeBuffer.shift();){this._action(i);let e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,p){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(p),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(p)}_innerWrite(m=0,p=!0){let i=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let e=this._writeBuffer[this._bufferOffset],d=this._action(e,p);if(d){let s=g=>Date.now()-i>=12?setTimeout(()=>this._innerWrite(0,g)):this._innerWrite(i,g);return void d.catch(g=>(queueMicrotask(()=>{throw g}),Promise.resolve(!1))).then(s)}let f=this._callbacks[this._bufferOffset];if(f&&f(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-i>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}t.WriteBuffer=a},5941:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toRgbString=t.parseColor=void 0;let n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function h(a,o){let m=a.toString(16),p=m.length<2?"0"+m:m;switch(o){case 4:return m[0];case 8:return p;case 12:return(p+p).slice(0,3);default:return p+p}}t.parseColor=function(a){if(!a)return;let o=a.toLowerCase();if(o.indexOf("rgb:")===0){o=o.slice(4);let m=n.exec(o);if(m){let p=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/p*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/p*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/p*255)]}}else if(o.indexOf("#")===0&&(o=o.slice(1),u.exec(o)&&[3,6,9,12].includes(o.length))){let m=o.length/3,p=[0,0,0];for(let i=0;i<3;++i){let e=parseInt(o.slice(m*i,m*i+m),16);p[i]=m===1?e<<4:m===2?e:m===3?e>>4:e>>8}return p}},t.toRgbString=function(a,o=16){let[m,p,i]=a;return`rgb:${h(m,o)}/${h(p,o)}/${h(i,o)}`}},5770:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;let u=n(482),h=n(8742),a=n(5770),o=[];t.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=o,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}registerHandler(p,i){this._handlers[p]===void 0&&(this._handlers[p]=[]);let e=this._handlers[p];return e.push(i),{dispose:()=>{let d=e.indexOf(i);d!==-1&&e.splice(d,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}reset(){if(this._active.length)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].unhook(!1);this._stack.paused=!1,this._active=o,this._ident=0}hook(p,i){if(this.reset(),this._ident=p,this._active=this._handlers[p]||o,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].hook(i);else this._handlerFb(this._ident,"HOOK",i)}put(p,i,e){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(p,i,e);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(p,i,e))}unhook(p,i=!0){if(this._active.length){let e=!1,d=this._active.length-1,f=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,e=i,f=this._stack.fallThrough,this._stack.paused=!1),!f&&e===!1){for(;d>=0&&(e=this._active[d].unhook(p),e!==!0);d--)if(e instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,e;d--}for(;d>=0;d--)if(e=this._active[d].unhook(!1),e instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,e}else this._handlerFb(this._ident,"UNHOOK",p);this._active=o,this._ident=0}};let m=new h.Params;m.addParam(0),t.DcsHandler=class{constructor(p){this._handler=p,this._data="",this._params=m,this._hitLimit=!1}hook(p){this._params=p.length>1||p.params[0]?p.clone():m,this._data="",this._hitLimit=!1}put(p,i,e){this._hitLimit||(this._data+=(0,u.utf32ToString)(p,i,e),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(p){let i=!1;if(this._hitLimit)i=!1;else if(p&&(i=this._handler(this._data,this._params),i instanceof Promise))return i.then(e=>(this._params=m,this._data="",this._hitLimit=!1,e));return this._params=m,this._data="",this._hitLimit=!1,i}}},2015:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;let u=n(844),h=n(8742),a=n(6242),o=n(6351);class m{constructor(d){this.table=new Uint8Array(d)}setDefault(d,f){this.table.fill(d<<4|f)}add(d,f,s,g){this.table[f<<8|d]=s<<4|g}addMany(d,f,s,g){for(let L=0;L<d.length;L++)this.table[f<<8|d[L]]=s<<4|g}}t.TransitionTable=m;let p=160;t.VT500_TRANSITION_TABLE=function(){let e=new m(4095),d=Array.apply(null,Array(256)).map((R,E)=>E),f=(R,E)=>d.slice(R,E),s=f(32,127),g=f(0,24);g.push(25),g.push.apply(g,f(28,32));let L=f(0,14),b;for(b in e.setDefault(1,0),e.addMany(s,0,2,0),L)e.addMany([24,26,153,154],b,3,0),e.addMany(f(128,144),b,3,0),e.addMany(f(144,152),b,3,0),e.add(156,b,0,0),e.add(27,b,11,1),e.add(157,b,4,8),e.addMany([152,158,159],b,0,7),e.add(155,b,11,3),e.add(144,b,11,9);return e.addMany(g,0,3,0),e.addMany(g,1,3,1),e.add(127,1,0,1),e.addMany(g,8,0,8),e.addMany(g,3,3,3),e.add(127,3,0,3),e.addMany(g,4,3,4),e.add(127,4,0,4),e.addMany(g,6,3,6),e.addMany(g,5,3,5),e.add(127,5,0,5),e.addMany(g,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(s,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(f(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(s,7,0,7),e.addMany(g,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(f(64,127),3,7,0),e.addMany(f(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(f(48,60),4,8,4),e.addMany(f(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(f(32,64),6,0,6),e.add(127,6,0,6),e.addMany(f(64,127),6,0,0),e.addMany(f(32,48),3,9,5),e.addMany(f(32,48),5,9,5),e.addMany(f(48,64),5,0,6),e.addMany(f(64,127),5,7,0),e.addMany(f(32,48),4,9,5),e.addMany(f(32,48),1,9,2),e.addMany(f(32,48),2,9,2),e.addMany(f(48,127),2,10,0),e.addMany(f(48,80),1,10,0),e.addMany(f(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(f(96,127),1,10,0),e.add(80,1,11,9),e.addMany(g,9,0,9),e.add(127,9,0,9),e.addMany(f(28,32),9,0,9),e.addMany(f(32,48),9,9,12),e.addMany(f(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(g,11,0,11),e.addMany(f(32,128),11,0,11),e.addMany(f(28,32),11,0,11),e.addMany(g,10,0,10),e.add(127,10,0,10),e.addMany(f(28,32),10,0,10),e.addMany(f(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(f(32,48),10,9,12),e.addMany(g,12,0,12),e.add(127,12,0,12),e.addMany(f(28,32),12,0,12),e.addMany(f(32,48),12,9,12),e.addMany(f(48,64),12,0,11),e.addMany(f(64,127),12,12,13),e.addMany(f(64,127),10,12,13),e.addMany(f(64,127),9,12,13),e.addMany(g,13,13,13),e.addMany(s,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(p,0,2,0),e.add(p,8,5,8),e.add(p,6,0,6),e.add(p,11,0,11),e.add(p,13,13,13),e}();class i extends u.Disposable{constructor(d=t.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new h.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(f,s,g)=>{},this._executeHandlerFb=f=>{},this._csiHandlerFb=(f,s)=>{},this._escHandlerFb=f=>{},this._errorHandlerFb=f=>f,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new a.OscParser),this._dcsParser=this.register(new o.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,f=[64,126]){let s=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(s=d.prefix.charCodeAt(0),s&&60>s||s>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let L=0;L<d.intermediates.length;++L){let b=d.intermediates.charCodeAt(L);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");s<<=8,s|=b}}if(d.final.length!==1)throw new Error("final must be a single byte");let g=d.final.charCodeAt(0);if(f[0]>g||g>f[1])throw new Error(`final must be in range ${f[0]} .. ${f[1]}`);return s<<=8,s|=g,s}identToString(d){let f=[];for(;d;)f.push(String.fromCharCode(255&d)),d>>=8;return f.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,f){let s=this._identifier(d,[48,126]);this._escHandlers[s]===void 0&&(this._escHandlers[s]=[]);let g=this._escHandlers[s];return g.push(f),{dispose:()=>{let L=g.indexOf(f);L!==-1&&g.splice(L,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,f){this._executeHandlers[d.charCodeAt(0)]=f}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,f){let s=this._identifier(d);this._csiHandlers[s]===void 0&&(this._csiHandlers[s]=[]);let g=this._csiHandlers[s];return g.push(f),{dispose:()=>{let L=g.indexOf(f);L!==-1&&g.splice(L,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,f){return this._dcsParser.registerHandler(this._identifier(d),f)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,f){return this._oscParser.registerHandler(d,f)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,f,s,g,L){this._parseStack.state=d,this._parseStack.handlers=f,this._parseStack.handlerPos=s,this._parseStack.transition=g,this._parseStack.chunkPos=L}parse(d,f,s){let g,L=0,b=0,R=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,R=this._parseStack.chunkPos+1;else{if(s===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let E=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(s===!1&&w>-1){for(;w>=0&&(g=E[w](this._params),g!==!0);w--)if(g instanceof Promise)return this._parseStack.handlerPos=w,g}this._parseStack.handlers=[];break;case 4:if(s===!1&&w>-1){for(;w>=0&&(g=E[w](),g!==!0);w--)if(g instanceof Promise)return this._parseStack.handlerPos=w,g}this._parseStack.handlers=[];break;case 6:if(L=d[this._parseStack.chunkPos],g=this._dcsParser.unhook(L!==24&&L!==26,s),g)return g;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(L=d[this._parseStack.chunkPos],g=this._oscParser.end(L!==24&&L!==26,s),g)return g;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,R=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let E=R;E<f;++E){switch(L=d[E],b=this._transitions.table[this.currentState<<8|(L<160?L:p)],b>>4){case 2:for(let P=E+1;;++P){if(P>=f||(L=d[P])<32||L>126&&L<p){this._printHandler(d,E,P),E=P-1;break}if(++P>=f||(L=d[P])<32||L>126&&L<p){this._printHandler(d,E,P),E=P-1;break}if(++P>=f||(L=d[P])<32||L>126&&L<p){this._printHandler(d,E,P),E=P-1;break}if(++P>=f||(L=d[P])<32||L>126&&L<p){this._printHandler(d,E,P),E=P-1;break}}break;case 3:this._executeHandlers[L]?this._executeHandlers[L]():this._executeHandlerFb(L),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:E,code:L,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let w=this._csiHandlers[this._collect<<8|L],k=w?w.length-1:-1;for(;k>=0&&(g=w[k](this._params),g!==!0);k--)if(g instanceof Promise)return this._preserveStack(3,w,k,b,E),g;k<0&&this._csiHandlerFb(this._collect<<8|L,this._params),this.precedingCodepoint=0;break;case 8:do switch(L){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(L-48)}while(++E<f&&(L=d[E])>47&&L<60);E--;break;case 9:this._collect<<=8,this._collect|=L;break;case 10:let M=this._escHandlers[this._collect<<8|L],D=M?M.length-1:-1;for(;D>=0&&(g=M[D](),g!==!0);D--)if(g instanceof Promise)return this._preserveStack(4,M,D,b,E),g;D<0&&this._escHandlerFb(this._collect<<8|L),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|L,this._params);break;case 13:for(let P=E+1;;++P)if(P>=f||(L=d[P])===24||L===26||L===27||L>127&&L<p){this._dcsParser.put(d,E,P),E=P-1;break}break;case 14:if(g=this._dcsParser.unhook(L!==24&&L!==26),g)return this._preserveStack(6,[],0,b,E),g;L===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let P=E+1;;P++)if(P>=f||(L=d[P])<32||L>127&&L<p){this._oscParser.put(d,E,P),E=P-1;break}break;case 6:if(g=this._oscParser.end(L!==24&&L!==26),g)return this._preserveStack(5,[],0,b,E),g;L===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}}}t.EscapeSequenceParser=i},6242:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;let u=n(5770),h=n(482),a=[];t.OscParser=class{constructor(){this._state=0,this._active=a,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(o,m){this._handlers[o]===void 0&&(this._handlers[o]=[]);let p=this._handlers[o];return p.push(m),{dispose:()=>{let i=p.indexOf(m);i!==-1&&p.splice(i,1)}}}clearHandler(o){this._handlers[o]&&delete this._handlers[o]}setHandlerFallback(o){this._handlerFb=o}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=a}reset(){if(this._state===2)for(let o=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;o>=0;--o)this._active[o].end(!1);this._stack.paused=!1,this._active=a,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||a,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].start();else this._handlerFb(this._id,"START")}_put(o,m,p){if(this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].put(o,m,p);else this._handlerFb(this._id,"PUT",(0,h.utf32ToString)(o,m,p))}start(){this.reset(),this._state=1}put(o,m,p){if(this._state!==3){if(this._state===1)for(;m<p;){let i=o[m++];if(i===59){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+i-48}this._state===2&&p-m>0&&this._put(o,m,p)}}end(o,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let p=!1,i=this._active.length-1,e=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,p=m,e=this._stack.fallThrough,this._stack.paused=!1),!e&&p===!1){for(;i>=0&&(p=this._active[i].end(o),p!==!0);i--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,p;i--}for(;i>=0;i--)if(p=this._active[i].end(!1),p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,p}else this._handlerFb(this._id,"END",o);this._active=a,this._id=-1,this._state=0}}},t.OscHandler=class{constructor(o){this._handler=o,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(o,m,p){this._hitLimit||(this._data+=(0,h.utf32ToString)(o,m,p),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(o){let m=!1;if(this._hitLimit)m=!1;else if(o&&(m=this._handler(this._data),m instanceof Promise))return m.then(p=>(this._data="",this._hitLimit=!1,p));return this._data="",this._hitLimit=!1,m}}},8742:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;let n=2147483647;class u{constructor(a=32,o=32){if(this.maxLength=a,this.maxSubParamsLength=o,o>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(a),this.length=0,this._subParams=new Int32Array(o),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(a),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(a){let o=new u;if(!a.length)return o;for(let m=Array.isArray(a[0])?1:0;m<a.length;++m){let p=a[m];if(Array.isArray(p))for(let i=0;i<p.length;++i)o.addSubParam(p[i]);else o.addParam(p)}return o}clone(){let a=new u(this.maxLength,this.maxSubParamsLength);return a.params.set(this.params),a.length=this.length,a._subParams.set(this._subParams),a._subParamsLength=this._subParamsLength,a._subParamsIdx.set(this._subParamsIdx),a._rejectDigits=this._rejectDigits,a._rejectSubDigits=this._rejectSubDigits,a._digitIsSub=this._digitIsSub,a}toArray(){let a=[];for(let o=0;o<this.length;++o){a.push(this.params[o]);let m=this._subParamsIdx[o]>>8,p=255&this._subParamsIdx[o];p-m>0&&a.push(Array.prototype.slice.call(this._subParams,m,p))}return a}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(a){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=a>n?n:a}}addSubParam(a){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=a>n?n:a,this._subParamsIdx[this.length-1]++}}hasSubParams(a){return(255&this._subParamsIdx[a])-(this._subParamsIdx[a]>>8)>0}getSubParams(a){let o=this._subParamsIdx[a]>>8,m=255&this._subParamsIdx[a];return m-o>0?this._subParams.subarray(o,m):null}getSubParamsAll(){let a={};for(let o=0;o<this.length;++o){let m=this._subParamsIdx[o]>>8,p=255&this._subParamsIdx[o];p-m>0&&(a[o]=this._subParams.slice(m,p))}return a}addDigit(a){let o;if(this._rejectDigits||!(o=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let m=this._digitIsSub?this._subParams:this.params,p=m[o-1];m[o-1]=~p?Math.min(10*p+a,n):a}}t.Params=u},5741:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0,t.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,u){let h={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(h),u.dispose=()=>this._wrappedAddonDispose(h),u.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let u=-1;for(let h=0;h<this._addons.length;h++)if(this._addons[h]===n){u=h;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(u,1)}}},8771:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;let u=n(3785),h=n(511);t.BufferApiView=class{constructor(a,o){this._buffer=a,this.type=o}init(a){return this._buffer=a,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(a){let o=this._buffer.lines.get(a);if(o)return new u.BufferLineApiView(o)}getNullCell(){return new h.CellData}}},3785:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;let u=n(511);t.BufferLineApiView=class{constructor(h){this._line=h}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(h,a){if(!(h<0||h>=this._line.length))return a?(this._line.loadCell(h,a),a):this._line.loadCell(h,new u.CellData)}translateToString(h,a,o){return this._line.translateToString(h,a,o)}}},8285:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;let u=n(8771),h=n(8460);t.BufferNamespaceApi=class{constructor(a){this._core=a,this._onBufferChange=new h.EventEmitter,this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}},7975:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0,t.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,u){return this._core.registerCsiHandler(n,h=>u(h.toArray()))}addCsiHandler(n,u){return this.registerCsiHandler(n,u)}registerDcsHandler(n,u){return this._core.registerDcsHandler(n,(h,a)=>u(h,a.toArray()))}addDcsHandler(n,u){return this.registerDcsHandler(n,u)}registerEscHandler(n,u){return this._core.registerEscHandler(n,u)}addEscHandler(n,u){return this.registerEscHandler(n,u)}registerOscHandler(n,u){return this._core.registerOscHandler(n,u)}addOscHandler(n,u){return this.registerOscHandler(n,u)}}},7090:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0,t.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(y,t,n){var u=this&&this.__decorate||function(e,d,f,s){var g,L=arguments.length,b=L<3?d:s===null?s=Object.getOwnPropertyDescriptor(d,f):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,d,f,s);else for(var R=e.length-1;R>=0;R--)(g=e[R])&&(b=(L<3?g(b):L>3?g(d,f,b):g(d,f))||b);return L>3&&b&&Object.defineProperty(d,f,b),b},h=this&&this.__param||function(e,d){return function(f,s){d(f,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;let a=n(2585),o=n(5295),m=n(8460),p=n(844);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;let i=class extends p.Disposable{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new m.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new m.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,t.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,t.MINIMUM_ROWS),this.buffers=this.register(new o.BufferSet(e,this))}get buffer(){return this.buffers.active}resize(e,d){this.cols=e,this.rows=d,this.buffers.resize(e,d),this._onResize.fire({cols:e,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,d=!1){let f=this.buffer,s;s=this._cachedBlankLine,s&&s.length===this.cols&&s.getFg(0)===e.fg&&s.getBg(0)===e.bg||(s=f.getBlankLine(e,d),this._cachedBlankLine=s),s.isWrapped=d;let g=f.ybase+f.scrollTop,L=f.ybase+f.scrollBottom;if(f.scrollTop===0){let b=f.lines.isFull;L===f.lines.length-1?b?f.lines.recycle().copyFrom(s):f.lines.push(s.clone()):f.lines.splice(L+1,0,s.clone()),b?this.isUserScrolling&&(f.ydisp=Math.max(f.ydisp-1,0)):(f.ybase++,this.isUserScrolling||f.ydisp++)}else{let b=L-g+1;f.lines.shiftElements(g+1,b-1,-1),f.lines.set(L,s.clone())}this.isUserScrolling||(f.ydisp=f.ybase),this._onScroll.fire(f.ydisp)}scrollLines(e,d,f){let s=this.buffer;if(e<0){if(s.ydisp===0)return;this.isUserScrolling=!0}else e+s.ydisp>=s.ybase&&(this.isUserScrolling=!1);let g=s.ydisp;s.ydisp=Math.max(Math.min(s.ydisp+e,s.ybase),0),g!==s.ydisp&&(d||this._onScroll.fire(s.ydisp))}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this.buffer.ydisp)}scrollToBottom(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)}scrollToLine(e){let d=e-this.buffer.ydisp;d!==0&&this.scrollLines(d)}};i=u([h(0,a.IOptionsService)],i),t.BufferService=i},7994:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0,t.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,u){this._charsets[n]=u,this.glevel===n&&(this.charset=u)}}},1753:function(y,t,n){var u=this&&this.__decorate||function(s,g,L,b){var R,E=arguments.length,w=E<3?g:b===null?b=Object.getOwnPropertyDescriptor(g,L):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(s,g,L,b);else for(var k=s.length-1;k>=0;k--)(R=s[k])&&(w=(E<3?R(w):E>3?R(g,L,w):R(g,L))||w);return E>3&&w&&Object.defineProperty(g,L,w),w},h=this&&this.__param||function(s,g){return function(L,b){g(L,b,s)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;let a=n(2585),o=n(8460),m=n(844),p={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:s=>s.button!==4&&s.action===1&&(s.ctrl=!1,s.alt=!1,s.shift=!1,!0)},VT200:{events:19,restrict:s=>s.action!==32},DRAG:{events:23,restrict:s=>s.action!==32||s.button!==3},ANY:{events:31,restrict:s=>!0}};function i(s,g){let L=(s.ctrl?16:0)|(s.shift?4:0)|(s.alt?8:0);return s.button===4?(L|=64,L|=s.action):(L|=3&s.button,4&s.button&&(L|=64),8&s.button&&(L|=128),s.action===32?L|=32:s.action!==0||g||(L|=3)),L}let e=String.fromCharCode,d={DEFAULT:s=>{let g=[i(s,!1)+32,s.col+32,s.row+32];return g[0]>255||g[1]>255||g[2]>255?"":`\x1B[M${e(g[0])}${e(g[1])}${e(g[2])}`},SGR:s=>{let g=s.action===0&&s.button!==4?"m":"M";return`\x1B[<${i(s,!0)};${s.col};${s.row}${g}`},SGR_PIXELS:s=>{let g=s.action===0&&s.button!==4?"m":"M";return`\x1B[<${i(s,!0)};${s.x};${s.y}${g}`}},f=class extends m.Disposable{constructor(s,g){super(),this._bufferService=s,this._coreService=g,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new o.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let L of Object.keys(p))this.addProtocol(L,p[L]);for(let L of Object.keys(d))this.addEncoding(L,d[L]);this.reset()}addProtocol(s,g){this._protocols[s]=g}addEncoding(s,g){this._encodings[s]=g}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(s){if(!this._protocols[s])throw new Error(`unknown protocol "${s}"`);this._activeProtocol=s,this._onProtocolChange.fire(this._protocols[s].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(s){if(!this._encodings[s])throw new Error(`unknown encoding "${s}"`);this._activeEncoding=s}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(s){if(s.col<0||s.col>=this._bufferService.cols||s.row<0||s.row>=this._bufferService.rows||s.button===4&&s.action===32||s.button===3&&s.action!==32||s.button!==4&&(s.action===2||s.action===3)||(s.col++,s.row++,s.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,s,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(s))return!1;let g=this._encodings[this._activeEncoding](s);return g&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(g):this._coreService.triggerDataEvent(g,!0)),this._lastEvent=s,!0}explainEvents(s){return{down:!!(1&s),up:!!(2&s),drag:!!(4&s),move:!!(8&s),wheel:!!(16&s)}}_equalEvents(s,g,L){if(L){if(s.x!==g.x||s.y!==g.y)return!1}else if(s.col!==g.col||s.row!==g.row)return!1;return s.button===g.button&&s.action===g.action&&s.ctrl===g.ctrl&&s.alt===g.alt&&s.shift===g.shift}};f=u([h(0,a.IBufferService),h(1,a.ICoreService)],f),t.CoreMouseService=f},6975:function(y,t,n){var u=this&&this.__decorate||function(f,s,g,L){var b,R=arguments.length,E=R<3?s:L===null?L=Object.getOwnPropertyDescriptor(s,g):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(f,s,g,L);else for(var w=f.length-1;w>=0;w--)(b=f[w])&&(E=(R<3?b(E):R>3?b(s,g,E):b(s,g))||E);return R>3&&E&&Object.defineProperty(s,g,E),E},h=this&&this.__param||function(f,s){return function(g,L){s(g,L,f)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;let a=n(2585),o=n(8460),m=n(1439),p=n(844),i=Object.freeze({insertMode:!1}),e=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),d=class extends p.Disposable{constructor(f,s,g){super(),this._bufferService=f,this._logService=s,this._optionsService=g,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new o.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new o.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,m.clone)(i),this.decPrivateModes=(0,m.clone)(e)}reset(){this.modes=(0,m.clone)(i),this.decPrivateModes=(0,m.clone)(e)}triggerDataEvent(f,s=!1){if(this._optionsService.rawOptions.disableStdin)return;let g=this._bufferService.buffer;s&&this._optionsService.rawOptions.scrollOnUserInput&&g.ybase!==g.ydisp&&this._onRequestScrollToBottom.fire(),s&&this._onUserInput.fire(),this._logService.debug(`sending data "${f}"`,()=>f.split("").map(L=>L.charCodeAt(0))),this._onData.fire(f)}triggerBinaryEvent(f){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${f}"`,()=>f.split("").map(s=>s.charCodeAt(0))),this._onBinary.fire(f))}};d=u([h(0,a.IBufferService),h(1,a.ILogService),h(2,a.IOptionsService)],d),t.CoreService=d},9074:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecorationService=void 0;let u=n(8055),h=n(8460),a=n(844),o=n(6106),m=0,p=0;class i extends a.Disposable{constructor(){super(),this._decorations=new o.SortedList(f=>f==null?void 0:f.marker.line),this._onDecorationRegistered=this.register(new h.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new h.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,a.toDisposable)(()=>{for(let f of this._decorations.values())this._onDecorationRemoved.fire(f);this.reset()}))}get decorations(){return this._decorations.values()}registerDecoration(f){if(f.marker.isDisposed)return;let s=new e(f);if(s){let g=s.marker.onDispose(()=>s.dispose());s.onDispose(()=>{s&&(this._decorations.delete(s)&&this._onDecorationRemoved.fire(s),g.dispose())}),this._decorations.insert(s),this._onDecorationRegistered.fire(s)}return s}reset(){for(let f of this._decorations.values())f.dispose();this._decorations.clear()}*getDecorationsAtCell(f,s,g){var L,b,R;let E=0,w=0;for(let k of this._decorations.getKeyIterator(s))E=(L=k.options.x)!==null&&L!==void 0?L:0,w=E+((b=k.options.width)!==null&&b!==void 0?b:1),f>=E&&f<w&&(!g||((R=k.options.layer)!==null&&R!==void 0?R:"bottom")===g)&&(yield k)}forEachDecorationAtCell(f,s,g,L){this._decorations.forEachByKey(s,b=>{var R,E,w;m=(R=b.options.x)!==null&&R!==void 0?R:0,p=m+((E=b.options.width)!==null&&E!==void 0?E:1),f>=m&&f<p&&(!g||((w=b.options.layer)!==null&&w!==void 0?w:"bottom")===g)&&L(b)})}dispose(){for(let f of this._decorations.values())this._onDecorationRemoved.fire(f);this.reset()}}t.DecorationService=i;class e extends a.Disposable{constructor(f){super(),this.options=f,this.isDisposed=!1,this.onRenderEmitter=this.register(new h.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=f.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;let u=n(2585),h=n(8343);class a{constructor(...m){this._entries=new Map;for(let[p,i]of m)this.set(p,i)}set(m,p){let i=this._entries.get(m);return this._entries.set(m,p),i}forEach(m){for(let[p,i]of this._entries.entries())m(p,i)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}t.ServiceCollection=a,t.InstantiationService=class{constructor(){this._services=new a,this._services.set(u.IInstantiationService,this)}setService(o,m){this._services.set(o,m)}getService(o){return this._services.get(o)}createInstance(o,...m){let p=(0,h.getServiceDependencies)(o).sort((d,f)=>d.index-f.index),i=[];for(let d of p){let f=this._services.get(d.id);if(!f)throw new Error(`[createInstance] ${o.name} depends on UNKNOWN service ${d.id}.`);i.push(f)}let e=p.length>0?p[0].index:m.length;if(m.length!==e)throw new Error(`[createInstance] First service dependency of ${o.name} at position ${e+1} conflicts with ${m.length} static arguments`);return new o(...m,...i)}}},7866:function(y,t,n){var u=this&&this.__decorate||function(i,e,d,f){var s,g=arguments.length,L=g<3?e:f===null?f=Object.getOwnPropertyDescriptor(e,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(i,e,d,f);else for(var b=i.length-1;b>=0;b--)(s=i[b])&&(L=(g<3?s(L):g>3?s(e,d,L):s(e,d))||L);return g>3&&L&&Object.defineProperty(e,d,L),L},h=this&&this.__param||function(i,e){return function(d,f){e(d,f,i)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=void 0;let a=n(844),o=n(2585),m={debug:o.LogLevelEnum.DEBUG,info:o.LogLevelEnum.INFO,warn:o.LogLevelEnum.WARN,error:o.LogLevelEnum.ERROR,off:o.LogLevelEnum.OFF},p=class extends a.Disposable{constructor(i){super(),this._optionsService=i,this.logLevel=o.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}_updateLogLevel(){this.logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(i){for(let e=0;e<i.length;e++)typeof i[e]=="function"&&(i[e]=i[e]())}_log(i,e,d){this._evalLazyOptionalParams(d),i.call(console,"xterm.js: "+e,...d)}debug(i,...e){this.logLevel<=o.LogLevelEnum.DEBUG&&this._log(console.log,i,e)}info(i,...e){this.logLevel<=o.LogLevelEnum.INFO&&this._log(console.info,i,e)}warn(i,...e){this.logLevel<=o.LogLevelEnum.WARN&&this._log(console.warn,i,e)}error(i,...e){this.logLevel<=o.LogLevelEnum.ERROR&&this._log(console.error,i,e)}};p=u([h(0,o.IOptionsService)],p),t.LogService=p},7302:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=void 0;let u=n(8460),h=n(6114),a=n(844);t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let o=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends a.Disposable{constructor(i){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;let e=Object.assign({},t.DEFAULT_OPTIONS);for(let d in i)if(d in e)try{let f=i[d];e[d]=this._sanitizeAndValidateOption(d,f)}catch(f){console.error(f)}this.rawOptions=e,this.options=Object.assign({},e),this._setupOptions()}onSpecificOptionChange(i,e){return this.onOptionChange(d=>{d===i&&e(this.rawOptions[i])})}onMultipleOptionChange(i,e){return this.onOptionChange(d=>{i.indexOf(d)!==-1&&e()})}_setupOptions(){let i=d=>{if(!(d in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},e=(d,f)=>{if(!(d in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);f=this._sanitizeAndValidateOption(d,f),this.rawOptions[d]!==f&&(this.rawOptions[d]=f,this._onOptionChange.fire(d))};for(let d in this.rawOptions){let f={get:i.bind(this,d),set:e.bind(this,d)};Object.defineProperty(this.options,d,f)}}_sanitizeAndValidateOption(i,e){switch(i){case"cursorStyle":if(e||(e=t.DEFAULT_OPTIONS[i]),!function(d){return d==="block"||d==="underline"||d==="bar"}(e))throw new Error(`"${e}" is not a valid value for ${i}`);break;case"wordSeparator":e||(e=t.DEFAULT_OPTIONS[i]);break;case"fontWeight":case"fontWeightBold":if(typeof e=="number"&&1<=e&&e<=1e3)break;e=o.includes(e)?e:t.DEFAULT_OPTIONS[i];break;case"cursorWidth":e=Math.floor(e);case"lineHeight":case"tabStopWidth":if(e<1)throw new Error(`${i} cannot be less than 1, value: ${e}`);break;case"minimumContrastRatio":e=Math.max(1,Math.min(21,Math.round(10*e)/10));break;case"scrollback":if((e=Math.min(e,4294967295))<0)throw new Error(`${i} cannot be less than 0, value: ${e}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(e<=0)throw new Error(`${i} cannot be less than or equal to 0, value: ${e}`);case"rows":case"cols":if(!e&&e!==0)throw new Error(`${i} must be numeric, value: ${e}`)}return e}}t.OptionsService=m},2660:function(y,t,n){var u=this&&this.__decorate||function(m,p,i,e){var d,f=arguments.length,s=f<3?p:e===null?e=Object.getOwnPropertyDescriptor(p,i):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(m,p,i,e);else for(var g=m.length-1;g>=0;g--)(d=m[g])&&(s=(f<3?d(s):f>3?d(p,i,s):d(p,i))||s);return f>3&&s&&Object.defineProperty(p,i,s),s},h=this&&this.__param||function(m,p){return function(i,e){p(i,e,m)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkService=void 0;let a=n(2585),o=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){let p=this._bufferService.buffer;if(m.id===void 0){let g=p.addMarker(p.ybase+p.y),L={data:m,id:this._nextId++,lines:[g]};return g.onDispose(()=>this._removeMarkerFromLink(L,g)),this._dataByLinkId.set(L.id,L),L.id}let i=m,e=this._getEntryIdKey(i),d=this._entriesWithId.get(e);if(d)return this.addLineToLink(d.id,p.ybase+p.y),d.id;let f=p.addMarker(p.ybase+p.y),s={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[f]};return f.onDispose(()=>this._removeMarkerFromLink(s,f)),this._entriesWithId.set(s.key,s),this._dataByLinkId.set(s.id,s),s.id}addLineToLink(m,p){let i=this._dataByLinkId.get(m);if(i&&i.lines.every(e=>e.line!==p)){let e=this._bufferService.buffer.addMarker(p);i.lines.push(e),e.onDispose(()=>this._removeMarkerFromLink(i,e))}}getLinkData(m){var p;return(p=this._dataByLinkId.get(m))===null||p===void 0?void 0:p.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,p){let i=m.lines.indexOf(p);i!==-1&&(m.lines.splice(i,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};o=u([h(0,a.IBufferService)],o),t.OscLinkService=o},8343:(y,t)=>{function n(u,h,a){h.di$target===h?h.di$dependencies.push({id:u,index:a}):(h.di$dependencies=[{id:u,index:a}],h.di$target=h)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0,t.serviceRegistry=new Map,t.getServiceDependencies=function(u){return u.di$dependencies||[]},t.createDecorator=function(u){if(t.serviceRegistry.has(u))return t.serviceRegistry.get(u);let h=function(a,o,m){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");n(h,a,m)};return h.toString=()=>u,t.serviceRegistry.set(u,h),h}},2585:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;let u=n(8343);var h;t.IBufferService=(0,u.createDecorator)("BufferService"),t.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),t.ICoreService=(0,u.createDecorator)("CoreService"),t.ICharsetService=(0,u.createDecorator)("CharsetService"),t.IInstantiationService=(0,u.createDecorator)("InstantiationService"),(h=t.LogLevelEnum||(t.LogLevelEnum={}))[h.DEBUG=0]="DEBUG",h[h.INFO=1]="INFO",h[h.WARN=2]="WARN",h[h.ERROR=3]="ERROR",h[h.OFF=4]="OFF",t.ILogService=(0,u.createDecorator)("LogService"),t.IOptionsService=(0,u.createDecorator)("OptionsService"),t.IOscLinkService=(0,u.createDecorator)("OscLinkService"),t.IUnicodeService=(0,u.createDecorator)("UnicodeService"),t.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;let u=n(8460),h=n(225);t.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;let a=new h.UnicodeV6;this.register(a),this._active=a.version,this._activeProvider=a}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(a){if(!this._providers[a])throw new Error(`unknown Unicode version "${a}"`);this._active=a,this._activeProvider=this._providers[a],this._onChange.fire(a)}register(a){this._providers[a.version]=a}wcwidth(a){return this._activeProvider.wcwidth(a)}getStringCellWidth(a){let o=0,m=a.length;for(let p=0;p<m;++p){let i=a.charCodeAt(p);if(55296<=i&&i<=56319){if(++p>=m)return o+this.wcwidth(i);let e=a.charCodeAt(p);56320<=e&&e<=57343?i=1024*(i-55296)+e-56320+65536:o+=this.wcwidth(e)}o+=this.wcwidth(i)}return o}}}},_={};function v(y){var t=_[y];if(t!==void 0)return t.exports;var n=_[y]={exports:{}};return c[y].call(n.exports,n,n.exports,v),n.exports}var x={};return(()=>{var y=x;Object.defineProperty(y,"__esModule",{value:!0}),y.Terminal=void 0;let t=v(3236),n=v(9042),u=v(7975),h=v(7090),a=v(5741),o=v(8285),m=["cols","rows"];y.Terminal=class{constructor(p){this._core=new t.Terminal(p),this._addonManager=new a.AddonManager,this._publicOptions=Object.assign({},this._core.options);let i=d=>this._core.options[d],e=(d,f)=>{this._checkReadonlyOptions(d),this._core.options[d]=f};for(let d in this._core.options){let f={get:i.bind(this,d),set:e.bind(this,d)};Object.defineProperty(this._publicOptions,d,f)}}_checkReadonlyOptions(p){if(m.includes(p))throw new Error(`Option "${p}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new u.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new h.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=new o.BufferNamespaceApi(this._core)),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let p=this._core.coreService.decPrivateModes,i="none";switch(this._core.coreMouseService.activeProtocol){case"X10":i="x10";break;case"VT200":i="vt200";break;case"DRAG":i="drag";break;case"ANY":i="any"}return{applicationCursorKeysMode:p.applicationCursorKeys,applicationKeypadMode:p.applicationKeypad,bracketedPasteMode:p.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:i,originMode:p.origin,reverseWraparoundMode:p.reverseWraparound,sendFocusMode:p.sendFocus,wraparoundMode:p.wraparound}}get options(){return this._publicOptions}set options(p){for(let i in p)this._publicOptions[i]=p[i]}blur(){this._core.blur()}focus(){this._core.focus()}resize(p,i){this._verifyIntegers(p,i),this._core.resize(p,i)}open(p){this._core.open(p)}attachCustomKeyEventHandler(p){this._core.attachCustomKeyEventHandler(p)}registerLinkProvider(p){return this._core.registerLinkProvider(p)}registerCharacterJoiner(p){return this._checkProposedApi(),this._core.registerCharacterJoiner(p)}deregisterCharacterJoiner(p){this._checkProposedApi(),this._core.deregisterCharacterJoiner(p)}registerMarker(p=0){return this._verifyIntegers(p),this._core.addMarker(p)}registerDecoration(p){var i,e,d;return this._checkProposedApi(),this._verifyPositiveIntegers((i=p.x)!==null&&i!==void 0?i:0,(e=p.width)!==null&&e!==void 0?e:0,(d=p.height)!==null&&d!==void 0?d:0),this._core.registerDecoration(p)}hasSelection(){return this._core.hasSelection()}select(p,i,e){this._verifyIntegers(p,i,e),this._core.select(p,i,e)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(p,i){this._verifyIntegers(p,i),this._core.selectLines(p,i)}dispose(){this._addonManager.dispose(),this._core.dispose()}scrollLines(p){this._verifyIntegers(p),this._core.scrollLines(p)}scrollPages(p){this._verifyIntegers(p),this._core.scrollPages(p)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(p){this._verifyIntegers(p),this._core.scrollToLine(p)}clear(){this._core.clear()}write(p,i){this._core.write(p,i)}writeln(p,i){this._core.write(p),this._core.write(`\r
`,i)}paste(p){this._core.paste(p)}refresh(p,i){this._verifyIntegers(p,i),this._core.refresh(p,i)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(p){return this._addonManager.loadAddon(this,p)}static get strings(){return n}_verifyIntegers(...p){for(let i of p)if(i===1/0||isNaN(i)||i%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...p){for(let i of p)if(i&&(i===1/0||isNaN(i)||i%1!=0||i<0))throw new Error("This API only accepts positive integers")}}})(),x})()})});var Dl=ze((Ds,Qn)=>{(function(c,_){typeof Ds=="object"&&typeof Qn=="object"?Qn.exports=_():typeof define=="function"&&define.amd?define([],_):typeof Ds=="object"?Ds.FitAddon=_():c.FitAddon=_()})(self,function(){return(()=>{"use strict";var c={};return(()=>{var _=c;Object.defineProperty(_,"__esModule",{value:!0}),_.FitAddon=void 0,_.FitAddon=class{constructor(){}activate(v){this._terminal=v}dispose(){}fit(){let v=this.proposeDimensions();if(!v||!this._terminal||isNaN(v.cols)||isNaN(v.rows))return;let x=this._terminal._core;this._terminal.rows===v.rows&&this._terminal.cols===v.cols||(x._renderService.clear(),this._terminal.resize(v.cols,v.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let v=this._terminal._core,x=v._renderService.dimensions;if(x.css.cell.width===0||x.css.cell.height===0)return;let y=this._terminal.options.scrollback===0?0:v.viewport.scrollBarWidth,t=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(t.getPropertyValue("height")),u=Math.max(0,parseInt(t.getPropertyValue("width"))),h=window.getComputedStyle(this._terminal.element),a=n-(parseInt(h.getPropertyValue("padding-top"))+parseInt(h.getPropertyValue("padding-bottom"))),o=u-(parseInt(h.getPropertyValue("padding-right"))+parseInt(h.getPropertyValue("padding-left")))-y;return{cols:Math.max(2,Math.floor(o/x.css.cell.width)),rows:Math.max(1,Math.floor(a/x.css.cell.height))}}}})(),c})()})});var Pl=ze((qi,eo)=>{(function(c,_){typeof qi=="object"&&typeof eo=="object"?eo.exports=_():typeof define=="function"&&define.amd?define([],_):typeof qi=="object"?qi.SerializeAddon=_():c.SerializeAddon=_()})(qi,function(){return(()=>{"use strict";var c={};return(()=>{var _=c;function v(a,o,m){return Math.max(o,Math.min(a,m))}Object.defineProperty(_,"__esModule",{value:!0}),_.HTMLSerializeHandler=_.SerializeAddon=void 0;class x{constructor(o){this._buffer=o}serialize(o){let m=this._buffer.getNullCell(),p=this._buffer.getNullCell(),i=m,e=o.start.x,d=o.end.x,f=o.start.y,s=o.end.y;this._beforeSerialize(d-e,e,d);for(let g=e;g<=d;g++){let L=this._buffer.getLine(g);if(L){let b=g!==o.start.x?0:f,R=g!==o.end.x?L.length:s;for(let E=b;E<R;E++){let w=L.getCell(E,i===m?p:m);w?(this._nextCell(w,i,g,E),i=w):console.warn(`Can't get cell at row=${g}, col=${E}`)}}this._rowEnd(g,g===d)}return this._afterSerialize(),this._serializeString()}_nextCell(o,m,p,i){}_rowEnd(o,m){}_beforeSerialize(o,m,p){}_afterSerialize(){}_serializeString(){return""}}function y(a,o){return a.getFgColorMode()===o.getFgColorMode()&&a.getFgColor()===o.getFgColor()}function t(a,o){return a.getBgColorMode()===o.getBgColorMode()&&a.getBgColor()===o.getBgColor()}function n(a,o){return a.isInverse()===o.isInverse()&&a.isBold()===o.isBold()&&a.isUnderline()===o.isUnderline()&&a.isBlink()===o.isBlink()&&a.isInvisible()===o.isInvisible()&&a.isItalic()===o.isItalic()&&a.isDim()===o.isDim()&&a.isStrikethrough()===o.isStrikethrough()}class u extends x{constructor(o,m){super(o),this._terminal=m,this._rowIndex=0,this._allRows=new Array,this._allRowSeparators=new Array,this._currentRow="",this._nullCellCount=0,this._cursorStyle=this._buffer.getNullCell(),this._cursorStyleRow=0,this._cursorStyleCol=0,this._backgroundCell=this._buffer.getNullCell(),this._firstRow=0,this._lastCursorRow=0,this._lastCursorCol=0,this._lastContentCursorRow=0,this._lastContentCursorCol=0,this._thisRowLastChar=this._buffer.getNullCell(),this._thisRowLastSecondChar=this._buffer.getNullCell(),this._nextRowFirstChar=this._buffer.getNullCell()}_beforeSerialize(o,m,p){this._allRows=new Array(o),this._lastContentCursorRow=m,this._lastCursorRow=m,this._firstRow=m}_rowEnd(o,m){var p;this._nullCellCount>0&&!t(this._cursorStyle,this._backgroundCell)&&(this._currentRow+=`\x1B[${this._nullCellCount}X`);let i="";if(!m){o-this._firstRow>=this._terminal.rows&&((p=this._buffer.getLine(this._cursorStyleRow))===null||p===void 0||p.getCell(this._cursorStyleCol,this._backgroundCell));let e=this._buffer.getLine(o),d=this._buffer.getLine(o+1);if(d.isWrapped){i="";let f=e.getCell(e.length-1,this._thisRowLastChar),s=e.getCell(e.length-2,this._thisRowLastSecondChar),g=d.getCell(0,this._nextRowFirstChar),L=g.getWidth()>1,b=!1;(g.getChars()&&L?this._nullCellCount<=1:this._nullCellCount<=0)&&((f.getChars()||f.getWidth()===0)&&t(f,g)&&(b=!0),L&&(s.getChars()||s.getWidth()===0)&&t(f,g)&&t(s,g)&&(b=!0)),b||(i="-".repeat(this._nullCellCount+1),i+="\x1B[1D\x1B[1X",this._nullCellCount>0&&(i+="\x1B[A",i+=`\x1B[${e.length-this._nullCellCount}C`,i+=`\x1B[${this._nullCellCount}X`,i+=`\x1B[${e.length-this._nullCellCount}D`,i+="\x1B[B"),this._lastContentCursorRow=o+1,this._lastContentCursorCol=0,this._lastCursorRow=o+1,this._lastCursorCol=0)}else i=`\r
`,this._lastCursorRow=o+1,this._lastCursorCol=0}this._allRows[this._rowIndex]=this._currentRow,this._allRowSeparators[this._rowIndex++]=i,this._currentRow="",this._nullCellCount=0}_diffStyle(o,m){let p=[],i=!y(o,m),e=!t(o,m),d=!n(o,m);if(i||e||d)if(o.isAttributeDefault())m.isAttributeDefault()||p.push(0);else{if(i){let f=o.getFgColor();o.isFgRGB()?p.push(38,2,f>>>16&255,f>>>8&255,255&f):o.isFgPalette()?f>=16?p.push(38,5,f):p.push(8&f?90+(7&f):30+(7&f)):p.push(39)}if(e){let f=o.getBgColor();o.isBgRGB()?p.push(48,2,f>>>16&255,f>>>8&255,255&f):o.isBgPalette()?f>=16?p.push(48,5,f):p.push(8&f?100+(7&f):40+(7&f)):p.push(49)}d&&(o.isInverse()!==m.isInverse()&&p.push(o.isInverse()?7:27),o.isBold()!==m.isBold()&&p.push(o.isBold()?1:22),o.isUnderline()!==m.isUnderline()&&p.push(o.isUnderline()?4:24),o.isBlink()!==m.isBlink()&&p.push(o.isBlink()?5:25),o.isInvisible()!==m.isInvisible()&&p.push(o.isInvisible()?8:28),o.isItalic()!==m.isItalic()&&p.push(o.isItalic()?3:23),o.isDim()!==m.isDim()&&p.push(o.isDim()?2:22),o.isStrikethrough()!==m.isStrikethrough()&&p.push(o.isStrikethrough()?9:29))}return p}_nextCell(o,m,p,i){if(o.getWidth()===0)return;let e=o.getChars()==="",d=this._diffStyle(o,this._cursorStyle);if(e?!t(this._cursorStyle,o):d.length>0){this._nullCellCount>0&&(t(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`\x1B[${this._nullCellCount}X`),this._currentRow+=`\x1B[${this._nullCellCount}C`,this._nullCellCount=0),this._lastContentCursorRow=this._lastCursorRow=p,this._lastContentCursorCol=this._lastCursorCol=i,this._currentRow+=`\x1B[${d.join(";")}m`;let f=this._buffer.getLine(p);f!==void 0&&(f.getCell(i,this._cursorStyle),this._cursorStyleRow=p,this._cursorStyleCol=i)}e?this._nullCellCount+=o.getWidth():(this._nullCellCount>0&&(t(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`\x1B[${this._nullCellCount}X`),this._currentRow+=`\x1B[${this._nullCellCount}C`,this._nullCellCount=0),this._currentRow+=o.getChars(),this._lastContentCursorRow=this._lastCursorRow=p,this._lastContentCursorCol=this._lastCursorCol=i+o.getWidth())}_serializeString(){let o=this._allRows.length;this._buffer.length-this._firstRow<=this._terminal.rows&&(o=this._lastContentCursorRow+1-this._firstRow,this._lastCursorCol=this._lastContentCursorCol,this._lastCursorRow=this._lastContentCursorRow);let m="";for(let s=0;s<o;s++)m+=this._allRows[s],s+1<o&&(m+=this._allRowSeparators[s]);let p=this._buffer.baseY+this._buffer.cursorY,i=this._buffer.cursorX;var e;(p!==this._lastCursorRow||i!==this._lastCursorCol)&&((e=p-this._lastCursorRow)>0?m+=`\x1B[${e}B`:e<0&&(m+=`\x1B[${-e}A`),(s=>{s>0?m+=`\x1B[${s}C`:s<0&&(m+=`\x1B[${-s}D`)})(i-this._lastCursorCol));let d=this._terminal._core._inputHandler._curAttrData,f=this._diffStyle(d,this._cursorStyle);return f.length>0&&(m+=`\x1B[${f.join(";")}m`),m}}_.SerializeAddon=class{constructor(){}activate(a){this._terminal=a}_serializeBuffer(a,o,m){let p=o.length,i=new u(o,a),e=m===void 0?p:v(m+a.rows,0,p);return i.serialize({start:{x:p-e,y:0},end:{x:p-1,y:a.cols}})}_serializeBufferAsHTML(a,o){var m,p;let i=a.buffer.active,e=new h(i,a,o);if((m=o.onlySelection)===null||m===void 0||!m){let f=i.length,s=o.scrollback,g=s===void 0?f:v(s+a.rows,0,f);return e.serialize({start:{x:f-g,y:0},end:{x:f-1,y:a.cols}})}let d=(p=this._terminal)===null||p===void 0?void 0:p.getSelectionPosition();return d!==void 0?e.serialize({start:{x:d.start.y,y:d.start.x},end:{x:d.end.y,y:d.end.x}}):""}_serializeModes(a){let o="",m=a.modes;if(m.applicationCursorKeysMode&&(o+="\x1B[?1h"),m.applicationKeypadMode&&(o+="\x1B[?66h"),m.bracketedPasteMode&&(o+="\x1B[?2004h"),m.insertMode&&(o+="\x1B[4h"),m.originMode&&(o+="\x1B[?6h"),m.reverseWraparoundMode&&(o+="\x1B[?45h"),m.sendFocusMode&&(o+="\x1B[?1004h"),m.wraparoundMode===!1&&(o+="\x1B[?7l"),m.mouseTrackingMode!=="none")switch(m.mouseTrackingMode){case"x10":o+="\x1B[?9h";break;case"vt200":o+="\x1B[?1000h";break;case"drag":o+="\x1B[?1002h";break;case"any":o+="\x1B[?1003h"}return o}serialize(a){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let o=this._serializeBuffer(this._terminal,this._terminal.buffer.normal,a==null?void 0:a.scrollback);return a!=null&&a.excludeAltBuffer||this._terminal.buffer.active.type!=="alternate"||(o+=`\x1B[?1049h\x1B[H${this._serializeBuffer(this._terminal,this._terminal.buffer.alternate,void 0)}`),a!=null&&a.excludeModes||(o+=this._serializeModes(this._terminal)),o}serializeAsHTML(a){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._serializeBufferAsHTML(this._terminal,a||{})}dispose(){}};class h extends x{constructor(o,m,p){super(o),this._terminal=m,this._options=p,this._currentRow="",this._htmlContent="",this._colors=m._core._themeService.colors}_padStart(o,m,p){return m>>=0,p=p!=null?p:" ",o.length>m?o:((m-=o.length)>p.length&&(p+=p.repeat(m/p.length)),p.slice(0,m)+o)}_beforeSerialize(o,m,p){var i,e,d,f,s;this._htmlContent+="<html><body><!--StartFragment--><pre>";let g="#000000",L="#ffffff";(i=this._options.includeGlobalBackground)!==null&&i!==void 0&&i&&(g=(d=(e=this._terminal.options.theme)===null||e===void 0?void 0:e.foreground)!==null&&d!==void 0?d:"#ffffff",L=(s=(f=this._terminal.options.theme)===null||f===void 0?void 0:f.background)!==null&&s!==void 0?s:"#000000");let b=[];b.push("color: "+g+";"),b.push("background-color: "+L+";"),b.push("font-family: "+this._terminal.options.fontFamily+";"),b.push("font-size: "+this._terminal.options.fontSize+"px;"),this._htmlContent+="<div style='"+b.join(" ")+"'>"}_afterSerialize(){this._htmlContent+="</div>",this._htmlContent+="</pre><!--EndFragment--></body></html>"}_rowEnd(o,m){this._htmlContent+="<div><span>"+this._currentRow+"</span></div>",this._currentRow=""}_getHexColor(o,m){let p=m?o.getFgColor():o.getBgColor();return(m?o.isFgRGB():o.isBgRGB())?[p>>16&255,p>>8&255,255&p].map(i=>this._padStart(i.toString(16),2,"0")).join(""):(m?o.isFgPalette():o.isBgPalette())?this._colors.ansi[p].css:void 0}_diffStyle(o,m){let p=[],i=!y(o,m),e=!t(o,m),d=!n(o,m);if(i||e||d){let f=this._getHexColor(o,!0);f&&p.push("color: "+f+";");let s=this._getHexColor(o,!1);return s&&p.push("background-color: "+s+";"),o.isInverse()&&p.push("color: #000000; background-color: #BFBFBF;"),o.isBold()&&p.push("font-weight: bold;"),o.isUnderline()&&p.push("text-decoration: underline;"),o.isBlink()&&p.push("text-decoration: blink;"),o.isInvisible()&&p.push("visibility: hidden;"),o.isItalic()&&p.push("font-style: italic;"),o.isDim()&&p.push("opacity: 0.5;"),o.isStrikethrough()&&p.push("text-decoration: line-through;"),p}}_nextCell(o,m,p,i){if(o.getWidth()===0)return;let e=o.getChars()==="",d=this._diffStyle(o,m);d&&(this._currentRow+=d.length===0?"</span><span>":"</span><span style='"+d.join(" ")+"'>"),this._currentRow+=e?" ":o.getChars()}_serializeString(){return this._htmlContent}}_.HTMLSerializeHandler=h})(),c})()})});var Il=ze(to=>{var Zr=require("path"),Ir=process.platform==="win32",Pr=require("fs"),j_=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function G_(){var c;if(j_){var _=new Error;c=v}else c=x;return c;function v(y){y&&(_.message=y.message,y=_,x(y))}function x(y){if(y){if(process.throwDeprecation)throw y;if(!process.noDeprecation){var t="fs: missing callback "+(y.stack||y.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}function q_(c){return typeof c=="function"?c:G_()}var h1=Zr.normalize;Ir?xr=/(.*?)(?:[\/\\]+|$)/g:xr=/(.*?)(?:[\/]+|$)/g;var xr;Ir?Vi=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:Vi=/^[\/]*/;var Vi;to.realpathSync=function(_,v){if(_=Zr.resolve(_),v&&Object.prototype.hasOwnProperty.call(v,_))return v[_];var x=_,y={},t={},n,u,h,a;o();function o(){var f=Vi.exec(_);n=f[0].length,u=f[0],h=f[0],a="",Ir&&!t[h]&&(Pr.lstatSync(h),t[h]=!0)}for(;n<_.length;){xr.lastIndex=n;var m=xr.exec(_);if(a=u,u+=m[0],h=a+m[1],n=xr.lastIndex,!(t[h]||v&&v[h]===h)){var p;if(v&&Object.prototype.hasOwnProperty.call(v,h))p=v[h];else{var i=Pr.lstatSync(h);if(!i.isSymbolicLink()){t[h]=!0,v&&(v[h]=h);continue}var e=null;if(!Ir){var d=i.dev.toString(32)+":"+i.ino.toString(32);y.hasOwnProperty(d)&&(e=y[d])}e===null&&(Pr.statSync(h),e=Pr.readlinkSync(h)),p=Zr.resolve(a,e),v&&(v[h]=p),Ir||(y[d]=e)}_=Zr.resolve(p,_.slice(n)),o()}}return v&&(v[x]=_),_};to.realpath=function(_,v,x){if(typeof x!="function"&&(x=q_(v),v=null),_=Zr.resolve(_),v&&Object.prototype.hasOwnProperty.call(v,_))return process.nextTick(x.bind(null,null,v[_]));var y=_,t={},n={},u,h,a,o;m();function m(){var f=Vi.exec(_);u=f[0].length,h=f[0],a=f[0],o="",Ir&&!n[a]?Pr.lstat(a,function(s){if(s)return x(s);n[a]=!0,p()}):process.nextTick(p)}function p(){if(u>=_.length)return v&&(v[y]=_),x(null,_);xr.lastIndex=u;var f=xr.exec(_);return o=h,h+=f[0],a=o+f[1],u=xr.lastIndex,n[a]||v&&v[a]===a?process.nextTick(p):v&&Object.prototype.hasOwnProperty.call(v,a)?d(v[a]):Pr.lstat(a,i)}function i(f,s){if(f)return x(f);if(!s.isSymbolicLink())return n[a]=!0,v&&(v[a]=a),process.nextTick(p);if(!Ir){var g=s.dev.toString(32)+":"+s.ino.toString(32);if(t.hasOwnProperty(g))return e(null,t[g],a)}Pr.stat(a,function(L){if(L)return x(L);Pr.readlink(a,function(b,R){Ir||(t[g]=R),e(b,R)})})}function e(f,s,g){if(f)return x(f);var L=Zr.resolve(o,s);v&&(v[g]=L),d(L)}function d(f){_=Zr.resolve(f,_.slice(u)),m()}}});var no=ze((d1,Nl)=>{Nl.exports=Br;Br.realpath=Br;Br.sync=so;Br.realpathSync=so;Br.monkeypatch=X_;Br.unmonkeypatch=K_;var bi=require("fs"),ro=bi.realpath,io=bi.realpathSync,V_=process.version,Bl=/^v[0-5]\./.test(V_),Fl=Il();function Ul(c){return c&&c.syscall==="realpath"&&(c.code==="ELOOP"||c.code==="ENOMEM"||c.code==="ENAMETOOLONG")}function Br(c,_,v){if(Bl)return ro(c,_,v);typeof _=="function"&&(v=_,_=null),ro(c,_,function(x,y){Ul(x)?Fl.realpath(c,_,v):v(x,y)})}function so(c,_){if(Bl)return io(c,_);try{return io(c,_)}catch(v){if(Ul(v))return Fl.realpathSync(c,_);throw v}}function X_(){bi.realpath=Br,bi.realpathSync=so}function K_(){bi.realpath=ro,bi.realpathSync=io}});var Wl=ze((f1,Hl)=>{Hl.exports=function(c,_){for(var v=[],x=0;x<c.length;x++){var y=_(c[x],x);Y_(y)?v.push.apply(v,y):v.push(y)}return v};var Y_=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"}});var ql=ze((p1,Gl)=>{"use strict";Gl.exports=$l;function $l(c,_,v){c instanceof RegExp&&(c=zl(c,v)),_ instanceof RegExp&&(_=zl(_,v));var x=jl(c,_,v);return x&&{start:x[0],end:x[1],pre:v.slice(0,x[0]),body:v.slice(x[0]+c.length,x[1]),post:v.slice(x[1]+_.length)}}function zl(c,_){var v=_.match(c);return v?v[0]:null}$l.range=jl;function jl(c,_,v){var x,y,t,n,u,h=v.indexOf(c),a=v.indexOf(_,h+1),o=h;if(h>=0&&a>0){if(c===_)return[h,a];for(x=[],t=v.length;o>=0&&!u;)o==h?(x.push(o),h=v.indexOf(c,o+1)):x.length==1?u=[x.pop(),a]:(y=x.pop(),y<t&&(t=y,n=a),a=v.indexOf(_,o+1)),o=h<a&&h>=0?h:a;x.length&&(u=[t,n])}return u}});var ec=ze((g1,Ql)=>{var J_=Wl(),Vl=ql();Ql.exports=em;var Xl="\0SLASH"+Math.random()+"\0",Kl="\0OPEN"+Math.random()+"\0",ao="\0CLOSE"+Math.random()+"\0",Yl="\0COMMA"+Math.random()+"\0",Jl="\0PERIOD"+Math.random()+"\0";function oo(c){return parseInt(c,10)==c?parseInt(c,10):c.charCodeAt(0)}function Z_(c){return c.split("\\\\").join(Xl).split("\\{").join(Kl).split("\\}").join(ao).split("\\,").join(Yl).split("\\.").join(Jl)}function Q_(c){return c.split(Xl).join("\\").split(Kl).join("{").split(ao).join("}").split(Yl).join(",").split(Jl).join(".")}function Zl(c){if(!c)return[""];var _=[],v=Vl("{","}",c);if(!v)return c.split(",");var x=v.pre,y=v.body,t=v.post,n=x.split(",");n[n.length-1]+="{"+y+"}";var u=Zl(t);return t.length&&(n[n.length-1]+=u.shift(),n.push.apply(n,u)),_.push.apply(_,n),_}function em(c){return c?(c.substr(0,2)==="{}"&&(c="\\{\\}"+c.substr(2)),Si(Z_(c),!0).map(Q_)):[]}function tm(c){return"{"+c+"}"}function rm(c){return/^-?0\d/.test(c)}function im(c,_){return c<=_}function sm(c,_){return c>=_}function Si(c,_){var v=[],x=Vl("{","}",c);if(!x||/\$$/.test(x.pre))return[c];var y=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(x.body),t=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(x.body),n=y||t,u=x.body.indexOf(",")>=0;if(!n&&!u)return x.post.match(/,.*\}/)?(c=x.pre+"{"+x.body+ao+x.post,Si(c)):[c];var h;if(n)h=x.body.split(/\.\./);else if(h=Zl(x.body),h.length===1&&(h=Si(h[0],!1).map(tm),h.length===1)){var o=x.post.length?Si(x.post,!1):[""];return o.map(function(P){return x.pre+h[0]+P})}var a=x.pre,o=x.post.length?Si(x.post,!1):[""],m;if(n){var p=oo(h[0]),i=oo(h[1]),e=Math.max(h[0].length,h[1].length),d=h.length==3?Math.abs(oo(h[2])):1,f=im,s=i<p;s&&(d*=-1,f=sm);var g=h.some(rm);m=[];for(var L=p;f(L,i);L+=d){var b;if(t)b=String.fromCharCode(L),b==="\\"&&(b="");else if(b=String(L),g){var R=e-b.length;if(R>0){var E=new Array(R+1).join("0");L<0?b="-"+E+b.slice(1):b=E+b}}m.push(b)}}else m=J_(h,function(D){return Si(D,!1)});for(var w=0;w<m.length;w++)for(var k=0;k<o.length;k++){var M=a+m[w]+o[k];(!_||n||M)&&v.push(M)}return v}});var Bs=ze((_1,nc)=>{nc.exports=Ct;Ct.Minimatch=st;var Xi=function(){try{return require("path")}catch(c){}}()||{sep:"/"};Ct.sep=Xi.sep;var ho=Ct.GLOBSTAR=st.GLOBSTAR={},nm=ec(),tc={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},lo="[^/]",co=lo+"*?",om="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",am="(?:(?!(?:\\/|^)\\.).)*?",rc=lm("().*{}+?[]^$\\!");function lm(c){return c.split("").reduce(function(_,v){return _[v]=!0,_},{})}var ic=/\/+/;Ct.filter=cm;function cm(c,_){return _=_||{},function(v,x,y){return Ct(v,c,_)}}function Fr(c,_){_=_||{};var v={};return Object.keys(c).forEach(function(x){v[x]=c[x]}),Object.keys(_).forEach(function(x){v[x]=_[x]}),v}Ct.defaults=function(c){if(!c||typeof c!="object"||!Object.keys(c).length)return Ct;var _=Ct,v=function(y,t,n){return _(y,t,Fr(c,n))};return v.Minimatch=function(y,t){return new _.Minimatch(y,Fr(c,t))},v.Minimatch.defaults=function(y){return _.defaults(Fr(c,y)).Minimatch},v.filter=function(y,t){return _.filter(y,Fr(c,t))},v.defaults=function(y){return _.defaults(Fr(c,y))},v.makeRe=function(y,t){return _.makeRe(y,Fr(c,t))},v.braceExpand=function(y,t){return _.braceExpand(y,Fr(c,t))},v.match=function(x,y,t){return _.match(x,y,Fr(c,t))},v};st.defaults=function(c){return Ct.defaults(c).Minimatch};function Ct(c,_,v){return Is(_),v||(v={}),!v.nocomment&&_.charAt(0)==="#"?!1:new st(_,v).match(c)}function st(c,_){if(!(this instanceof st))return new st(c,_);Is(c),_||(_={}),c=c.trim(),!_.allowWindowsEscape&&Xi.sep!=="/"&&(c=c.split(Xi.sep).join("/")),this.options=_,this.set=[],this.pattern=c,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!_.partial,this.make()}st.prototype.debug=function(){};st.prototype.make=hm;function hm(){var c=this.pattern,_=this.options;if(!_.nocomment&&c.charAt(0)==="#"){this.comment=!0;return}if(!c){this.empty=!0;return}this.parseNegate();var v=this.globSet=this.braceExpand();_.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,v),v=this.globParts=v.map(function(x){return x.split(ic)}),this.debug(this.pattern,v),v=v.map(function(x,y,t){return x.map(this.parse,this)},this),this.debug(this.pattern,v),v=v.filter(function(x){return x.indexOf(!1)===-1}),this.debug(this.pattern,v),this.set=v}st.prototype.parseNegate=um;function um(){var c=this.pattern,_=!1,v=this.options,x=0;if(!v.nonegate){for(var y=0,t=c.length;y<t&&c.charAt(y)==="!";y++)_=!_,x++;x&&(this.pattern=c.substr(x)),this.negate=_}}Ct.braceExpand=function(c,_){return sc(c,_)};st.prototype.braceExpand=sc;function sc(c,_){return _||(this instanceof st?_=this.options:_={}),c=typeof c=="undefined"?this.pattern:c,Is(c),_.nobrace||!/\{(?:(?!\{).)*\}/.test(c)?[c]:nm(c)}var dm=1024*64,Is=function(c){if(typeof c!="string")throw new TypeError("invalid pattern");if(c.length>dm)throw new TypeError("pattern is too long")};st.prototype.parse=fm;var Ps={};function fm(c,_){Is(c);var v=this.options;if(c==="**")if(v.noglobstar)c="*";else return ho;if(c==="")return"";var x="",y=!!v.nocase,t=!1,n=[],u=[],h,a=!1,o=-1,m=-1,p=c.charAt(0)==="."?"":v.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",i=this;function e(){if(h){switch(h){case"*":x+=co,y=!0;break;case"?":x+=lo,y=!0;break;default:x+="\\"+h;break}i.debug("clearStateChar %j %j",h,x),h=!1}}for(var d=0,f=c.length,s;d<f&&(s=c.charAt(d));d++){if(this.debug("%s	%s %s %j",c,d,x,s),t&&rc[s]){x+="\\"+s,t=!1;continue}switch(s){case"/":return!1;case"\\":e(),t=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",c,d,x,s),a){this.debug("  in class"),s==="!"&&d===m+1&&(s="^"),x+=s;continue}i.debug("call clearStateChar %j",h),e(),h=s,v.noext&&e();continue;case"(":if(a){x+="(";continue}if(!h){x+="\\(";continue}n.push({type:h,start:d-1,reStart:x.length,open:tc[h].open,close:tc[h].close}),x+=h==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",h,x),h=!1;continue;case")":if(a||!n.length){x+="\\)";continue}e(),y=!0;var g=n.pop();x+=g.close,g.type==="!"&&u.push(g),g.reEnd=x.length;continue;case"|":if(a||!n.length||t){x+="\\|",t=!1;continue}e(),x+="|";continue;case"[":if(e(),a){x+="\\"+s;continue}a=!0,m=d,o=x.length,x+=s;continue;case"]":if(d===m+1||!a){x+="\\"+s,t=!1;continue}var L=c.substring(m+1,d);try{RegExp("["+L+"]")}catch(Q){var b=this.parse(L,Ps);x=x.substr(0,o)+"\\["+b[0]+"\\]",y=y||b[1],a=!1;continue}y=!0,a=!1,x+=s;continue;default:e(),t?t=!1:rc[s]&&!(s==="^"&&a)&&(x+="\\"),x+=s}}for(a&&(L=c.substr(m+1),b=this.parse(L,Ps),x=x.substr(0,o)+"\\["+b[0],y=y||b[1]),g=n.pop();g;g=n.pop()){var R=x.slice(g.reStart+g.open.length);this.debug("setting tail",x,g),R=R.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Q,oe,ee){return ee||(ee="\\"),oe+oe+ee+"|"}),this.debug(`tail=%j
   %s`,R,R,g,x);var E=g.type==="*"?co:g.type==="?"?lo:"\\"+g.type;y=!0,x=x.slice(0,g.reStart)+E+"\\("+R}e(),t&&(x+="\\\\");var w=!1;switch(x.charAt(0)){case"[":case".":case"(":w=!0}for(var k=u.length-1;k>-1;k--){var M=u[k],D=x.slice(0,M.reStart),P=x.slice(M.reStart,M.reEnd-8),W=x.slice(M.reEnd-8,M.reEnd),F=x.slice(M.reEnd);W+=F;var $=D.split("(").length-1,A=F;for(d=0;d<$;d++)A=A.replace(/\)[+*?]?/,"");F=A;var U="";F===""&&_!==Ps&&(U="$");var N=D+P+F+U+W;x=N}if(x!==""&&y&&(x="(?=.)"+x),w&&(x=p+x),_===Ps)return[x,y];if(!y)return gm(c);var z=v.nocase?"i":"";try{var K=new RegExp("^"+x+"$",z)}catch(Q){return new RegExp("$.")}return K._glob=c,K._src=x,K}Ct.makeRe=function(c,_){return new st(c,_||{}).makeRe()};st.prototype.makeRe=pm;function pm(){if(this.regexp||this.regexp===!1)return this.regexp;var c=this.set;if(!c.length)return this.regexp=!1,this.regexp;var _=this.options,v=_.noglobstar?co:_.dot?om:am,x=_.nocase?"i":"",y=c.map(function(t){return t.map(function(n){return n===ho?v:typeof n=="string"?_m(n):n._src}).join("\\/")}).join("|");y="^(?:"+y+")$",this.negate&&(y="^(?!"+y+").*$");try{this.regexp=new RegExp(y,x)}catch(t){this.regexp=!1}return this.regexp}Ct.match=function(c,_,v){v=v||{};var x=new st(_,v);return c=c.filter(function(y){return x.match(y)}),x.options.nonull&&!c.length&&c.push(_),c};st.prototype.match=function(_,v){if(typeof v=="undefined"&&(v=this.partial),this.debug("match",_,this.pattern),this.comment)return!1;if(this.empty)return _==="";if(_==="/"&&v)return!0;var x=this.options;Xi.sep!=="/"&&(_=_.split(Xi.sep).join("/")),_=_.split(ic),this.debug(this.pattern,"split",_);var y=this.set;this.debug(this.pattern,"set",y);var t,n;for(n=_.length-1;n>=0&&(t=_[n],!t);n--);for(n=0;n<y.length;n++){var u=y[n],h=_;x.matchBase&&u.length===1&&(h=[t]);var a=this.matchOne(h,u,v);if(a)return x.flipNegate?!0:!this.negate}return x.flipNegate?!1:this.negate};st.prototype.matchOne=function(c,_,v){var x=this.options;this.debug("matchOne",{this:this,file:c,pattern:_}),this.debug("matchOne",c.length,_.length);for(var y=0,t=0,n=c.length,u=_.length;y<n&&t<u;y++,t++){this.debug("matchOne loop");var h=_[t],a=c[y];if(this.debug(_,h,a),h===!1)return!1;if(h===ho){this.debug("GLOBSTAR",[_,h,a]);var o=y,m=t+1;if(m===u){for(this.debug("** at the end");y<n;y++)if(c[y]==="."||c[y]===".."||!x.dot&&c[y].charAt(0)===".")return!1;return!0}for(;o<n;){var p=c[o];if(this.debug(`
globstar while`,c,o,_,m,p),this.matchOne(c.slice(o),_.slice(m),v))return this.debug("globstar found match!",o,n,p),!0;if(p==="."||p===".."||!x.dot&&p.charAt(0)==="."){this.debug("dot detected!",c,o,_,m);break}this.debug("globstar swallow a segment, and continue"),o++}return!!(v&&(this.debug(`
>>> no match, partial?`,c,o,_,m),o===n))}var i;if(typeof h=="string"?(i=a===h,this.debug("string match",h,a,i)):(i=a.match(h),this.debug("pattern match",h,a,i)),!i)return!1}if(y===n&&t===u)return!0;if(y===n)return v;if(t===u)return y===n-1&&c[y]==="";throw new Error("wtf?")};function gm(c){return c.replace(/\\(.)/g,"$1")}function _m(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var oc=ze((m1,uo)=>{typeof Object.create=="function"?uo.exports=function(_,v){v&&(_.super_=v,_.prototype=Object.create(v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}))}:uo.exports=function(_,v){if(v){_.super_=v;var x=function(){};x.prototype=v.prototype,_.prototype=new x,_.prototype.constructor=_}}});var Us=ze((v1,Fs)=>{"use strict";function ac(c){return c.charAt(0)==="/"}function lc(c){var _=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,v=_.exec(c),x=v[1]||"",y=Boolean(x&&x.charAt(1)!==":");return Boolean(v[2]||y)}Fs.exports=process.platform==="win32"?lc:ac;Fs.exports.posix=ac;Fs.exports.win32=lc});var po=ze(Ur=>{Ur.setopts=wm;Ur.ownProp=cc;Ur.makeAbs=Ki;Ur.finish=Cm;Ur.mark=xm;Ur.isIgnored=uc;Ur.childrenIgnored=Lm;function cc(c,_){return Object.prototype.hasOwnProperty.call(c,_)}var mm=require("fs"),wi=require("path"),vm=Bs(),hc=Us(),fo=vm.Minimatch;function ym(c,_){return c.localeCompare(_,"en")}function bm(c,_){c.ignore=_.ignore||[],Array.isArray(c.ignore)||(c.ignore=[c.ignore]),c.ignore.length&&(c.ignore=c.ignore.map(Sm))}function Sm(c){var _=null;if(c.slice(-3)==="/**"){var v=c.replace(/(\/\*\*)+$/,"");_=new fo(v,{dot:!0})}return{matcher:new fo(c,{dot:!0}),gmatcher:_}}function wm(c,_,v){if(v||(v={}),v.matchBase&&_.indexOf("/")===-1){if(v.noglobstar)throw new Error("base matching requires globstar");_="**/"+_}c.silent=!!v.silent,c.pattern=_,c.strict=v.strict!==!1,c.realpath=!!v.realpath,c.realpathCache=v.realpathCache||Object.create(null),c.follow=!!v.follow,c.dot=!!v.dot,c.mark=!!v.mark,c.nodir=!!v.nodir,c.nodir&&(c.mark=!0),c.sync=!!v.sync,c.nounique=!!v.nounique,c.nonull=!!v.nonull,c.nosort=!!v.nosort,c.nocase=!!v.nocase,c.stat=!!v.stat,c.noprocess=!!v.noprocess,c.absolute=!!v.absolute,c.fs=v.fs||mm,c.maxLength=v.maxLength||1/0,c.cache=v.cache||Object.create(null),c.statCache=v.statCache||Object.create(null),c.symlinks=v.symlinks||Object.create(null),bm(c,v),c.changedCwd=!1;var x=process.cwd();cc(v,"cwd")?(c.cwd=wi.resolve(v.cwd),c.changedCwd=c.cwd!==x):c.cwd=x,c.root=v.root||wi.resolve(c.cwd,"/"),c.root=wi.resolve(c.root),process.platform==="win32"&&(c.root=c.root.replace(/\\/g,"/")),c.cwdAbs=hc(c.cwd)?c.cwd:Ki(c,c.cwd),process.platform==="win32"&&(c.cwdAbs=c.cwdAbs.replace(/\\/g,"/")),c.nomount=!!v.nomount,v.nonegate=!0,v.nocomment=!0,v.allowWindowsEscape=!1,c.minimatch=new fo(_,v),c.options=c.minimatch.options}function Cm(c){for(var _=c.nounique,v=_?[]:Object.create(null),x=0,y=c.matches.length;x<y;x++){var t=c.matches[x];if(!t||Object.keys(t).length===0){if(c.nonull){var n=c.minimatch.globSet[x];_?v.push(n):v[n]=!0}}else{var u=Object.keys(t);_?v.push.apply(v,u):u.forEach(function(h){v[h]=!0})}}if(_||(v=Object.keys(v)),c.nosort||(v=v.sort(ym)),c.mark){for(var x=0;x<v.length;x++)v[x]=c._mark(v[x]);c.nodir&&(v=v.filter(function(h){var a=!/\/$/.test(h),o=c.cache[h]||c.cache[Ki(c,h)];return a&&o&&(a=o!=="DIR"&&!Array.isArray(o)),a}))}c.ignore.length&&(v=v.filter(function(h){return!uc(c,h)})),c.found=v}function xm(c,_){var v=Ki(c,_),x=c.cache[v],y=_;if(x){var t=x==="DIR"||Array.isArray(x),n=_.slice(-1)==="/";if(t&&!n?y+="/":!t&&n&&(y=y.slice(0,-1)),y!==_){var u=Ki(c,y);c.statCache[u]=c.statCache[v],c.cache[u]=c.cache[v]}}return y}function Ki(c,_){var v=_;return _.charAt(0)==="/"?v=wi.join(c.root,_):hc(_)||_===""?v=_:c.changedCwd?v=wi.resolve(c.cwd,_):v=wi.resolve(_),process.platform==="win32"&&(v=v.replace(/\\/g,"/")),v}function uc(c,_){return c.ignore.length?c.ignore.some(function(v){return v.matcher.match(_)||!!(v.gmatcher&&v.gmatcher.match(_))}):!1}function Lm(c,_){return c.ignore.length?c.ignore.some(function(v){return!!(v.gmatcher&&v.gmatcher.match(_))}):!1}});var _c=ze((C1,gc)=>{gc.exports=pc;pc.GlobSync=Je;var Em=no(),dc=Bs(),b1=dc.Minimatch,S1=mo().Glob,w1=require("util"),go=require("path"),fc=require("assert"),Ns=Us(),Qr=po(),Rm=Qr.setopts,_o=Qr.ownProp,Tm=Qr.childrenIgnored,km=Qr.isIgnored;function pc(c,_){if(typeof _=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new Je(c,_).found}function Je(c,_){if(!c)throw new Error("must provide pattern");if(typeof _=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof Je))return new Je(c,_);if(Rm(this,c,_),this.noprocess)return this;var v=this.minimatch.set.length;this.matches=new Array(v);for(var x=0;x<v;x++)this._process(this.minimatch.set[x],x,!1);this._finish()}Je.prototype._finish=function(){if(fc.ok(this instanceof Je),this.realpath){var c=this;this.matches.forEach(function(_,v){var x=c.matches[v]=Object.create(null);for(var y in _)try{y=c._makeAbs(y);var t=Em.realpathSync(y,c.realpathCache);x[t]=!0}catch(n){if(n.syscall==="stat")x[c._makeAbs(y)]=!0;else throw n}})}Qr.finish(this)};Je.prototype._process=function(c,_,v){fc.ok(this instanceof Je);for(var x=0;typeof c[x]=="string";)x++;var y;switch(x){case c.length:this._processSimple(c.join("/"),_);return;case 0:y=null;break;default:y=c.slice(0,x).join("/");break}var t=c.slice(x),n;y===null?n=".":((Ns(y)||Ns(c.map(function(a){return typeof a=="string"?a:"[*]"}).join("/")))&&(!y||!Ns(y))&&(y="/"+y),n=y);var u=this._makeAbs(n);if(!Tm(this,n)){var h=t[0]===dc.GLOBSTAR;h?this._processGlobStar(y,n,u,t,_,v):this._processReaddir(y,n,u,t,_,v)}};Je.prototype._processReaddir=function(c,_,v,x,y,t){var n=this._readdir(v,t);if(n){for(var u=x[0],h=!!this.minimatch.negate,a=u._glob,o=this.dot||a.charAt(0)===".",m=[],p=0;p<n.length;p++){var i=n[p];if(i.charAt(0)!=="."||o){var e;h&&!c?e=!i.match(u):e=i.match(u),e&&m.push(i)}}var d=m.length;if(d!==0){if(x.length===1&&!this.mark&&!this.stat){this.matches[y]||(this.matches[y]=Object.create(null));for(var p=0;p<d;p++){var i=m[p];c&&(c.slice(-1)!=="/"?i=c+"/"+i:i=c+i),i.charAt(0)==="/"&&!this.nomount&&(i=go.join(this.root,i)),this._emitMatch(y,i)}return}x.shift();for(var p=0;p<d;p++){var i=m[p],f;c?f=[c,i]:f=[i],this._process(f.concat(x),y,t)}}}};Je.prototype._emitMatch=function(c,_){if(!km(this,_)){var v=this._makeAbs(_);if(this.mark&&(_=this._mark(_)),this.absolute&&(_=v),!this.matches[c][_]){if(this.nodir){var x=this.cache[v];if(x==="DIR"||Array.isArray(x))return}this.matches[c][_]=!0,this.stat&&this._stat(_)}}};Je.prototype._readdirInGlobStar=function(c){if(this.follow)return this._readdir(c,!1);var _,v,x;try{v=this.fs.lstatSync(c)}catch(t){if(t.code==="ENOENT")return null}var y=v&&v.isSymbolicLink();return this.symlinks[c]=y,!y&&v&&!v.isDirectory()?this.cache[c]="FILE":_=this._readdir(c,!1),_};Je.prototype._readdir=function(c,_){var v;if(_&&!_o(this.symlinks,c))return this._readdirInGlobStar(c);if(_o(this.cache,c)){var x=this.cache[c];if(!x||x==="FILE")return null;if(Array.isArray(x))return x}try{return this._readdirEntries(c,this.fs.readdirSync(c))}catch(y){return this._readdirError(c,y),null}};Je.prototype._readdirEntries=function(c,_){if(!this.mark&&!this.stat)for(var v=0;v<_.length;v++){var x=_[v];c==="/"?x=c+x:x=c+"/"+x,this.cache[x]=!0}return this.cache[c]=_,_};Je.prototype._readdirError=function(c,_){switch(_.code){case"ENOTSUP":case"ENOTDIR":var v=this._makeAbs(c);if(this.cache[v]="FILE",v===this.cwdAbs){var x=new Error(_.code+" invalid cwd "+this.cwd);throw x.path=this.cwd,x.code=_.code,x}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(c)]=!1;break;default:if(this.cache[this._makeAbs(c)]=!1,this.strict)throw _;this.silent||console.error("glob error",_);break}};Je.prototype._processGlobStar=function(c,_,v,x,y,t){var n=this._readdir(v,t);if(n){var u=x.slice(1),h=c?[c]:[],a=h.concat(u);this._process(a,y,!1);var o=n.length,m=this.symlinks[v];if(!(m&&t))for(var p=0;p<o;p++){var i=n[p];if(!(i.charAt(0)==="."&&!this.dot)){var e=h.concat(n[p],u);this._process(e,y,!0);var d=h.concat(n[p],x);this._process(d,y,!0)}}}};Je.prototype._processSimple=function(c,_){var v=this._stat(c);if(this.matches[_]||(this.matches[_]=Object.create(null)),!!v){if(c&&Ns(c)&&!this.nomount){var x=/[\/\\]$/.test(c);c.charAt(0)==="/"?c=go.join(this.root,c):(c=go.resolve(this.root,c),x&&(c+="/"))}process.platform==="win32"&&(c=c.replace(/\\/g,"/")),this._emitMatch(_,c)}};Je.prototype._stat=function(c){var _=this._makeAbs(c),v=c.slice(-1)==="/";if(c.length>this.maxLength)return!1;if(!this.stat&&_o(this.cache,_)){var n=this.cache[_];if(Array.isArray(n)&&(n="DIR"),!v||n==="DIR")return n;if(v&&n==="FILE")return!1}var x,y=this.statCache[_];if(!y){var t;try{t=this.fs.lstatSync(_)}catch(u){if(u&&(u.code==="ENOENT"||u.code==="ENOTDIR"))return this.statCache[_]=!1,!1}if(t&&t.isSymbolicLink())try{y=this.fs.statSync(_)}catch(u){y=t}else y=t}this.statCache[_]=y;var n=!0;return y&&(n=y.isDirectory()?"DIR":"FILE"),this.cache[_]=this.cache[_]||n,v&&n==="FILE"?!1:n};Je.prototype._mark=function(c){return Qr.mark(this,c)};Je.prototype._makeAbs=function(c){return Qr.makeAbs(this,c)}});var vo=ze((x1,vc)=>{vc.exports=mc;function mc(c,_){if(c&&_)return mc(c)(_);if(typeof c!="function")throw new TypeError("need wrapper function");return Object.keys(c).forEach(function(x){v[x]=c[x]}),v;function v(){for(var x=new Array(arguments.length),y=0;y<x.length;y++)x[y]=arguments[y];var t=c.apply(this,x),n=x[x.length-1];return typeof t=="function"&&t!==n&&Object.keys(n).forEach(function(u){t[u]=n[u]}),t}}});var bo=ze((L1,yo)=>{var yc=vo();yo.exports=yc(Hs);yo.exports.strict=yc(bc);Hs.proto=Hs(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Hs(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return bc(this)},configurable:!0})});function Hs(c){var _=function(){return _.called?_.value:(_.called=!0,_.value=c.apply(this,arguments))};return _.called=!1,_}function bc(c){var _=function(){if(_.called)throw new Error(_.onceError);return _.called=!0,_.value=c.apply(this,arguments)},v=c.name||"Function wrapped with `once`";return _.onceError=v+" shouldn't be called more than once",_.called=!1,_}});var wc=ze((E1,Sc)=>{var Am=vo(),Yi=Object.create(null),Mm=bo();Sc.exports=Am(Om);function Om(c,_){return Yi[c]?(Yi[c].push(_),null):(Yi[c]=[_],Dm(c))}function Dm(c){return Mm(function _(){var v=Yi[c],x=v.length,y=Pm(arguments);try{for(var t=0;t<x;t++)v[t].apply(null,y)}finally{v.length>x?(v.splice(0,x),process.nextTick(function(){_.apply(null,y)})):delete Yi[c]}})}function Pm(c){for(var _=c.length,v=[],x=0;x<_;x++)v[x]=c[x];return v}});var mo=ze((k1,xc)=>{xc.exports=ei;var Im=no(),Cc=Bs(),R1=Cc.Minimatch,Bm=oc(),Fm=require("events").EventEmitter,So=require("path"),wo=require("assert"),Ji=Us(),xo=_c(),ti=po(),Um=ti.setopts,Co=ti.ownProp,Lo=wc(),T1=require("util"),Nm=ti.childrenIgnored,Hm=ti.isIgnored,Wm=bo();function ei(c,_,v){if(typeof _=="function"&&(v=_,_={}),_||(_={}),_.sync){if(v)throw new TypeError("callback provided to sync glob");return xo(c,_)}return new Ie(c,_,v)}ei.sync=xo;var zm=ei.GlobSync=xo.GlobSync;ei.glob=ei;function $m(c,_){if(_===null||typeof _!="object")return c;for(var v=Object.keys(_),x=v.length;x--;)c[v[x]]=_[v[x]];return c}ei.hasMagic=function(c,_){var v=$m({},_);v.noprocess=!0;var x=new Ie(c,v),y=x.minimatch.set;if(!c)return!1;if(y.length>1)return!0;for(var t=0;t<y[0].length;t++)if(typeof y[0][t]!="string")return!0;return!1};ei.Glob=Ie;Bm(Ie,Fm);function Ie(c,_,v){if(typeof _=="function"&&(v=_,_=null),_&&_.sync){if(v)throw new TypeError("callback provided to sync glob");return new zm(c,_)}if(!(this instanceof Ie))return new Ie(c,_,v);Um(this,c,_),this._didRealPath=!1;var x=this.minimatch.set.length;this.matches=new Array(x),typeof v=="function"&&(v=Wm(v),this.on("error",v),this.on("end",function(h){v(null,h)}));var y=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(x===0)return u();for(var t=!0,n=0;n<x;n++)this._process(this.minimatch.set[n],n,!1,u);t=!1;function u(){--y._processing,y._processing<=0&&(t?process.nextTick(function(){y._finish()}):y._finish())}}Ie.prototype._finish=function(){if(wo(this instanceof Ie),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();ti.finish(this),this.emit("end",this.found)}};Ie.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var c=this.matches.length;if(c===0)return this._finish();for(var _=this,v=0;v<this.matches.length;v++)this._realpathSet(v,x);function x(){--c===0&&_._finish()}};Ie.prototype._realpathSet=function(c,_){var v=this.matches[c];if(!v)return _();var x=Object.keys(v),y=this,t=x.length;if(t===0)return _();var n=this.matches[c]=Object.create(null);x.forEach(function(u,h){u=y._makeAbs(u),Im.realpath(u,y.realpathCache,function(a,o){a?a.syscall==="stat"?n[u]=!0:y.emit("error",a):n[o]=!0,--t===0&&(y.matches[c]=n,_())})})};Ie.prototype._mark=function(c){return ti.mark(this,c)};Ie.prototype._makeAbs=function(c){return ti.makeAbs(this,c)};Ie.prototype.abort=function(){this.aborted=!0,this.emit("abort")};Ie.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};Ie.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var c=this._emitQueue.slice(0);this._emitQueue.length=0;for(var _=0;_<c.length;_++){var v=c[_];this._emitMatch(v[0],v[1])}}if(this._processQueue.length){var x=this._processQueue.slice(0);this._processQueue.length=0;for(var _=0;_<x.length;_++){var y=x[_];this._processing--,this._process(y[0],y[1],y[2],y[3])}}}};Ie.prototype._process=function(c,_,v,x){if(wo(this instanceof Ie),wo(typeof x=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([c,_,v,x]);return}for(var y=0;typeof c[y]=="string";)y++;var t;switch(y){case c.length:this._processSimple(c.join("/"),_,x);return;case 0:t=null;break;default:t=c.slice(0,y).join("/");break}var n=c.slice(y),u;t===null?u=".":((Ji(t)||Ji(c.map(function(o){return typeof o=="string"?o:"[*]"}).join("/")))&&(!t||!Ji(t))&&(t="/"+t),u=t);var h=this._makeAbs(u);if(Nm(this,u))return x();var a=n[0]===Cc.GLOBSTAR;a?this._processGlobStar(t,u,h,n,_,v,x):this._processReaddir(t,u,h,n,_,v,x)}};Ie.prototype._processReaddir=function(c,_,v,x,y,t,n){var u=this;this._readdir(v,t,function(h,a){return u._processReaddir2(c,_,v,x,y,t,a,n)})};Ie.prototype._processReaddir2=function(c,_,v,x,y,t,n,u){if(!n)return u();for(var h=x[0],a=!!this.minimatch.negate,o=h._glob,m=this.dot||o.charAt(0)===".",p=[],i=0;i<n.length;i++){var e=n[i];if(e.charAt(0)!=="."||m){var d;a&&!c?d=!e.match(h):d=e.match(h),d&&p.push(e)}}var f=p.length;if(f===0)return u();if(x.length===1&&!this.mark&&!this.stat){this.matches[y]||(this.matches[y]=Object.create(null));for(var i=0;i<f;i++){var e=p[i];c&&(c!=="/"?e=c+"/"+e:e=c+e),e.charAt(0)==="/"&&!this.nomount&&(e=So.join(this.root,e)),this._emitMatch(y,e)}return u()}x.shift();for(var i=0;i<f;i++){var e=p[i],s;c&&(c!=="/"?e=c+"/"+e:e=c+e),this._process([e].concat(x),y,t,u)}u()};Ie.prototype._emitMatch=function(c,_){if(!this.aborted&&!Hm(this,_)){if(this.paused){this._emitQueue.push([c,_]);return}var v=Ji(_)?_:this._makeAbs(_);if(this.mark&&(_=this._mark(_)),this.absolute&&(_=v),!this.matches[c][_]){if(this.nodir){var x=this.cache[v];if(x==="DIR"||Array.isArray(x))return}this.matches[c][_]=!0;var y=this.statCache[v];y&&this.emit("stat",_,y),this.emit("match",_)}}};Ie.prototype._readdirInGlobStar=function(c,_){if(this.aborted)return;if(this.follow)return this._readdir(c,!1,_);var v="lstat\0"+c,x=this,y=Lo(v,t);y&&x.fs.lstat(c,y);function t(n,u){if(n&&n.code==="ENOENT")return _();var h=u&&u.isSymbolicLink();x.symlinks[c]=h,!h&&u&&!u.isDirectory()?(x.cache[c]="FILE",_()):x._readdir(c,!1,_)}};Ie.prototype._readdir=function(c,_,v){if(!this.aborted&&(v=Lo("readdir\0"+c+"\0"+_,v),!!v)){if(_&&!Co(this.symlinks,c))return this._readdirInGlobStar(c,v);if(Co(this.cache,c)){var x=this.cache[c];if(!x||x==="FILE")return v();if(Array.isArray(x))return v(null,x)}var y=this;y.fs.readdir(c,jm(this,c,v))}};function jm(c,_,v){return function(x,y){x?c._readdirError(_,x,v):c._readdirEntries(_,y,v)}}Ie.prototype._readdirEntries=function(c,_,v){if(!this.aborted){if(!this.mark&&!this.stat)for(var x=0;x<_.length;x++){var y=_[x];c==="/"?y=c+y:y=c+"/"+y,this.cache[y]=!0}return this.cache[c]=_,v(null,_)}};Ie.prototype._readdirError=function(c,_,v){if(!this.aborted){switch(_.code){case"ENOTSUP":case"ENOTDIR":var x=this._makeAbs(c);if(this.cache[x]="FILE",x===this.cwdAbs){var y=new Error(_.code+" invalid cwd "+this.cwd);y.path=this.cwd,y.code=_.code,this.emit("error",y),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(c)]=!1;break;default:this.cache[this._makeAbs(c)]=!1,this.strict&&(this.emit("error",_),this.abort()),this.silent||console.error("glob error",_);break}return v()}};Ie.prototype._processGlobStar=function(c,_,v,x,y,t,n){var u=this;this._readdir(v,t,function(h,a){u._processGlobStar2(c,_,v,x,y,t,a,n)})};Ie.prototype._processGlobStar2=function(c,_,v,x,y,t,n,u){if(!n)return u();var h=x.slice(1),a=c?[c]:[],o=a.concat(h);this._process(o,y,!1,u);var m=this.symlinks[v],p=n.length;if(m&&t)return u();for(var i=0;i<p;i++){var e=n[i];if(!(e.charAt(0)==="."&&!this.dot)){var d=a.concat(n[i],h);this._process(d,y,!0,u);var f=a.concat(n[i],x);this._process(f,y,!0,u)}}u()};Ie.prototype._processSimple=function(c,_,v){var x=this;this._stat(c,function(y,t){x._processSimple2(c,_,y,t,v)})};Ie.prototype._processSimple2=function(c,_,v,x,y){if(this.matches[_]||(this.matches[_]=Object.create(null)),!x)return y();if(c&&Ji(c)&&!this.nomount){var t=/[\/\\]$/.test(c);c.charAt(0)==="/"?c=So.join(this.root,c):(c=So.resolve(this.root,c),t&&(c+="/"))}process.platform==="win32"&&(c=c.replace(/\\/g,"/")),this._emitMatch(_,c),y()};Ie.prototype._stat=function(c,_){var v=this._makeAbs(c),x=c.slice(-1)==="/";if(c.length>this.maxLength)return _();if(!this.stat&&Co(this.cache,v)){var y=this.cache[v];if(Array.isArray(y)&&(y="DIR"),!x||y==="DIR")return _(null,y);if(x&&y==="FILE")return _()}var t,n=this.statCache[v];if(n!==void 0){if(n===!1)return _(null,n);var u=n.isDirectory()?"DIR":"FILE";return x&&u==="FILE"?_():_(null,u,n)}var h=this,a=Lo("stat\0"+v,o);a&&h.fs.lstat(v,a);function o(m,p){if(p&&p.isSymbolicLink())return h.fs.stat(v,function(i,e){i?h._stat2(c,v,null,p,_):h._stat2(c,v,i,e,_)});h._stat2(c,v,m,p,_)}};Ie.prototype._stat2=function(c,_,v,x,y){if(v&&(v.code==="ENOENT"||v.code==="ENOTDIR"))return this.statCache[_]=!1,y();var t=c.slice(-1)==="/";if(this.statCache[_]=x,_.slice(-1)==="/"&&x&&!x.isDirectory())return y(null,!1,x);var n=!0;return x&&(n=x.isDirectory()?"DIR":"FILE"),this.cache[_]=this.cache[_]||n,t&&n==="FILE"?y():y(null,n,x)}});var Oc=ze((A1,Mc)=>{var Ne=require("assert"),Tc=require("path"),Lc=require("fs"),Ci;try{Ci=mo()}catch(c){}var Gm={nosort:!0,silent:!0},Eo=0,Zi=process.platform==="win32",kc=c=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(v=>{c[v]=c[v]||Lc[v],v=v+"Sync",c[v]=c[v]||Lc[v]}),c.maxBusyTries=c.maxBusyTries||3,c.emfileWait=c.emfileWait||1e3,c.glob===!1&&(c.disableGlob=!0),c.disableGlob!==!0&&Ci===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");c.disableGlob=c.disableGlob||!1,c.glob=c.glob||Gm},To=(c,_,v)=>{typeof _=="function"&&(v=_,_={}),Ne(c,"rimraf: missing path"),Ne.equal(typeof c,"string","rimraf: path should be a string"),Ne.equal(typeof v,"function","rimraf: callback function required"),Ne(_,"rimraf: invalid options argument provided"),Ne.equal(typeof _,"object","rimraf: options should be object"),kc(_);let x=0,y=null,t=0,n=h=>{y=y||h,--t===0&&v(y)},u=(h,a)=>{if(h)return v(h);if(t=a.length,t===0)return v();a.forEach(o=>{let m=p=>{if(p){if((p.code==="EBUSY"||p.code==="ENOTEMPTY"||p.code==="EPERM")&&x<_.maxBusyTries)return x++,setTimeout(()=>Ro(o,_,m),x*100);if(p.code==="EMFILE"&&Eo<_.emfileWait)return setTimeout(()=>Ro(o,_,m),Eo++);p.code==="ENOENT"&&(p=null)}Eo=0,n(p)};Ro(o,_,m)})};if(_.disableGlob||!Ci.hasMagic(c))return u(null,[c]);_.lstat(c,(h,a)=>{if(!h)return u(null,[c]);Ci(c,_.glob,u)})},Ro=(c,_,v)=>{Ne(c),Ne(_),Ne(typeof v=="function"),_.lstat(c,(x,y)=>{if(x&&x.code==="ENOENT")return v(null);if(x&&x.code==="EPERM"&&Zi&&Ec(c,_,x,v),y&&y.isDirectory())return Ws(c,_,x,v);_.unlink(c,t=>{if(t){if(t.code==="ENOENT")return v(null);if(t.code==="EPERM")return Zi?Ec(c,_,t,v):Ws(c,_,t,v);if(t.code==="EISDIR")return Ws(c,_,t,v)}return v(t)})})},Ec=(c,_,v,x)=>{Ne(c),Ne(_),Ne(typeof x=="function"),_.chmod(c,438,y=>{y?x(y.code==="ENOENT"?null:v):_.stat(c,(t,n)=>{t?x(t.code==="ENOENT"?null:v):n.isDirectory()?Ws(c,_,v,x):_.unlink(c,x)})})},Rc=(c,_,v)=>{Ne(c),Ne(_);try{_.chmodSync(c,438)}catch(y){if(y.code==="ENOENT")return;throw v}let x;try{x=_.statSync(c)}catch(y){if(y.code==="ENOENT")return;throw v}x.isDirectory()?zs(c,_,v):_.unlinkSync(c)},Ws=(c,_,v,x)=>{Ne(c),Ne(_),Ne(typeof x=="function"),_.rmdir(c,y=>{y&&(y.code==="ENOTEMPTY"||y.code==="EEXIST"||y.code==="EPERM")?qm(c,_,x):y&&y.code==="ENOTDIR"?x(v):x(y)})},qm=(c,_,v)=>{Ne(c),Ne(_),Ne(typeof v=="function"),_.readdir(c,(x,y)=>{if(x)return v(x);let t=y.length;if(t===0)return _.rmdir(c,v);let n;y.forEach(u=>{To(Tc.join(c,u),_,h=>{if(!n){if(h)return v(n=h);--t===0&&_.rmdir(c,v)}})})})},Ac=(c,_)=>{_=_||{},kc(_),Ne(c,"rimraf: missing path"),Ne.equal(typeof c,"string","rimraf: path should be a string"),Ne(_,"rimraf: missing options"),Ne.equal(typeof _,"object","rimraf: options should be object");let v;if(_.disableGlob||!Ci.hasMagic(c))v=[c];else try{_.lstatSync(c),v=[c]}catch(x){v=Ci.sync(c,_.glob)}if(v.length)for(let x=0;x<v.length;x++){let y=v[x],t;try{t=_.lstatSync(y)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&Zi&&Rc(y,_,n)}try{t&&t.isDirectory()?zs(y,_,null):_.unlinkSync(y)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return Zi?Rc(y,_,n):zs(y,_,n);if(n.code!=="EISDIR")throw n;zs(y,_,n)}}},zs=(c,_,v)=>{Ne(c),Ne(_);try{_.rmdirSync(c)}catch(x){if(x.code==="ENOENT")return;if(x.code==="ENOTDIR")throw v;(x.code==="ENOTEMPTY"||x.code==="EEXIST"||x.code==="EPERM")&&Vm(c,_)}},Vm=(c,_)=>{Ne(c),Ne(_),_.readdirSync(c).forEach(y=>Ac(Tc.join(c,y),_));let v=Zi?100:1,x=0;do{let y=!0;try{let t=_.rmdirSync(c,_);return y=!1,t}finally{if(++x<v&&y)continue}}while(!0)};Mc.exports=To;To.sync=Ac});var Yc=ze((M1,Lr)=>{/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */var et=require("fs"),Do=require("os"),xt=require("path"),Dc=require("crypto"),Ht={fs:et.constants,os:Do.constants},Bc=Oc(),Pc="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Fc=/XXXXXX/,Xm=3,Uc=(Ht.O_CREAT||Ht.fs.O_CREAT)|(Ht.O_EXCL||Ht.fs.O_EXCL)|(Ht.O_RDWR||Ht.fs.O_RDWR),Km=Do.platform()==="win32",Ym=Ht.EBADF||Ht.os.errno.EBADF,Jm=Ht.ENOENT||Ht.os.errno.ENOENT,Nc=448,Hc=384,Zm="exit",xi=[],Wc=et.rmdirSync.bind(et),zc=Bc.sync,$c=!1;function Po(c,_){let v=Li(c,_),x=v[0],y=v[1];try{Vc(x)}catch(n){return y(n)}let t=x.tries;(function n(){try{let u=qc(x);et.stat(u,function(h){if(!h)return t-- >0?n():y(new Error("Could not get a unique tmp filename, max tries reached "+u));y(null,u)})}catch(u){y(u)}})()}function Io(c){let _=Li(c),v=_[0];Vc(v);let x=v.tries;do{let y=qc(v);try{et.statSync(y)}catch(t){return y}}while(x-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function Qm(c,_){let v=Li(c,_),x=v[0],y=v[1];Po(x,function(n,u){if(n)return y(n);et.open(u,Uc,x.mode||Hc,function(a,o){if(a)return y(a);if(x.discardDescriptor)return et.close(o,function(p){return y(p,u,void 0,Ao(u,-1,x,!1))});{let m=x.discardDescriptor||x.detachDescriptor;y(null,u,o,Ao(u,m?-1:o,x,!1))}})})}function e0(c){let _=Li(c),v=_[0],x=v.discardDescriptor||v.detachDescriptor,y=Io(v);var t=et.openSync(y,Uc,v.mode||Hc);return v.discardDescriptor&&(et.closeSync(t),t=void 0),{name:y,fd:t,removeCallback:Ao(y,x?-1:t,v,!0)}}function t0(c,_){let v=Li(c,_),x=v[0],y=v[1];Po(x,function(n,u){if(n)return y(n);et.mkdir(u,x.mode||Nc,function(a){if(a)return y(a);y(null,u,jc(u,x,!1))})})}function r0(c){let _=Li(c),v=_[0],x=Io(v);return et.mkdirSync(x,v.mode||Nc),{name:x,removeCallback:jc(x,v,!0)}}function i0(c,_){let v=function(x){if(x&&!Oo(x))return _(x);_()};0<=c[0]?et.close(c[0],function(){et.unlink(c[1],v)}):et.unlink(c[1],v)}function s0(c){let _=null;try{0<=c[0]&&et.closeSync(c[0])}catch(v){if(!o0(v)&&!Oo(v))throw v}finally{try{et.unlinkSync(c[1])}catch(v){Oo(v)||(_=v)}}if(_!==null)throw _}function Ao(c,_,v,x){let y=$s(s0,[_,c],x),t=$s(i0,[_,c],x,y);return v.keep||xi.unshift(y),x?y:t}function jc(c,_,v){let x=_.unsafeCleanup?Bc:et.rmdir.bind(et),y=_.unsafeCleanup?zc:Wc,t=$s(y,c,v),n=$s(x,c,v,t);return _.keep||xi.unshift(t),v?t:n}function $s(c,_,v,x){let y=!1;return function t(n){if(!y){let u=x||t,h=xi.indexOf(u);return h>=0&&xi.splice(h,1),y=!0,v||c===Wc||c===zc?c(_):c(_,n||function(){})}}}function n0(){if($c)for(;xi.length;)try{xi[0]()}catch(c){}}function Ic(c){let _=[],v=null;try{v=Dc.randomBytes(c)}catch(y){v=Dc.pseudoRandomBytes(c)}for(var x=0;x<c;x++)_.push(Pc[v[x]%Pc.length]);return _.join("")}function Gc(c){return c===null||mt(c)||!c.trim()}function mt(c){return typeof c=="undefined"}function Li(c,_){if(typeof c=="function")return[{},c];if(mt(c))return[{},_];let v={};for(let x of Object.getOwnPropertyNames(c))v[x]=c[x];return[v,_]}function qc(c){let _=c.tmpdir;if(!mt(c.name))return xt.join(_,c.dir,c.name);if(!mt(c.template))return xt.join(_,c.dir,c.template).replace(Fc,Ic(6));let v=[c.prefix?c.prefix:"tmp","-",process.pid,"-",Ic(12),c.postfix?"-"+c.postfix:""].join("");return xt.join(_,c.dir,v)}function Vc(c){c.tmpdir=Kc(c);let _=c.tmpdir;if(mt(c.name)||ko(c.name,"name",_),mt(c.dir)||ko(c.dir,"dir",_),!mt(c.template)&&(ko(c.template,"template",_),!c.template.match(Fc)))throw new Error(`Invalid template, found "${c.template}".`);if(!mt(c.tries)&&isNaN(c.tries)||c.tries<0)throw new Error(`Invalid tries, found "${c.tries}".`);c.tries=mt(c.name)?c.tries||Xm:1,c.keep=!!c.keep,c.detachDescriptor=!!c.detachDescriptor,c.discardDescriptor=!!c.discardDescriptor,c.unsafeCleanup=!!c.unsafeCleanup,c.dir=mt(c.dir)?"":xt.relative(_,Mo(c.dir,_)),c.template=mt(c.template)?void 0:xt.relative(_,Mo(c.template,_)),c.template=Gc(c.template)?void 0:xt.relative(c.dir,c.template),c.name=mt(c.name)?void 0:Bo(c.name),c.prefix=mt(c.prefix)?"":c.prefix,c.postfix=mt(c.postfix)?"":c.postfix}function Mo(c,_){let v=Bo(c);return v.startsWith(_)?xt.resolve(v):xt.resolve(xt.join(_,v))}function Bo(c){return Gc(c)?c:c.replace(/["']/g,"")}function ko(c,_,v){if(_==="name"){if(xt.isAbsolute(c))throw new Error(`${_} option must not contain an absolute path, found "${c}".`);let x=xt.basename(c);if(x===".."||x==="."||x!==c)throw new Error(`${_} option must not contain a path, found "${c}".`)}else{if(xt.isAbsolute(c)&&!c.startsWith(v))throw new Error(`${_} option must be relative to "${v}", found "${c}".`);let x=Mo(c,v);if(!x.startsWith(v))throw new Error(`${_} option must be relative to "${v}", found "${x}".`)}}function o0(c){return Xc(c,-Ym,"EBADF")}function Oo(c){return Xc(c,-Jm,"ENOENT")}function Xc(c,_,v){return Km?c.code===v:c.code===v&&c.errno===_}function a0(){$c=!0}function Kc(c){return xt.resolve(Bo(c&&c.tmpdir||Do.tmpdir()))}process.addListener(Zm,n0);Object.defineProperty(Lr.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return Kc()}});Lr.exports.dir=t0;Lr.exports.dirSync=r0;Lr.exports.file=Qm;Lr.exports.fileSync=e0;Lr.exports.tmpName=Po;Lr.exports.tmpNameSync=Io;Lr.exports.setGracefulCleanup=a0});var lh=ze((Js,Ho)=>{(function(c,_){typeof Js=="object"&&typeof Ho=="object"?Ho.exports=_():typeof define=="function"&&define.amd?define([],_):typeof Js=="object"?Js.CanvasAddon=_():c.CanvasAddon=_()})(self,function(){return(()=>{"use strict";var c={903:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;let u=n(503),h=n(627),a=n(237),o=n(860),m=n(374),p=n(296),i=n(855),e=n(274),d=n(859),f=n(399),s=n(345);class g extends d.Disposable{constructor(R,E,w,k,M,D,P,W,F,$){super(),this._terminal=R,this._container=E,this._alpha=M,this._themeService=D,this._bufferService=P,this._optionsService=W,this._decorationService=F,this._coreBrowserService=$,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,p.createSelectionRenderModel)(),this._bitmapGenerator=[],this._onAddTextureAtlasCanvas=this.register(new s.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new e.CellColorResolver(this._terminal,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${w}-layer`),this._canvas.style.zIndex=k.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors(A=>{this._refreshCharAtlas(A),this.reset()})),this.register((0,d.toDisposable)(()=>{var A;(0,u.removeElementFromParent)(this._canvas),(A=this._charAtlas)===null||A===void 0||A.dispose()}))}get canvas(){return this._canvas}get cacheCanvas(){var R;return(R=this._charAtlas)===null||R===void 0?void 0:R.pages[0].canvas}_initCanvas(){this._ctx=(0,m.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(R,E){}handleSelectionChanged(R,E,w=!1){this._selectionModel.update(this._terminal,R,E,w)}_setTransparency(R){if(R===this._alpha)return;let E=this._canvas;this._alpha=R,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,E),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(R){var E;if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){(E=this._charAtlasDisposable)===null||E===void 0||E.dispose(),this._charAtlas=(0,h.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,R,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable=(0,s.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let w=0;w<this._charAtlas.pages.length;w++)this._bitmapGenerator[w]=new L(this._charAtlas.pages[w].canvas)}}resize(R){this._deviceCellWidth=R.device.cell.width,this._deviceCellHeight=R.device.cell.height,this._deviceCharWidth=R.device.char.width,this._deviceCharHeight=R.device.char.height,this._deviceCharLeft=R.device.char.left,this._deviceCharTop=R.device.char.top,this._canvas.width=R.device.canvas.width,this._canvas.height=R.device.canvas.height,this._canvas.style.width=`${R.css.canvas.width}px`,this._canvas.style.height=`${R.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){var R;(R=this._charAtlas)===null||R===void 0||R.clearTexture()}_fillCells(R,E,w,k){this._ctx.fillRect(R*this._deviceCellWidth,E*this._deviceCellHeight,w*this._deviceCellWidth,k*this._deviceCellHeight)}_fillMiddleLineAtCells(R,E,w=1){let k=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(R*this._deviceCellWidth,(E+1)*this._deviceCellHeight-k-this._coreBrowserService.dpr,w*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(R,E,w=1,k=0){this._ctx.fillRect(R*this._deviceCellWidth,(E+1)*this._deviceCellHeight+k-this._coreBrowserService.dpr-1,w*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(R,E,w=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;let k=this._coreBrowserService.dpr;this._ctx.lineWidth=k;for(let M=0;M<w;M++){let D=(R+M)*this._deviceCellWidth,P=(R+M+.5)*this._deviceCellWidth,W=(R+M+1)*this._deviceCellWidth,F=(E+1)*this._deviceCellHeight-k-1,$=F-k,A=F+k;this._ctx.moveTo(D,F),this._ctx.bezierCurveTo(D,$,P,$,P,F),this._ctx.bezierCurveTo(P,A,W,A,W,F)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(R,E,w=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;let k=this._coreBrowserService.dpr;this._ctx.lineWidth=k,this._ctx.setLineDash([2*k,k]);let M=R*this._deviceCellWidth,D=(E+1)*this._deviceCellHeight-k-1;this._ctx.moveTo(M,D);for(let P=0;P<w;P++){let W=(R+w+P)*this._deviceCellWidth;this._ctx.lineTo(W,D)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(R,E,w=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;let k=this._coreBrowserService.dpr;this._ctx.lineWidth=k,this._ctx.setLineDash([4*k,3*k]);let M=R*this._deviceCellWidth,D=(R+w)*this._deviceCellWidth,P=(E+1)*this._deviceCellHeight-k-1;this._ctx.moveTo(M,P),this._ctx.lineTo(D,P),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(R,E,w){this._ctx.fillRect(R*this._deviceCellWidth,E*this._deviceCellHeight,this._coreBrowserService.dpr*w,this._deviceCellHeight)}_strokeRectAtCell(R,E,w,k){let M=this._coreBrowserService.dpr;this._ctx.lineWidth=M,this._ctx.strokeRect(R*this._deviceCellWidth+M/2,E*this._deviceCellHeight+M/2,w*this._deviceCellWidth-M,k*this._deviceCellHeight-M)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(R,E,w,k){this._alpha?this._ctx.clearRect(R*this._deviceCellWidth,E*this._deviceCellHeight,w*this._deviceCellWidth,k*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(R*this._deviceCellWidth,E*this._deviceCellHeight,w*this._deviceCellWidth,k*this._deviceCellHeight))}_fillCharTrueColor(R,E,w){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=a.TEXT_BASELINE,this._clipRow(w);let k=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(k=(0,o.tryDrawCustomChar)(this._ctx,R.getChars(),E*this._deviceCellWidth,w*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),k||this._ctx.fillText(R.getChars(),E*this._deviceCellWidth+this._deviceCharLeft,w*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(R,E,w){var k,M;let D=R.getChars(),P;this._cellColorResolver.resolve(R,E,this._bufferService.buffer.ydisp+w),P=D&&D.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(D,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext):this._charAtlas.getRasterizedGlyph(R.getCode()||i.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext),P.size.x&&P.size.y&&(this._ctx.save(),this._clipRow(w),this._charAtlas.pages[P.texturePage].version!==((k=this._bitmapGenerator[P.texturePage])===null||k===void 0?void 0:k.version)&&(this._bitmapGenerator[P.texturePage]||(this._bitmapGenerator[P.texturePage]=new L(this._charAtlas.pages[P.texturePage].canvas)),this._bitmapGenerator[P.texturePage].refresh(),this._bitmapGenerator[P.texturePage].version=this._charAtlas.pages[P.texturePage].version),this._ctx.drawImage(((M=this._bitmapGenerator[P.texturePage])===null||M===void 0?void 0:M.bitmap)||this._charAtlas.pages[P.texturePage].canvas,P.texturePosition.x,P.texturePosition.y,P.size.x,P.size.y,E*this._deviceCellWidth+this._deviceCharLeft-P.offset.x,w*this._deviceCellHeight+this._deviceCharTop-P.offset.y,P.size.x,P.size.y),this._ctx.restore())}_clipRow(R){this._ctx.beginPath(),this._ctx.rect(0,R*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(R,E){return`${E?"italic":""} ${R?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}t.BaseRenderLayer=g;class L{constructor(R){this._canvas=R,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}get bitmap(){return this._bitmap}refresh(){this._bitmap=void 0,f.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){this._state===0&&(this._bitmap=void 0,this._state=1,window.createImageBitmap(this._canvas).then(R=>{this._state===2?this.refresh():this._bitmap=R,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasRenderer=void 0;let u=n(627),h=n(56),a=n(374),o=n(345),m=n(859),p=n(873),i=n(43),e=n(630),d=n(744);class f extends m.Disposable{constructor(g,L,b,R,E,w,k,M,D,P,W){super(),this._terminal=g,this._screenElement=L,this._bufferService=R,this._charSizeService=E,this._optionsService=w,this._coreBrowserService=D,this._themeService=W,this._onRequestRedraw=this.register(new o.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new o.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new o.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;let F=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new d.TextRenderLayer(this._terminal,this._screenElement,0,F,this._bufferService,this._optionsService,k,P,this._coreBrowserService,W),new e.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,P,this._optionsService,W),new i.LinkRenderLayer(this._terminal,this._screenElement,2,b,this._bufferService,this._optionsService,P,this._coreBrowserService,W),new p.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,M,this._coreBrowserService,P,W)];for(let $ of this._renderLayers)(0,o.forwardEvent)($.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,a.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register((0,h.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,($,A)=>this._setCanvasDevicePixelDimensions($,A))),this.register((0,m.toDisposable)(()=>{for(let $ of this._renderLayers)$.dispose();(0,u.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(g,L){this._updateDimensions();for(let b of this._renderLayers)b.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(g=>g.handleBlur())}handleFocus(){this._runOperation(g=>g.handleFocus())}handleSelectionChanged(g,L,b=!1){this._runOperation(R=>R.handleSelectionChanged(g,L,b)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(g=>g.handleCursorMove())}clear(){this._runOperation(g=>g.reset())}_runOperation(g){for(let L of this._renderLayers)g(L)}renderRows(g,L){for(let b of this._renderLayers)b.handleGridChanged(g,L)}clearTextureAtlas(){for(let g of this._renderLayers)g.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;let g=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*g),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*g),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/g),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/g),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(g,L){this.dimensions.device.canvas.height=L,this.dimensions.device.canvas.width=g;for(let b of this._renderLayers)b.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}t.CanvasRenderer=f},873:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;let u=n(903),h=n(782),a=n(859);class o extends u.BaseRenderLayer{constructor(i,e,d,f,s,g,L,b,R,E){super(i,e,"cursor",d,!0,E,s,g,R,b),this._onRequestRedraw=f,this._coreService=L,this._cell=new h.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this)},this.register(g.onOptionChange(()=>this._handleOptionsChanged())),this.register((0,a.toDisposable)(()=>{var w;(w=this._cursorBlinkStateManager)===null||w===void 0||w.dispose(),this._cursorBlinkStateManager=void 0}))}resize(i){super.resize(i),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){var i;this._clearCursor(),(i=this._cursorBlinkStateManager)===null||i===void 0||i.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){var i;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new m(this._coreBrowserService.isFocused,()=>{this._render(!0)},this._coreBrowserService)):((i=this._cursorBlinkStateManager)===null||i===void 0||i.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.restartBlinkAnimation()}handleGridChanged(i,e){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()}_render(i){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();let e=this._bufferService.buffer.ybase+this._bufferService.buffer.y,d=e-this._bufferService.buffer.ydisp;if(d<0||d>=this._bufferService.rows)return void this._clearCursor();let f=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(e).loadCell(f,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;let s=this._optionsService.rawOptions.cursorStyle;return s&&s!=="block"?this._cursorRenderers[s](f,d,this._cell):this._renderBlurCursor(f,d,this._cell),this._ctx.restore(),this._state.x=f,this._state.y=d,this._state.isFocused=!1,this._state.style=s,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===f&&this._state.y===d&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](f,d,this._cell),this._ctx.restore(),this._state.x=f,this._state.y=d,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(i,e,d){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(i,e,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(i,e,d){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(i,e,d.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(d,i,e),this._ctx.restore()}_renderUnderlineCursor(i,e,d){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(i,e),this._ctx.restore()}_renderBlurCursor(i,e,d){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(i,e,d.getWidth(),1),this._ctx.restore()}}t.CursorRenderLayer=o;class m{constructor(i,e,d){this._renderCallback=e,this._coreBrowserService=d,this.isCursorVisible=!0,i&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(i=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let e=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,e>0)return void this._restartInterval(e)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let e=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(e)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},i)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},574:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GridCache=void 0,t.GridCache=class{constructor(){this.cache=[]}resize(n,u){for(let h=0;h<n;h++){this.cache.length<=h&&this.cache.push([]);for(let a=this.cache[h].length;a<u;a++)this.cache[h].push(void 0);this.cache[h].length=u}this.cache.length=n}clear(){for(let n=0;n<this.cache.length;n++)for(let u=0;u<this.cache[n].length;u++)this.cache[n][u]=void 0}}},43:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;let u=n(903),h=n(237),a=n(197);class o extends u.BaseRenderLayer{constructor(p,i,e,d,f,s,g,L,b){super(p,i,"link",e,!0,b,f,s,g,L),this.register(d.onShowLinkUnderline(R=>this._handleShowLinkUnderline(R))),this.register(d.onHideLinkUnderline(R=>this._handleHideLinkUnderline(R)))}resize(p){super.resize(p),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let p=this._state.y2-this._state.y1-1;p>0&&this._clearCells(0,this._state.y1+1,this._state.cols,p),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(p){if(p.fg===h.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:p.fg&&(0,a.is256Color)(p.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[p.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,p.y1===p.y2)this._fillBottomLineAtCells(p.x1,p.y1,p.x2-p.x1);else{this._fillBottomLineAtCells(p.x1,p.y1,p.cols-p.x1);for(let i=p.y1+1;i<p.y2;i++)this._fillBottomLineAtCells(0,i,p.cols);this._fillBottomLineAtCells(0,p.y2,p.x2)}this._state=p}_handleHideLinkUnderline(p){this._clearCurrentLink()}}t.LinkRenderLayer=o},630:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRenderLayer=void 0;let u=n(903);class h extends u.BaseRenderLayer{constructor(o,m,p,i,e,d,f,s){super(o,m,"selection",p,!0,s,i,f,d,e),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(o){super.resize(o),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(o,m,p){super.handleSelectionChanged(o,m,p),this._redrawSelection(o,m,p)}_redrawSelection(o,m,p){if(!this._didStateChange(o,m,p,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!o||!m)return void this._clearState();let i=o[1]-this._bufferService.buffer.ydisp,e=m[1]-this._bufferService.buffer.ydisp,d=Math.max(i,0),f=Math.min(e,this._bufferService.rows-1);if(d>=this._bufferService.rows||f<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,p){let s=o[0],g=m[0]-s,L=f-d+1;this._fillCells(s,d,g,L)}else{let s=i===d?o[0]:0,g=d===e?m[0]:this._bufferService.cols;this._fillCells(s,d,g-s,1);let L=Math.max(f-d-1,0);if(this._fillCells(0,d+1,this._bufferService.cols,L),d!==f){let b=e===f?m[0]:this._bufferService.cols;this._fillCells(0,f,b,1)}}this._state.start=[o[0],o[1]],this._state.end=[m[0],m[1]],this._state.columnSelectMode=p,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(o,m,p,i){return!this._areCoordinatesEqual(o,this._state.start)||!this._areCoordinatesEqual(m,this._state.end)||p!==this._state.columnSelectMode||i!==this._state.ydisp}_areCoordinatesEqual(o,m){return!(!o||!m)&&o[0]===m[0]&&o[1]===m[1]}}t.SelectionRenderLayer=h},744:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderLayer=void 0;let u=n(574),h=n(903),a=n(147),o=n(855),m=n(782),p=n(577),i=n(160);class e extends h.BaseRenderLayer{constructor(f,s,g,L,b,R,E,w,k,M){super(f,s,"text",g,L,M,b,R,w,k),this._characterJoinerService=E,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new m.CellData,this._state=new u.GridCache,this.register(R.onSpecificOptionChange("allowTransparency",D=>this._setTransparency(D)))}resize(f){super.resize(f);let s=this._getFont(!1,!1);this._characterWidth===f.device.char.width&&this._characterFont===s||(this._characterWidth=f.device.char.width,this._characterFont=s,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(f,s,g){for(let L=f;L<=s;L++){let b=L+this._bufferService.buffer.ydisp,R=this._bufferService.buffer.lines.get(b),E=this._characterJoinerService.getJoinedCharacters(b);for(let w=0;w<this._bufferService.cols;w++){R.loadCell(w,this._workCell);let k=this._workCell,M=!1,D=w;if(k.getWidth()===0)continue;let P=k.getCode();if(P!==0&&P!==32){if(E.length>0&&w===E[0][0]){M=!0;let W=E.shift();k=new p.JoinedCellData(this._workCell,R.translateToString(!0,W[0],W[1]),W[1]-W[0]),D=W[1]-1}!M&&this._isOverlapping(k)&&D<R.length-1&&R.getCodePoint(D+1)===o.NULL_CELL_CODE&&(k.content&=-12582913,k.content|=8388608),g(k,w,L),w=D}}}}_drawBackground(f,s){let g=this._ctx,L=this._bufferService.cols,b=0,R=0,E=null;g.save(),this._forEachCell(f,s,(w,k,M)=>{let D=null;w.isInverse()?D=w.isFgDefault()?this._themeService.colors.foreground.css:w.isFgRGB()?`rgb(${a.AttributeData.toColorRGB(w.getFgColor()).join(",")})`:this._themeService.colors.ansi[w.getFgColor()].css:w.isBgRGB()?D=`rgb(${a.AttributeData.toColorRGB(w.getBgColor()).join(",")})`:w.isBgPalette()&&(D=this._themeService.colors.ansi[w.getBgColor()].css),D&&w.isDim()&&(D=i.color.multiplyOpacity(i.css.toColor(D),.5).css);let P=!1;this._decorationService.forEachDecorationAtCell(k,this._bufferService.buffer.ydisp+M,void 0,W=>{W.options.layer!=="top"&&P||(W.backgroundColorRGB&&(D=W.backgroundColorRGB.css),P=W.options.layer==="top")}),E===null&&(b=k,R=M),M!==R?(g.fillStyle=E||"",this._fillCells(b,R,L-b,1),b=k,R=M):E!==D&&(g.fillStyle=E||"",this._fillCells(b,R,k-b,1),b=k,R=M),E=D}),E!==null&&(g.fillStyle=E,this._fillCells(b,R,L-b,1)),g.restore()}_drawForeground(f,s){this._forEachCell(f,s,(g,L,b)=>this._drawChars(g,L,b))}handleGridChanged(f,s){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,f,this._bufferService.cols,s-f+1),this._drawBackground(f,s),this._drawForeground(f,s))}_isOverlapping(f){if(f.getWidth()!==1||f.getCode()<256)return!1;let s=f.getChars();if(this._characterOverlapCache.hasOwnProperty(s))return this._characterOverlapCache[s];this._ctx.save(),this._ctx.font=this._characterFont;let g=Math.floor(this._ctx.measureText(s).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[s]=g,g}}t.TextRenderLayer=e},503:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeElementFromParent=void 0,t.removeElementFromParent=function(...n){var u;for(let h of n)(u=h==null?void 0:h.parentElement)===null||u===void 0||u.removeChild(h)}},274:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellColorResolver=void 0;let n,u=0,h=0,a=!1,o=!1,m=!1;t.CellColorResolver=class{constructor(p,i,e,d,f){this._terminal=p,this._selectionRenderModel=i,this._decorationService=e,this._coreBrowserService=d,this._themeService=f,this.result={fg:0,bg:0,ext:0}}resolve(p,i,e){this.result.bg=p.bg,this.result.fg=p.fg,this.result.ext=268435456&p.bg?p.extended.ext:0,h=0,u=0,o=!1,a=!1,m=!1,n=this._themeService.colors,this._decorationService.forEachDecorationAtCell(i,e,"bottom",d=>{d.backgroundColorRGB&&(h=d.backgroundColorRGB.rgba>>8&16777215,o=!0),d.foregroundColorRGB&&(u=d.foregroundColorRGB.rgba>>8&16777215,a=!0)}),m=this._selectionRenderModel.isCellSelected(this._terminal,i,e),m&&(h=(this._coreBrowserService.isFocused?n.selectionBackgroundOpaque:n.selectionInactiveBackgroundOpaque).rgba>>8&16777215,o=!0,n.selectionForeground&&(u=n.selectionForeground.rgba>>8&16777215,a=!0)),this._decorationService.forEachDecorationAtCell(i,e,"top",d=>{d.backgroundColorRGB&&(h=d.backgroundColorRGB.rgba>>8&16777215,o=!0),d.foregroundColorRGB&&(u=d.foregroundColorRGB.rgba>>8&16777215,a=!0)}),o&&(h=m?-16777216&p.bg&-134217729|h|50331648:-16777216&p.bg|h|50331648),a&&(u=-16777216&p.fg&-67108865|u|50331648),67108864&this.result.fg&&(o&&!a&&(u=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&n.background.rgba>>8|50331648,a=!0),!o&&a&&(h=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&n.foreground.rgba>>8|50331648,o=!0)),n=void 0,this.result.bg=o?h:this.result.bg,this.result.fg=a?u:this.result.fg}}},627:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireTextureAtlas=void 0;let u=n(509),h=n(197),a=[];t.acquireTextureAtlas=function(o,m,p,i,e,d,f,s){let g=(0,h.generateConfig)(i,e,d,f,m,p,s);for(let R=0;R<a.length;R++){let E=a[R],w=E.ownedBy.indexOf(o);if(w>=0){if((0,h.configEquals)(E.config,g))return E.atlas;E.ownedBy.length===1?(E.atlas.dispose(),a.splice(R,1)):E.ownedBy.splice(w,1);break}}for(let R=0;R<a.length;R++){let E=a[R];if((0,h.configEquals)(E.config,g))return E.ownedBy.push(o),E.atlas}let L=o._core,b={atlas:new u.TextureAtlas(document,g,L.unicodeService),config:g,ownedBy:[o]};return a.push(b),b.atlas},t.removeTerminalFromCache=function(o){for(let m=0;m<a.length;m++){let p=a[m].ownedBy.indexOf(o);if(p!==-1){a[m].ownedBy.length===1?(a[m].atlas.dispose(),a.splice(m,1)):a[m].ownedBy.splice(p,1);break}}}},197:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;let u=n(160);t.generateConfig=function(h,a,o,m,p,i,e){let d={foreground:i.foreground,background:i.background,cursor:u.NULL_COLOR,cursorAccent:u.NULL_COLOR,selectionForeground:u.NULL_COLOR,selectionBackgroundTransparent:u.NULL_COLOR,selectionBackgroundOpaque:u.NULL_COLOR,selectionInactiveBackgroundTransparent:u.NULL_COLOR,selectionInactiveBackgroundOpaque:u.NULL_COLOR,ansi:i.ansi.slice(),contrastCache:i.contrastCache};return{customGlyphs:p.customGlyphs,devicePixelRatio:e,letterSpacing:p.letterSpacing,lineHeight:p.lineHeight,deviceCellWidth:h,deviceCellHeight:a,deviceCharWidth:o,deviceCharHeight:m,fontFamily:p.fontFamily,fontSize:p.fontSize,fontWeight:p.fontWeight,fontWeightBold:p.fontWeightBold,allowTransparency:p.allowTransparency,drawBoldTextInBrightColors:p.drawBoldTextInBrightColors,minimumContrastRatio:p.minimumContrastRatio,colors:d}},t.configEquals=function(h,a){for(let o=0;o<h.colors.ansi.length;o++)if(h.colors.ansi[o].rgba!==a.colors.ansi[o].rgba)return!1;return h.devicePixelRatio===a.devicePixelRatio&&h.customGlyphs===a.customGlyphs&&h.lineHeight===a.lineHeight&&h.letterSpacing===a.letterSpacing&&h.fontFamily===a.fontFamily&&h.fontSize===a.fontSize&&h.fontWeight===a.fontWeight&&h.fontWeightBold===a.fontWeightBold&&h.allowTransparency===a.allowTransparency&&h.deviceCharWidth===a.deviceCharWidth&&h.deviceCharHeight===a.deviceCharHeight&&h.drawBoldTextInBrightColors===a.drawBoldTextInBrightColors&&h.minimumContrastRatio===a.minimumContrastRatio&&h.colors.foreground.rgba===a.colors.foreground.rgba&&h.colors.background.rgba===a.colors.background.rgba},t.is256Color=function(h){return(50331648&h)==16777216||(50331648&h)==33554432}},237:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;let u=n(399);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},860:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.powerlineDefinitions=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;let u=n(374);t.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let h={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(i,e)=>`M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e}`},"\u2551":{1:(i,e)=>`M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u2552":{1:(i,e)=>`M.5,1 L.5,${.5-e} L1,${.5-e} M.5,${.5+e} L1,${.5+e}`},"\u2553":{1:(i,e)=>`M${.5-i},1 L${.5-i},.5 L1,.5 M${.5+i},.5 L${.5+i},1`},"\u2554":{1:(i,e)=>`M1,${.5-e} L${.5-i},${.5-e} L${.5-i},1 M1,${.5+e} L${.5+i},${.5+e} L${.5+i},1`},"\u2555":{1:(i,e)=>`M0,${.5-e} L.5,${.5-e} L.5,1 M0,${.5+e} L.5,${.5+e}`},"\u2556":{1:(i,e)=>`M${.5+i},1 L${.5+i},.5 L0,.5 M${.5-i},.5 L${.5-i},1`},"\u2557":{1:(i,e)=>`M0,${.5+e} L${.5-i},${.5+e} L${.5-i},1 M0,${.5-e} L${.5+i},${.5-e} L${.5+i},1`},"\u2558":{1:(i,e)=>`M.5,0 L.5,${.5+e} L1,${.5+e} M.5,${.5-e} L1,${.5-e}`},"\u2559":{1:(i,e)=>`M1,.5 L${.5-i},.5 L${.5-i},0 M${.5+i},.5 L${.5+i},0`},"\u255A":{1:(i,e)=>`M1,${.5-e} L${.5+i},${.5-e} L${.5+i},0 M1,${.5+e} L${.5-i},${.5+e} L${.5-i},0`},"\u255B":{1:(i,e)=>`M0,${.5+e} L.5,${.5+e} L.5,0 M0,${.5-e} L.5,${.5-e}`},"\u255C":{1:(i,e)=>`M0,.5 L${.5+i},.5 L${.5+i},0 M${.5-i},.5 L${.5-i},0`},"\u255D":{1:(i,e)=>`M0,${.5-e} L${.5-i},${.5-e} L${.5-i},0 M0,${.5+e} L${.5+i},${.5+e} L${.5+i},0`},"\u255E":{1:(i,e)=>`M.5,0 L.5,1 M.5,${.5-e} L1,${.5-e} M.5,${.5+e} L1,${.5+e}`},"\u255F":{1:(i,e)=>`M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1 M${.5+i},.5 L1,.5`},"\u2560":{1:(i,e)=>`M${.5-i},0 L${.5-i},1 M1,${.5+e} L${.5+i},${.5+e} L${.5+i},1 M1,${.5-e} L${.5+i},${.5-e} L${.5+i},0`},"\u2561":{1:(i,e)=>`M.5,0 L.5,1 M0,${.5-e} L.5,${.5-e} M0,${.5+e} L.5,${.5+e}`},"\u2562":{1:(i,e)=>`M0,.5 L${.5-i},.5 M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u2563":{1:(i,e)=>`M${.5+i},0 L${.5+i},1 M0,${.5+e} L${.5-i},${.5+e} L${.5-i},1 M0,${.5-e} L${.5-i},${.5-e} L${.5-i},0`},"\u2564":{1:(i,e)=>`M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e} M.5,${.5+e} L.5,1`},"\u2565":{1:(i,e)=>`M0,.5 L1,.5 M${.5-i},.5 L${.5-i},1 M${.5+i},.5 L${.5+i},1`},"\u2566":{1:(i,e)=>`M0,${.5-e} L1,${.5-e} M0,${.5+e} L${.5-i},${.5+e} L${.5-i},1 M1,${.5+e} L${.5+i},${.5+e} L${.5+i},1`},"\u2567":{1:(i,e)=>`M.5,0 L.5,${.5-e} M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e}`},"\u2568":{1:(i,e)=>`M0,.5 L1,.5 M${.5-i},.5 L${.5-i},0 M${.5+i},.5 L${.5+i},0`},"\u2569":{1:(i,e)=>`M0,${.5+e} L1,${.5+e} M0,${.5-e} L${.5-i},${.5-e} L${.5-i},0 M1,${.5-e} L${.5+i},${.5-e} L${.5+i},0`},"\u256A":{1:(i,e)=>`M.5,0 L.5,1 M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e}`},"\u256B":{1:(i,e)=>`M0,.5 L1,.5 M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u256C":{1:(i,e)=>`M0,${.5+e} L${.5-i},${.5+e} L${.5-i},1 M1,${.5+e} L${.5+i},${.5+e} L${.5+i},1 M0,${.5-e} L${.5-i},${.5-e} L${.5-i},0 M1,${.5-e} L${.5+i},${.5-e} L${.5+i},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(i,e)=>`M.5,1 L.5,${.5+e/.15*.5} C.5,${.5+e/.15*.5},.5,.5,1,.5`},"\u256E":{1:(i,e)=>`M.5,1 L.5,${.5+e/.15*.5} C.5,${.5+e/.15*.5},.5,.5,0,.5`},"\u256F":{1:(i,e)=>`M.5,0 L.5,${.5-e/.15*.5} C.5,${.5-e/.15*.5},.5,.5,0,.5`},"\u2570":{1:(i,e)=>`M.5,0 L.5,${.5-e/.15*.5} C.5,${.5-e/.15*.5},.5,.5,1,.5`}},t.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},t.powerlineDefinitions["\uE0BB"]=t.powerlineDefinitions["\uE0B9"],t.powerlineDefinitions["\uE0BF"]=t.powerlineDefinitions["\uE0BD"],t.tryDrawCustomChar=function(i,e,d,f,s,g,L,b){let R=t.blockElementDefinitions[e];if(R)return function(M,D,P,W,F,$){for(let A=0;A<D.length;A++){let U=D[A],N=F/8,z=$/8;M.fillRect(P+U.x*N,W+U.y*z,U.w*N,U.h*z)}}(i,R,d,f,s,g),!0;let E=h[e];if(E)return function(M,D,P,W,F,$){let A=a.get(D);A||(A=new Map,a.set(D,A));let U=M.fillStyle;if(typeof U!="string")throw new Error(`Unexpected fillStyle type "${U}"`);let N=A.get(U);if(!N){let z=D[0].length,K=D.length,Q=document.createElement("canvas");Q.width=z,Q.height=K;let oe=(0,u.throwIfFalsy)(Q.getContext("2d")),ee=new ImageData(z,K),ne,G,V,q;if(U.startsWith("#"))ne=parseInt(U.slice(1,3),16),G=parseInt(U.slice(3,5),16),V=parseInt(U.slice(5,7),16),q=U.length>7&&parseInt(U.slice(7,9),16)||1;else{if(!U.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${U}" when drawing pattern glyph`);[ne,G,V,q]=U.substring(5,U.length-1).split(",").map(te=>parseFloat(te))}for(let te=0;te<K;te++)for(let ce=0;ce<z;ce++)ee.data[4*(te*z+ce)]=ne,ee.data[4*(te*z+ce)+1]=G,ee.data[4*(te*z+ce)+2]=V,ee.data[4*(te*z+ce)+3]=D[te][ce]*(255*q);oe.putImageData(ee,0,0),N=(0,u.throwIfFalsy)(M.createPattern(Q,null)),A.set(U,N)}M.fillStyle=N,M.fillRect(P,W,F,$)}(i,E,d,f,s,g),!0;let w=t.boxDrawingDefinitions[e];if(w)return function(M,D,P,W,F,$,A){M.strokeStyle=M.fillStyle;for(let[U,N]of Object.entries(D)){let z;M.beginPath(),M.lineWidth=A*Number.parseInt(U),z=typeof N=="function"?N(.15,.15/$*F):N;for(let K of z.split(" ")){let Q=K[0],oe=m[Q];if(!oe){console.error(`Could not find drawing instructions for "${Q}"`);continue}let ee=K.substring(1).split(",");ee[0]&&ee[1]&&oe(M,p(ee,F,$,P,W,!0,A))}M.stroke(),M.closePath()}}(i,w,d,f,s,g,b),!0;let k=t.powerlineDefinitions[e];return!!k&&(function(M,D,P,W,F,$,A,U){var N,z;let K=new Path2D;K.rect(P,W,F,$),M.clip(K),M.beginPath();let Q=A/12;M.lineWidth=U*Q;for(let oe of D.d.split(" ")){let ee=oe[0],ne=m[ee];if(!ne){console.error(`Could not find drawing instructions for "${ee}"`);continue}let G=oe.substring(1).split(",");G[0]&&G[1]&&ne(M,p(G,F,$,P,W,!1,U,((N=D.leftPadding)!==null&&N!==void 0?N:0)*(Q/2),((z=D.rightPadding)!==null&&z!==void 0?z:0)*(Q/2)))}D.type===1?(M.strokeStyle=M.fillStyle,M.stroke()):M.fill(),M.closePath()}(i,k,d,f,s,g,L,b),!0)};let a=new Map;function o(i,e,d=0){return Math.max(Math.min(i,e),d)}let m={C:(i,e)=>i.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]),L:(i,e)=>i.lineTo(e[0],e[1]),M:(i,e)=>i.moveTo(e[0],e[1])};function p(i,e,d,f,s,g,L,b=0,R=0){let E=i.map(w=>parseFloat(w)||parseInt(w));if(E.length<2)throw new Error("Too few arguments for instruction");for(let w=0;w<E.length;w+=2)E[w]*=e-b*L-R*L,g&&E[w]!==0&&(E[w]=o(Math.round(E[w]+.5)-.5,e,0)),E[w]+=f+b*L;for(let w=1;w<E.length;w+=2)E[w]*=d,g&&E[w]!==0&&(E[w]=o(Math.round(E[w]+.5)-.5,d,0)),E[w]+=s;return E}},56:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.observeDevicePixelDimensions=void 0;let u=n(859);t.observeDevicePixelDimensions=function(h,a,o){let m=new a.ResizeObserver(p=>{let i=p.find(f=>f.target===h);if(!i)return;if(!("devicePixelContentBoxSize"in i))return m==null||m.disconnect(),void(m=void 0);let e=i.devicePixelContentBoxSize[0].inlineSize,d=i.devicePixelContentBoxSize[0].blockSize;e>0&&d>0&&o(e,d)});try{m.observe(h,{box:["device-pixel-content-box"]})}catch(p){m.disconnect(),m=void 0}return(0,u.toDisposable)(()=>m==null?void 0:m.disconnect())}},374:(y,t)=>{function n(u){return 57508<=u&&u<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderDimensions=t.excludeFromContrastRatioDemands=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},t.isPowerlineGlyph=n,t.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},t.excludeFromContrastRatioDemands=function(u){return n(u)||function(h){return 9472<=h&&h<=9631}(u)},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSelectionRenderModel=void 0;class n{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(h,a,o,m=!1){if(this.selectionStart=a,this.selectionEnd=o,!a||!o||a[0]===o[0]&&a[1]===o[1])return void this.clear();let p=a[1]-h.buffer.active.viewportY,i=o[1]-h.buffer.active.viewportY,e=Math.max(p,0),d=Math.min(i,h.rows-1);e>=h.rows||d<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=p,this.viewportEndRow=i,this.viewportCappedStartRow=e,this.viewportCappedEndRow=d,this.startCol=a[0],this.endCol=o[0])}isCellSelected(h,a,o){return!!this.hasSelection&&(o-=h.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?a>=this.startCol&&o>=this.viewportCappedStartRow&&a<this.endCol&&o<=this.viewportCappedEndRow:a<this.startCol&&o>=this.viewportCappedStartRow&&a>=this.endCol&&o<=this.viewportCappedEndRow:o>this.viewportStartRow&&o<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&o===this.viewportStartRow&&a>=this.startCol&&a<this.endCol||this.viewportStartRow<this.viewportEndRow&&o===this.viewportEndRow&&a<this.endCol||this.viewportStartRow<this.viewportEndRow&&o===this.viewportStartRow&&a>=this.startCol)}}t.createSelectionRenderModel=function(){return new n}},509:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextureAtlas=void 0;let u=n(237),h=n(855),a=n(147),o=n(160),m=n(860),p=n(374),i=n(485),e=n(385),d=n(345),f={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},s;class g{constructor(w,k,M){this._document=w,this._config=k,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new i.FourKeyMap,this._cacheMapCombined=new i.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new a.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new d.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new d.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=R(w,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,p.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}get pages(){return this._pages}dispose(){for(let w of this.pages)w.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let w=new e.IdleTaskQueue;for(let k=33;k<126;k++)w.enqueue(()=>{if(!this._cacheMap.get(k,h.DEFAULT_COLOR,h.DEFAULT_COLOR,h.DEFAULT_EXT)){let M=this._drawToCache(k,h.DEFAULT_COLOR,h.DEFAULT_COLOR,h.DEFAULT_EXT);this._cacheMap.set(k,h.DEFAULT_COLOR,h.DEFAULT_COLOR,h.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let w of this._pages)w.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){g.maxAtlasPages&&this._pages.length>=Math.max(4,g.maxAtlasPages/2)&&queueMicrotask(()=>{let k=this._pages.filter(A=>2*A.canvas.width<=(g.maxTextureSize||4096)).sort((A,U)=>U.canvas.width!==A.canvas.width?U.canvas.width-A.canvas.width:U.percentageUsed-A.percentageUsed),M=-1,D=0;for(let A=0;A<k.length;A++)if(k[A].canvas.width!==D)M=A,D=k[A].canvas.width;else if(A-M==3)break;let P=k.slice(M,M+4),W=P.map(A=>A.glyphs[0].texturePage).sort((A,U)=>A>U?1:-1),F=W[0],$=this._mergePages(P,F);$.version++,this._pages[F]=$;for(let A=W.length-1;A>=1;A--)this._deletePage(W[A]);this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire($.canvas)});let w=new L(this._document,this._textureSize);return this._pages.push(w),this._activePages.push(w),this._onAddTextureAtlasCanvas.fire(w.canvas),w}_mergePages(w,k){let M=2*w[0].canvas.width,D=new L(this._document,M,w);for(let[P,W]of w.entries()){let F=P*W.canvas.width%M,$=Math.floor(P/2)*W.canvas.height;D.ctx.drawImage(W.canvas,F,$);for(let U of W.glyphs)U.texturePage=k,U.sizeClipSpace.x=U.size.x/M,U.sizeClipSpace.y=U.size.y/M,U.texturePosition.x+=F,U.texturePosition.y+=$,U.texturePositionClipSpace.x=U.texturePosition.x/M,U.texturePositionClipSpace.y=U.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(W.canvas);let A=this._activePages.indexOf(W);A!==-1&&this._activePages.splice(A,1)}return D}_deletePage(w){this._pages.splice(w,1);for(let k=w;k<this._pages.length;k++){let M=this._pages[k];for(let D of M.glyphs)D.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(w,k,M,D){return this._getFromCacheMap(this._cacheMapCombined,w,k,M,D)}getRasterizedGlyph(w,k,M,D){return this._getFromCacheMap(this._cacheMap,w,k,M,D)}_getFromCacheMap(w,k,M,D,P){return s=w.get(k,M,D,P),s||(s=this._drawToCache(k,M,D,P),w.set(k,M,D,P,s)),s}_getColorFromAnsiIndex(w){if(w>=this._config.colors.ansi.length)throw new Error("No color found for idx "+w);return this._config.colors.ansi[w]}_getBackgroundColor(w,k,M,D){if(this._config.allowTransparency)return o.NULL_COLOR;let P;switch(w){case 16777216:case 33554432:P=this._getColorFromAnsiIndex(k);break;case 50331648:let W=a.AttributeData.toColorRGB(k);P=o.rgba.toColor(W[0],W[1],W[2]);break;default:P=M?this._config.colors.foreground:this._config.colors.background}return D&&(P=o.color.blend(this._config.colors.background,o.color.multiplyOpacity(P,u.DIM_OPACITY))),P}_getForegroundColor(w,k,M,D,P,W,F,$,A,U){let N=this._getMinimumContrastColor(w,k,M,D,P,W,!1,A,U);if(N)return N;let z;switch(P){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&A&&W<8&&(W+=8),z=this._getColorFromAnsiIndex(W);break;case 50331648:let K=a.AttributeData.toColorRGB(W);z=o.rgba.toColor(K[0],K[1],K[2]);break;default:z=F?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(z=o.color.opaque(z)),$&&(z=o.color.multiplyOpacity(z,u.DIM_OPACITY)),z}_resolveBackgroundRgba(w,k,M){switch(w){case 16777216:case 33554432:return this._getColorFromAnsiIndex(k).rgba;case 50331648:return k<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(w,k,M,D){switch(w){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&D&&k<8&&(k+=8),this._getColorFromAnsiIndex(k).rgba;case 50331648:return k<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(w,k,M,D,P,W,F,$,A){if(this._config.minimumContrastRatio===1||A)return;let U=this._config.colors.contrastCache.getColor(w,D);if(U!==void 0)return U||void 0;let N=this._resolveBackgroundRgba(k,M,F),z=this._resolveForegroundRgba(P,W,F,$),K=o.rgba.ensureContrastRatio(N,z,this._config.minimumContrastRatio);if(!K)return void this._config.colors.contrastCache.setColor(w,D,null);let Q=o.rgba.toColor(K>>24&255,K>>16&255,K>>8&255);return this._config.colors.contrastCache.setColor(w,D,Q),Q}_drawToCache(w,k,M,D){let P=typeof w=="number"?String.fromCharCode(w):w,W=this._config.deviceCellWidth*Math.max(P.length,2)+4;this._tmpCanvas.width<W&&(this._tmpCanvas.width=W);let F=this._config.deviceCellHeight+8;if(this._tmpCanvas.height<F&&(this._tmpCanvas.height=F),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=k,this._workAttributeData.extended.ext=D,this._workAttributeData.isInvisible())return f;let $=!!this._workAttributeData.isBold(),A=!!this._workAttributeData.isInverse(),U=!!this._workAttributeData.isDim(),N=!!this._workAttributeData.isItalic(),z=!!this._workAttributeData.isUnderline(),K=!!this._workAttributeData.isStrikethrough(),Q=this._workAttributeData.getFgColor(),oe=this._workAttributeData.getFgColorMode(),ee=this._workAttributeData.getBgColor(),ne=this._workAttributeData.getBgColorMode();if(A){let fe=Q;Q=ee,ee=fe;let Se=oe;oe=ne,ne=Se}let G=this._getBackgroundColor(ne,ee,A,U);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=G.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let V=$?this._config.fontWeightBold:this._config.fontWeight,q=N?"italic":"";this._tmpCtx.font=`${q} ${V} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=u.TEXT_BASELINE;let te=P.length===1&&(0,p.isPowerlineGlyph)(P.charCodeAt(0)),ce=P.length===1&&(0,p.isRestrictedPowerlineGlyph)(P.charCodeAt(0)),Ee=this._getForegroundColor(k,ne,ee,M,oe,Q,A,U,$,(0,p.excludeFromContrastRatioDemands)(P.charCodeAt(0)));this._tmpCtx.fillStyle=Ee.css;let re=ce?0:4,ke=!1;this._config.customGlyphs!==!1&&(ke=(0,m.tryDrawCustomChar)(this._tmpCtx,P,re,re,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Z,Me=!te;if(Z=typeof w=="number"?this._unicodeService.wcwidth(w):this._unicodeService.getStringCellWidth(w),z){this._tmpCtx.save();let fe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Se=fe%2==1?.5:0;if(this._tmpCtx.lineWidth=fe,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Me=!1,this._tmpCtx.strokeStyle=`rgb(${a.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Me=!1;let Be=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&Be<8&&(Be+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(Be).css}this._tmpCtx.beginPath();let De=re,Pe=Math.ceil(re+this._config.deviceCharHeight)-Se,gt=re+this._config.deviceCharHeight+fe-Se,nt=Math.ceil(re+this._config.deviceCharHeight+2*fe)-Se;for(let Be=0;Be<Z;Be++){this._tmpCtx.save();let Re=De+Be*this._config.deviceCellWidth,je=De+(Be+1)*this._config.deviceCellWidth,Vt=Re+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Re,Pe),this._tmpCtx.lineTo(je,Pe),this._tmpCtx.moveTo(Re,nt),this._tmpCtx.lineTo(je,nt);break;case 3:let St=fe<=1?nt:Math.ceil(re+this._config.deviceCharHeight-fe/2)-Se,Rt=fe<=1?Pe:Math.ceil(re+this._config.deviceCharHeight+fe/2)-Se,Xr=new Path2D;Xr.rect(Re,Pe,this._config.deviceCellWidth,nt-Pe),this._tmpCtx.clip(Xr),this._tmpCtx.moveTo(Re-this._config.deviceCellWidth/2,gt),this._tmpCtx.bezierCurveTo(Re-this._config.deviceCellWidth/2,Rt,Re,Rt,Re,gt),this._tmpCtx.bezierCurveTo(Re,St,Vt,St,Vt,gt),this._tmpCtx.bezierCurveTo(Vt,Rt,je,Rt,je,gt),this._tmpCtx.bezierCurveTo(je,St,je+this._config.deviceCellWidth/2,St,je+this._config.deviceCellWidth/2,gt);break;case 4:this._tmpCtx.setLineDash([2*this._config.devicePixelRatio,this._config.devicePixelRatio]),this._tmpCtx.moveTo(Re,Pe),this._tmpCtx.lineTo(je,Pe);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Re,Pe),this._tmpCtx.lineTo(je,Pe);break;default:this._tmpCtx.moveTo(Re,Pe),this._tmpCtx.lineTo(je,Pe)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ke&&this._config.fontSize>=12&&!this._config.allowTransparency&&P!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let Be=this._tmpCtx.measureText(P);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in Be&&Be.actualBoundingBoxDescent>0){this._tmpCtx.save();let Re=new Path2D;Re.rect(De,Pe-Math.ceil(fe/2),this._config.deviceCellWidth,nt-Pe+Math.ceil(fe/2)),this._tmpCtx.clip(Re),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=G.css,this._tmpCtx.strokeText(P,re,re+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(ke||this._tmpCtx.fillText(P,re,re+this._config.deviceCharHeight),P==="_"&&!this._config.allowTransparency){let fe=b(this._tmpCtx.getImageData(re,re,this._config.deviceCellWidth,this._config.deviceCellHeight),G,Ee,Me);if(fe)for(let Se=1;Se<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=G.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(P,re,re+this._config.deviceCharHeight-Se),fe=b(this._tmpCtx.getImageData(re,re,this._config.deviceCellWidth,this._config.deviceCellHeight),G,Ee,Me),fe);Se++);}if(K){let fe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),Se=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=fe,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(re,re+Math.floor(this._config.deviceCharHeight/2)-Se),this._tmpCtx.lineTo(re+this._config.deviceCharWidth*Z,re+Math.floor(this._config.deviceCharHeight/2)-Se),this._tmpCtx.stroke()}this._tmpCtx.restore();let he=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),qt;if(qt=this._config.allowTransparency?function(fe){for(let Se=0;Se<fe.data.length;Se+=4)if(fe.data[Se+3]>0)return!1;return!0}(he):b(he,G,Ee,Me),qt)return f;let we=this._findGlyphBoundingBox(he,this._workBoundingBox,W,ce,ke,re),me,ve;for(;;){if(this._activePages.length===0){let fe=this._createNewPage();me=fe,ve=fe.currentRow,ve.height=we.size.y;break}me=this._activePages[this._activePages.length-1],ve=me.currentRow;for(let fe of this._activePages)we.size.y<=fe.currentRow.height&&(me=fe,ve=fe.currentRow);for(let fe=this._activePages.length-1;fe>=0;fe--)for(let Se of this._activePages[fe].fixedRows)Se.height<=ve.height&&we.size.y<=Se.height&&(me=this._activePages[fe],ve=Se);if(ve.y+we.size.y>=me.canvas.height||ve.height>we.size.y+2){let fe=!1;if(me.currentRow.y+me.currentRow.height+we.size.y>=me.canvas.height){let Se;for(let De of this._activePages)if(De.currentRow.y+De.currentRow.height+we.size.y<De.canvas.height){Se=De;break}if(Se)me=Se;else{let De=this._createNewPage();me=De,ve=De.currentRow,ve.height=we.size.y,fe=!0}}fe||(me.currentRow.height>0&&me.fixedRows.push(me.currentRow),ve={x:0,y:me.currentRow.y+me.currentRow.height,height:we.size.y},me.fixedRows.push(ve),me.currentRow={x:0,y:ve.y+ve.height,height:0})}if(ve.x+we.size.x<=me.canvas.width)break;ve===me.currentRow?(ve.x=0,ve.y+=ve.height,ve.height=0):me.fixedRows.splice(me.fixedRows.indexOf(ve),1)}return we.texturePage=this._pages.indexOf(me),we.texturePosition.x=ve.x,we.texturePosition.y=ve.y,we.texturePositionClipSpace.x=ve.x/me.canvas.width,we.texturePositionClipSpace.y=ve.y/me.canvas.height,we.sizeClipSpace.x/=me.canvas.width,we.sizeClipSpace.y/=me.canvas.height,ve.height=Math.max(ve.height,we.size.y),ve.x+=we.size.x,me.ctx.putImageData(he,we.texturePosition.x-this._workBoundingBox.left,we.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,we.size.x,we.size.y),me.addGlyph(we),me.version++,we}_findGlyphBoundingBox(w,k,M,D,P,W){k.top=0;let F=D?this._config.deviceCellHeight:this._tmpCanvas.height,$=D?this._config.deviceCellWidth:M,A=!1;for(let U=0;U<F;U++){for(let N=0;N<$;N++){let z=U*this._tmpCanvas.width*4+4*N+3;if(w.data[z]!==0){k.top=U,A=!0;break}}if(A)break}k.left=0,A=!1;for(let U=0;U<W+$;U++){for(let N=0;N<F;N++){let z=N*this._tmpCanvas.width*4+4*U+3;if(w.data[z]!==0){k.left=U,A=!0;break}}if(A)break}k.right=$,A=!1;for(let U=W+$-1;U>=W;U--){for(let N=0;N<F;N++){let z=N*this._tmpCanvas.width*4+4*U+3;if(w.data[z]!==0){k.right=U,A=!0;break}}if(A)break}k.bottom=F,A=!1;for(let U=F-1;U>=0;U--){for(let N=0;N<$;N++){let z=U*this._tmpCanvas.width*4+4*N+3;if(w.data[z]!==0){k.bottom=U,A=!0;break}}if(A)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:k.right-k.left+1,y:k.bottom-k.top+1},sizeClipSpace:{x:k.right-k.left+1,y:k.bottom-k.top+1},offset:{x:-k.left+W+(D||P?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-k.top+W+(D||P?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}t.TextureAtlas=g;class L{constructor(w,k,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let D of M)this._glyphs.push(...D.glyphs),this._usedPixels+=D._usedPixels;this.canvas=R(w,k,k),this.ctx=(0,p.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(w){this._glyphs.push(w),this._usedPixels+=w.size.x*w.size.y}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function b(E,w,k,M){let D=w.rgba>>>24,P=w.rgba>>>16&255,W=w.rgba>>>8&255,F=k.rgba>>>24,$=k.rgba>>>16&255,A=k.rgba>>>8&255,U=Math.floor((Math.abs(D-F)+Math.abs(P-$)+Math.abs(W-A))/12),N=!0;for(let z=0;z<E.data.length;z+=4)E.data[z]===D&&E.data[z+1]===P&&E.data[z+2]===W||M&&Math.abs(E.data[z]-D)+Math.abs(E.data[z+1]-P)+Math.abs(E.data[z+2]-W)<U?E.data[z+3]=0:N=!1;return N}function R(E,w,k){let M=E.createElement("canvas");return M.width=w,M.height=k,M}},577:function(y,t,n){var u=this&&this.__decorate||function(d,f,s,g){var L,b=arguments.length,R=b<3?f:g===null?g=Object.getOwnPropertyDescriptor(f,s):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(d,f,s,g);else for(var E=d.length-1;E>=0;E--)(L=d[E])&&(R=(b<3?L(R):b>3?L(f,s,R):L(f,s))||R);return b>3&&R&&Object.defineProperty(f,s,R),R},h=this&&this.__param||function(d,f){return function(s,g){f(s,g,d)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;let a=n(147),o=n(855),m=n(782),p=n(97);class i extends a.AttributeData{constructor(f,s,g){super(),this.content=0,this.combinedData="",this.fg=f.fg,this.bg=f.bg,this.combinedData=s,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(f){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=i;let e=class ah{constructor(f){this._bufferService=f,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(f){let s={id:this._nextCharacterJoinerId++,handler:f};return this._characterJoiners.push(s),s.id}deregister(f){for(let s=0;s<this._characterJoiners.length;s++)if(this._characterJoiners[s].id===f)return this._characterJoiners.splice(s,1),!0;return!1}getJoinedCharacters(f){if(this._characterJoiners.length===0)return[];let s=this._bufferService.buffer.lines.get(f);if(!s||s.length===0)return[];let g=[],L=s.translateToString(!0),b=0,R=0,E=0,w=s.getFg(0),k=s.getBg(0);for(let M=0;M<s.getTrimmedLength();M++)if(s.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==k){if(M-b>1){let D=this._getJoinedRanges(L,E,R,s,b);for(let P=0;P<D.length;P++)g.push(D[P])}b=M,E=R,w=this._workCell.fg,k=this._workCell.bg}R+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){let M=this._getJoinedRanges(L,E,R,s,b);for(let D=0;D<M.length;D++)g.push(M[D])}return g}_getJoinedRanges(f,s,g,L,b){let R=f.substring(s,g),E=[];try{E=this._characterJoiners[0].handler(R)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{let k=this._characterJoiners[w].handler(R);for(let M=0;M<k.length;M++)ah._mergeRanges(E,k[M])}catch(k){console.error(k)}return this._stringRangesToCellRanges(E,L,b),E}_stringRangesToCellRanges(f,s,g){let L=0,b=!1,R=0,E=f[L];if(E){for(let w=g;w<this._bufferService.cols;w++){let k=s.getWidth(w),M=s.getString(w).length||o.WHITESPACE_CELL_CHAR.length;if(k!==0){if(!b&&E[0]<=R&&(E[0]=w,b=!0),E[1]<=R){if(E[1]=w,E=f[++L],!E)break;E[0]<=R?(E[0]=w,b=!0):b=!1}R+=M}}E&&(E[1]=this._bufferService.cols)}}static _mergeRanges(f,s){let g=!1;for(let L=0;L<f.length;L++){let b=f[L];if(g){if(s[1]<=b[0])return f[L-1][1]=s[1],f;if(s[1]<=b[1])return f[L-1][1]=Math.max(s[1],b[1]),f.splice(L,1),f;f.splice(L,1),L--}else{if(s[1]<=b[0])return f.splice(L,0,s),f;if(s[1]<=b[1])return b[0]=Math.min(s[0],b[0]),f;s[0]<b[1]&&(b[0]=Math.min(s[0],b[0]),g=!0)}}return g?f[f.length-1][1]=s[1]:f.push(s),f}};e=u([h(0,p.IBufferService)],e),t.CharacterJoinerService=e},160:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;let u=n(399),h=0,a=0,o=0,m=0;var p,i,e;function d(s){let g=s.toString(16);return g.length<2?"0"+g:g}function f(s,g){return s<g?(g+.05)/(s+.05):(s+.05)/(g+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},function(s){s.toCss=function(g,L,b,R){return R!==void 0?`#${d(g)}${d(L)}${d(b)}${d(R)}`:`#${d(g)}${d(L)}${d(b)}`},s.toRgba=function(g,L,b,R=255){return(g<<24|L<<16|b<<8|R)>>>0}}(p=t.channels||(t.channels={})),function(s){function g(L,b){return m=Math.round(255*b),[h,a,o]=e.toChannels(L.rgba),{css:p.toCss(h,a,o,m),rgba:p.toRgba(h,a,o,m)}}s.blend=function(L,b){if(m=(255&b.rgba)/255,m===1)return{css:b.css,rgba:b.rgba};let R=b.rgba>>24&255,E=b.rgba>>16&255,w=b.rgba>>8&255,k=L.rgba>>24&255,M=L.rgba>>16&255,D=L.rgba>>8&255;return h=k+Math.round((R-k)*m),a=M+Math.round((E-M)*m),o=D+Math.round((w-D)*m),{css:p.toCss(h,a,o),rgba:p.toRgba(h,a,o)}},s.isOpaque=function(L){return(255&L.rgba)==255},s.ensureContrastRatio=function(L,b,R){let E=e.ensureContrastRatio(L.rgba,b.rgba,R);if(E)return e.toColor(E>>24&255,E>>16&255,E>>8&255)},s.opaque=function(L){let b=(255|L.rgba)>>>0;return[h,a,o]=e.toChannels(b),{css:p.toCss(h,a,o),rgba:b}},s.opacity=g,s.multiplyOpacity=function(L,b){return m=255&L.rgba,g(L,m*b/255)},s.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(t.color||(t.color={})),function(s){let g,L;if(!u.isNode){let b=document.createElement("canvas");b.width=1,b.height=1;let R=b.getContext("2d",{willReadFrequently:!0});R&&(g=R,g.globalCompositeOperation="copy",L=g.createLinearGradient(0,0,1,1))}s.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return h=parseInt(b.slice(1,2).repeat(2),16),a=parseInt(b.slice(2,3).repeat(2),16),o=parseInt(b.slice(3,4).repeat(2),16),e.toColor(h,a,o);case 5:return h=parseInt(b.slice(1,2).repeat(2),16),a=parseInt(b.slice(2,3).repeat(2),16),o=parseInt(b.slice(3,4).repeat(2),16),m=parseInt(b.slice(4,5).repeat(2),16),e.toColor(h,a,o,m);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}let R=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(R)return h=parseInt(R[1]),a=parseInt(R[2]),o=parseInt(R[3]),m=Math.round(255*(R[5]===void 0?1:parseFloat(R[5]))),e.toColor(h,a,o,m);if(!g||!L)throw new Error("css.toColor: Unsupported css format");if(g.fillStyle=L,g.fillStyle=b,typeof g.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(g.fillRect(0,0,1,1),[h,a,o,m]=g.getImageData(0,0,1,1).data,m!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(h,a,o,m),css:b}}}(t.css||(t.css={})),function(s){function g(L,b,R){let E=L/255,w=b/255,k=R/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))}s.relativeLuminance=function(L){return g(L>>16&255,L>>8&255,255&L)},s.relativeLuminance2=g}(i=t.rgb||(t.rgb={})),function(s){function g(b,R,E){let w=b>>24&255,k=b>>16&255,M=b>>8&255,D=R>>24&255,P=R>>16&255,W=R>>8&255,F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));for(;F<E&&(D>0||P>0||W>0);)D-=Math.max(0,Math.ceil(.1*D)),P-=Math.max(0,Math.ceil(.1*P)),W-=Math.max(0,Math.ceil(.1*W)),F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));return(D<<24|P<<16|W<<8|255)>>>0}function L(b,R,E){let w=b>>24&255,k=b>>16&255,M=b>>8&255,D=R>>24&255,P=R>>16&255,W=R>>8&255,F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));for(;F<E&&(D<255||P<255||W<255);)D=Math.min(255,D+Math.ceil(.1*(255-D))),P=Math.min(255,P+Math.ceil(.1*(255-P))),W=Math.min(255,W+Math.ceil(.1*(255-W))),F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));return(D<<24|P<<16|W<<8|255)>>>0}s.ensureContrastRatio=function(b,R,E){let w=i.relativeLuminance(b>>8),k=i.relativeLuminance(R>>8);if(f(w,k)<E){if(k<w){let P=g(b,R,E),W=f(w,i.relativeLuminance(P>>8));if(W<E){let F=L(b,R,E);return W>f(w,i.relativeLuminance(F>>8))?P:F}return P}let M=L(b,R,E),D=f(w,i.relativeLuminance(M>>8));if(D<E){let P=g(b,R,E);return D>f(w,i.relativeLuminance(P>>8))?M:P}return M}},s.reduceLuminance=g,s.increaseLuminance=L,s.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},s.toColor=function(b,R,E,w){return{css:p.toCss(b,R,E,w),rgba:p.toRgba(b,R,E,w)}}}(e=t.rgba||(t.rgba={})),t.toPaddedHex=d,t.contrastRatio=f},345:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===n)return void this._listeners.splice(u,1)}}})),this._event}fire(n,u){let h=[];for(let a=0;a<this._listeners.length;a++)h.push(this._listeners[a]);for(let a=0;a<h.length;a++)h[a].call(void 0,n,u)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},t.forwardEvent=function(n,u){return n(h=>u.fire(h))}},859:(y,t)=>{function n(u){for(let h of u)h.dispose();u.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){let h=this._disposables.indexOf(u);h!==-1&&this._disposables.splice(h,1)}},t.toDisposable=function(u){return{dispose:u}},t.disposeArray=n,t.getDisposeArrayDisposable=function(u){return{dispose:()=>n(u)}}},485:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(h,a,o){this._data[h]||(this._data[h]={}),this._data[h][a]=o}get(h,a){return this._data[h]?this._data[h][a]:void 0}clear(){this._data={}}}t.TwoKeyMap=n,t.FourKeyMap=class{constructor(){this._data=new n}set(u,h,a,o,m){this._data.get(u,h)||this._data.set(u,h,new n),this._data.get(u,h).set(a,o,m)}get(u,h,a,o){var m;return(m=this._data.get(u,h))===null||m===void 0?void 0:m.get(a,o)}clear(){this._data.clear()}}},399:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode=typeof navigator=="undefined";let n=t.isNode?"node":navigator.userAgent,u=t.isNode?"node":navigator.platform;t.isFirefox=n.includes("Firefox"),t.isLegacyEdge=n.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(n),t.getSafariVersion=function(){if(!t.isSafari)return 0;let h=n.match(/Version\/(\d+)/);return h===null||h.length<2?0:parseInt(h[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),t.isIpad=u==="iPad",t.isIphone=u==="iPhone",t.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),t.isLinux=u.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(n)},385:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;let u=n(399);class h{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let p=0,i=0,e=m.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),i=Math.max(p,i),d=m.timeRemaining(),1.5*i>d)return e-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(e-p))}ms`),void this._start();e=d}this.clear()}}class a extends h{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){let p=Date.now()+m;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}t.PriorityTaskQueue=a,t.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends h{_requestCallback(o){return requestIdleCallback(o)}_cancelCallback(o){cancelIdleCallback(o)}}:a,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(o){this._queue.clear(),this._queue.enqueue(o)}flush(){this._queue.flush()}}},147:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(a){return[a>>>16&255,a>>>8&255,255&a]}static fromColorRGB(a){return(255&a[0])<<16|(255&a[1])<<8|255&a[2]}clone(){let a=new n;return a.fg=this.fg,a.bg=this.bg,a.extended=this.extended.clone(),a}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}t.AttributeData=n;class u{constructor(a=0,o=0){this._ext=0,this._urlId=0,this._ext=a,this._urlId=o}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(a){this._ext=a}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(a){this._ext&=-469762049,this._ext|=a<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(a){this._ext&=-67108864,this._ext|=67108863&a}get urlId(){return this._urlId}set urlId(a){this._urlId=a}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}t.ExtendedAttrs=u},782:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;let u=n(133),h=n(855),a=n(147);class o extends a.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new a.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let i=new o;return i.setFromCharData(p),i}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[h.CHAR_DATA_ATTR_INDEX],this.bg=0;let i=!1;if(p[h.CHAR_DATA_CHAR_INDEX].length>2)i=!0;else if(p[h.CHAR_DATA_CHAR_INDEX].length===2){let e=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=e&&e<=56319){let d=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(e-55296)+d-56320+65536|p[h.CHAR_DATA_WIDTH_INDEX]<<22:i=!0}else i=!0}else this.content=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[h.CHAR_DATA_WIDTH_INDEX]<<22;i&&(this.combinedData=p[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[h.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},855:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},133:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},t.utf32ToString=function(n,u=0,h=n.length){let a="";for(let o=u;o<h;++o){let m=n[o];m>65535?(m-=65536,a+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):a+=String.fromCharCode(m)}return a},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,u){let h=n.length;if(!h)return 0;let a=0,o=0;if(this._interim){let m=n.charCodeAt(o++);56320<=m&&m<=57343?u[a++]=1024*(this._interim-55296)+m-56320+65536:(u[a++]=this._interim,u[a++]=m),this._interim=0}for(let m=o;m<h;++m){let p=n.charCodeAt(m);if(55296<=p&&p<=56319){if(++m>=h)return this._interim=p,a;let i=n.charCodeAt(m);56320<=i&&i<=57343?u[a++]=1024*(p-55296)+i-56320+65536:(u[a++]=p,u[a++]=i)}else p!==65279&&(u[a++]=p)}return a}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,u){let h=n.length;if(!h)return 0;let a,o,m,p,i=0,e=0,d=0;if(this.interim[0]){let g=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let b,R=0;for(;(b=63&this.interim[++R])&&R<4;)L<<=6,L|=b;let E=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=E-R;for(;d<w;){if(d>=h)return 0;if(b=n[d++],(192&b)!=128){d--,g=!0;break}this.interim[R++]=b,L<<=6,L|=63&b}g||(E===2?L<128?d--:u[i++]=L:E===3?L<2048||L>=55296&&L<=57343||L===65279||(u[i++]=L):L<65536||L>1114111||(u[i++]=L)),this.interim.fill(0)}let f=h-4,s=d;for(;s<h;){for(;!(!(s<f)||128&(a=n[s])||128&(o=n[s+1])||128&(m=n[s+2])||128&(p=n[s+3]));)u[i++]=a,u[i++]=o,u[i++]=m,u[i++]=p,s+=4;if(a=n[s++],a<128)u[i++]=a;else if((224&a)==192){if(s>=h)return this.interim[0]=a,i;if(o=n[s++],(192&o)!=128){s--;continue}if(e=(31&a)<<6|63&o,e<128){s--;continue}u[i++]=e}else if((240&a)==224){if(s>=h)return this.interim[0]=a,i;if(o=n[s++],(192&o)!=128){s--;continue}if(s>=h)return this.interim[0]=a,this.interim[1]=o,i;if(m=n[s++],(192&m)!=128){s--;continue}if(e=(15&a)<<12|(63&o)<<6|63&m,e<2048||e>=55296&&e<=57343||e===65279)continue;u[i++]=e}else if((248&a)==240){if(s>=h)return this.interim[0]=a,i;if(o=n[s++],(192&o)!=128){s--;continue}if(s>=h)return this.interim[0]=a,this.interim[1]=o,i;if(m=n[s++],(192&m)!=128){s--;continue}if(s>=h)return this.interim[0]=a,this.interim[1]=o,this.interim[2]=m,i;if(p=n[s++],(192&p)!=128){s--;continue}if(e=(7&a)<<18|(63&o)<<12|(63&m)<<6|63&p,e<65536||e>1114111)continue;u[i++]=e}}return i}}},726:(y,t)=>{function n(u,h,a){h.di$target===h?h.di$dependencies.push({id:u,index:a}):(h.di$dependencies=[{id:u,index:a}],h.di$target=h)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0,t.serviceRegistry=new Map,t.getServiceDependencies=function(u){return u.di$dependencies||[]},t.createDecorator=function(u){if(t.serviceRegistry.has(u))return t.serviceRegistry.get(u);let h=function(a,o,m){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");n(h,a,m)};return h.toString=()=>u,t.serviceRegistry.set(u,h),h}},97:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;let u=n(726);var h;t.IBufferService=(0,u.createDecorator)("BufferService"),t.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),t.ICoreService=(0,u.createDecorator)("CoreService"),t.ICharsetService=(0,u.createDecorator)("CharsetService"),t.IInstantiationService=(0,u.createDecorator)("InstantiationService"),(h=t.LogLevelEnum||(t.LogLevelEnum={}))[h.DEBUG=0]="DEBUG",h[h.INFO=1]="INFO",h[h.WARN=2]="WARN",h[h.ERROR=3]="ERROR",h[h.OFF=4]="OFF",t.ILogService=(0,u.createDecorator)("LogService"),t.IOptionsService=(0,u.createDecorator)("OptionsService"),t.IOscLinkService=(0,u.createDecorator)("OscLinkService"),t.IUnicodeService=(0,u.createDecorator)("UnicodeService"),t.IDecorationService=(0,u.createDecorator)("DecorationService")}},_={};function v(y){var t=_[y];if(t!==void 0)return t.exports;var n=_[y]={exports:{}};return c[y].call(n.exports,n,n.exports,v),n.exports}var x={};return(()=>{var y=x;Object.defineProperty(y,"__esModule",{value:!0}),y.CanvasAddon=void 0;let t=v(949),n=v(345),u=v(859);class h extends u.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new n.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new n.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){var o;return(o=this._renderer)===null||o===void 0?void 0:o.textureAtlas}activate(o){let m=o._core;if(!o.element)return void this.register(m.onWillOpen(()=>this.activate(o)));this._terminal=o;let p=m.coreService,i=m.optionsService,e=m.screenElement,d=m.linkifier2,f=m,s=f._bufferService,g=f._renderService,L=f._characterJoinerService,b=f._charSizeService,R=f._coreBrowserService,E=f._decorationService,w=f._themeService;this._renderer=new t.CanvasRenderer(o,e,d,s,b,i,L,p,R,E,w),this.register((0,n.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,n.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),g.setRenderer(this._renderer),g.handleResize(s.cols,s.rows),this.register((0,u.toDisposable)(()=>{var k;g.setRenderer(this._terminal._core._createRenderer()),g.handleResize(o.cols,o.rows),(k=this._renderer)===null||k===void 0||k.dispose(),this._renderer=void 0}))}}y.CanvasAddon=h})(),x})()})});var wh=ze((se,Yo)=>{/*! For license information please see xterm-addon-ligatures.js.LICENSE.txt */(function(c,_){typeof se=="object"&&typeof Yo=="object"?Yo.exports=_(require("fs"),require("path"),require("util"),require("stream")):typeof define=="function"&&define.amd?define(["fs","path","util","stream"],_):typeof se=="object"?se.LigaturesAddon=_(require("fs"),require("path"),require("util"),require("stream")):c.LigaturesAddon=_(c.fs,c.path,c.util,c.stream)})(self,function(c,_,v,x){return(()=>{var y={185:(h,a)=>{"use strict";function o(p){let i={};for(let[e,d]of Object.entries(p.individual))i[e]=m(d);for(let{range:e,entry:d}of p.range){let f=m(d);for(let s=e[0];s<e[1];s++)i[s]=f}return i}function m(p){let i={};return p.forward&&(i.forward=o(p.forward)),p.reverse&&(i.reverse=o(p.reverse)),p.lookup&&(i.lookup=p.lookup),i}Object.defineProperty(a,"__esModule",{value:!0}),a.default=o},98:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(602),p=o(593),i=o(233),e=o(694),d=o(532),f=o(595),s=o(223),g=o(439),L=o(349),b=o(185);class R{constructor(k,M){this._lookupTrees=[],this._glyphLookups={},this._font=k,M.cacheSize>0&&(this._cache=new p({max:M.cacheSize,length:(F,$)=>$.length}));let D=(this._font.tables.gsub&&this._font.tables.gsub.features.filter(F=>F.tag==="calt")||[]).reduce((F,$)=>[...F,...$.feature.lookupListIndexes],[]),P=this._font.tables.gsub&&this._font.tables.gsub.lookups||[],W=P.filter((F,$)=>D.some(A=>A===$));for(let[F,$]of W.entries()){let A=[];switch($.lookupType){case 6:for(let[N,z]of $.subtables.entries())switch(z.substFormat){case 1:A.push(f.default(z,P,N));break;case 2:A.push(s.default(z,P,N));break;case 3:A.push(g.default(z,P,N))}break;case 8:for(let[N,z]of $.subtables.entries())A.push(L.default(z,N))}let U=b.default(i.default(A));this._lookupTrees.push({tree:U,processForward:$.lookupType!==8});for(let N of Object.keys(U))this._glyphLookups[N]||(this._glyphLookups[N]=[]),this._glyphLookups[N].push(F)}}findLigatures(k){let M=this._cache&&this._cache.get(k);if(M&&!Array.isArray(M))return M;let D=[];for(let F of k)D.push(this._font.charToGlyphIndex(F));if(this._lookupTrees.length===0)return{inputGlyphs:D,outputGlyphs:D,contextRanges:[]};let P=this._findInternal(D.slice()),W={inputGlyphs:D,outputGlyphs:P.sequence,contextRanges:P.ranges};return this._cache&&this._cache.set(k,W),W}findLigatureRanges(k){if(this._lookupTrees.length===0)return[];let M=this._cache&&this._cache.get(k);if(M)return Array.isArray(M)?M:M.contextRanges;let D=[];for(let W of k)D.push(this._font.charToGlyphIndex(W));let P=this._findInternal(D);return this._cache&&this._cache.set(k,P.ranges),P.ranges}_findInternal(k){let M=[],D=this._getNextLookup(k,0);for(;D.index!==null;){let P=this._lookupTrees[D.index];if(P.processForward){let W=D.last;for(let F=D.first;F<W;F++){let $=e.default(P.tree,k,F,F);if($){for(let A=0;A<$.substitutions.length;A++){let U=$.substitutions[A];U!==null&&(k[F+A]=U)}d.default(M,$.contextRange[0]+F,$.contextRange[1]+F),F+$.length>=W&&(W=F+$.length+1),F+=$.length-1}}}else for(let W=D.last-1;W>=D.first;W--){let F=e.default(P.tree,k,W,W);if(F){for(let $=0;$<F.substitutions.length;$++){let A=F.substitutions[$];A!==null&&(k[W+$]=A)}d.default(M,F.contextRange[0]+W,F.contextRange[1]+W),W-=F.length-1}}D=this._getNextLookup(k,D.index+1)}return{sequence:k,ranges:M}}_getNextLookup(k,M){let D={index:null,first:1/0,last:-1};for(let P=0;P<k.length;P++){let W=this._glyphLookups[k[P]];if(W)for(let F=0;F<W.length;F++){let $=W[F];if($>=M){(D.index===null||$<=D.index)&&(D.index=$,D.first>P&&(D.first=P),D.last=P+1);break}}}return D}}async function E(w,k){let M=await Promise.resolve().then(()=>o(269)).then(D=>D.promisify(m.load)(w));return new R(M,Object.assign({cacheSize:0},k))}a.load=async function(w,k){let[M]=await Promise.resolve().then(()=>o(781)).then(D=>D.listVariants(w));if(!M)throw new Error(`Font ${w} not found`);return E(M.path,k)},a.loadFile=E,a.loadBuffer=function(w,k){let M=m.parse(w);return new R(M,Object.assign({cacheSize:0},k))}},233:(h,a)=>{"use strict";function o(s,g){for(let[L,b]of Object.entries(g.individual))if(s.individual[L])m(s.individual[L],b);else{let R=!1;for(let[E,{range:w,entry:k}]of s.range.entries()){let M=i(Number(L),w);if(M.both!==null){R=!0,s.individual[L]=b,m(s.individual[L],d(k)),s.range.splice(E,1);for(let D of M.second)Array.isArray(D)?s.range.push({range:D,entry:d(k)}):s.individual[D]=d(k)}}R||(s.individual[L]=b)}for(let{range:L,entry:b}of g.range){let R=[L];for(let E=0;E<s.range.length;E++){let{range:w,entry:k}=s.range[E];for(let[M,D]of R.entries()){if(!Array.isArray(D)){let P=i(D,w);if(P.both===null)continue;s.individual[D]=d(b),m(s.individual[D],d(k)),s.range.splice(E,1),E--;for(let W of P.second)Array.isArray(W)?s.range.push({range:W,entry:d(k)}):s.individual[W]=d(k);R.splice(M,1,...P.first);break}{let P=p(D,w);if(P.both===null)continue;s.range.splice(E,1),E--;let W=d(k);Array.isArray(P.both)?s.range.push({range:P.both,entry:W}):s.individual[P.both]=W,m(W,d(b));for(let F of P.second)Array.isArray(F)?s.range.push({range:F,entry:d(k)}):s.individual[F]=d(k);R=P.first}}}for(let E of Object.keys(s.individual))for(let[w,k]of R.entries()){if(Array.isArray(k)){let M=i(Number(E),k);if(M.both===null)continue;m(s.individual[E],d(b)),R.splice(w,1,...M.second);break}if(Number(E)===k){m(s.individual[E],d(b));break}}for(let E of R)Array.isArray(E)?s.range.push({range:E,entry:d(b)}):s.individual[E]=d(b)}}function m(s,g){g.lookup&&(!s.lookup||s.lookup.index>g.lookup.index||s.lookup.index===g.lookup.index&&s.lookup.subIndex>g.lookup.subIndex)&&(s.lookup=g.lookup),g.forward&&(s.forward?o(s.forward,g.forward):s.forward=g.forward),g.reverse&&(s.reverse?o(s.reverse,g.reverse):s.reverse=g.reverse)}function p(s,g){let L={first:[],second:[],both:null};if(s[0]<g[1]&&g[0]<s[1]){let b=Math.max(s[0],g[0]),R=Math.min(s[1],g[1]);L.both=e(b,R)}if(s[0]<g[0]){let b=s[0],R=Math.min(g[0],s[1]);L.first.push(e(b,R))}else if(g[0]<s[0]){let b=g[0],R=Math.min(g[1],s[0]);L.second.push(e(b,R))}if(s[1]>g[1]){let b=Math.max(s[0],g[1]),R=s[1];L.first.push(e(b,R))}else if(g[1]>s[1]){let b=Math.max(s[1],g[0]),R=g[1];L.second.push(e(b,R))}return L}function i(s,g){if(s<g[0]||s>g[1])return{first:[s],second:[g],both:null};let L={first:[],second:[],both:s};return g[0]<s&&L.second.push(e(g[0],s)),g[1]>s&&L.second.push(e(s+1,g[1])),L}function e(s,g){return g-s==1?s:[s,g]}function d(s){let g={};return s.forward&&(g.forward=f(s.forward)),s.reverse&&(g.reverse=f(s.reverse)),s.lookup&&(g.lookup={contextRange:s.lookup.contextRange.slice(),index:s.lookup.index,length:s.lookup.length,subIndex:s.lookup.subIndex,substitutions:s.lookup.substitutions.slice()}),g}function f(s){let g={};for(let[L,b]of Object.entries(s.individual))g[L]=d(b);return{individual:g,range:s.range.map(({range:L,entry:b})=>({range:L.slice(),entry:d(b)}))}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(s){let g={individual:{},range:[]};for(let L of s)o(g,L);return g}},532:(h,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(o,m,p){let i=!1;for(let e=0;e<o.length;e++){let d=o[e];if(i){if(p<=d[0])return o[e-1][1]=p,o;if(p<=d[1])return o[e-1][1]=Math.max(p,d[1]),o.splice(e,1),i=!1,o;o.splice(e,1),e--}else{if(p<=d[0])return o.splice(e,0,[m,p]),o;if(p<=d[1])return d[0]=Math.min(m,d[0]),o;if(!(m<d[1]))continue;d[0]=Math.min(m,d[0]),i=!0}}return i?o[o.length-1][1]=p:o.push([m,p]),o}},595:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(283),p=o(267);a.default=function(i,e,d){let f={individual:{},range:[]},s=m.listGlyphsByIndex(i.coverage);for(let{glyphId:g,index:L}of s){let b=i.chainRuleSets[L];if(b)for(let[R,E]of b.entries()){let w=p.getInputTree(f,E.lookupRecords,e,0,g).map(({entry:k,substitution:M})=>({entry:k,substitutions:[M]}));for(let[k,M]of E.input.entries())w=p.processInputPosition([M],k+1,w,E.lookupRecords,e);for(let k of E.lookahead)w=p.processLookaheadPosition([k],w);for(let k of E.backtrack)w=p.processBacktrackPosition([k],w);for(let{entry:k,substitutions:M}of w)k.lookup={substitutions:M,length:E.input.length+1,index:d,subIndex:R,contextRange:[-1*E.backtrack.length,1+E.input.length+E.lookahead.length]}}}return f}},223:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(233),p=o(283),i=o(91),e=o(267);a.default=function(d,f,s){let g=[],L=p.listGlyphsByIndex(d.coverage);for(let{glyphId:b}of L){let R=i.default(d.inputClassDef,b);for(let[E,w]of R.entries()){if(w===null)continue;let k=d.chainClassSet[w];if(k)for(let[M,D]of k.entries()){let P={individual:{},range:[]},W=e.getInputTree(P,D.lookupRecords,f,0,E).map(({entry:F,substitution:$})=>({entry:F,substitutions:[$]}));for(let[F,$]of D.input.entries())W=e.processInputPosition(i.listClassGlyphs(d.inputClassDef,$),F+1,W,D.lookupRecords,f);for(let F of D.lookahead)W=e.processLookaheadPosition(i.listClassGlyphs(d.lookaheadClassDef,F),W);for(let F of D.backtrack)W=e.processBacktrackPosition(i.listClassGlyphs(d.backtrackClassDef,F),W);for(let{entry:F,substitutions:$}of W)F.lookup={substitutions:$,index:s,subIndex:M,length:D.input.length+1,contextRange:[-1*D.backtrack.length,1+D.input.length+D.lookahead.length]};g.push(P)}}}return m.default(g)}},439:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(283),p=o(267);a.default=function(i,e,d){let f={individual:{},range:[]},s=m.listGlyphsByIndex(i.inputCoverage[0]);for(let{glyphId:g}of s){let L=p.getInputTree(f,i.lookupRecords,e,0,g).map(({entry:b,substitution:R})=>({entry:b,substitutions:[R]}));for(let[b,R]of i.inputCoverage.slice(1).entries())L=p.processInputPosition(m.listGlyphsByIndex(R).map(E=>E.glyphId),b+1,L,i.lookupRecords,e);for(let b of i.lookaheadCoverage)L=p.processLookaheadPosition(m.listGlyphsByIndex(b).map(R=>R.glyphId),L);for(let b of i.backtrackCoverage)L=p.processBacktrackPosition(m.listGlyphsByIndex(b).map(R=>R.glyphId),L);for(let{entry:b,substitutions:R}of L)b.lookup={substitutions:R,index:d,subIndex:0,length:i.inputCoverage.length,contextRange:[-1*i.backtrackCoverage.length,i.inputCoverage.length+i.lookaheadCoverage.length]}}return f}},349:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(283),p=o(267);a.default=function(i,e){let d={individual:{},range:[]},f=m.listGlyphsByIndex(i.coverage);for(let{glyphId:s,index:g}of f){let L={};Array.isArray(s)?d.range.push({entry:L,range:s}):d.individual[s]=L;let b=[{entry:L,substitutions:[i.substitutes[g]]}];for(let R of i.lookaheadCoverage)b=p.processLookaheadPosition(m.listGlyphsByIndex(R).map(E=>E.glyphId),b);for(let R of i.backtrackCoverage)b=p.processBacktrackPosition(m.listGlyphsByIndex(R).map(E=>E.glyphId),b);for(let{entry:R,substitutions:E}of b)R.lookup={substitutions:E,index:e,subIndex:0,length:1,contextRange:[-1*i.backtrackCoverage.length,1+i.lookaheadCoverage.length]}}return d}},91:(h,a)=>{"use strict";function o(m,p){for(let i of m.ranges)if(i.start<=p&&i.end>=p)return i.classId;return null}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(m,p){return m.format===2?Array.isArray(p)?function(i,e){let d=e[0],f=o(i,d),s=e[0]+1,g=new Map;for(;s<e[1];)o(i,s)!==f&&(s-d<=1?g.set(d,f):g.set([d,s],f)),s++;return s-d<=1?g.set(d,f):g.set([d,s],f),g}(m,p):new Map([[p,o(m,p)]]):new Map([[p,null]])},a.listClassGlyphs=function(m,p){if(m.format===2){let i=[];for(let e of m.ranges)e.classId===p&&(e.end===e.start?i.push(e.start):i.push([e.start,e.end+1]));return i}return[]}},283:(h,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(o,m){switch(o.format){case 1:let p=o.glyphs.indexOf(m);return p!==-1?p:null;case 2:let i=o.ranges.find(e=>e.start<=m&&e.end>=m);return i?i.index:null}},a.listGlyphsByIndex=function(o){switch(o.format){case 1:return o.glyphs.map((p,i)=>({glyphId:p,index:i}));case 2:let m=[];for(let[p,i]of o.ranges.entries())i.end===i.start?m.push({glyphId:i.start,index:p}):m.push({glyphId:[i.start,i.end+1],index:p});return m}}},267:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(603);function p(e,d,f,s,g){let L=[];if(Array.isArray(g)){let b=function(R,E,w,k){for(let M of R.filter(D=>D.sequenceIndex===w))for(let D of E[M.lookupListIndex].subtables){let P=m.getRangeSubstitutionGlyphs(D,k);if(!Array.from(P.values()).every(W=>W!==null))return P}return new Map([[k,null]])}(d,f,s,g);for(let[R,E]of b){let w={};Array.isArray(R)?e.range.push({range:R,entry:w}):e.individual[R]={},L.push({entry:w,substitution:E})}}else e.individual[g]={},L.push({entry:e.individual[g],substitution:i(d,f,s,g)});return L}function i(e,d,f,s){for(let g of e.filter(L=>L.sequenceIndex===f))for(let L of d[g.lookupListIndex].subtables){let b=m.getIndividualSubstitutionGlyph(L,s);if(b!==null)return b}return null}a.processInputPosition=function(e,d,f,s,g){let L=[];for(let b of f){b.entry.forward={individual:{},range:[]};for(let R of e)L.push(...p(b.entry.forward,s,g,d,R).map(({entry:E,substitution:w})=>({entry:E,substitutions:[...b.substitutions,w]})))}return L},a.processLookaheadPosition=function(e,d){let f=[];for(let s of d)for(let g of e){let L={};s.entry.forward||(s.entry.forward={individual:{},range:[]}),f.push({entry:L,substitutions:s.substitutions}),Array.isArray(g)?s.entry.forward.range.push({entry:L,range:g}):s.entry.forward.individual[g]=L}return f},a.processBacktrackPosition=function(e,d){let f=[];for(let s of d)for(let g of e){let L={};s.entry.reverse||(s.entry.reverse={individual:{},range:[]}),f.push({entry:L,substitutions:s.substitutions}),Array.isArray(g)?s.entry.reverse.range.push({entry:L,range:g}):s.entry.reverse.individual[g]=L}return f},a.getInputTree=p},603:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(283);function p(i,e){let d=m.default(i.coverage,e);if(d===null)return null;switch(i.substFormat){case 1:return(e+i.deltaGlyphId)%65536;case 2:return i.substitute[d]!=null?i.substitute[d]:null}}a.getRangeSubstitutionGlyphs=function(i,e){let d=e[0],f=p(i,d),s=e[0]+1,g=new Map;for(;s<e[1];)p(i,s)!==f&&(s-d<=1?g.set(d,f):g.set([d,s],f)),s++;return s-d<=1?g.set(d,f):g.set([d,s],f),g},a.getIndividualSubstitutionGlyph=p},694:(h,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function o(m,p,i,e){let d=m[p[e]];if(!d)return;let f=d.lookup;if(d.reverse){let g=function(L,b,R){let E=L[b[--R]],w=E&&E.lookup;for(;E&&((!w&&E.lookup||E.lookup&&w&&w.index>E.lookup.index)&&(w=E.lookup),!(--R<0)&&E.reverse);)E=E.reverse[b[R]];return w}(d.reverse,p,i);(!f&&g||g&&f&&(f.index>g.index||f.index===g.index&&f.subIndex>g.subIndex))&&(f=g)}if(++e>=p.length||!d.forward)return f;let s=o(d.forward,p,i,e);return(!f&&s||s&&f&&(f.index>s.index||f.index===s.index&&f.subIndex>s.subIndex))&&(f=s),f}},814:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(82);var p,i;(function(s){s.Serif="serif",s.SansSerif="sansSerif",s.Monospace="monospace",s.Cursive="cursive",s.Unknown="unknown"})(p=a.Type||(a.Type={})),function(s){s.Regular="regular",s.Italic="italic",s.Oblique="oblique",s.Bold="bold",s.BoldItalic="boldItalic",s.BoldOblique="boldOblique",s.Other="other"}(i=a.Style||(a.Style={}));let e=[" Regular"," Bold"," Bold Italic"," Bold Oblique"," Italic"," Oblique"];function d(s){if(!s.os2&&!s.head)return i.Other;let g=s.os2?32&s.os2.fsSelection:1&s.head.macStyle,L=s.os2?1&s.os2.fsSelection:s.post?s.post.italicAngle<0:2&s.head.macStyle,b=s.os2?512&s.os2.fsSelection:s.post?s.post.italicAngle>0:0,R=s.os2?320&s.os2.fsSelection:1;return g?b?i.BoldOblique:L?i.BoldItalic:i.Bold:b?i.Oblique:L?i.Italic:R?i.Regular:i.Other}a.name=function(s,g){let L=s.names.preferredFamily&&s.names.preferredFamily[g]?s.names.preferredFamily[g]:s.names.fontFamily[g];if(m.platform()==="win32"){let b=`${L} ${s.names.preferredSubfamily&&s.names.preferredSubfamily[g]?s.names.preferredSubfamily[g]:s.names.fontSubfamily[g]}`,R=-1;for(let E of e){let w=b.lastIndexOf(E);if(w!==-1){R=w;break}}return R!==-1?b.substring(0,R):b}return L},a.type=function(s){if(s.os2)switch(s.os2.panose[0]){case 2:return s.os2.panose[3]===9?p.Monospace:s.os2.panose[1]>=11&&s.os2.panose[1]<=15||s.os2.panose[1]===0?p.SansSerif:p.Serif;case 3:return p.Cursive}else if(s.post&&s.post.isFixedPitch)return p.Monospace;return p.Unknown},a.style=d;let f=[i.Bold,i.BoldItalic,i.BoldOblique];a.weight=function(s){return s.os2?s.os2.usWeightClass:f.includes(d(s))?700:400}},781:function(h,a,o){"use strict";var m=this&&this.__rest||function(g,L){var b={};for(var R in g)Object.prototype.hasOwnProperty.call(g,R)&&L.indexOf(R)<0&&(b[R]=g[R]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function"){var E=0;for(R=Object.getOwnPropertySymbols(g);E<R.length;E++)L.indexOf(R[E])<0&&(b[R[E]]=g[R[E]])}return b};Object.defineProperty(a,"__esModule",{value:!0});let p=o(459),i=o(934),e=o(814);var d=o(814);async function f(g){let L=Object.assign({concurrency:4,language:"en"},g),b=await p.default({extensions:["ttf","otf"]}),R=await async function(w,k,M){let D=[],P=0,W=async $=>{D.push(await(async A=>{try{return s(A,await i.default(A),L.language)}catch(U){if(["TypeError","SyntaxError","ReferenceError","RangeError","AssertionError"].includes(U.name))throw U}})(k[$])),P<k.length&&await W(P++)},F=[];for(;P<k.length&&P<M;P++)F.push(W(P));return await Promise.all(F),D}(0,b,L.concurrency),E={};for(let w of R.filter(k=>k)){let{name:k}=w,M=m(w,["name"]);E[k]||(E[k]=[]),E[k].push(M)}return E}function s(g,L,b){return{name:e.name(L,b),path:g,type:e.type(L),weight:e.weight(L),style:e.style(L)}}a.Type=d.Type,a.Style=d.Style,a.list=f,a.listVariants=async function(g,L){return(await f(L))[g]||[]},a.get=async function(g,L){let b=Object.assign({language:"en"},L);return s(g,await i.default(g),b.language)}},934:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(89),p=o(896),i=o(380),e=o(879),d=o(130),f=o(731),s=o(954);var g;(function(R){R[R.TrueType=0]="TrueType",R[R.CFF=1]="CFF",R[R.Woff=2]="Woff"})(g||(g={}));let L={name:{tag:Buffer.from("name"),parse:i.default},ltag:{tag:Buffer.from("ltag"),parse:e.default},os2:{tag:Buffer.from("OS/2"),parse:d.default},head:{tag:Buffer.from("head"),parse:f.default},post:{tag:Buffer.from("post"),parse:s.default}};a.default=async function(R){return new Promise((E,w)=>{(async()=>{let k=p.default(),M=m.createReadStream(R),D=!1,P=()=>{D=!0};M.once("close",P),M.once("end",P),M.once("error",W=>{D=!0,w(W)}),M.pipe(k);try{switch(function(W){if(W.equals(b.one)||W.equals(b.true)||W.equals(b.typ1))return g.TrueType;if(W.equals(b.otto))return g.CFF;if(W.equals(b.woff))return g.Woff;throw new Error(`Unsupported signature type: ${W}`)}(await k.read(4))){case g.TrueType:case g.CFF:let W=(await k.read(2)).readUInt16BE(0);await k.skip(6);let F=await async function(N,z){let K={};for(let Q=0;Q<z;Q++){let oe=await N.read(4),ee=await N.read(12);for(let[ne,G]of Object.entries(L))if(oe.equals(G.tag)&&(K[ne]={offset:ee.readUInt32BE(4),length:ee.readUInt32BE(8)},K.name&&K.ltag&&K.os2))return K}return K}(k,W),$=Object.entries(F).sort((N,z)=>N[1].offset-z[1].offset),A={};for(let[N,z]of $)await k.skip(z.offset-k.offset),A[N]=await k.read(z.length);let U=[];if(A.ltag&&(U=L.ltag.parse(A.ltag)),!A.name)throw new Error(`missing required OpenType table 'name' in font file: ${R}`);return{names:L.name.parse(A.name,U),os2:A.os2&&L.os2.parse(A.os2),head:A.head&&L.head.parse(A.head),post:A.post&&L.post.parse(A.post)};case g.Woff:default:throw new Error("provided font type is not supported yet")}}finally{M.unpipe(k),D||(M.destroy(),k.destroy())}})().then(E,w)})};let b={one:Buffer.from([0,1,0,0]),otto:Buffer.from("OTTO"),true:Buffer.from("true"),typ1:Buffer.from("typ1"),woff:Buffer.from("wOFF")}},731:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(980);a.default=function(p){return{version:m.formatFixed(p.readUInt16BE(0),p.readUInt16BE(2)),fontRevision:m.formatFixed(p.readUInt16BE(4),p.readUInt16BE(6)),checkSumAdjustment:p.readUInt32BE(8),magicNumber:p.readUInt32BE(12),flags:p.readUInt16BE(16),unitsPerEm:p.readUInt16BE(18),created:m.formatLongDateTime(p.readUInt32BE(20),p.readUInt32BE(24)),modified:m.formatLongDateTime(p.readUInt32BE(28),p.readUInt32BE(32)),xMin:p.readInt16BE(36),yMin:p.readInt16BE(38),xMax:p.readInt16BE(40),yMax:p.readInt16BE(42),macStyle:p.readUInt16BE(44),lowestRecPPEM:p.readUInt16BE(46),fontDirectionHint:p.readInt16BE(48),indexToLocFormat:p.readInt16BE(50),glyphDataFormat:p.readInt16BE(52)}}},879:(h,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(o){if(o.readUInt32BE(0)!==1)throw new Error("Unsupported ltag table version.");let m=o.readUInt32BE(8),p=[];for(let i=0;i<m;i++){let e="",d=o.readUInt16BE(12+4*i),f=o.readUInt16BE(14+4*i);for(let s=d;s<d+f;++s)e+=String.fromCharCode(o.readInt8(s));p.push(e)}return p}},380:(h,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let o=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],m={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},p={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function i(b,R,E){switch(b){case 0:if(R===65535)return"und";if(E)return E[R];break;case 1:return m[R];case 3:return p[R]}}let e="utf-16",d={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},f={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function s(b,R,E){switch(b){case 0:return e;case 1:return f[E]||d[R];case 3:if(R===1||R===10)return e}}a.default=function(b,R){let E={},w=b.readUInt16BE(2),k=b.readUInt16BE(4),M=6;for(let D=0;D<w;D++){let P=b.readUInt16BE(M+0),W=b.readUInt16BE(M+2),F=b.readUInt16BE(M+4),$=b.readUInt16BE(M+6),A=o[$]||String($),U=b.readUInt16BE(M+8),N=b.readUInt16BE(M+10),z=i(P,F,R),K=s(P,W,F);if(M+=12,K!==void 0&&z!==void 0){let Q;if(K===e){let oe=U/2,ee=Array(oe);for(let ne=0;ne<oe;ne++)ee[ne]=b.readUInt16BE(k+N+2*ne);Q=String.fromCharCode(...ee)}else Q=L(b,k+N,U,K);if(Q){let oe=E[A];oe===void 0&&(oe=E[A]={}),oe[z]=Q}}}return E};let g={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026 \xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026 \u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026 \u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026 \u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};function L(b,R,E,w){let k=g[w];if(k===void 0)return;let M="";for(let D=0;D<E;D++){let P=b.readUInt8(R+D);M+=P<=127?String.fromCharCode(P):k[127&P]}return M}},130:(h,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(o){let m={version:o.readUInt16BE(0),xAvgCharWidth:o.readUInt16BE(2),usWeightClass:o.readUInt16BE(4),usWidthClass:o.readUInt16BE(6),fsType:o.readUInt16BE(8),ySubscriptXSize:o.readInt16BE(10),ySubscriptYSize:o.readInt16BE(12),ySubscriptXOffset:o.readInt16BE(14),ySubscriptYOffset:o.readInt16BE(16),ySuperscriptXSize:o.readInt16BE(18),ySuperscriptYSize:o.readInt16BE(20),ySuperscriptXOffset:o.readInt16BE(22),ySuperscriptYOffset:o.readInt16BE(24),yStrikeoutSize:o.readInt16BE(26),yStrikeoutPosition:o.readInt16BE(28),sFamilyClass:o.readInt16BE(30),panose:[o.readUInt8(32),o.readUInt8(33),o.readUInt8(34),o.readUInt8(35),o.readUInt8(36),o.readUInt8(37),o.readUInt8(38),o.readUInt8(39),o.readUInt8(40),o.readUInt8(41)],ulUnicodeRange1:o.readUInt32BE(42),ulUnicodeRange2:o.readUInt32BE(46),ulUnicodeRange3:o.readUInt32BE(50),ulUnicodeRange4:o.readUInt32BE(54),achVendID:String.fromCharCode(o.readUInt8(58),o.readUInt8(59),o.readUInt8(60),o.readUInt8(61)),fsSelection:o.readUInt16BE(62),usFirstCharIndex:o.readUInt16BE(64),usLastCharIndex:o.readUInt16BE(66),sTypoAscender:o.readInt16BE(68),sTypoDescender:o.readInt16BE(70),sTypoLineGap:o.readInt16BE(72),usWinAscent:o.readUInt16BE(74),usWinDescent:o.readUInt16BE(76)};return m.version>=1&&(m.ulCodePageRange1=o.readUInt32BE(78),m.ulCodePageRange2=o.readUInt32BE(82)),m.version>=2&&(m.sxHeight=o.readInt16BE(86),m.sCapHeight=o.readInt16BE(88),m.usDefaultChar=o.readUInt16BE(90),m.usBreakChar=o.readUInt16BE(92),m.usMaxContent=o.readUInt16BE(94)),m}},954:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(980);a.default=function(p){return{version:m.formatFixed(p.readUInt16BE(0),p.readUInt16BE(2)),italicAngle:m.formatFixed(p.readUInt16BE(4),p.readUInt16BE(6)),underlinePosition:p.readInt16BE(8),underlineThickness:p.readInt16BE(10),isFixedPitch:p.readUInt32BE(12),minMemType42:p.readUInt32BE(16),maxMemType42:p.readUInt32BE(20),minMemType1:p.readUInt32BE(24),maxMemType1:p.readUInt32BE(28)}}},980:(h,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.formatFixed=function(o,m){return o+m/65536},a.formatLongDateTime=function(o,m){return 1e3*(o*4294967296+m-2082844800)}},459:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(56),p=o(456),i=o(49),e={win32:()=>process.env.WINDIR?[m.join(process.env.WINDIR,"Fonts")]:["C:\\Windows\\Fonts"],darwin:()=>{let f=p.homedir();return[...f?[m.join(f,"/Library/Fonts")]:[],"/Library/Fonts","/Network/Library/Fonts","/System/Library/Fonts","/System Folder/Fonts"]},linux:()=>{let f=p.homedir();return["/usr/share/fonts","/usr/local/share/fonts",...f?[m.join(f,".fonts"),m.join(f,".local/share/fonts")]:[]]}};function d(f){let s=Object.assign({extensions:["ttf","otf","ttc","woff","woff2"],additionalFolders:[]},f),g=p.platform(),L=e[g];if(!L)throw new Error(`Unsupported platform: ${g}`);let b=L();return i.default([...b,...s.additionalFolders],s.extensions)}h.exports=Object.assign(d,{default:d}),a.default=d},49:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(89),p=o(269),i=o(56),e=p.promisify(m.readdir),d=p.promisify(m.stat);async function f(s,g,L=10){if(L<=0)return[];let b;try{b=await e(s)}catch(E){return[]}let R=[];return await Promise.all(b.map(async E=>{let w=i.join(s,E),k;try{k=await d(w)}catch(M){return}k.isFile()&&g.test(w)?R.push(w):k.isDirectory()&&R.push(...await f(w,g,L-1))})),R}a.default=async function(s,g){let L=new Set;return await Promise.all(s.map(async b=>{let R=await f(i.resolve(b),new RegExp(`\\.${g.map(E=>`(?:${E})`).join("|")}$`));for(let E of R)L.add(E)})),[...L]}},593:(h,a,o)=>{"use strict";let m=o(411),p=Symbol("max"),i=Symbol("length"),e=Symbol("lengthCalculator"),d=Symbol("allowStale"),f=Symbol("maxAge"),s=Symbol("dispose"),g=Symbol("noDisposeOnSet"),L=Symbol("lruList"),b=Symbol("cache"),R=Symbol("updateAgeOnGet"),E=()=>1,w=(F,$,A)=>{let U=F[b].get($);if(U){let N=U.value;if(k(F,N)){if(D(F,U),!F[d])return}else A&&(F[R]&&(U.value.now=Date.now()),F[L].unshiftNode(U));return N.value}},k=(F,$)=>{if(!$||!$.maxAge&&!F[f])return!1;let A=Date.now()-$.now;return $.maxAge?A>$.maxAge:F[f]&&A>F[f]},M=F=>{if(F[i]>F[p])for(let $=F[L].tail;F[i]>F[p]&&$!==null;){let A=$.prev;D(F,$),$=A}},D=(F,$)=>{if($){let A=$.value;F[s]&&F[s](A.key,A.value),F[i]-=A.length,F[b].delete(A.key),F[L].removeNode($)}};class P{constructor($,A,U,N,z){this.key=$,this.value=A,this.length=U,this.now=N,this.maxAge=z||0}}let W=(F,$,A,U)=>{let N=A.value;k(F,N)&&(D(F,A),F[d]||(N=void 0)),N&&$.call(U,N.value,N.key,F)};h.exports=class{constructor(F){if(typeof F=="number"&&(F={max:F}),F||(F={}),F.max&&(typeof F.max!="number"||F.max<0))throw new TypeError("max must be a non-negative number");this[p]=F.max||1/0;let $=F.length||E;if(this[e]=typeof $!="function"?E:$,this[d]=F.stale||!1,F.maxAge&&typeof F.maxAge!="number")throw new TypeError("maxAge must be a number");this[f]=F.maxAge||0,this[s]=F.dispose,this[g]=F.noDisposeOnSet||!1,this[R]=F.updateAgeOnGet||!1,this.reset()}set max(F){if(typeof F!="number"||F<0)throw new TypeError("max must be a non-negative number");this[p]=F||1/0,M(this)}get max(){return this[p]}set allowStale(F){this[d]=!!F}get allowStale(){return this[d]}set maxAge(F){if(typeof F!="number")throw new TypeError("maxAge must be a non-negative number");this[f]=F,M(this)}get maxAge(){return this[f]}set lengthCalculator(F){typeof F!="function"&&(F=E),F!==this[e]&&(this[e]=F,this[i]=0,this[L].forEach($=>{$.length=this[e]($.value,$.key),this[i]+=$.length})),M(this)}get lengthCalculator(){return this[e]}get length(){return this[i]}get itemCount(){return this[L].length}rforEach(F,$){$=$||this;for(let A=this[L].tail;A!==null;){let U=A.prev;W(this,F,A,$),A=U}}forEach(F,$){$=$||this;for(let A=this[L].head;A!==null;){let U=A.next;W(this,F,A,$),A=U}}keys(){return this[L].toArray().map(F=>F.key)}values(){return this[L].toArray().map(F=>F.value)}reset(){this[s]&&this[L]&&this[L].length&&this[L].forEach(F=>this[s](F.key,F.value)),this[b]=new Map,this[L]=new m,this[i]=0}dump(){return this[L].map(F=>!k(this,F)&&{k:F.key,v:F.value,e:F.now+(F.maxAge||0)}).toArray().filter(F=>F)}dumpLru(){return this[L]}set(F,$,A){if((A=A||this[f])&&typeof A!="number")throw new TypeError("maxAge must be a number");let U=A?Date.now():0,N=this[e]($,F);if(this[b].has(F)){if(N>this[p])return D(this,this[b].get(F)),!1;let K=this[b].get(F).value;return this[s]&&(this[g]||this[s](F,K.value)),K.now=U,K.maxAge=A,K.value=$,this[i]+=N-K.length,K.length=N,this.get(F),M(this),!0}let z=new P(F,$,N,U,A);return z.length>this[p]?(this[s]&&this[s](F,$),!1):(this[i]+=z.length,this[L].unshift(z),this[b].set(F,this[L].head),M(this),!0)}has(F){if(!this[b].has(F))return!1;let $=this[b].get(F).value;return!k(this,$)}get(F){return w(this,F,!0)}peek(F){return w(this,F,!1)}pop(){let F=this[L].tail;return F?(D(this,F),F.value):null}del(F){D(this,this[b].get(F))}load(F){this.reset();let $=Date.now();for(let A=F.length-1;A>=0;A--){let U=F[A],N=U.e||0;if(N===0)this.set(U.k,U.v);else{let z=N-$;z>0&&this.set(U.k,U.v,z)}}}prune(){this[b].forEach((F,$)=>w(this,$,!1))}}},602:(h,a,o)=>{"use strict";o.r(a),o.d(a,{BoundingBox:()=>d,Font:()=>fl,Glyph:()=>Ss,Path:()=>s,_parse:()=>he,load:()=>sd,loadSync:()=>nd,parse:()=>Cn});var m=o(311),p=o.n(m);function i(r,l,S,C,T){return Math.pow(1-T,3)*r+3*Math.pow(1-T,2)*T*l+3*(1-T)*Math.pow(T,2)*S+Math.pow(T,3)*C}function e(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}e.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},e.prototype.addPoint=function(r,l){typeof r=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=r,this.x2=r),r<this.x1&&(this.x1=r),r>this.x2&&(this.x2=r)),typeof l=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=l,this.y2=l),l<this.y1&&(this.y1=l),l>this.y2&&(this.y2=l))},e.prototype.addX=function(r){this.addPoint(r,null)},e.prototype.addY=function(r){this.addPoint(null,r)},e.prototype.addBezier=function(r,l,S,C,T,O,I,H){let B=[r,l],j=[S,C],X=[T,O],Y=[I,H];this.addPoint(r,l),this.addPoint(I,H);for(let J=0;J<=1;J++){let de=6*B[J]-12*j[J]+6*X[J],ae=-3*B[J]+9*j[J]-9*X[J]+3*Y[J],be=3*j[J]-3*B[J];if(ae===0){if(de===0)continue;let Le=-be/de;0<Le&&Le<1&&(J===0&&this.addX(i(B[J],j[J],X[J],Y[J],Le)),J===1&&this.addY(i(B[J],j[J],X[J],Y[J],Le)));continue}let ie=Math.pow(de,2)-4*be*ae;if(ie<0)continue;let le=(-de+Math.sqrt(ie))/(2*ae);0<le&&le<1&&(J===0&&this.addX(i(B[J],j[J],X[J],Y[J],le)),J===1&&this.addY(i(B[J],j[J],X[J],Y[J],le)));let ye=(-de-Math.sqrt(ie))/(2*ae);0<ye&&ye<1&&(J===0&&this.addX(i(B[J],j[J],X[J],Y[J],ye)),J===1&&this.addY(i(B[J],j[J],X[J],Y[J],ye)))}},e.prototype.addQuad=function(r,l,S,C,T,O){let I=r+.6666666666666666*(S-r),H=l+2/3*(C-l),B=I+1/3*(T-r),j=H+1/3*(O-l);this.addBezier(r,l,I,H,B,j,T,O)};let d=e;function f(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}f.prototype.moveTo=function(r,l){this.commands.push({type:"M",x:r,y:l})},f.prototype.lineTo=function(r,l){this.commands.push({type:"L",x:r,y:l})},f.prototype.curveTo=f.prototype.bezierCurveTo=function(r,l,S,C,T,O){this.commands.push({type:"C",x1:r,y1:l,x2:S,y2:C,x:T,y:O})},f.prototype.quadTo=f.prototype.quadraticCurveTo=function(r,l,S,C){this.commands.push({type:"Q",x1:r,y1:l,x:S,y:C})},f.prototype.close=f.prototype.closePath=function(){this.commands.push({type:"Z"})},f.prototype.extend=function(r){if(r.commands)r=r.commands;else if(r instanceof d){let l=r;return this.moveTo(l.x1,l.y1),this.lineTo(l.x2,l.y1),this.lineTo(l.x2,l.y2),this.lineTo(l.x1,l.y2),void this.close()}Array.prototype.push.apply(this.commands,r)},f.prototype.getBoundingBox=function(){let r=new d,l=0,S=0,C=0,T=0;for(let O=0;O<this.commands.length;O++){let I=this.commands[O];switch(I.type){case"M":r.addPoint(I.x,I.y),l=C=I.x,S=T=I.y;break;case"L":r.addPoint(I.x,I.y),C=I.x,T=I.y;break;case"Q":r.addQuad(C,T,I.x1,I.y1,I.x,I.y),C=I.x,T=I.y;break;case"C":r.addBezier(C,T,I.x1,I.y1,I.x2,I.y2,I.x,I.y),C=I.x,T=I.y;break;case"Z":C=l,T=S;break;default:throw new Error("Unexpected path command "+I.type)}}return r.isEmpty()&&r.addPoint(0,0),r},f.prototype.draw=function(r){r.beginPath();for(let l=0;l<this.commands.length;l+=1){let S=this.commands[l];S.type==="M"?r.moveTo(S.x,S.y):S.type==="L"?r.lineTo(S.x,S.y):S.type==="C"?r.bezierCurveTo(S.x1,S.y1,S.x2,S.y2,S.x,S.y):S.type==="Q"?r.quadraticCurveTo(S.x1,S.y1,S.x,S.y):S.type==="Z"&&r.closePath()}this.fill&&(r.fillStyle=this.fill,r.fill()),this.stroke&&(r.strokeStyle=this.stroke,r.lineWidth=this.strokeWidth,r.stroke())},f.prototype.toPathData=function(r){function l(T){return Math.round(T)===T?""+Math.round(T):T.toFixed(r)}function S(){let T="";for(let O=0;O<arguments.length;O+=1){let I=arguments[O];I>=0&&O>0&&(T+=" "),T+=l(I)}return T}r=r!==void 0?r:2;let C="";for(let T=0;T<this.commands.length;T+=1){let O=this.commands[T];O.type==="M"?C+="M"+S(O.x,O.y):O.type==="L"?C+="L"+S(O.x,O.y):O.type==="C"?C+="C"+S(O.x1,O.y1,O.x2,O.y2,O.x,O.y):O.type==="Q"?C+="Q"+S(O.x1,O.y1,O.x,O.y):O.type==="Z"&&(C+="Z")}return C},f.prototype.toSVG=function(r){let l='<path d="';return l+=this.toPathData(r),l+='"',this.fill&&this.fill!=="black"&&(this.fill===null?l+=' fill="none"':l+=' fill="'+this.fill+'"'),this.stroke&&(l+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),l+="/>",l},f.prototype.toDOMElement=function(r){let l=this.toPathData(r),S=document.createElementNS("http://www.w3.org/2000/svg","path");return S.setAttribute("d",l),S};let s=f;function g(r){throw new Error(r)}function L(r,l){r||g(l)}let b={fail:g,argument:L,assert:L},R=2147483648,E={},w={},k={};function M(r){return function(){return r}}w.BYTE=function(r){return b.argument(r>=0&&r<=255,"Byte value should be between 0 and 255."),[r]},k.BYTE=M(1),w.CHAR=function(r){return[r.charCodeAt(0)]},k.CHAR=M(1),w.CHARARRAY=function(r){let l=[];for(let S=0;S<r.length;S+=1)l[S]=r.charCodeAt(S);return l},k.CHARARRAY=function(r){return r.length},w.USHORT=function(r){return[r>>8&255,255&r]},k.USHORT=M(2),w.SHORT=function(r){return r>=32768&&(r=-(65536-r)),[r>>8&255,255&r]},k.SHORT=M(2),w.UINT24=function(r){return[r>>16&255,r>>8&255,255&r]},k.UINT24=M(3),w.ULONG=function(r){return[r>>24&255,r>>16&255,r>>8&255,255&r]},k.ULONG=M(4),w.LONG=function(r){return r>=R&&(r=-(2*R-r)),[r>>24&255,r>>16&255,r>>8&255,255&r]},k.LONG=M(4),w.FIXED=w.ULONG,k.FIXED=k.ULONG,w.FWORD=w.SHORT,k.FWORD=k.SHORT,w.UFWORD=w.USHORT,k.UFWORD=k.USHORT,w.LONGDATETIME=function(r){return[0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r]},k.LONGDATETIME=M(8),w.TAG=function(r){return b.argument(r.length===4,"Tag should be exactly 4 ASCII characters."),[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3)]},k.TAG=M(4),w.Card8=w.BYTE,k.Card8=k.BYTE,w.Card16=w.USHORT,k.Card16=k.USHORT,w.OffSize=w.BYTE,k.OffSize=k.BYTE,w.SID=w.USHORT,k.SID=k.USHORT,w.NUMBER=function(r){return r>=-107&&r<=107?[r+139]:r>=108&&r<=1131?[247+((r-=108)>>8),255&r]:r>=-1131&&r<=-108?[251+((r=-r-108)>>8),255&r]:r>=-32768&&r<=32767?w.NUMBER16(r):w.NUMBER32(r)},k.NUMBER=function(r){return w.NUMBER(r).length},w.NUMBER16=function(r){return[28,r>>8&255,255&r]},k.NUMBER16=M(3),w.NUMBER32=function(r){return[29,r>>24&255,r>>16&255,r>>8&255,255&r]},k.NUMBER32=M(5),w.REAL=function(r){let l=r.toString(),S=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(l);if(S){let O=parseFloat("1e"+((S[2]?+S[2]:0)+S[1].length));l=(Math.round(r*O)/O).toString()}let C="";for(let O=0,I=l.length;O<I;O+=1){let H=l[O];C+=H==="e"?l[++O]==="-"?"c":"b":H==="."?"a":H==="-"?"e":H}C+=1&C.length?"f":"ff";let T=[30];for(let O=0,I=C.length;O<I;O+=2)T.push(parseInt(C.substr(O,2),16));return T},k.REAL=function(r){return w.REAL(r).length},w.NAME=w.CHARARRAY,k.NAME=k.CHARARRAY,w.STRING=w.CHARARRAY,k.STRING=k.CHARARRAY,E.UTF8=function(r,l,S){let C=[],T=S;for(let O=0;O<T;O++,l+=1)C[O]=r.getUint8(l);return String.fromCharCode.apply(null,C)},E.UTF16=function(r,l,S){let C=[],T=S/2;for(let O=0;O<T;O++,l+=2)C[O]=r.getUint16(l);return String.fromCharCode.apply(null,C)},w.UTF16=function(r){let l=[];for(let S=0;S<r.length;S+=1){let C=r.charCodeAt(S);l[l.length]=C>>8&255,l[l.length]=255&C}return l},k.UTF16=function(r){return 2*r.length};let D={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};E.MACSTRING=function(r,l,S,C){let T=D[C];if(T===void 0)return;let O="";for(let I=0;I<S;I++){let H=r.getUint8(l+I);O+=H<=127?String.fromCharCode(H):T[127&H]}return O};let P=typeof WeakMap=="function"&&new WeakMap,W;function F(r){return r>=-128&&r<=127}function $(r,l,S){let C=0,T=r.length;for(;l<T&&C<64&&r[l]===0;)++l,++C;return S.push(128|C-1),l}function A(r,l,S){let C=0,T=r.length,O=l;for(;O<T&&C<64;){let I=r[O];if(!F(I)||I===0&&O+1<T&&r[O+1]===0)break;++O,++C}S.push(C-1);for(let I=l;I<O;++I)S.push(r[I]+256&255);return O}function U(r,l,S){let C=0,T=r.length,O=l;for(;O<T&&C<64;){let I=r[O];if(I===0||F(I)&&O+1<T&&F(r[O+1]))break;++O,++C}S.push(64|C-1);for(let I=l;I<O;++I){let H=r[I];S.push(H+65536>>8&255,H+256&255)}return O}w.MACSTRING=function(r,l){let S=function(T){if(!W){W={};for(let B in D)W[B]=new String(B)}let O=W[T];if(O===void 0)return;if(P){let B=P.get(O);if(B!==void 0)return B}let I=D[T];if(I===void 0)return;let H={};for(let B=0;B<I.length;B++)H[I.charCodeAt(B)]=B+128;return P&&P.set(O,H),H}(l);if(S===void 0)return;let C=[];for(let T=0;T<r.length;T++){let O=r.charCodeAt(T);if(O>=128&&(O=S[O],O===void 0))return;C[T]=O}return C},k.MACSTRING=function(r,l){let S=w.MACSTRING(r,l);return S!==void 0?S.length:0},w.VARDELTAS=function(r){let l=0,S=[];for(;l<r.length;){let C=r[l];l=C===0?$(r,l,S):C>=-128&&C<=127?A(r,l,S):U(r,l,S)}return S},w.INDEX=function(r){let l=1,S=[l],C=[];for(let H=0;H<r.length;H+=1){let B=w.OBJECT(r[H]);Array.prototype.push.apply(C,B),l+=B.length,S.push(l)}if(C.length===0)return[0,0];let T=[],O=1+Math.floor(Math.log(l)/Math.log(2))/8|0,I=[void 0,w.BYTE,w.USHORT,w.UINT24,w.ULONG][O];for(let H=0;H<S.length;H+=1){let B=I(S[H]);Array.prototype.push.apply(T,B)}return Array.prototype.concat(w.Card16(r.length),w.OffSize(O),T,C)},k.INDEX=function(r){return w.INDEX(r).length},w.DICT=function(r){let l=[],S=Object.keys(r),C=S.length;for(let T=0;T<C;T+=1){let O=parseInt(S[T],0),I=r[O];l=l.concat(w.OPERAND(I.value,I.type)),l=l.concat(w.OPERATOR(O))}return l},k.DICT=function(r){return w.DICT(r).length},w.OPERATOR=function(r){return r<1200?[r]:[12,r-1200]},w.OPERAND=function(r,l){let S=[];if(Array.isArray(l))for(let C=0;C<l.length;C+=1)b.argument(r.length===l.length,"Not enough arguments given for type"+l),S=S.concat(w.OPERAND(r[C],l[C]));else if(l==="SID")S=S.concat(w.NUMBER(r));else if(l==="offset")S=S.concat(w.NUMBER32(r));else if(l==="number")S=S.concat(w.NUMBER(r));else{if(l!=="real")throw new Error("Unknown operand type "+l);S=S.concat(w.REAL(r))}return S},w.OP=w.BYTE,k.OP=k.BYTE;let N=typeof WeakMap=="function"&&new WeakMap;function z(r,l,S){for(let C=0;C<l.length;C+=1){let T=l[C];this[T.name]=T.value}if(this.tableName=r,this.fields=l,S){let C=Object.keys(S);for(let T=0;T<C.length;T+=1){let O=C[T],I=S[O];this[O]!==void 0&&(this[O]=I)}}}function K(r,l,S){S===void 0&&(S=l.length);let C=new Array(l.length+1);C[0]={name:r+"Count",type:"USHORT",value:S};for(let T=0;T<l.length;T++)C[T+1]={name:r+T,type:"USHORT",value:l[T]};return C}function Q(r,l,S){let C=l.length,T=new Array(C+1);T[0]={name:r+"Count",type:"USHORT",value:C};for(let O=0;O<C;O++)T[O+1]={name:r+O,type:"TABLE",value:S(l[O],O)};return T}function oe(r,l,S){let C=l.length,T=[];T[0]={name:r+"Count",type:"USHORT",value:C};for(let O=0;O<C;O++)T=T.concat(S(l[O],O));return T}function ee(r){r.format===1?z.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(K("glyph",r.glyphs))):b.assert(!1,"Can't create coverage table format 2 yet.")}function ne(r){z.call(this,"scriptListTable",oe("scriptRecord",r,function(l,S){let C=l.script,T=C.defaultLangSys;return b.assert(!!T,"Unable to write GSUB: script "+l.tag+" has no default language system."),[{name:"scriptTag"+S,type:"TAG",value:l.tag},{name:"script"+S,type:"TABLE",value:new z("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new z("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:T.reqFeatureIndex}].concat(K("featureIndex",T.featureIndexes)))}].concat(oe("langSys",C.langSysRecords,function(O,I){let H=O.langSys;return[{name:"langSysTag"+I,type:"TAG",value:O.tag},{name:"langSys"+I,type:"TABLE",value:new z("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:H.reqFeatureIndex}].concat(K("featureIndex",H.featureIndexes)))}]})))}]}))}function G(r){z.call(this,"featureListTable",oe("featureRecord",r,function(l,S){let C=l.feature;return[{name:"featureTag"+S,type:"TAG",value:l.tag},{name:"feature"+S,type:"TABLE",value:new z("featureTable",[{name:"featureParams",type:"USHORT",value:C.featureParams}].concat(K("lookupListIndex",C.lookupListIndexes)))}]}))}function V(r,l){z.call(this,"lookupListTable",Q("lookup",r,function(S){let C=l[S.lookupType];return b.assert(!!C,"Unable to write GSUB lookup type "+S.lookupType+" tables."),new z("lookupTable",[{name:"lookupType",type:"USHORT",value:S.lookupType},{name:"lookupFlag",type:"USHORT",value:S.lookupFlag}].concat(Q("subtable",S.subtables,C)))}))}w.CHARSTRING=function(r){if(N){let C=N.get(r);if(C!==void 0)return C}let l=[],S=r.length;for(let C=0;C<S;C+=1){let T=r[C];l=l.concat(w[T.type](T.value))}return N&&N.set(r,l),l},k.CHARSTRING=function(r){return w.CHARSTRING(r).length},w.OBJECT=function(r){let l=w[r.type];return b.argument(l!==void 0,"No encoding function for type "+r.type),l(r.value)},k.OBJECT=function(r){let l=k[r.type];return b.argument(l!==void 0,"No sizeOf function for type "+r.type),l(r.value)},w.TABLE=function(r){let l=[],S=r.fields.length,C=[],T=[];for(let O=0;O<S;O+=1){let I=r.fields[O],H=w[I.type];b.argument(H!==void 0,"No encoding function for field type "+I.type+" ("+I.name+")");let B=r[I.name];B===void 0&&(B=I.value);let j=H(B);I.type==="TABLE"?(T.push(l.length),l=l.concat([0,0]),C.push(j)):l=l.concat(j)}for(let O=0;O<C.length;O+=1){let I=T[O],H=l.length;b.argument(H<65536,"Table "+r.tableName+" too big."),l[I]=H>>8,l[I+1]=255&H,l=l.concat(C[O])}return l},k.TABLE=function(r){let l=0,S=r.fields.length;for(let C=0;C<S;C+=1){let T=r.fields[C],O=k[T.type];b.argument(O!==void 0,"No sizeOf function for field type "+T.type+" ("+T.name+")");let I=r[T.name];I===void 0&&(I=T.value),l+=O(I),T.type==="TABLE"&&(l+=2)}return l},w.RECORD=w.TABLE,k.RECORD=k.TABLE,w.LITERAL=function(r){return r},k.LITERAL=function(r){return r.length},z.prototype.encode=function(){return w.TABLE(this)},z.prototype.sizeOf=function(){return k.TABLE(this)},ee.prototype=Object.create(z.prototype),ee.prototype.constructor=ee,ne.prototype=Object.create(z.prototype),ne.prototype.constructor=ne,G.prototype=Object.create(z.prototype),G.prototype.constructor=G,V.prototype=Object.create(z.prototype),V.prototype.constructor=V;let q={Table:z,Record:z,Coverage:ee,ScriptList:ne,FeatureList:G,LookupList:V,ushortList:K,tableList:Q,recordList:oe};function te(r,l){return r.getUint8(l)}function ce(r,l){return r.getUint16(l,!1)}function Ee(r,l){return r.getUint32(l,!1)}function re(r,l){return r.getInt16(l,!1)+r.getUint16(l+2,!1)/65535}let ke={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Z(r,l){this.data=r,this.offset=l,this.relativeOffset=0}Z.prototype.parseByte=function(){let r=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,r},Z.prototype.parseChar=function(){let r=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,r},Z.prototype.parseCard8=Z.prototype.parseByte,Z.prototype.parseUShort=function(){let r=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,r},Z.prototype.parseCard16=Z.prototype.parseUShort,Z.prototype.parseSID=Z.prototype.parseUShort,Z.prototype.parseOffset16=Z.prototype.parseUShort,Z.prototype.parseShort=function(){let r=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,r},Z.prototype.parseF2Dot14=function(){let r=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,r},Z.prototype.parseULong=function(){let r=Ee(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,r},Z.prototype.parseOffset32=Z.prototype.parseULong,Z.prototype.parseFixed=function(){let r=re(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,r},Z.prototype.parseString=function(r){let l=this.data,S=this.offset+this.relativeOffset,C="";this.relativeOffset+=r;for(let T=0;T<r;T++)C+=String.fromCharCode(l.getUint8(S+T));return C},Z.prototype.parseTag=function(){return this.parseString(4)},Z.prototype.parseLongDateTime=function(){let r=Ee(this.data,this.offset+this.relativeOffset+4);return r-=2082844800,this.relativeOffset+=8,r},Z.prototype.parseVersion=function(r){let l=ce(this.data,this.offset+this.relativeOffset),S=ce(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,r===void 0&&(r=4096),l+S/r/10},Z.prototype.skip=function(r,l){l===void 0&&(l=1),this.relativeOffset+=ke[r]*l},Z.prototype.parseULongList=function(r){r===void 0&&(r=this.parseULong());let l=new Array(r),S=this.data,C=this.offset+this.relativeOffset;for(let T=0;T<r;T++)l[T]=S.getUint32(C),C+=4;return this.relativeOffset+=4*r,l},Z.prototype.parseOffset16List=Z.prototype.parseUShortList=function(r){r===void 0&&(r=this.parseUShort());let l=new Array(r),S=this.data,C=this.offset+this.relativeOffset;for(let T=0;T<r;T++)l[T]=S.getUint16(C),C+=2;return this.relativeOffset+=2*r,l},Z.prototype.parseShortList=function(r){let l=new Array(r),S=this.data,C=this.offset+this.relativeOffset;for(let T=0;T<r;T++)l[T]=S.getInt16(C),C+=2;return this.relativeOffset+=2*r,l},Z.prototype.parseByteList=function(r){let l=new Array(r),S=this.data,C=this.offset+this.relativeOffset;for(let T=0;T<r;T++)l[T]=S.getUint8(C++);return this.relativeOffset+=r,l},Z.prototype.parseList=function(r,l){l||(l=r,r=this.parseUShort());let S=new Array(r);for(let C=0;C<r;C++)S[C]=l.call(this);return S},Z.prototype.parseList32=function(r,l){l||(l=r,r=this.parseULong());let S=new Array(r);for(let C=0;C<r;C++)S[C]=l.call(this);return S},Z.prototype.parseRecordList=function(r,l){l||(l=r,r=this.parseUShort());let S=new Array(r),C=Object.keys(l);for(let T=0;T<r;T++){let O={};for(let I=0;I<C.length;I++){let H=C[I],B=l[H];O[H]=B.call(this)}S[T]=O}return S},Z.prototype.parseRecordList32=function(r,l){l||(l=r,r=this.parseULong());let S=new Array(r),C=Object.keys(l);for(let T=0;T<r;T++){let O={};for(let I=0;I<C.length;I++){let H=C[I],B=l[H];O[H]=B.call(this)}S[T]=O}return S},Z.prototype.parseStruct=function(r){if(typeof r=="function")return r.call(this);{let l=Object.keys(r),S={};for(let C=0;C<l.length;C++){let T=l[C],O=r[T];S[T]=O.call(this)}return S}},Z.prototype.parseValueRecord=function(r){if(r===void 0&&(r=this.parseUShort()),r===0)return;let l={};return 1&r&&(l.xPlacement=this.parseShort()),2&r&&(l.yPlacement=this.parseShort()),4&r&&(l.xAdvance=this.parseShort()),8&r&&(l.yAdvance=this.parseShort()),16&r&&(l.xPlaDevice=void 0,this.parseShort()),32&r&&(l.yPlaDevice=void 0,this.parseShort()),64&r&&(l.xAdvDevice=void 0,this.parseShort()),128&r&&(l.yAdvDevice=void 0,this.parseShort()),l},Z.prototype.parseValueRecordList=function(){let r=this.parseUShort(),l=this.parseUShort(),S=new Array(l);for(let C=0;C<l;C++)S[C]=this.parseValueRecord(r);return S},Z.prototype.parsePointer=function(r){let l=this.parseOffset16();if(l>0)return new Z(this.data,this.offset+l).parseStruct(r)},Z.prototype.parsePointer32=function(r){let l=this.parseOffset32();if(l>0)return new Z(this.data,this.offset+l).parseStruct(r)},Z.prototype.parseListOfLists=function(r){let l=this.parseOffset16List(),S=l.length,C=this.relativeOffset,T=new Array(S);for(let O=0;O<S;O++){let I=l[O];if(I!==0)if(this.relativeOffset=I,r){let H=this.parseOffset16List(),B=new Array(H.length);for(let j=0;j<H.length;j++)this.relativeOffset=I+H[j],B[j]=r.call(this);T[O]=B}else T[O]=this.parseUShortList();else T[O]=void 0}return this.relativeOffset=C,T},Z.prototype.parseCoverage=function(){let r=this.offset+this.relativeOffset,l=this.parseUShort(),S=this.parseUShort();if(l===1)return{format:1,glyphs:this.parseUShortList(S)};if(l===2){let C=new Array(S);for(let T=0;T<S;T++)C[T]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:C}}throw new Error("0x"+r.toString(16)+": Coverage format must be 1 or 2.")},Z.prototype.parseClassDef=function(){let r=this.offset+this.relativeOffset,l=this.parseUShort();if(l===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(l===2)return{format:2,ranges:this.parseRecordList({start:Z.uShort,end:Z.uShort,classId:Z.uShort})};throw new Error("0x"+r.toString(16)+": ClassDef format must be 1 or 2.")},Z.list=function(r,l){return function(){return this.parseList(r,l)}},Z.list32=function(r,l){return function(){return this.parseList32(r,l)}},Z.recordList=function(r,l){return function(){return this.parseRecordList(r,l)}},Z.recordList32=function(r,l){return function(){return this.parseRecordList32(r,l)}},Z.pointer=function(r){return function(){return this.parsePointer(r)}},Z.pointer32=function(r){return function(){return this.parsePointer32(r)}},Z.tag=Z.prototype.parseTag,Z.byte=Z.prototype.parseByte,Z.uShort=Z.offset16=Z.prototype.parseUShort,Z.uShortList=Z.prototype.parseUShortList,Z.uLong=Z.offset32=Z.prototype.parseULong,Z.uLongList=Z.prototype.parseULongList,Z.struct=Z.prototype.parseStruct,Z.coverage=Z.prototype.parseCoverage,Z.classDef=Z.prototype.parseClassDef;let Me={reserved:Z.uShort,reqFeatureIndex:Z.uShort,featureIndexes:Z.uShortList};Z.prototype.parseScriptList=function(){return this.parsePointer(Z.recordList({tag:Z.tag,script:Z.pointer({defaultLangSys:Z.pointer(Me),langSysRecords:Z.recordList({tag:Z.tag,langSys:Z.pointer(Me)})})}))||[]},Z.prototype.parseFeatureList=function(){return this.parsePointer(Z.recordList({tag:Z.tag,feature:Z.pointer({featureParams:Z.offset16,lookupListIndexes:Z.uShortList})}))||[]},Z.prototype.parseLookupList=function(r){return this.parsePointer(Z.list(Z.pointer(function(){let l=this.parseUShort();b.argument(1<=l&&l<=9,"GPOS/GSUB lookup type "+l+" unknown.");let S=this.parseUShort(),C=16&S;return{lookupType:l,lookupFlag:S,subtables:this.parseList(Z.pointer(r[l])),markFilteringSet:C?this.parseUShort():void 0}})))||[]},Z.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){let r=this.parseUShort(),l=this.parseUShort();return b.argument(r===1&&l<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Z.offset32,featureTableSubstitutionOffset:Z.offset32})})||[]};let he={getByte:te,getCard8:te,getUShort:ce,getCard16:ce,getShort:function(r,l){return r.getInt16(l,!1)},getULong:Ee,getFixed:re,getTag:function(r,l){let S="";for(let C=l;C<l+4;C+=1)S+=String.fromCharCode(r.getInt8(C));return S},getOffset:function(r,l,S){let C=0;for(let T=0;T<S;T+=1)C<<=8,C+=r.getUint8(l+T);return C},getBytes:function(r,l,S){let C=[];for(let T=l;T<S;T+=1)C.push(r.getUint8(T));return C},bytesToString:function(r){let l="";for(let S=0;S<r.length;S+=1)l+=String.fromCharCode(r[S]);return l},Parser:Z};function qt(r,l,S){r.segments.push({end:l,start:l,delta:-(l-S),offset:0,glyphIndex:S})}let we=function(r,l){let S={};S.version=he.getUShort(r,l),b.argument(S.version===0,"cmap table version should be 0."),S.numTables=he.getUShort(r,l+2);let C=-1;for(let O=S.numTables-1;O>=0;O-=1){let I=he.getUShort(r,l+4+8*O),H=he.getUShort(r,l+4+8*O+2);if(I===3&&(H===0||H===1||H===10)){C=he.getULong(r,l+4+8*O+4);break}}if(C===-1)throw new Error("No valid cmap sub-tables found.");let T=new he.Parser(r,l+C);if(S.format=T.parseUShort(),S.format===12)(function(O,I){let H;I.parseUShort(),O.length=I.parseULong(),O.language=I.parseULong(),O.groupCount=H=I.parseULong(),O.glyphIndexMap={};for(let B=0;B<H;B+=1){let j=I.parseULong(),X=I.parseULong(),Y=I.parseULong();for(let J=j;J<=X;J+=1)O.glyphIndexMap[J]=Y,Y++}})(S,T);else{if(S.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+S.format+").");(function(O,I,H,B,j){let X;O.length=I.parseUShort(),O.language=I.parseUShort(),O.segCount=X=I.parseUShort()>>1,I.skip("uShort",3),O.glyphIndexMap={};let Y=new he.Parser(H,B+j+14),J=new he.Parser(H,B+j+16+2*X),de=new he.Parser(H,B+j+16+4*X),ae=new he.Parser(H,B+j+16+6*X),be=B+j+16+8*X;for(let ie=0;ie<X-1;ie+=1){let le,ye=Y.parseUShort(),Le=J.parseUShort(),Oe=de.parseShort(),pe=ae.parseUShort();for(let ue=Le;ue<=ye;ue+=1)pe!==0?(be=ae.offset+ae.relativeOffset-2,be+=pe,be+=2*(ue-Le),le=he.getUShort(H,be),le!==0&&(le=le+Oe&65535)):le=ue+Oe&65535,O.glyphIndexMap[ue]=le}})(S,T,r,l,C)}return S},me=function(r){let l,S=!0;for(l=r.length-1;l>0;l-=1)if(r.get(l).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),S=!1;break}let C=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:S?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:S?12:20}];S||(C=C.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),C=C.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);let T=new q.Table("cmap",C);for(T.segments=[],l=0;l<r.length;l+=1){let de=r.get(l);for(let ae=0;ae<de.unicodes.length;ae+=1)qt(T,de.unicodes[ae],l);T.segments=T.segments.sort(function(ae,be){return ae.start-be.start})}(function(de){de.segments.push({end:65535,start:65535,delta:1,offset:0})})(T);let O=T.segments.length,I=0,H=[],B=[],j=[],X=[],Y=[],J=[];for(l=0;l<O;l+=1){let de=T.segments[l];de.end<=65535&&de.start<=65535?(H=H.concat({name:"end_"+l,type:"USHORT",value:de.end}),B=B.concat({name:"start_"+l,type:"USHORT",value:de.start}),j=j.concat({name:"idDelta_"+l,type:"SHORT",value:de.delta}),X=X.concat({name:"idRangeOffset_"+l,type:"USHORT",value:de.offset}),de.glyphId!==void 0&&(Y=Y.concat({name:"glyph_"+l,type:"USHORT",value:de.glyphId}))):I+=1,S||de.glyphIndex===void 0||(J=J.concat({name:"cmap12Start_"+l,type:"ULONG",value:de.start}),J=J.concat({name:"cmap12End_"+l,type:"ULONG",value:de.end}),J=J.concat({name:"cmap12Glyph_"+l,type:"ULONG",value:de.glyphIndex}))}if(T.segCountX2=2*(O-I),T.searchRange=2*Math.pow(2,Math.floor(Math.log(O-I)/Math.log(2))),T.entrySelector=Math.log(T.searchRange/2)/Math.log(2),T.rangeShift=T.segCountX2-T.searchRange,T.fields=T.fields.concat(H),T.fields.push({name:"reservedPad",type:"USHORT",value:0}),T.fields=T.fields.concat(B),T.fields=T.fields.concat(j),T.fields=T.fields.concat(X),T.fields=T.fields.concat(Y),T.cmap4Length=14+2*H.length+2+2*B.length+2*j.length+2*X.length+2*Y.length,!S){let de=16+4*J.length;T.cmap12Offset=20+T.cmap4Length,T.fields=T.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:de},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:J.length/3}]),T.fields=T.fields.concat(J)}return T},ve=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],fe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Se=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],De=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Pe(r){this.font=r}function gt(r){this.cmap=r}function nt(r,l){this.encoding=r,this.charset=l}function Be(r){switch(r.version){case 1:this.names=De.slice();break;case 2:this.names=new Array(r.numberOfGlyphs);for(let l=0;l<r.numberOfGlyphs;l++)r.glyphNameIndex[l]<De.length?this.names[l]=De[r.glyphNameIndex[l]]:this.names[l]=r.names[r.glyphNameIndex[l]-De.length];break;case 2.5:this.names=new Array(r.numberOfGlyphs);for(let l=0;l<r.numberOfGlyphs;l++)this.names[l]=De[l+r.glyphNameIndex[l]];break;default:this.names=[]}}Pe.prototype.charToGlyphIndex=function(r){let l=r.charCodeAt(0),S=this.font.glyphs;if(S)for(let C=0;C<S.length;C+=1){let T=S.get(C);for(let O=0;O<T.unicodes.length;O+=1)if(T.unicodes[O]===l)return C}return null},gt.prototype.charToGlyphIndex=function(r){return this.cmap.glyphIndexMap[r.charCodeAt(0)]||0},nt.prototype.charToGlyphIndex=function(r){let l=r.charCodeAt(0),S=this.encoding[l];return this.charset.indexOf(S)},Be.prototype.nameToGlyphIndex=function(r){return this.names.indexOf(r)},Be.prototype.glyphIndexToName=function(r){return this.names[r]};let Re=function(r,l,S,C,T){r.beginPath(),r.moveTo(l,S),r.lineTo(C,T),r.stroke()};function je(r,l,S,C,T){let O;return(l&C)>0?(O=r.parseByte(),!(l&T)&&(O=-O),O=S+O):O=(l&T)>0?S:S+r.parseShort(),O}function Vt(r,l,S){let C=new he.Parser(l,S),T,O;if(r.numberOfContours=C.parseShort(),r._xMin=C.parseShort(),r._yMin=C.parseShort(),r._xMax=C.parseShort(),r._yMax=C.parseShort(),r.numberOfContours>0){let I=r.endPointIndices=[];for(let B=0;B<r.numberOfContours;B+=1)I.push(C.parseUShort());r.instructionLength=C.parseUShort(),r.instructions=[];for(let B=0;B<r.instructionLength;B+=1)r.instructions.push(C.parseByte());let H=I[I.length-1]+1;T=[];for(let B=0;B<H;B+=1)if(O=C.parseByte(),T.push(O),(8&O)>0){let j=C.parseByte();for(let X=0;X<j;X+=1)T.push(O),B+=1}if(b.argument(T.length===H,"Bad flags."),I.length>0){let B=[],j;if(H>0){for(let J=0;J<H;J+=1)O=T[J],j={},j.onCurve=!!(1&O),j.lastPointOfContour=I.indexOf(J)>=0,B.push(j);let X=0;for(let J=0;J<H;J+=1)O=T[J],j=B[J],j.x=je(C,O,X,2,16),X=j.x;let Y=0;for(let J=0;J<H;J+=1)O=T[J],j=B[J],j.y=je(C,O,Y,4,32),Y=j.y}r.points=B}else r.points=[]}else if(r.numberOfContours===0)r.points=[];else{r.isComposite=!0,r.points=[],r.components=[];let I=!0;for(;I;){T=C.parseUShort();let H={glyphIndex:C.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&T)>0?(2&T)>0?(H.dx=C.parseShort(),H.dy=C.parseShort()):H.matchedPoints=[C.parseUShort(),C.parseUShort()]:(2&T)>0?(H.dx=C.parseChar(),H.dy=C.parseChar()):H.matchedPoints=[C.parseByte(),C.parseByte()],(8&T)>0?H.xScale=H.yScale=C.parseF2Dot14():(64&T)>0?(H.xScale=C.parseF2Dot14(),H.yScale=C.parseF2Dot14()):(128&T)>0&&(H.xScale=C.parseF2Dot14(),H.scale01=C.parseF2Dot14(),H.scale10=C.parseF2Dot14(),H.yScale=C.parseF2Dot14()),r.components.push(H),I=!!(32&T)}if(256&T){r.instructionLength=C.parseUShort(),r.instructions=[];for(let H=0;H<r.instructionLength;H+=1)r.instructions.push(C.parseByte())}}}function St(r,l){let S=[];for(let C=0;C<r.length;C+=1){let T=r[C],O={x:l.xScale*T.x+l.scale01*T.y+l.dx,y:l.scale10*T.x+l.yScale*T.y+l.dy,onCurve:T.onCurve,lastPointOfContour:T.lastPointOfContour};S.push(O)}return S}function Rt(r){let l=new s;if(!r)return l;let S=function(C){let T=[],O=[];for(let I=0;I<C.length;I+=1){let H=C[I];O.push(H),H.lastPointOfContour&&(T.push(O),O=[])}return b.argument(O.length===0,"There are still points left in the current contour."),T}(r);for(let C=0;C<S.length;++C){let T=S[C],O=null,I=T[T.length-1],H=T[0];if(I.onCurve)l.moveTo(I.x,I.y);else if(H.onCurve)l.moveTo(H.x,H.y);else{let B={x:.5*(I.x+H.x),y:.5*(I.y+H.y)};l.moveTo(B.x,B.y)}for(let B=0;B<T.length;++B)if(O=I,I=H,H=T[(B+1)%T.length],I.onCurve)l.lineTo(I.x,I.y);else{let j=O,X=H;O.onCurve||(j={x:.5*(I.x+O.x),y:.5*(I.y+O.y)},l.lineTo(j.x,j.y)),H.onCurve||(X={x:.5*(I.x+H.x),y:.5*(I.y+H.y)}),l.lineTo(j.x,j.y),l.quadraticCurveTo(I.x,I.y,X.x,X.y)}l.closePath()}return l}function Xr(r,l){if(l.isComposite)for(let S=0;S<l.components.length;S+=1){let C=l.components[S],T=r.get(C.glyphIndex);if(T.getPath(),T.points){let O;if(C.matchedPoints===void 0)O=St(T.points,C);else{if(C.matchedPoints[0]>l.points.length-1||C.matchedPoints[1]>T.points.length-1)throw Error("Matched points out of range in "+l.name);let I=l.points[C.matchedPoints[0]],H=T.points[C.matchedPoints[1]],B={xScale:C.xScale,scale01:C.scale01,scale10:C.scale10,yScale:C.yScale,dx:0,dy:0};H=St([H],B)[0],B.dx=I.x-H.x,B.dy=I.y-H.y,O=St(T.points,B)}l.points=l.points.concat(O)}}return Rt(l.points)}let va={getPath:Rt,parse:function(r,l,S,C){let T=new hi.GlyphSet(C);for(let O=0;O<S.length-1;O+=1){let I=S[O];I!==S[O+1]?T.push(O,hi.ttfGlyphLoader(C,O,Vt,r,l+I,Xr)):T.push(O,hi.glyphLoader(C,O))}return T}};function Ut(r){this.bindConstructorValues(r)}Ut.prototype.bindConstructorValues=function(r){this.index=r.index||0,this.name=r.name||null,this.unicode=r.unicode||void 0,this.unicodes=r.unicodes||r.unicode!==void 0?[r.unicode]:[],r.xMin&&(this.xMin=r.xMin),r.yMin&&(this.yMin=r.yMin),r.xMax&&(this.xMax=r.xMax),r.yMax&&(this.yMax=r.yMax),r.advanceWidth&&(this.advanceWidth=r.advanceWidth),Object.defineProperty(this,"path",function(l,S){let C=S||new s;return{configurable:!0,get:function(){return typeof C=="function"&&(C=C()),C},set:function(T){C=T}}}(0,r.path))},Ut.prototype.addUnicode=function(r){this.unicodes.length===0&&(this.unicode=r),this.unicodes.push(r)},Ut.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ut.prototype.getPath=function(r,l,S,C,T){let O,I;r=r!==void 0?r:0,l=l!==void 0?l:0,S=S!==void 0?S:72,C||(C={});let H=C.xScale,B=C.yScale;if(C.hinting&&T&&T.hinting&&(I=this.path&&T.hinting.exec(this,S)),I)O=va.getPath(I).commands,r=Math.round(r),l=Math.round(l),H=B=1;else{O=this.path.commands;let X=1/this.path.unitsPerEm*S;H===void 0&&(H=X),B===void 0&&(B=X)}let j=new s;for(let X=0;X<O.length;X+=1){let Y=O[X];Y.type==="M"?j.moveTo(r+Y.x*H,l+-Y.y*B):Y.type==="L"?j.lineTo(r+Y.x*H,l+-Y.y*B):Y.type==="Q"?j.quadraticCurveTo(r+Y.x1*H,l+-Y.y1*B,r+Y.x*H,l+-Y.y*B):Y.type==="C"?j.curveTo(r+Y.x1*H,l+-Y.y1*B,r+Y.x2*H,l+-Y.y2*B,r+Y.x*H,l+-Y.y*B):Y.type==="Z"&&j.closePath()}return j},Ut.prototype.getContours=function(){if(this.points===void 0)return[];let r=[],l=[];for(let S=0;S<this.points.length;S+=1){let C=this.points[S];l.push(C),C.lastPointOfContour&&(r.push(l),l=[])}return b.argument(l.length===0,"There are still points left in the current contour."),r},Ut.prototype.getMetrics=function(){let r=this.path.commands,l=[],S=[];for(let T=0;T<r.length;T+=1){let O=r[T];O.type!=="Z"&&(l.push(O.x),S.push(O.y)),O.type!=="Q"&&O.type!=="C"||(l.push(O.x1),S.push(O.y1)),O.type==="C"&&(l.push(O.x2),S.push(O.y2))}let C={xMin:Math.min.apply(null,l),yMin:Math.min.apply(null,S),xMax:Math.max.apply(null,l),yMax:Math.max.apply(null,S),leftSideBearing:this.leftSideBearing};return isFinite(C.xMin)||(C.xMin=0),isFinite(C.xMax)||(C.xMax=this.advanceWidth),isFinite(C.yMin)||(C.yMin=0),isFinite(C.yMax)||(C.yMax=0),C.rightSideBearing=this.advanceWidth-C.leftSideBearing-(C.xMax-C.xMin),C},Ut.prototype.draw=function(r,l,S,C,T){this.getPath(l,S,C,T).draw(r)},Ut.prototype.drawPoints=function(r,l,S,C){function T(j,X,Y,J){let de=2*Math.PI;r.beginPath();for(let ae=0;ae<j.length;ae+=1)r.moveTo(X+j[ae].x*J,Y+j[ae].y*J),r.arc(X+j[ae].x*J,Y+j[ae].y*J,2,0,de,!1);r.closePath(),r.fill()}l=l!==void 0?l:0,S=S!==void 0?S:0,C=C!==void 0?C:24;let O=1/this.path.unitsPerEm*C,I=[],H=[],B=this.path;for(let j=0;j<B.commands.length;j+=1){let X=B.commands[j];X.x!==void 0&&I.push({x:X.x,y:-X.y}),X.x1!==void 0&&H.push({x:X.x1,y:-X.y1}),X.x2!==void 0&&H.push({x:X.x2,y:-X.y2})}r.fillStyle="blue",T(I,l,S,O),r.fillStyle="red",T(H,l,S,O)},Ut.prototype.drawMetrics=function(r,l,S,C){let T;l=l!==void 0?l:0,S=S!==void 0?S:0,C=C!==void 0?C:24,T=1/this.path.unitsPerEm*C,r.lineWidth=1,r.strokeStyle="black",Re(r,l,-1e4,l,1e4),Re(r,-1e4,S,1e4,S);let O=this.xMin||0,I=this.yMin||0,H=this.xMax||0,B=this.yMax||0,j=this.advanceWidth||0;r.strokeStyle="blue",Re(r,l+O*T,-1e4,l+O*T,1e4),Re(r,l+H*T,-1e4,l+H*T,1e4),Re(r,-1e4,S+-I*T,1e4,S+-I*T),Re(r,-1e4,S+-B*T,1e4,S+-B*T),r.strokeStyle="green",Re(r,l+j*T,-1e4,l+j*T,1e4)};let Ss=Ut;function ws(r,l,S){Object.defineProperty(r,l,{get:function(){return r.path,r[S]},set:function(C){r[S]=C},enumerable:!0,configurable:!0})}function pn(r,l){if(this.font=r,this.glyphs={},Array.isArray(l))for(let S=0;S<l.length;S++)this.glyphs[S]=l[S];this.length=l&&l.length||0}pn.prototype.get=function(r){return typeof this.glyphs[r]=="function"&&(this.glyphs[r]=this.glyphs[r]()),this.glyphs[r]},pn.prototype.push=function(r,l){this.glyphs[r]=l,this.length++};let hi={GlyphSet:pn,glyphLoader:function(r,l){return new Ss({index:l,font:r})},ttfGlyphLoader:function(r,l,S,C,T,O){return function(){let I=new Ss({index:l,font:r});return I.path=function(){S(I,C,T);let H=O(r.glyphs,I);return H.unitsPerEm=r.unitsPerEm,H},ws(I,"xMin","_xMin"),ws(I,"xMax","_xMax"),ws(I,"yMin","_yMin"),ws(I,"yMax","_yMax"),I}},cffGlyphLoader:function(r,l,S,C){return function(){let T=new Ss({index:l,font:r});return T.path=function(){let O=S(r,T,C);return O.unitsPerEm=r.unitsPerEm,O},T}}};function ya(r,l){if(r===l)return!0;if(Array.isArray(r)&&Array.isArray(l)){if(r.length!==l.length)return!1;for(let S=0;S<r.length;S+=1)if(!ya(r[S],l[S]))return!1;return!0}return!1}function gn(r){let l;return l=r.length<1240?107:r.length<33900?1131:32768,l}function Tr(r,l,S){let C=[],T=[],O=he.getCard16(r,l),I,H;if(O!==0){let B=he.getByte(r,l+2);I=l+(O+1)*B+2;let j=l+3;for(let X=0;X<O+1;X+=1)C.push(he.getOffset(r,j,B)),j+=B;H=I+C[O]}else H=l+2;for(let B=0;B<C.length-1;B+=1){let j=he.getBytes(r,I+C[B],I+C[B+1]);S&&(j=S(j)),T.push(j)}return{objects:T,startOffset:l,endOffset:H}}function ou(r,l){let S,C,T,O;if(l===28)return S=r.parseByte(),C=r.parseByte(),S<<8|C;if(l===29)return S=r.parseByte(),C=r.parseByte(),T=r.parseByte(),O=r.parseByte(),S<<24|C<<16|T<<8|O;if(l===30)return function(I){let H="",B=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(;;){let j=I.parseByte(),X=j>>4,Y=15&j;if(X===15||(H+=B[X],Y===15))break;H+=B[Y]}return parseFloat(H)}(r);if(l>=32&&l<=246)return l-139;if(l>=247&&l<=250)return S=r.parseByte(),256*(l-247)+S+108;if(l>=251&&l<=254)return S=r.parseByte(),256*-(l-251)-S-108;throw new Error("Invalid b0 "+l)}function ba(r,l,S){l=l!==void 0?l:0;let C=new he.Parser(r,l),T=[],O=[];for(S=S!==void 0?S:r.length;C.relativeOffset<S;){let I=C.parseByte();I<=21?(I===12&&(I=1200+C.parseByte()),T.push([I,O]),O=[]):O.push(ou(C,I))}return function(I){let H={};for(let B=0;B<I.length;B+=1){let j=I[B][0],X=I[B][1],Y;if(Y=X.length===1?X[0]:X,H.hasOwnProperty(j)&&!isNaN(H[j]))throw new Error("Object "+H+" already has key "+j);H[j]=Y}return H}(T)}function Bi(r,l){return l<=390?ve[l]:r[l-391]}function Sa(r,l,S){let C={},T;for(let O=0;O<l.length;O+=1){let I=l[O];if(Array.isArray(I.type)){let H=[];H.length=I.type.length;for(let B=0;B<I.type.length;B++)T=r[I.op]!==void 0?r[I.op][B]:void 0,T===void 0&&(T=I.value!==void 0&&I.value[B]!==void 0?I.value[B]:null),I.type[B]==="SID"&&(T=Bi(S,T)),H[B]=T;C[I.name]=H}else T=r[I.op],T===void 0&&(T=I.value!==void 0?I.value:null),I.type==="SID"&&(T=Bi(S,T)),C[I.name]=T}return C}let wa=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ca=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function au(r,l){return Sa(ba(r,0,r.byteLength),wa,l)}function xa(r,l,S,C){return Sa(ba(r,l,S),Ca,C)}function La(r,l,S,C){let T=[];for(let O=0;O<S.length;O+=1){let I=au(new DataView(new Uint8Array(S[O]).buffer),C);I._subrs=[],I._subrsBias=0;let H=I.private[0],B=I.private[1];if(H!==0&&B!==0){let j=xa(r,B+l,H,C);if(I._defaultWidthX=j.defaultWidthX,I._nominalWidthX=j.nominalWidthX,j.subrs!==0){let X=Tr(r,B+j.subrs+l);I._subrs=X.objects,I._subrsBias=gn(I._subrs)}I._privateDict=j}T.push(I)}return T}function lu(r,l,S){let C,T,O,I,H=new s,B=[],j,X,Y,J,de=0,ae=!1,be=!1,ie=0,le=0;if(r.isCIDFont){let pe=r.tables.cff.topDict._fdSelect[l.index],ue=r.tables.cff.topDict._fdArray[pe];j=ue._subrs,X=ue._subrsBias,Y=ue._defaultWidthX,J=ue._nominalWidthX}else j=r.tables.cff.topDict._subrs,X=r.tables.cff.topDict._subrsBias,Y=r.tables.cff.topDict._defaultWidthX,J=r.tables.cff.topDict._nominalWidthX;let ye=Y;function Le(pe,ue){be&&H.closePath(),H.moveTo(pe,ue),be=!0}function Oe(){let pe;pe=B.length%2!=0,pe&&!ae&&(ye=B.shift()+J),de+=B.length>>1,B.length=0,ae=!0}return function pe(ue){let ge,Fe,Te,Xe,ot,_t,rt,ct,Qe,at,it,wt,Ge=0;for(;Ge<ue.length;){let ht=ue[Ge];switch(Ge+=1,ht){case 1:case 3:case 18:case 23:Oe();break;case 4:B.length>1&&!ae&&(ye=B.shift()+J,ae=!0),le+=B.pop(),Le(ie,le);break;case 5:for(;B.length>0;)ie+=B.shift(),le+=B.shift(),H.lineTo(ie,le);break;case 6:for(;B.length>0&&(ie+=B.shift(),H.lineTo(ie,le),B.length!==0);)le+=B.shift(),H.lineTo(ie,le);break;case 7:for(;B.length>0&&(le+=B.shift(),H.lineTo(ie,le),B.length!==0);)ie+=B.shift(),H.lineTo(ie,le);break;case 8:for(;B.length>0;)C=ie+B.shift(),T=le+B.shift(),O=C+B.shift(),I=T+B.shift(),ie=O+B.shift(),le=I+B.shift(),H.curveTo(C,T,O,I,ie,le);break;case 10:ot=B.pop()+X,_t=j[ot],_t&&pe(_t);break;case 11:return;case 12:switch(ht=ue[Ge],Ge+=1,ht){case 35:C=ie+B.shift(),T=le+B.shift(),O=C+B.shift(),I=T+B.shift(),rt=O+B.shift(),ct=I+B.shift(),Qe=rt+B.shift(),at=ct+B.shift(),it=Qe+B.shift(),wt=at+B.shift(),ie=it+B.shift(),le=wt+B.shift(),B.shift(),H.curveTo(C,T,O,I,rt,ct),H.curveTo(Qe,at,it,wt,ie,le);break;case 34:C=ie+B.shift(),T=le,O=C+B.shift(),I=T+B.shift(),rt=O+B.shift(),ct=I,Qe=rt+B.shift(),at=I,it=Qe+B.shift(),wt=le,ie=it+B.shift(),H.curveTo(C,T,O,I,rt,ct),H.curveTo(Qe,at,it,wt,ie,le);break;case 36:C=ie+B.shift(),T=le+B.shift(),O=C+B.shift(),I=T+B.shift(),rt=O+B.shift(),ct=I,Qe=rt+B.shift(),at=I,it=Qe+B.shift(),wt=at+B.shift(),ie=it+B.shift(),H.curveTo(C,T,O,I,rt,ct),H.curveTo(Qe,at,it,wt,ie,le);break;case 37:C=ie+B.shift(),T=le+B.shift(),O=C+B.shift(),I=T+B.shift(),rt=O+B.shift(),ct=I+B.shift(),Qe=rt+B.shift(),at=ct+B.shift(),it=Qe+B.shift(),wt=at+B.shift(),Math.abs(it-ie)>Math.abs(wt-le)?ie=it+B.shift():le=wt+B.shift(),H.curveTo(C,T,O,I,rt,ct),H.curveTo(Qe,at,it,wt,ie,le);break;default:console.log("Glyph "+l.index+": unknown operator 1200"+ht),B.length=0}break;case 14:B.length>0&&!ae&&(ye=B.shift()+J,ae=!0),be&&(H.closePath(),be=!1);break;case 19:case 20:Oe(),Ge+=de+7>>3;break;case 21:B.length>2&&!ae&&(ye=B.shift()+J,ae=!0),le+=B.pop(),ie+=B.pop(),Le(ie,le);break;case 22:B.length>1&&!ae&&(ye=B.shift()+J,ae=!0),ie+=B.pop(),Le(ie,le);break;case 24:for(;B.length>2;)C=ie+B.shift(),T=le+B.shift(),O=C+B.shift(),I=T+B.shift(),ie=O+B.shift(),le=I+B.shift(),H.curveTo(C,T,O,I,ie,le);ie+=B.shift(),le+=B.shift(),H.lineTo(ie,le);break;case 25:for(;B.length>6;)ie+=B.shift(),le+=B.shift(),H.lineTo(ie,le);C=ie+B.shift(),T=le+B.shift(),O=C+B.shift(),I=T+B.shift(),ie=O+B.shift(),le=I+B.shift(),H.curveTo(C,T,O,I,ie,le);break;case 26:for(B.length%2&&(ie+=B.shift());B.length>0;)C=ie,T=le+B.shift(),O=C+B.shift(),I=T+B.shift(),ie=O,le=I+B.shift(),H.curveTo(C,T,O,I,ie,le);break;case 27:for(B.length%2&&(le+=B.shift());B.length>0;)C=ie+B.shift(),T=le,O=C+B.shift(),I=T+B.shift(),ie=O+B.shift(),le=I,H.curveTo(C,T,O,I,ie,le);break;case 28:ge=ue[Ge],Fe=ue[Ge+1],B.push((ge<<24|Fe<<16)>>16),Ge+=2;break;case 29:ot=B.pop()+r.gsubrsBias,_t=r.gsubrs[ot],_t&&pe(_t);break;case 30:for(;B.length>0&&(C=ie,T=le+B.shift(),O=C+B.shift(),I=T+B.shift(),ie=O+B.shift(),le=I+(B.length===1?B.shift():0),H.curveTo(C,T,O,I,ie,le),B.length!==0);)C=ie+B.shift(),T=le,O=C+B.shift(),I=T+B.shift(),le=I+B.shift(),ie=O+(B.length===1?B.shift():0),H.curveTo(C,T,O,I,ie,le);break;case 31:for(;B.length>0&&(C=ie+B.shift(),T=le,O=C+B.shift(),I=T+B.shift(),le=I+B.shift(),ie=O+(B.length===1?B.shift():0),H.curveTo(C,T,O,I,ie,le),B.length!==0);)C=ie,T=le+B.shift(),O=C+B.shift(),I=T+B.shift(),ie=O+B.shift(),le=I+(B.length===1?B.shift():0),H.curveTo(C,T,O,I,ie,le);break;default:ht<32?console.log("Glyph "+l.index+": unknown operator "+ht):ht<247?B.push(ht-139):ht<251?(ge=ue[Ge],Ge+=1,B.push(256*(ht-247)+ge+108)):ht<255?(ge=ue[Ge],Ge+=1,B.push(256*-(ht-251)-ge-108)):(ge=ue[Ge],Fe=ue[Ge+1],Te=ue[Ge+2],Xe=ue[Ge+3],Ge+=4,B.push((ge<<24|Fe<<16|Te<<8|Xe)/65536))}}}(S),l.advanceWidth=ye,H}function Ea(r,l){let S,C=ve.indexOf(r);return C>=0&&(S=C),C=l.indexOf(r),C>=0?S=C+ve.length:(S=ve.length+l.length,l.push(r)),S}function Ra(r,l,S){let C={};for(let T=0;T<r.length;T+=1){let O=r[T],I=l[O.name];I===void 0||ya(I,O.value)||(O.type==="SID"&&(I=Ea(I,S)),C[O.op]={name:O.name,type:O.type,value:I})}return C}function Ta(r,l){let S=new q.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return S.dict=Ra(wa,r,l),S}function ka(r){let l=new q.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return l.topDicts=[{name:"topDict_0",type:"TABLE",value:r}],l}function cu(r){let l=[],S=r.path;l.push({name:"width",type:"NUMBER",value:r.advanceWidth});let C=0,T=0;for(let O=0;O<S.commands.length;O+=1){let I,H,B=S.commands[O];if(B.type==="Q"){let j=.3333333333333333,X=2/3;B={type:"C",x:B.x,y:B.y,x1:j*C+X*B.x1,y1:j*T+X*B.y1,x2:j*B.x+X*B.x1,y2:j*B.y+X*B.y1}}if(B.type==="M")I=Math.round(B.x-C),H=Math.round(B.y-T),l.push({name:"dx",type:"NUMBER",value:I}),l.push({name:"dy",type:"NUMBER",value:H}),l.push({name:"rmoveto",type:"OP",value:21}),C=Math.round(B.x),T=Math.round(B.y);else if(B.type==="L")I=Math.round(B.x-C),H=Math.round(B.y-T),l.push({name:"dx",type:"NUMBER",value:I}),l.push({name:"dy",type:"NUMBER",value:H}),l.push({name:"rlineto",type:"OP",value:5}),C=Math.round(B.x),T=Math.round(B.y);else if(B.type==="C"){let j=Math.round(B.x1-C),X=Math.round(B.y1-T),Y=Math.round(B.x2-B.x1),J=Math.round(B.y2-B.y1);I=Math.round(B.x-B.x2),H=Math.round(B.y-B.y2),l.push({name:"dx1",type:"NUMBER",value:j}),l.push({name:"dy1",type:"NUMBER",value:X}),l.push({name:"dx2",type:"NUMBER",value:Y}),l.push({name:"dy2",type:"NUMBER",value:J}),l.push({name:"dx",type:"NUMBER",value:I}),l.push({name:"dy",type:"NUMBER",value:H}),l.push({name:"rrcurveto",type:"OP",value:8}),C=Math.round(B.x),T=Math.round(B.y)}}return l.push({name:"endchar",type:"OP",value:14}),l}let hu=function(r,l,S){S.tables.cff={};let C=function(ae,be){let ie={};return ie.formatMajor=he.getCard8(ae,be),ie.formatMinor=he.getCard8(ae,be+1),ie.size=he.getCard8(ae,be+2),ie.offsetSize=he.getCard8(ae,be+3),ie.startOffset=be,ie.endOffset=be+4,ie}(r,l),T=Tr(r,C.endOffset,he.bytesToString),O=Tr(r,T.endOffset),I=Tr(r,O.endOffset,he.bytesToString),H=Tr(r,I.endOffset);S.gsubrs=H.objects,S.gsubrsBias=gn(S.gsubrs);let B=La(r,l,O.objects,I.objects);if(B.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+B.length);let j=B[0];if(S.tables.cff.topDict=j,j._privateDict&&(S.defaultWidthX=j._privateDict.defaultWidthX,S.nominalWidthX=j._privateDict.nominalWidthX),j.ros[0]!==void 0&&j.ros[1]!==void 0&&(S.isCIDFont=!0),S.isCIDFont){let ae=j.fdArray,be=j.fdSelect;if(ae===0||be===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");ae+=l;let ie=La(r,l,Tr(r,ae).objects,I.objects);j._fdArray=ie,be+=l,j._fdSelect=function(le,ye,Le,Oe){let pe=[],ue,ge=new he.Parser(le,ye),Fe=ge.parseCard8();if(Fe===0)for(let Te=0;Te<Le;Te++){if(ue=ge.parseCard8(),ue>=Oe)throw new Error("CFF table CID Font FDSelect has bad FD index value "+ue+" (FD count "+Oe+")");pe.push(ue)}else{if(Fe!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Fe);{let Te=ge.parseCard16(),Xe,ot=ge.parseCard16();if(ot!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+ot);for(let _t=0;_t<Te;_t++){if(ue=ge.parseCard8(),Xe=ge.parseCard16(),ue>=Oe)throw new Error("CFF table CID Font FDSelect has bad FD index value "+ue+" (FD count "+Oe+")");if(Xe>Le)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Xe);for(;ot<Xe;ot++)pe.push(ue);ot=Xe}if(Xe!==Le)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Xe)}}return pe}(r,be,S.numGlyphs,ie.length)}let X=l+j.private[1],Y=xa(r,X,j.private[0],I.objects);if(S.defaultWidthX=Y.defaultWidthX,S.nominalWidthX=Y.nominalWidthX,Y.subrs!==0){let ae=Tr(r,X+Y.subrs);S.subrs=ae.objects,S.subrsBias=gn(S.subrs)}else S.subrs=[],S.subrsBias=0;let J=Tr(r,l+j.charStrings);S.nGlyphs=J.objects.length;let de=function(ae,be,ie,le){let ye,Le,Oe=new he.Parser(ae,be);ie-=1;let pe=[".notdef"],ue=Oe.parseCard8();if(ue===0)for(let ge=0;ge<ie;ge+=1)ye=Oe.parseSID(),pe.push(Bi(le,ye));else if(ue===1)for(;pe.length<=ie;){ye=Oe.parseSID(),Le=Oe.parseCard8();for(let ge=0;ge<=Le;ge+=1)pe.push(Bi(le,ye)),ye+=1}else{if(ue!==2)throw new Error("Unknown charset format "+ue);for(;pe.length<=ie;){ye=Oe.parseSID(),Le=Oe.parseCard16();for(let ge=0;ge<=Le;ge+=1)pe.push(Bi(le,ye)),ye+=1}}return pe}(r,l+j.charset,S.nGlyphs,I.objects);j.encoding===0?S.cffEncoding=new nt(fe,de):j.encoding===1?S.cffEncoding=new nt(Se,de):S.cffEncoding=function(ae,be,ie){let le,ye={},Le=new he.Parser(ae,be),Oe=Le.parseCard8();if(Oe===0){let pe=Le.parseCard8();for(let ue=0;ue<pe;ue+=1)le=Le.parseCard8(),ye[le]=ue}else{if(Oe!==1)throw new Error("Unknown encoding format "+Oe);{let pe=Le.parseCard8();le=1;for(let ue=0;ue<pe;ue+=1){let ge=Le.parseCard8(),Fe=Le.parseCard8();for(let Te=ge;Te<=ge+Fe;Te+=1)ye[Te]=le,le+=1}}}return new nt(ye,ie)}(r,l+j.encoding,de),S.encoding=S.encoding||S.cffEncoding,S.glyphs=new hi.GlyphSet(S);for(let ae=0;ae<S.nGlyphs;ae+=1){let be=J.objects[ae];S.glyphs.push(ae,hi.cffGlyphLoader(S,ae,lu,be))}},uu=function(r,l){let S=new q.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),C=1/l.unitsPerEm,T={version:l.version,fullName:l.fullName,familyName:l.familyName,weight:l.weightName,fontBBox:l.fontBBox||[0,0,0,0],fontMatrix:[C,0,0,C,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},O=[],I;for(let X=1;X<r.length;X+=1)I=r.get(X),O.push(I.name);let H=[];S.header=new q.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),S.nameIndex=function(X){let Y=new q.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Y.names=[];for(let J=0;J<X.length;J+=1)Y.names.push({name:"name_"+J,type:"NAME",value:X[J]});return Y}([l.postScriptName]);let B=Ta(T,H);S.topDictIndex=ka(B),S.globalSubrIndex=new q.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),S.charsets=function(X,Y){let J=new q.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(let de=0;de<X.length;de+=1){let ae=Ea(X[de],Y);J.fields.push({name:"glyph_"+de,type:"SID",value:ae})}return J}(O,H),S.charStringsIndex=function(X){let Y=new q.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(let J=0;J<X.length;J+=1){let de=X.get(J),ae=cu(de);Y.charStrings.push({name:de.name,type:"CHARSTRING",value:ae})}return Y}(r),S.privateDict=function(X,Y){let J=new q.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return J.dict=Ra(Ca,{},Y),J}(0,H),S.stringIndex=function(X){let Y=new q.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Y.strings=[];for(let J=0;J<X.length;J+=1)Y.strings.push({name:"string_"+J,type:"STRING",value:X[J]});return Y}(H);let j=S.header.sizeOf()+S.nameIndex.sizeOf()+S.topDictIndex.sizeOf()+S.stringIndex.sizeOf()+S.globalSubrIndex.sizeOf();return T.charset=j,T.encoding=0,T.charStrings=T.charset+S.charsets.sizeOf(),T.private[1]=T.charStrings+S.charStringsIndex.sizeOf(),B=Ta(T,H),S.topDictIndex=ka(B),S},du=function(r,l){let S={},C=new he.Parser(r,l);return S.version=C.parseVersion(),S.fontRevision=Math.round(1e3*C.parseFixed())/1e3,S.checkSumAdjustment=C.parseULong(),S.magicNumber=C.parseULong(),b.argument(S.magicNumber===1594834165,"Font header has wrong magic number."),S.flags=C.parseUShort(),S.unitsPerEm=C.parseUShort(),S.created=C.parseLongDateTime(),S.modified=C.parseLongDateTime(),S.xMin=C.parseShort(),S.yMin=C.parseShort(),S.xMax=C.parseShort(),S.yMax=C.parseShort(),S.macStyle=C.parseUShort(),S.lowestRecPPEM=C.parseUShort(),S.fontDirectionHint=C.parseShort(),S.indexToLocFormat=C.parseShort(),S.glyphDataFormat=C.parseShort(),S},fu=function(r){let l=Math.round(new Date().getTime()/1e3)+2082844800,S=l;return r.createdTimestamp&&(S=r.createdTimestamp+2082844800),new q.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:S},{name:"modified",type:"LONGDATETIME",value:l},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],r)},pu=function(r,l){let S={},C=new he.Parser(r,l);return S.version=C.parseVersion(),S.ascender=C.parseShort(),S.descender=C.parseShort(),S.lineGap=C.parseShort(),S.advanceWidthMax=C.parseUShort(),S.minLeftSideBearing=C.parseShort(),S.minRightSideBearing=C.parseShort(),S.xMaxExtent=C.parseShort(),S.caretSlopeRise=C.parseShort(),S.caretSlopeRun=C.parseShort(),S.caretOffset=C.parseShort(),C.relativeOffset+=8,S.metricDataFormat=C.parseShort(),S.numberOfHMetrics=C.parseUShort(),S},gu=function(r){return new q.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],r)},_u=function(r,l,S,C,T){let O,I,H=new he.Parser(r,l);for(let B=0;B<C;B+=1){B<S&&(O=H.parseUShort(),I=H.parseShort());let j=T.get(B);j.advanceWidth=O,j.leftSideBearing=I}},mu=function(r){let l=new q.Table("hmtx",[]);for(let S=0;S<r.length;S+=1){let C=r.get(S),T=C.advanceWidth||0,O=C.leftSideBearing||0;l.fields.push({name:"advanceWidth_"+S,type:"USHORT",value:T}),l.fields.push({name:"leftSideBearing_"+S,type:"SHORT",value:O})}return l},vu=function(r){let l=new q.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:r.length}]),S="",C=12+4*r.length;for(let T=0;T<r.length;++T){let O=S.indexOf(r[T]);O<0&&(O=S.length,S+=r[T]),l.fields.push({name:"offset "+T,type:"USHORT",value:C+O}),l.fields.push({name:"length "+T,type:"USHORT",value:r[T].length})}return l.fields.push({name:"stringPool",type:"CHARARRAY",value:S}),l},yu=function(r,l){let S=new he.Parser(r,l),C=S.parseULong();b.argument(C===1,"Unsupported ltag table version."),S.skip("uLong",1);let T=S.parseULong(),O=[];for(let I=0;I<T;I++){let H="",B=l+S.parseUShort(),j=S.parseUShort();for(let X=B;X<B+j;++X)H+=String.fromCharCode(r.getInt8(X));O.push(H)}return O},bu=function(r,l){let S={},C=new he.Parser(r,l);return S.version=C.parseVersion(),S.numGlyphs=C.parseUShort(),S.version===1&&(S.maxPoints=C.parseUShort(),S.maxContours=C.parseUShort(),S.maxCompositePoints=C.parseUShort(),S.maxCompositeContours=C.parseUShort(),S.maxZones=C.parseUShort(),S.maxTwilightPoints=C.parseUShort(),S.maxStorage=C.parseUShort(),S.maxFunctionDefs=C.parseUShort(),S.maxInstructionDefs=C.parseUShort(),S.maxStackElements=C.parseUShort(),S.maxSizeOfInstructions=C.parseUShort(),S.maxComponentElements=C.parseUShort(),S.maxComponentDepth=C.parseUShort()),S},Su=function(r){return new q.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:r}])},Aa=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ma={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},wu={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Oa={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Cu(r,l,S){switch(r){case 0:if(l===65535)return"und";if(S)return S[l];break;case 1:return Ma[l];case 3:return Oa[l]}}let _n="utf-16",xu={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Lu={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Da(r,l,S){switch(r){case 0:return _n;case 1:return Lu[S]||xu[l];case 3:if(l===1||l===10)return _n}}function mn(r){let l={};for(let S in r)l[r[S]]=parseInt(S);return l}function Pa(r,l,S,C,T,O){return new q.Record("NameRecord",[{name:"platformID",type:"USHORT",value:r},{name:"encodingID",type:"USHORT",value:l},{name:"languageID",type:"USHORT",value:S},{name:"nameID",type:"USHORT",value:C},{name:"length",type:"USHORT",value:T},{name:"offset",type:"USHORT",value:O}])}function Ia(r,l){let S=function(C,T){let O=C.length,I=T.length-O+1;e:for(let H=0;H<I;H++)for(;H<I;H++){for(let B=0;B<O;B++)if(T[H+B]!==C[B])continue e;return H}return-1}(r,l);if(S<0){S=l.length;let C=0,T=r.length;for(;C<T;++C)l.push(r[C])}return S}let Eu=function(r,l,S){let C={},T=new he.Parser(r,l),O=T.parseUShort(),I=T.parseUShort(),H=T.offset+T.parseUShort();for(let j=0;j<I;j++){let X=T.parseUShort(),Y=T.parseUShort(),J=T.parseUShort(),de=T.parseUShort(),ae=Aa[de]||de,be=T.parseUShort(),ie=T.parseUShort(),le=Cu(X,J,S),ye=Da(X,Y,J);if(ye!==void 0&&le!==void 0){let Le;if(Le=ye===_n?E.UTF16(r,H+ie,be):E.MACSTRING(r,H+ie,be,ye),Le){let Oe=C[ae];Oe===void 0&&(Oe=C[ae]={}),Oe[le]=Le}}}let B=0;return O===1&&T.parseUShort(),C},Ru=function(r,l){let S,C=[],T={},O=mn(Aa);for(let Y in r){let J=O[Y];if(J===void 0&&(J=Y),S=parseInt(J),isNaN(S))throw new Error('Name table entry "'+Y+'" does not exist, see nameTableNames for complete list.');T[S]=r[Y],C.push(S)}let I=mn(Ma),H=mn(Oa),B=[],j=[];for(let Y=0;Y<C.length;Y++){S=C[Y];let J=T[S];for(let de in J){let ae=J[de],be=1,ie=I[de],le=wu[ie],ye=Da(be,le,ie),Le=w.MACSTRING(ae,ye);Le===void 0&&(be=0,ie=l.indexOf(de),ie<0&&(ie=l.length,l.push(de)),le=4,Le=w.UTF16(ae));let Oe=Ia(Le,j);B.push(Pa(be,le,ie,S,Le.length,Oe));let pe=H[de];if(pe!==void 0){let ue=w.UTF16(ae),ge=Ia(ue,j);B.push(Pa(3,1,pe,S,ue.length,ge))}}}B.sort(function(Y,J){return Y.platformID-J.platformID||Y.encodingID-J.encodingID||Y.languageID-J.languageID||Y.nameID-J.nameID});let X=new q.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:B.length},{name:"stringOffset",type:"USHORT",value:6+12*B.length}]);for(let Y=0;Y<B.length;Y++)X.fields.push({name:"record_"+Y,type:"RECORD",value:B[Y]});return X.fields.push({name:"strings",type:"LITERAL",value:j}),X},Ba=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Tu=function(r,l){let S={},C=new he.Parser(r,l);S.version=C.parseUShort(),S.xAvgCharWidth=C.parseShort(),S.usWeightClass=C.parseUShort(),S.usWidthClass=C.parseUShort(),S.fsType=C.parseUShort(),S.ySubscriptXSize=C.parseShort(),S.ySubscriptYSize=C.parseShort(),S.ySubscriptXOffset=C.parseShort(),S.ySubscriptYOffset=C.parseShort(),S.ySuperscriptXSize=C.parseShort(),S.ySuperscriptYSize=C.parseShort(),S.ySuperscriptXOffset=C.parseShort(),S.ySuperscriptYOffset=C.parseShort(),S.yStrikeoutSize=C.parseShort(),S.yStrikeoutPosition=C.parseShort(),S.sFamilyClass=C.parseShort(),S.panose=[];for(let T=0;T<10;T++)S.panose[T]=C.parseByte();return S.ulUnicodeRange1=C.parseULong(),S.ulUnicodeRange2=C.parseULong(),S.ulUnicodeRange3=C.parseULong(),S.ulUnicodeRange4=C.parseULong(),S.achVendID=String.fromCharCode(C.parseByte(),C.parseByte(),C.parseByte(),C.parseByte()),S.fsSelection=C.parseUShort(),S.usFirstCharIndex=C.parseUShort(),S.usLastCharIndex=C.parseUShort(),S.sTypoAscender=C.parseShort(),S.sTypoDescender=C.parseShort(),S.sTypoLineGap=C.parseShort(),S.usWinAscent=C.parseUShort(),S.usWinDescent=C.parseUShort(),S.version>=1&&(S.ulCodePageRange1=C.parseULong(),S.ulCodePageRange2=C.parseULong()),S.version>=2&&(S.sxHeight=C.parseShort(),S.sCapHeight=C.parseShort(),S.usDefaultChar=C.parseUShort(),S.usBreakChar=C.parseUShort(),S.usMaxContent=C.parseUShort()),S},ku=function(r){return new q.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],r)},Au=function(r){for(let l=0;l<Ba.length;l+=1){let S=Ba[l];if(r>=S.begin&&r<S.end)return l}return-1},Mu=function(r,l){let S={},C=new he.Parser(r,l);switch(S.version=C.parseVersion(),S.italicAngle=C.parseFixed(),S.underlinePosition=C.parseShort(),S.underlineThickness=C.parseShort(),S.isFixedPitch=C.parseULong(),S.minMemType42=C.parseULong(),S.maxMemType42=C.parseULong(),S.minMemType1=C.parseULong(),S.maxMemType1=C.parseULong(),S.version){case 1:S.names=De.slice();break;case 2:S.numberOfGlyphs=C.parseUShort(),S.glyphNameIndex=new Array(S.numberOfGlyphs);for(let T=0;T<S.numberOfGlyphs;T++)S.glyphNameIndex[T]=C.parseUShort();S.names=[];for(let T=0;T<S.numberOfGlyphs;T++)if(S.glyphNameIndex[T]>=De.length){let O=C.parseChar();S.names.push(C.parseString(O))}break;case 2.5:S.numberOfGlyphs=C.parseUShort(),S.offset=new Array(S.numberOfGlyphs);for(let T=0;T<S.numberOfGlyphs;T++)S.offset[T]=C.parseChar()}return S},Ou=function(){return new q.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},Dt=new Array(9);Dt[1]=function(){let r=this.offset+this.relativeOffset,l=this.parseUShort();return l===1?{substFormat:1,coverage:this.parsePointer(Z.coverage),deltaGlyphId:this.parseUShort()}:l===2?{substFormat:2,coverage:this.parsePointer(Z.coverage),substitute:this.parseOffset16List()}:void b.assert(!1,"0x"+r.toString(16)+": lookup type 1 format must be 1 or 2.")},Dt[2]=function(){let r=this.parseUShort();return b.argument(r===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:r,coverage:this.parsePointer(Z.coverage),sequences:this.parseListOfLists()}},Dt[3]=function(){let r=this.parseUShort();return b.argument(r===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:r,coverage:this.parsePointer(Z.coverage),alternateSets:this.parseListOfLists()}},Dt[4]=function(){let r=this.parseUShort();return b.argument(r===1,"GSUB ligature table identifier-format must be 1"),{substFormat:r,coverage:this.parsePointer(Z.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};let ui={sequenceIndex:Z.uShort,lookupListIndex:Z.uShort};Dt[5]=function(){let r=this.offset+this.relativeOffset,l=this.parseUShort();if(l===1)return{substFormat:l,coverage:this.parsePointer(Z.coverage),ruleSets:this.parseListOfLists(function(){let S=this.parseUShort(),C=this.parseUShort();return{input:this.parseUShortList(S-1),lookupRecords:this.parseRecordList(C,ui)}})};if(l===2)return{substFormat:l,coverage:this.parsePointer(Z.coverage),classDef:this.parsePointer(Z.classDef),classSets:this.parseListOfLists(function(){let S=this.parseUShort(),C=this.parseUShort();return{classes:this.parseUShortList(S-1),lookupRecords:this.parseRecordList(C,ui)}})};if(l===3){let S=this.parseUShort(),C=this.parseUShort();return{substFormat:l,coverages:this.parseList(S,Z.pointer(Z.coverage)),lookupRecords:this.parseRecordList(C,ui)}}b.assert(!1,"0x"+r.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Dt[6]=function(){let r=this.offset+this.relativeOffset,l=this.parseUShort();return l===1?{substFormat:1,coverage:this.parsePointer(Z.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ui)}})}:l===2?{substFormat:2,coverage:this.parsePointer(Z.coverage),backtrackClassDef:this.parsePointer(Z.classDef),inputClassDef:this.parsePointer(Z.classDef),lookaheadClassDef:this.parsePointer(Z.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ui)}})}:l===3?{substFormat:3,backtrackCoverage:this.parseList(Z.pointer(Z.coverage)),inputCoverage:this.parseList(Z.pointer(Z.coverage)),lookaheadCoverage:this.parseList(Z.pointer(Z.coverage)),lookupRecords:this.parseRecordList(ui)}:void b.assert(!1,"0x"+r.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Dt[7]=function(){let r=this.parseUShort();b.argument(r===1,"GSUB Extension Substitution subtable identifier-format must be 1");let l=this.parseUShort(),S=new Z(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:l,extension:Dt[l].call(S)}},Dt[8]=function(){let r=this.parseUShort();return b.argument(r===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:r,coverage:this.parsePointer(Z.coverage),backtrackCoverage:this.parseList(Z.pointer(Z.coverage)),lookaheadCoverage:this.parseList(Z.pointer(Z.coverage)),substitutes:this.parseUShortList()}};let Cs=new Array(9);Cs[1]=function(r){return r.substFormat===1?new q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new q.Coverage(r.coverage)},{name:"deltaGlyphID",type:"USHORT",value:r.deltaGlyphId}]):new q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new q.Coverage(r.coverage)}].concat(q.ushortList("substitute",r.substitute)))},Cs[3]=function(r){return b.assert(r.substFormat===1,"Lookup type 3 substFormat must be 1."),new q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new q.Coverage(r.coverage)}].concat(q.tableList("altSet",r.alternateSets,function(l){return new q.Table("alternateSetTable",q.ushortList("alternate",l))})))},Cs[4]=function(r){return b.assert(r.substFormat===1,"Lookup type 4 substFormat must be 1."),new q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new q.Coverage(r.coverage)}].concat(q.tableList("ligSet",r.ligatureSets,function(l){return new q.Table("ligatureSetTable",q.tableList("ligature",l,function(S){return new q.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:S.ligGlyph}].concat(q.ushortList("component",S.components,S.components.length+1)))}))})))};let Du=function(r,l){let S=new Z(r,l=l||0),C=S.parseVersion(1);return b.argument(C===1||C===1.1,"Unsupported GSUB table version."),C===1?{version:C,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(Dt)}:{version:C,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(Dt),variations:S.parseFeatureVariationsList()}},Pu=function(r){return new q.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new q.ScriptList(r.scripts)},{name:"features",type:"TABLE",value:new q.FeatureList(r.features)},{name:"lookups",type:"TABLE",value:new q.LookupList(r.lookups,Cs)}])},Iu=function(r,l){let S=new he.Parser(r,l),C=S.parseULong();b.argument(C===1,"Unsupported META table version."),S.parseULong(),S.parseULong();let T=S.parseULong(),O={};for(let I=0;I<T;I++){let H=S.parseTag(),B=S.parseULong(),j=S.parseULong(),X=E.UTF8(r,l+B,j);O[H]=X}return O},Bu=function(r){let l=Object.keys(r).length,S="",C=16+12*l,T=new q.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:C},{name:"numTags",type:"ULONG",value:l}]);for(let O in r){let I=S.length;S+=r[O],T.fields.push({name:"tag "+O,type:"TAG",value:O}),T.fields.push({name:"offset "+O,type:"ULONG",value:C+I}),T.fields.push({name:"length "+O,type:"ULONG",value:r[O].length})}return T.fields.push({name:"stringPool",type:"CHARARRAY",value:S}),T};function Fa(r){return Math.log(r)/Math.log(2)|0}function Ua(r){for(;r.length%4!=0;)r.push(0);let l=0;for(let S=0;S<r.length;S+=4)l+=(r[S]<<24)+(r[S+1]<<16)+(r[S+2]<<8)+r[S+3];return l%=Math.pow(2,32),l}function Na(r,l,S,C){return new q.Record("Table Record",[{name:"tag",type:"TAG",value:r!==void 0?r:""},{name:"checkSum",type:"ULONG",value:l!==void 0?l:0},{name:"offset",type:"ULONG",value:S!==void 0?S:0},{name:"length",type:"ULONG",value:C!==void 0?C:0}])}function Fu(r){let l=new q.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);l.tables=r,l.numTables=r.length;let S=Math.pow(2,Fa(l.numTables));l.searchRange=16*S,l.entrySelector=Fa(S),l.rangeShift=16*l.numTables-l.searchRange;let C=[],T=[],O=l.sizeOf()+Na().sizeOf()*l.numTables;for(;O%4!=0;)O+=1,T.push({name:"padding",type:"BYTE",value:0});for(let I=0;I<r.length;I+=1){let H=r[I];b.argument(H.tableName.length===4,"Table name"+H.tableName+" is invalid.");let B=H.sizeOf(),j=Na(H.tableName,Ua(H.encode()),O,B);for(C.push({name:j.tag+" Table Record",type:"RECORD",value:j}),T.push({name:H.tableName+" table",type:"RECORD",value:H}),O+=B,b.argument(!isNaN(O),"Something went wrong calculating the offset.");O%4!=0;)O+=1,T.push({name:"padding",type:"BYTE",value:0})}return C.sort(function(I,H){return I.value.tag>H.value.tag?1:-1}),l.fields=l.fields.concat(C),l.fields=l.fields.concat(T),l}function Ha(r,l,S){for(let C=0;C<l.length;C+=1){let T=r.charToGlyphIndex(l[C]);if(T>0)return r.glyphs.get(T).getMetrics()}return S}function Uu(r){let l=0;for(let S=0;S<r.length;S+=1)l+=r[S];return l/r.length}let Nu=function(r){let l=[],S=[],C=[],T=[],O=[],I=[],H=[],B,j=0,X=0,Y=0,J=0,de=0;for(let Tt=0;Tt<r.glyphs.length;Tt+=1){let fi=r.glyphs.get(Tt),pi=0|fi.unicode;if(isNaN(fi.advanceWidth))throw new Error("Glyph "+fi.name+" ("+Tt+"): advanceWidth is not a number.");(B>pi||B===void 0)&&pi>0&&(B=pi),j<pi&&(j=pi);let Or=Au(pi);if(Or<32)X|=1<<Or;else if(Or<64)Y|=1<<Or-32;else if(Or<96)J|=1<<Or-64;else{if(!(Or<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");de|=1<<Or-96}if(fi.name===".notdef")continue;let gi=fi.getMetrics();l.push(gi.xMin),S.push(gi.yMin),C.push(gi.xMax),T.push(gi.yMax),I.push(gi.leftSideBearing),H.push(gi.rightSideBearing),O.push(fi.advanceWidth)}let ae={xMin:Math.min.apply(null,l),yMin:Math.min.apply(null,S),xMax:Math.max.apply(null,C),yMax:Math.max.apply(null,T),advanceWidthMax:Math.max.apply(null,O),advanceWidthAvg:Uu(O),minLeftSideBearing:Math.min.apply(null,I),maxLeftSideBearing:Math.max.apply(null,I),minRightSideBearing:Math.min.apply(null,H)};ae.ascender=r.ascender,ae.descender=r.descender;let be=fu({flags:3,unitsPerEm:r.unitsPerEm,xMin:ae.xMin,yMin:ae.yMin,xMax:ae.xMax,yMax:ae.yMax,lowestRecPPEM:3,createdTimestamp:r.createdTimestamp}),ie=gu({ascender:ae.ascender,descender:ae.descender,advanceWidthMax:ae.advanceWidthMax,minLeftSideBearing:ae.minLeftSideBearing,minRightSideBearing:ae.minRightSideBearing,xMaxExtent:ae.maxLeftSideBearing+(ae.xMax-ae.xMin),numberOfHMetrics:r.glyphs.length}),le=Su(r.glyphs.length),ye=ku({xAvgCharWidth:Math.round(ae.advanceWidthAvg),usWeightClass:r.tables.os2.usWeightClass,usWidthClass:r.tables.os2.usWidthClass,usFirstCharIndex:B,usLastCharIndex:j,ulUnicodeRange1:X,ulUnicodeRange2:Y,ulUnicodeRange3:J,ulUnicodeRange4:de,fsSelection:r.tables.os2.fsSelection,sTypoAscender:ae.ascender,sTypoDescender:ae.descender,sTypoLineGap:0,usWinAscent:ae.yMax,usWinDescent:Math.abs(ae.yMin),ulCodePageRange1:1,sxHeight:Ha(r,"xyvw",{yMax:Math.round(ae.ascender/2)}).yMax,sCapHeight:Ha(r,"HIKLEFJMNTZBDPRAGOQSUVWXY",ae).yMax,usDefaultChar:r.hasChar(" ")?32:0,usBreakChar:r.hasChar(" ")?32:0}),Le=mu(r.glyphs),Oe=me(r.glyphs),pe=r.getEnglishName("fontFamily"),ue=r.getEnglishName("fontSubfamily"),ge=pe+" "+ue,Fe=r.getEnglishName("postScriptName");Fe||(Fe=pe.replace(/\s/g,"")+"-"+ue);let Te={};for(let Tt in r.names)Te[Tt]=r.names[Tt];Te.uniqueID||(Te.uniqueID={en:r.getEnglishName("manufacturer")+":"+ge}),Te.postScriptName||(Te.postScriptName={en:Fe}),Te.preferredFamily||(Te.preferredFamily=r.names.fontFamily),Te.preferredSubfamily||(Te.preferredSubfamily=r.names.fontSubfamily);let Xe=[],ot=Ru(Te,Xe),_t=Xe.length>0?vu(Xe):void 0,rt=Ou(),ct=uu(r.glyphs,{version:r.getEnglishName("version"),fullName:ge,familyName:pe,weightName:ue,postScriptName:Fe,unitsPerEm:r.unitsPerEm,fontBBox:[0,ae.yMin,ae.ascender,ae.advanceWidthMax]}),Qe=r.metas&&Object.keys(r.metas).length>0?Bu(r.metas):void 0,at=[be,ie,le,ye,ot,Oe,rt,ct,Le];_t&&at.push(_t),r.tables.gsub&&at.push(Pu(r.tables.gsub)),Qe&&at.push(Qe);let it=Fu(at),wt=Ua(it.encode()),Ge=it.fields,ht=!1;for(let Tt=0;Tt<Ge.length;Tt+=1)if(Ge[Tt].name==="head table"){Ge[Tt].value.checkSumAdjustment=2981146554-wt,ht=!0;break}if(!ht)throw new Error("Could not find head table with checkSum to adjust.");return it};function vn(r,l){let S=0,C=r.length-1;for(;S<=C;){let T=S+C>>>1,O=r[T].tag;if(O===l)return T;O<l?S=T+1:C=T-1}return-S-1}function Wa(r,l){let S=0,C=r.length-1;for(;S<=C;){let T=S+C>>>1,O=r[T];if(O===l)return T;O<l?S=T+1:C=T-1}return-S-1}function za(r,l){let S,C=0,T=r.length-1;for(;C<=T;){let O=C+T>>>1;S=r[O];let I=S.start;if(I===l)return S;I<l?C=O+1:T=O-1}if(C>0)return S=r[C-1],l>S.end?0:S}function $a(r,l){this.font=r,this.tableName=l}$a.prototype={searchTag:vn,binSearch:Wa,getTable:function(r){let l=this.font.tables[this.tableName];return!l&&r&&(l=this.font.tables[this.tableName]=this.createDefaultTable()),l},getScriptNames:function(){let r=this.getTable();return r?r.scripts.map(function(l){return l.tag}):[]},getDefaultScriptName:function(){let r=this.getTable();if(!r)return;let l=!1;for(let S=0;S<r.scripts.length;S++){let C=r.scripts[S].tag;if(C==="DFLT")return C;C==="latn"&&(l=!0)}return l?"latn":void 0},getScriptTable:function(r,l){let S=this.getTable(l);if(S){r=r||"DFLT";let C=S.scripts,T=vn(S.scripts,r);if(T>=0)return C[T].script;if(l){let O={tag:r,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return C.splice(-1-T,0,O),O.script}}},getLangSysTable:function(r,l,S){let C=this.getScriptTable(r,S);if(C){if(!l||l==="dflt"||l==="DFLT")return C.defaultLangSys;let T=vn(C.langSysRecords,l);if(T>=0)return C.langSysRecords[T].langSys;if(S){let O={tag:l,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return C.langSysRecords.splice(-1-T,0,O),O.langSys}}},getFeatureTable:function(r,l,S,C){let T=this.getLangSysTable(r,l,C);if(T){let O,I=T.featureIndexes,H=this.font.tables[this.tableName].features;for(let B=0;B<I.length;B++)if(O=H[I[B]],O.tag===S)return O.feature;if(C){let B=H.length;return b.assert(B===0||S>=H[B-1].tag,"Features must be added in alphabetical order."),O={tag:S,feature:{params:0,lookupListIndexes:[]}},H.push(O),I.push(B),O.feature}}},getLookupTables:function(r,l,S,C,T){let O=this.getFeatureTable(r,l,S,T),I=[];if(O){let H,B=O.lookupListIndexes,j=this.font.tables[this.tableName].lookups;for(let X=0;X<B.length;X++)H=j[B[X]],H.lookupType===C&&I.push(H);if(I.length===0&&T){H={lookupType:C,lookupFlag:0,subtables:[],markFilteringSet:void 0};let X=j.length;return j.push(H),B.push(X),[H]}}return I},getGlyphClass:function(r,l){switch(r.format){case 1:return r.startGlyph<=l&&l<r.startGlyph+r.classes.length?r.classes[l-r.startGlyph]:0;case 2:let S=za(r.ranges,l);return S?S.classId:0}},getCoverageIndex:function(r,l){switch(r.format){case 1:let S=Wa(r.glyphs,l);return S>=0?S:-1;case 2:let C=za(r.ranges,l);return C?C.index+l-C.start:-1}},expandCoverage:function(r){if(r.format===1)return r.glyphs;{let l=[],S=r.ranges;for(let C=0;C<S.length;C++){let T=S[C],O=T.start,I=T.end;for(let H=O;H<=I;H++)l.push(H)}return l}}};let xs=$a;function Ls(r){xs.call(this,r,"gpos")}Ls.prototype=xs.prototype,Ls.prototype.getKerningValue=function(r,l,S){for(let C=0;C<r.length;C++){let T=r[C].subtables;for(let O=0;O<T.length;O++){let I=T[O],H=this.getCoverageIndex(I.coverage,l);if(!(H<0))switch(I.posFormat){case 1:let B=I.pairSets[H];for(let J=0;J<B.length;J++){let de=B[J];if(de.secondGlyph===S)return de.value1&&de.value1.xAdvance||0}break;case 2:let j=this.getGlyphClass(I.classDef1,l),X=this.getGlyphClass(I.classDef2,S),Y=I.classRecords[j][X];return Y.value1&&Y.value1.xAdvance||0}}}return 0},Ls.prototype.getKerningTables=function(r,l){if(this.font.tables.gpos)return this.getLookupTables(r,l,"kern",2)};let Hu=Ls;function Pt(r){xs.call(this,r,"gsub")}function Wu(r,l){let S=r.length;if(S!==l.length)return!1;for(let C=0;C<S;C++)if(r[C]!==l[C])return!1;return!0}function ja(r,l,S){let C=r.subtables;for(let T=0;T<C.length;T++){let O=C[T];if(O.substFormat===l)return O}if(S)return C.push(S),S}Pt.prototype=xs.prototype,Pt.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Pt.prototype.getSingle=function(r,l,S){let C=[],T=this.getLookupTables(l,S,r,1);for(let O=0;O<T.length;O++){let I=T[O].subtables;for(let H=0;H<I.length;H++){let B=I[H],j=this.expandCoverage(B.coverage),X;if(B.substFormat===1){let Y=B.deltaGlyphId;for(X=0;X<j.length;X++){let J=j[X];C.push({sub:J,by:J+Y})}}else{let Y=B.substitute;for(X=0;X<j.length;X++)C.push({sub:j[X],by:Y[X]})}}}return C},Pt.prototype.getAlternates=function(r,l,S){let C=[],T=this.getLookupTables(l,S,r,3);for(let O=0;O<T.length;O++){let I=T[O].subtables;for(let H=0;H<I.length;H++){let B=I[H],j=this.expandCoverage(B.coverage),X=B.alternateSets;for(let Y=0;Y<j.length;Y++)C.push({sub:j[Y],by:X[Y]})}}return C},Pt.prototype.getLigatures=function(r,l,S){let C=[],T=this.getLookupTables(l,S,r,4);for(let O=0;O<T.length;O++){let I=T[O].subtables;for(let H=0;H<I.length;H++){let B=I[H],j=this.expandCoverage(B.coverage),X=B.ligatureSets;for(let Y=0;Y<j.length;Y++){let J=j[Y],de=X[Y];for(let ae=0;ae<de.length;ae++){let be=de[ae];C.push({sub:[J].concat(be.components),by:be.ligGlyph})}}}}return C},Pt.prototype.addSingle=function(r,l,S,C){let T=ja(this.getLookupTables(S,C,r,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});b.assert(T.coverage.format===1,"Ligature: unable to modify coverage table format "+T.coverage.format);let O=l.sub,I=this.binSearch(T.coverage.glyphs,O);I<0&&(I=-1-I,T.coverage.glyphs.splice(I,0,O),T.substitute.splice(I,0,0)),T.substitute[I]=l.by},Pt.prototype.addAlternate=function(r,l,S,C){let T=ja(this.getLookupTables(S,C,r,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});b.assert(T.coverage.format===1,"Ligature: unable to modify coverage table format "+T.coverage.format);let O=l.sub,I=this.binSearch(T.coverage.glyphs,O);I<0&&(I=-1-I,T.coverage.glyphs.splice(I,0,O),T.alternateSets.splice(I,0,0)),T.alternateSets[I]=l.by},Pt.prototype.addLigature=function(r,l,S,C){let T=this.getLookupTables(S,C,r,4,!0)[0],O=T.subtables[0];O||(O={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},T.subtables[0]=O),b.assert(O.coverage.format===1,"Ligature: unable to modify coverage table format "+O.coverage.format);let I=l.sub[0],H=l.sub.slice(1),B={ligGlyph:l.by,components:H},j=this.binSearch(O.coverage.glyphs,I);if(j>=0){let X=O.ligatureSets[j];for(let Y=0;Y<X.length;Y++)if(Wu(X[Y].components,H))return;X.push(B)}else j=-1-j,O.coverage.glyphs.splice(j,0,I),O.ligatureSets.splice(j,0,[B])},Pt.prototype.getFeature=function(r,l,S){if(/ss\d\d/.test(r))return this.getSingle(r,l,S);switch(r){case"aalt":case"salt":return this.getSingle(r,l,S).concat(this.getAlternates(r,l,S));case"dlig":case"liga":case"rlig":return this.getLigatures(r,l,S)}},Pt.prototype.add=function(r,l,S,C){if(/ss\d\d/.test(r))return this.addSingle(r,l,S,C);switch(r){case"aalt":case"salt":return typeof l.by=="number"?this.addSingle(r,l,S,C):this.addAlternate(r,l,S,C);case"dlig":case"liga":case"rlig":return this.addLigature(r,l,S,C)}};let zu=Pt;function Ga(r){let l=new ArrayBuffer(r.length),S=new Uint8Array(l);for(let C=0;C<r.length;++C)S[C]=r[C];return l}function di(r,l){if(!r)throw l}let qa,Kr,Va,yn;function Xa(r){this.font=r,this._fpgmState=this._prepState=void 0,this._errorState=0}function $u(r){return r}function Ka(r){return Math.sign(r)*Math.round(Math.abs(r))}function ju(r){return Math.sign(r)*Math.round(Math.abs(2*r))/2}function Gu(r){return Math.sign(r)*(Math.round(Math.abs(r)+.5)-.5)}function qu(r){return Math.sign(r)*Math.ceil(Math.abs(r))}function Vu(r){return Math.sign(r)*Math.floor(Math.abs(r))}let Ya=function(r){let l=this.srPeriod,S=this.srPhase,C=1;return r<0&&(r=-r,C=-1),r+=this.srThreshold-S,r=Math.trunc(r/l)*l,(r+=S)<0?S*C:r*C},Nt={x:1,y:0,axis:"x",distance:function(r,l,S,C){return(S?r.xo:r.x)-(C?l.xo:l.x)},interpolate:function(r,l,S,C){let T,O,I,H,B,j,X;if(!C||C===this)return T=r.xo-l.xo,O=r.xo-S.xo,B=l.x-l.xo,j=S.x-S.xo,I=Math.abs(T),H=Math.abs(O),X=I+H,X===0?void(r.x=r.xo+(B+j)/2):void(r.x=r.xo+(B*H+j*I)/X);T=C.distance(r,l,!0,!0),O=C.distance(r,S,!0,!0),B=C.distance(l,l,!1,!0),j=C.distance(S,S,!1,!0),I=Math.abs(T),H=Math.abs(O),X=I+H,X!==0?Nt.setRelative(r,r,(B*H+j*I)/X,C,!0):Nt.setRelative(r,r,(B+j)/2,C,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(r,l,S,C,T){if(!C||C===this)return void(r.x=(T?l.xo:l.x)+S);let O=T?l.xo:l.x,I=T?l.yo:l.y,H=O+S*C.x,B=I+S*C.y;r.x=H+(r.y-B)/C.normalSlope},slope:0,touch:function(r){r.xTouched=!0},touched:function(r){return r.xTouched},untouch:function(r){r.xTouched=!1}},Xt={x:0,y:1,axis:"y",distance:function(r,l,S,C){return(S?r.yo:r.y)-(C?l.yo:l.y)},interpolate:function(r,l,S,C){let T,O,I,H,B,j,X;if(!C||C===this)return T=r.yo-l.yo,O=r.yo-S.yo,B=l.y-l.yo,j=S.y-S.yo,I=Math.abs(T),H=Math.abs(O),X=I+H,X===0?void(r.y=r.yo+(B+j)/2):void(r.y=r.yo+(B*H+j*I)/X);T=C.distance(r,l,!0,!0),O=C.distance(r,S,!0,!0),B=C.distance(l,l,!1,!0),j=C.distance(S,S,!1,!0),I=Math.abs(T),H=Math.abs(O),X=I+H,X!==0?Xt.setRelative(r,r,(B*H+j*I)/X,C,!0):Xt.setRelative(r,r,(B+j)/2,C,!0)},normalSlope:0,setRelative:function(r,l,S,C,T){if(!C||C===this)return void(r.y=(T?l.yo:l.y)+S);let O=T?l.xo:l.x,I=T?l.yo:l.y,H=O+S*C.x,B=I+S*C.y;r.y=B+C.normalSlope*(r.x-H)},slope:Number.POSITIVE_INFINITY,touch:function(r){r.yTouched=!0},touched:function(r){return r.yTouched},untouch:function(r){r.yTouched=!1}};function Fi(r,l){this.x=r,this.y=l,this.axis=void 0,this.slope=l/r,this.normalSlope=-r/l,Object.freeze(this)}function Ui(r,l){let S=Math.sqrt(r*r+l*l);return l/=S,(r/=S)==1&&l===0?Nt:r===0&&l===1?Xt:new Fi(r,l)}function Kt(r,l,S,C){this.x=this.xo=Math.round(64*r)/64,this.y=this.yo=Math.round(64*l)/64,this.lastPointOfContour=S,this.onCurve=C,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Nt),Object.freeze(Xt),Fi.prototype.distance=function(r,l,S,C){return this.x*Nt.distance(r,l,S,C)+this.y*Xt.distance(r,l,S,C)},Fi.prototype.interpolate=function(r,l,S,C){let T,O,I,H,B,j,X;I=C.distance(r,l,!0,!0),H=C.distance(r,S,!0,!0),T=C.distance(l,l,!1,!0),O=C.distance(S,S,!1,!0),B=Math.abs(I),j=Math.abs(H),X=B+j,X!==0?this.setRelative(r,r,(T*j+O*B)/X,C,!0):this.setRelative(r,r,(T+O)/2,C,!0)},Fi.prototype.setRelative=function(r,l,S,C,T){C=C||this;let O=T?l.xo:l.x,I=T?l.yo:l.y,H=O+S*C.x,B=I+S*C.y,j=C.normalSlope,X=this.slope,Y=r.x,J=r.y;r.x=(X*Y-j*H+B-J)/(X-j),r.y=X*(r.x-Y)+J},Fi.prototype.touch=function(r){r.xTouched=!0,r.yTouched=!0},Kt.prototype.nextTouched=function(r){let l=this.nextPointOnContour;for(;!r.touched(l)&&l!==this;)l=l.nextPointOnContour;return l},Kt.prototype.prevTouched=function(r){let l=this.prevPointOnContour;for(;!r.touched(l)&&l!==this;)l=l.prevPointOnContour;return l};let Ni=Object.freeze(new Kt(0,0)),Xu={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function kr(r,l){switch(this.env=r,this.stack=[],this.prog=l,r){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Nt,this.round=Ka}}function Es(r){let l=r.tZone=new Array(r.gZone.length);for(let S=0;S<l.length;S++)l[S]=new Kt(0,0)}function Ja(r,l){let S=r.prog,C,T=r.ip,O=1;do if(C=S[++T],C===88)O++;else if(C===89)O--;else if(C===64)T+=S[T+1]+1;else if(C===65)T+=2*S[T+1]+1;else if(C>=176&&C<=183)T+=C-176+1;else if(C>=184&&C<=191)T+=2*(C-184+1);else if(l&&O===1&&C===27)break;while(O>0);r.ip=T}function Za(r,l){se.DEBUG&&console.log(l.step,"SVTCA["+r.axis+"]"),l.fv=l.pv=l.dpv=r}function Qa(r,l){se.DEBUG&&console.log(l.step,"SPVTCA["+r.axis+"]"),l.pv=l.dpv=r}function el(r,l){se.DEBUG&&console.log(l.step,"SFVTCA["+r.axis+"]"),l.fv=r}function tl(r,l){let S=l.stack,C=S.pop(),T=S.pop(),O=l.z2[C],I=l.z1[T],H,B;se.DEBUG&&console.log("SPVTL["+r+"]",C,T),r?(H=O.y-I.y,B=I.x-O.x):(H=I.x-O.x,B=I.y-O.y),l.pv=l.dpv=Ui(H,B)}function rl(r,l){let S=l.stack,C=S.pop(),T=S.pop(),O=l.z2[C],I=l.z1[T],H,B;se.DEBUG&&console.log("SFVTL["+r+"]",C,T),r?(H=O.y-I.y,B=I.x-O.x):(H=I.x-O.x,B=I.y-O.y),l.fv=Ui(H,B)}function bn(r){se.DEBUG&&console.log(r.step,"POP[]"),r.stack.pop()}function il(r,l){let S=l.stack.pop(),C=l.z0[S],T=l.fv,O=l.pv;se.DEBUG&&console.log(l.step,"MDAP["+r+"]",S);let I=O.distance(C,Ni);r&&(I=l.round(I)),T.setRelative(C,Ni,I,O),T.touch(C),l.rp0=l.rp1=S}function sl(r,l){let S=l.z2,C=S.length-2,T,O,I;se.DEBUG&&console.log(l.step,"IUP["+r.axis+"]");for(let H=0;H<C;H++)T=S[H],r.touched(T)||(O=T.prevTouched(r),O!==T&&(I=T.nextTouched(r),O===I&&r.setRelative(T,T,r.distance(O,O,!1,!0),r,!0),r.interpolate(T,O,I,r)))}function nl(r,l){let S=l.stack,C=r?l.rp1:l.rp2,T=(r?l.z0:l.z1)[C],O=l.fv,I=l.pv,H=l.loop,B=l.z2;for(;H--;){let j=S.pop(),X=B[j],Y=I.distance(T,T,!1,!0);O.setRelative(X,X,Y,I),O.touch(X),se.DEBUG&&console.log(l.step,(l.loop>1?"loop "+(l.loop-H)+": ":"")+"SHP["+(r?"rp1":"rp2")+"]",j)}l.loop=1}function ol(r,l){let S=l.stack,C=r?l.rp1:l.rp2,T=(r?l.z0:l.z1)[C],O=l.fv,I=l.pv,H=S.pop(),B=l.z2[l.contours[H]],j=B;se.DEBUG&&console.log(l.step,"SHC["+r+"]",H);let X=I.distance(T,T,!1,!0);do j!==T&&O.setRelative(j,j,X,I),j=j.nextPointOnContour;while(j!==B)}function al(r,l){let S=l.stack,C=r?l.rp1:l.rp2,T=(r?l.z0:l.z1)[C],O=l.fv,I=l.pv,H=S.pop(),B,j;switch(se.DEBUG&&console.log(l.step,"SHZ["+r+"]",H),H){case 0:B=l.tZone;break;case 1:B=l.gZone;break;default:throw new Error("Invalid zone")}let X=I.distance(T,T,!1,!0),Y=B.length-2;for(let J=0;J<Y;J++)j=B[J],O.setRelative(j,j,X,I)}function ll(r,l){let S=l.stack,C=S.pop()/64,T=S.pop(),O=l.z1[T],I=l.z0[l.rp0],H=l.fv,B=l.pv;H.setRelative(O,I,C,B),H.touch(O),se.DEBUG&&console.log(l.step,"MSIRP["+r+"]",C,T),l.rp1=l.rp0,l.rp2=T,r&&(l.rp0=T)}function cl(r,l){let S=l.stack,C=S.pop(),T=S.pop(),O=l.z0[T],I=l.fv,H=l.pv,B=l.cvt[C];se.DEBUG&&console.log(l.step,"MIAP["+r+"]",C,"(",B,")",T);let j=H.distance(O,Ni);r&&(Math.abs(j-B)<l.cvCutIn&&(j=B),j=l.round(j)),I.setRelative(O,Ni,j,H),l.zp0===0&&(O.xo=O.x,O.yo=O.y),I.touch(O),l.rp0=l.rp1=T}function hl(r,l){let S=l.stack,C=S.pop(),T=l.z2[C];se.DEBUG&&console.log(l.step,"GC["+r+"]",C),S.push(64*l.dpv.distance(T,Ni,r,!1))}function ul(r,l){let S=l.stack,C=S.pop(),T=S.pop(),O=l.z1[C],I=l.z0[T],H=l.dpv.distance(I,O,r,r);se.DEBUG&&console.log(l.step,"MD["+r+"]",C,T,"->",H),l.stack.push(Math.round(64*H))}function Sn(r,l){let S=l.stack,C=S.pop(),T=l.fv,O=l.pv,I=l.ppem,H=l.deltaBase+16*(r-1),B=l.deltaShift,j=l.z0;se.DEBUG&&console.log(l.step,"DELTAP["+r+"]",C,S);for(let X=0;X<C;X++){let Y=S.pop(),J=S.pop();if(H+((240&J)>>4)!==I)continue;let de=(15&J)-8;de>=0&&de++,se.DEBUG&&console.log(l.step,"DELTAPFIX",Y,"by",de*B);let ae=j[Y];T.setRelative(ae,ae,de*B,O)}}function Rs(r,l){let S=l.stack,C=S.pop();se.DEBUG&&console.log(l.step,"ROUND[]"),S.push(64*l.round(C/64))}function wn(r,l){let S=l.stack,C=S.pop(),T=l.ppem,O=l.deltaBase+16*(r-1),I=l.deltaShift;se.DEBUG&&console.log(l.step,"DELTAC["+r+"]",C,S);for(let H=0;H<C;H++){let B=S.pop(),j=S.pop();if(O+((240&j)>>4)!==T)continue;let X=(15&j)-8;X>=0&&X++;let Y=X*I;se.DEBUG&&console.log(l.step,"DELTACFIX",B,"by",Y),l.cvt[B]+=Y}}function dl(r,l){let S=l.stack,C=S.pop(),T=S.pop(),O=l.z2[C],I=l.z1[T],H,B;se.DEBUG&&console.log(l.step,"SDPVTL["+r+"]",C,T),r?(H=O.y-I.y,B=I.x-O.x):(H=I.x-O.x,B=I.y-O.y),l.dpv=Ui(H,B)}function Ar(r,l){let S=l.stack,C=l.prog,T=l.ip;se.DEBUG&&console.log(l.step,"PUSHB["+r+"]");for(let O=0;O<r;O++)S.push(C[++T]);l.ip=T}function Mr(r,l){let S=l.ip,C=l.prog,T=l.stack;se.DEBUG&&console.log(l.ip,"PUSHW["+r+"]");for(let O=0;O<r;O++){let I=C[++S]<<8|C[++S];32768&I&&(I=-(1+(65535^I))),T.push(I)}l.ip=S}function _e(r,l,S,C,T,O){let I=O.stack,H=r&&I.pop(),B=I.pop(),j=O.rp0,X=O.z0[j],Y=O.z1[B],J=O.minDis,de=O.fv,ae=O.dpv,be,ie,le,ye;ie=be=ae.distance(Y,X,!0,!0),le=ie>=0?1:-1,ie=Math.abs(ie),r&&(ye=O.cvt[H],C&&Math.abs(ie-ye)<O.cvCutIn&&(ie=ye)),S&&ie<J&&(ie=J),C&&(ie=O.round(ie)),de.setRelative(Y,X,le*ie,ae),de.touch(Y),se.DEBUG&&console.log(O.step,(r?"MIRP[":"MDRP[")+(l?"M":"m")+(S?">":"_")+(C?"R":"_")+(T===0?"Gr":T===1?"Bl":T===2?"Wh":"")+"]",r?H+"("+O.cvt[H]+","+ye+")":"",B,"(d =",be,"->",le*ie,")"),O.rp1=O.rp0,O.rp2=B,l&&(O.rp0=B)}Xa.prototype.exec=function(r,l){if(typeof l!="number")throw new Error("Point size is not a number!");if(this._errorState>2)return;let S=this.font,C=this._prepState;if(!C||C.ppem!==l){let T=this._fpgmState;if(!T){kr.prototype=Xu,T=this._fpgmState=new kr("fpgm",S.tables.fpgm),T.funcs=[],T.font=S,se.DEBUG&&(console.log("---EXEC FPGM---"),T.step=-1);try{Kr(T)}catch(I){return console.log("Hinting error in FPGM:"+I),void(this._errorState=3)}}kr.prototype=T,C=this._prepState=new kr("prep",S.tables.prep),C.ppem=l;let O=S.tables.cvt;if(O){let I=C.cvt=new Array(O.length),H=l/S.unitsPerEm;for(let B=0;B<O.length;B++)I[B]=O[B]*H}else C.cvt=[];se.DEBUG&&(console.log("---EXEC PREP---"),C.step=-1);try{Kr(C)}catch(I){this._errorState<2&&console.log("Hinting error in PREP:"+I),this._errorState=2}}if(!(this._errorState>1))try{return Va(r,C)}catch(T){return this._errorState<1&&(console.log("Hinting error:"+T),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}},Va=function(r,l){let S=l.ppem/l.font.unitsPerEm,C=S,T,O,I,H=r.components;if(kr.prototype=l,H){let B=l.font;O=[],T=[];for(let j=0;j<H.length;j++){let X=H[j],Y=B.glyphs.get(X.glyphIndex);I=new kr("glyf",Y.instructions),se.DEBUG&&(console.log("---EXEC COMP "+j+"---"),I.step=-1),yn(Y,I,S,C);let J=Math.round(X.dx*S),de=Math.round(X.dy*C),ae=I.gZone,be=I.contours;for(let le=0;le<ae.length;le++){let ye=ae[le];ye.xTouched=ye.yTouched=!1,ye.xo=ye.x=ye.x+J,ye.yo=ye.y=ye.y+de}let ie=O.length;O.push.apply(O,ae);for(let le=0;le<be.length;le++)T.push(be[le]+ie)}r.instructions&&!I.inhibitGridFit&&(I=new kr("glyf",r.instructions),I.gZone=I.z0=I.z1=I.z2=O,I.contours=T,O.push(new Kt(0,0),new Kt(Math.round(r.advanceWidth*S),0)),se.DEBUG&&(console.log("---EXEC COMPOSITE---"),I.step=-1),Kr(I),O.length-=2)}else I=new kr("glyf",r.instructions),se.DEBUG&&(console.log("---EXEC GLYPH---"),I.step=-1),yn(r,I,S,C),O=I.gZone;return O},yn=function(r,l,S,C){let T=r.points||[],O=T.length,I=l.gZone=l.z0=l.z1=l.z2=[],H=l.contours=[],B,j,X;for(let Y=0;Y<O;Y++)B=T[Y],I[Y]=new Kt(B.x*S,B.y*C,B.lastPointOfContour,B.onCurve);for(let Y=0;Y<O;Y++)B=I[Y],j||(j=B,H.push(Y)),B.lastPointOfContour?(B.nextPointOnContour=j,j.prevPointOnContour=B,j=void 0):(X=I[Y+1],B.nextPointOnContour=X,X.prevPointOnContour=B);if(!l.inhibitGridFit){if(se.DEBUG){console.log("PROCESSING GLYPH",l.stack);for(let Y=0;Y<O;Y++)console.log(Y,I[Y].x,I[Y].y)}if(I.push(new Kt(0,0),new Kt(Math.round(r.advanceWidth*S),0)),Kr(l),I.length-=2,se.DEBUG){console.log("FINISHED GLYPH",l.stack);for(let Y=0;Y<O;Y++)console.log(Y,I[Y].x,I[Y].y)}}},Kr=function(r){let l=r.prog;if(!l)return;let S=l.length,C;for(r.ip=0;r.ip<S;r.ip++){if(se.DEBUG&&r.step++,C=qa[l[r.ip]],!C)throw new Error("unknown instruction: 0x"+Number(l[r.ip]).toString(16));C(r)}},qa=[Za.bind(void 0,Xt),Za.bind(void 0,Nt),Qa.bind(void 0,Xt),Qa.bind(void 0,Nt),el.bind(void 0,Xt),el.bind(void 0,Nt),tl.bind(void 0,0),tl.bind(void 0,1),rl.bind(void 0,0),rl.bind(void 0,1),function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"SPVFS[]",S,C),r.pv=r.dpv=Ui(C,S)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"SPVFS[]",S,C),r.fv=Ui(C,S)},function(r){let l=r.stack,S=r.pv;se.DEBUG&&console.log(r.step,"GPV[]"),l.push(16384*S.x),l.push(16384*S.y)},function(r){let l=r.stack,S=r.fv;se.DEBUG&&console.log(r.step,"GFV[]"),l.push(16384*S.x),l.push(16384*S.y)},function(r){r.fv=r.pv,se.DEBUG&&console.log(r.step,"SFVTPV[]")},function(r){let l=r.stack,S=l.pop(),C=l.pop(),T=l.pop(),O=l.pop(),I=l.pop(),H=r.z0,B=r.z1,j=H[S],X=H[C],Y=B[T],J=B[O],de=r.z2[I];se.DEBUG&&console.log("ISECT[], ",S,C,T,O,I);let ae=j.x,be=j.y,ie=X.x,le=X.y,ye=Y.x,Le=Y.y,Oe=J.x,pe=J.y,ue=(ae-ie)*(Le-pe)-(be-le)*(ye-Oe),ge=ae*le-be*ie,Fe=ye*pe-Le*Oe;de.x=(ge*(ye-Oe)-Fe*(ae-ie))/ue,de.y=(ge*(Le-pe)-Fe*(be-le))/ue},function(r){r.rp0=r.stack.pop(),se.DEBUG&&console.log(r.step,"SRP0[]",r.rp0)},function(r){r.rp1=r.stack.pop(),se.DEBUG&&console.log(r.step,"SRP1[]",r.rp1)},function(r){r.rp2=r.stack.pop(),se.DEBUG&&console.log(r.step,"SRP2[]",r.rp2)},function(r){let l=r.stack.pop();switch(se.DEBUG&&console.log(r.step,"SZP0[]",l),r.zp0=l,l){case 0:r.tZone||Es(r),r.z0=r.tZone;break;case 1:r.z0=r.gZone;break;default:throw new Error("Invalid zone pointer")}},function(r){let l=r.stack.pop();switch(se.DEBUG&&console.log(r.step,"SZP1[]",l),r.zp1=l,l){case 0:r.tZone||Es(r),r.z1=r.tZone;break;case 1:r.z1=r.gZone;break;default:throw new Error("Invalid zone pointer")}},function(r){let l=r.stack.pop();switch(se.DEBUG&&console.log(r.step,"SZP2[]",l),r.zp2=l,l){case 0:r.tZone||Es(r),r.z2=r.tZone;break;case 1:r.z2=r.gZone;break;default:throw new Error("Invalid zone pointer")}},function(r){let l=r.stack.pop();switch(se.DEBUG&&console.log(r.step,"SZPS[]",l),r.zp0=r.zp1=r.zp2=l,l){case 0:r.tZone||Es(r),r.z0=r.z1=r.z2=r.tZone;break;case 1:r.z0=r.z1=r.z2=r.gZone;break;default:throw new Error("Invalid zone pointer")}},function(r){r.loop=r.stack.pop(),se.DEBUG&&console.log(r.step,"SLOOP[]",r.loop)},function(r){se.DEBUG&&console.log(r.step,"RTG[]"),r.round=Ka},function(r){se.DEBUG&&console.log(r.step,"RTHG[]"),r.round=Gu},function(r){let l=r.stack.pop();se.DEBUG&&console.log(r.step,"SMD[]",l),r.minDis=l/64},function(r){se.DEBUG&&console.log(r.step,"ELSE[]"),Ja(r,!1)},function(r){let l=r.stack.pop();se.DEBUG&&console.log(r.step,"JMPR[]",l),r.ip+=l-1},function(r){let l=r.stack.pop();se.DEBUG&&console.log(r.step,"SCVTCI[]",l),r.cvCutIn=l/64},void 0,void 0,function(r){let l=r.stack;se.DEBUG&&console.log(r.step,"DUP[]"),l.push(l[l.length-1])},bn,function(r){se.DEBUG&&console.log(r.step,"CLEAR[]"),r.stack.length=0},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"SWAP[]"),l.push(S),l.push(C)},function(r){let l=r.stack;se.DEBUG&&console.log(r.step,"DEPTH[]"),l.push(l.length)},function(r){let l=r.stack,S=l.pop();se.DEBUG&&console.log(r.step,"CINDEX[]",S),l.push(l[l.length-S])},function(r){let l=r.stack,S=l.pop();se.DEBUG&&console.log(r.step,"MINDEX[]",S),l.push(l.splice(l.length-S,1)[0])},void 0,void 0,void 0,function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"LOOPCALL[]",S,C);let T=r.ip,O=r.prog;r.prog=r.funcs[S];for(let I=0;I<C;I++)Kr(r),se.DEBUG&&console.log(++r.step,I+1<C?"next loopcall":"done loopcall",I);r.ip=T,r.prog=O},function(r){let l=r.stack.pop();se.DEBUG&&console.log(r.step,"CALL[]",l);let S=r.ip,C=r.prog;r.prog=r.funcs[l],Kr(r),r.ip=S,r.prog=C,se.DEBUG&&console.log(++r.step,"returning from",l)},function(r){if(r.env!=="fpgm")throw new Error("FDEF not allowed here");let l=r.stack,S=r.prog,C=r.ip,T=l.pop(),O=C;for(se.DEBUG&&console.log(r.step,"FDEF[]",T);S[++C]!==45;);r.ip=C,r.funcs[T]=S.slice(O+1,C)},void 0,il.bind(void 0,0),il.bind(void 0,1),sl.bind(void 0,Xt),sl.bind(void 0,Nt),nl.bind(void 0,0),nl.bind(void 0,1),ol.bind(void 0,0),ol.bind(void 0,1),al.bind(void 0,0),al.bind(void 0,1),function(r){let l=r.stack,S=r.loop,C=r.fv,T=l.pop()/64,O=r.z2;for(;S--;){let I=l.pop(),H=O[I];se.DEBUG&&console.log(r.step,(r.loop>1?"loop "+(r.loop-S)+": ":"")+"SHPIX[]",I,T),C.setRelative(H,H,T),C.touch(H)}r.loop=1},function(r){let l=r.stack,S=r.rp1,C=r.rp2,T=r.loop,O=r.z0[S],I=r.z1[C],H=r.fv,B=r.dpv,j=r.z2;for(;T--;){let X=l.pop(),Y=j[X];se.DEBUG&&console.log(r.step,(r.loop>1?"loop "+(r.loop-T)+": ":"")+"IP[]",X,S,"<->",C),H.interpolate(Y,O,I,B),H.touch(Y)}r.loop=1},ll.bind(void 0,0),ll.bind(void 0,1),function(r){let l=r.stack,S=r.rp0,C=r.z0[S],T=r.loop,O=r.fv,I=r.pv,H=r.z1;for(;T--;){let B=l.pop(),j=H[B];se.DEBUG&&console.log(r.step,(r.loop>1?"loop "+(r.loop-T)+": ":"")+"ALIGNRP[]",B),O.setRelative(j,C,0,I),O.touch(j)}r.loop=1},function(r){se.DEBUG&&console.log(r.step,"RTDG[]"),r.round=ju},cl.bind(void 0,0),cl.bind(void 0,1),function(r){let l=r.prog,S=r.ip,C=r.stack,T=l[++S];se.DEBUG&&console.log(r.step,"NPUSHB[]",T);for(let O=0;O<T;O++)C.push(l[++S]);r.ip=S},function(r){let l=r.ip,S=r.prog,C=r.stack,T=S[++l];se.DEBUG&&console.log(r.step,"NPUSHW[]",T);for(let O=0;O<T;O++){let I=S[++l]<<8|S[++l];32768&I&&(I=-(1+(65535^I))),C.push(I)}r.ip=l},function(r){let l=r.stack,S=r.store;S||(S=r.store=[]);let C=l.pop(),T=l.pop();se.DEBUG&&console.log(r.step,"WS",C,T),S[T]=C},function(r){let l=r.stack,S=r.store,C=l.pop();se.DEBUG&&console.log(r.step,"RS",C);let T=S&&S[C]||0;l.push(T)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"WCVTP",S,C),r.cvt[C]=S/64},function(r){let l=r.stack,S=l.pop();se.DEBUG&&console.log(r.step,"RCVT",S),l.push(64*r.cvt[S])},hl.bind(void 0,0),hl.bind(void 0,1),void 0,ul.bind(void 0,0),ul.bind(void 0,1),function(r){se.DEBUG&&console.log(r.step,"MPPEM[]"),r.stack.push(r.ppem)},void 0,function(r){se.DEBUG&&console.log(r.step,"FLIPON[]"),r.autoFlip=!0},void 0,void 0,function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"LT[]",S,C),l.push(C<S?1:0)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"LTEQ[]",S,C),l.push(C<=S?1:0)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"GT[]",S,C),l.push(C>S?1:0)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"GTEQ[]",S,C),l.push(C>=S?1:0)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"EQ[]",S,C),l.push(S===C?1:0)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"NEQ[]",S,C),l.push(S!==C?1:0)},function(r){let l=r.stack,S=l.pop();se.DEBUG&&console.log(r.step,"ODD[]",S),l.push(Math.trunc(S)%2?1:0)},function(r){let l=r.stack,S=l.pop();se.DEBUG&&console.log(r.step,"EVEN[]",S),l.push(Math.trunc(S)%2?0:1)},function(r){let l=r.stack.pop();se.DEBUG&&console.log(r.step,"IF[]",l),l||(Ja(r,!0),se.DEBUG&&console.log(r.step,"EIF[]"))},function(r){se.DEBUG&&console.log(r.step,"EIF[]")},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"AND[]",S,C),l.push(S&&C?1:0)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"OR[]",S,C),l.push(S||C?1:0)},function(r){let l=r.stack,S=l.pop();se.DEBUG&&console.log(r.step,"NOT[]",S),l.push(S?0:1)},Sn.bind(void 0,1),function(r){let l=r.stack.pop();se.DEBUG&&console.log(r.step,"SDB[]",l),r.deltaBase=l},function(r){let l=r.stack.pop();se.DEBUG&&console.log(r.step,"SDS[]",l),r.deltaShift=Math.pow(.5,l)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"ADD[]",S,C),l.push(C+S)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"SUB[]",S,C),l.push(C-S)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"DIV[]",S,C),l.push(64*C/S)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"MUL[]",S,C),l.push(C*S/64)},function(r){let l=r.stack,S=l.pop();se.DEBUG&&console.log(r.step,"ABS[]",S),l.push(Math.abs(S))},function(r){let l=r.stack,S=l.pop();se.DEBUG&&console.log(r.step,"NEG[]",S),l.push(-S)},function(r){let l=r.stack,S=l.pop();se.DEBUG&&console.log(r.step,"FLOOR[]",S),l.push(64*Math.floor(S/64))},function(r){let l=r.stack,S=l.pop();se.DEBUG&&console.log(r.step,"CEILING[]",S),l.push(64*Math.ceil(S/64))},Rs.bind(void 0,0),Rs.bind(void 0,1),Rs.bind(void 0,2),Rs.bind(void 0,3),void 0,void 0,void 0,void 0,function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"WCVTF[]",S,C),r.cvt[C]=S*r.ppem/r.font.unitsPerEm},Sn.bind(void 0,2),Sn.bind(void 0,3),wn.bind(void 0,1),wn.bind(void 0,2),wn.bind(void 0,3),function(r){let l,S=r.stack.pop();switch(se.DEBUG&&console.log(r.step,"SROUND[]",S),r.round=Ya,192&S){case 0:l=.5;break;case 64:l=1;break;case 128:l=2;break;default:throw new Error("invalid SROUND value")}switch(r.srPeriod=l,48&S){case 0:r.srPhase=0;break;case 16:r.srPhase=.25*l;break;case 32:r.srPhase=.5*l;break;case 48:r.srPhase=.75*l;break;default:throw new Error("invalid SROUND value")}S&=15,r.srThreshold=S===0?0:(S/8-.5)*l},function(r){let l,S=r.stack.pop();switch(se.DEBUG&&console.log(r.step,"S45ROUND[]",S),r.round=Ya,192&S){case 0:l=Math.sqrt(2)/2;break;case 64:l=Math.sqrt(2);break;case 128:l=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(r.srPeriod=l,48&S){case 0:r.srPhase=0;break;case 16:r.srPhase=.25*l;break;case 32:r.srPhase=.5*l;break;case 48:r.srPhase=.75*l;break;default:throw new Error("invalid S45ROUND value")}S&=15,r.srThreshold=S===0?0:(S/8-.5)*l},void 0,void 0,function(r){se.DEBUG&&console.log(r.step,"ROFF[]"),r.round=$u},void 0,function(r){se.DEBUG&&console.log(r.step,"RUTG[]"),r.round=qu},function(r){se.DEBUG&&console.log(r.step,"RDTG[]"),r.round=Vu},bn,bn,void 0,void 0,void 0,void 0,void 0,function(r){let l=r.stack.pop();se.DEBUG&&console.log(r.step,"SCANCTRL[]",l)},dl.bind(void 0,0),dl.bind(void 0,1),function(r){let l=r.stack,S=l.pop(),C=0;se.DEBUG&&console.log(r.step,"GETINFO[]",S),1&S&&(C=35),32&S&&(C|=4096),l.push(C)},void 0,function(r){let l=r.stack,S=l.pop(),C=l.pop(),T=l.pop();se.DEBUG&&console.log(r.step,"ROLL[]"),l.push(C),l.push(S),l.push(T)},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"MAX[]",S,C),l.push(Math.max(C,S))},function(r){let l=r.stack,S=l.pop(),C=l.pop();se.DEBUG&&console.log(r.step,"MIN[]",S,C),l.push(Math.min(C,S))},function(r){let l=r.stack.pop();se.DEBUG&&console.log(r.step,"SCANTYPE[]",l)},function(r){let l=r.stack.pop(),S=r.stack.pop();switch(se.DEBUG&&console.log(r.step,"INSTCTRL[]",l,S),l){case 1:return void(r.inhibitGridFit=!!S);case 2:return void(r.ignoreCvt=!!S);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Ar.bind(void 0,1),Ar.bind(void 0,2),Ar.bind(void 0,3),Ar.bind(void 0,4),Ar.bind(void 0,5),Ar.bind(void 0,6),Ar.bind(void 0,7),Ar.bind(void 0,8),Mr.bind(void 0,1),Mr.bind(void 0,2),Mr.bind(void 0,3),Mr.bind(void 0,4),Mr.bind(void 0,5),Mr.bind(void 0,6),Mr.bind(void 0,7),Mr.bind(void 0,8),_e.bind(void 0,0,0,0,0,0),_e.bind(void 0,0,0,0,0,1),_e.bind(void 0,0,0,0,0,2),_e.bind(void 0,0,0,0,0,3),_e.bind(void 0,0,0,0,1,0),_e.bind(void 0,0,0,0,1,1),_e.bind(void 0,0,0,0,1,2),_e.bind(void 0,0,0,0,1,3),_e.bind(void 0,0,0,1,0,0),_e.bind(void 0,0,0,1,0,1),_e.bind(void 0,0,0,1,0,2),_e.bind(void 0,0,0,1,0,3),_e.bind(void 0,0,0,1,1,0),_e.bind(void 0,0,0,1,1,1),_e.bind(void 0,0,0,1,1,2),_e.bind(void 0,0,0,1,1,3),_e.bind(void 0,0,1,0,0,0),_e.bind(void 0,0,1,0,0,1),_e.bind(void 0,0,1,0,0,2),_e.bind(void 0,0,1,0,0,3),_e.bind(void 0,0,1,0,1,0),_e.bind(void 0,0,1,0,1,1),_e.bind(void 0,0,1,0,1,2),_e.bind(void 0,0,1,0,1,3),_e.bind(void 0,0,1,1,0,0),_e.bind(void 0,0,1,1,0,1),_e.bind(void 0,0,1,1,0,2),_e.bind(void 0,0,1,1,0,3),_e.bind(void 0,0,1,1,1,0),_e.bind(void 0,0,1,1,1,1),_e.bind(void 0,0,1,1,1,2),_e.bind(void 0,0,1,1,1,3),_e.bind(void 0,1,0,0,0,0),_e.bind(void 0,1,0,0,0,1),_e.bind(void 0,1,0,0,0,2),_e.bind(void 0,1,0,0,0,3),_e.bind(void 0,1,0,0,1,0),_e.bind(void 0,1,0,0,1,1),_e.bind(void 0,1,0,0,1,2),_e.bind(void 0,1,0,0,1,3),_e.bind(void 0,1,0,1,0,0),_e.bind(void 0,1,0,1,0,1),_e.bind(void 0,1,0,1,0,2),_e.bind(void 0,1,0,1,0,3),_e.bind(void 0,1,0,1,1,0),_e.bind(void 0,1,0,1,1,1),_e.bind(void 0,1,0,1,1,2),_e.bind(void 0,1,0,1,1,3),_e.bind(void 0,1,1,0,0,0),_e.bind(void 0,1,1,0,0,1),_e.bind(void 0,1,1,0,0,2),_e.bind(void 0,1,1,0,0,3),_e.bind(void 0,1,1,0,1,0),_e.bind(void 0,1,1,0,1,1),_e.bind(void 0,1,1,0,1,2),_e.bind(void 0,1,1,0,1,3),_e.bind(void 0,1,1,1,0,0),_e.bind(void 0,1,1,1,0,1),_e.bind(void 0,1,1,1,0,2),_e.bind(void 0,1,1,1,0,3),_e.bind(void 0,1,1,1,1,0),_e.bind(void 0,1,1,1,1,1),_e.bind(void 0,1,1,1,1,2),_e.bind(void 0,1,1,1,1,3)];let Ku=Xa;function He(r){(r=r||{}).empty||(di(r.familyName,"When creating a new Font object, familyName is required."),di(r.styleName,"When creating a new Font object, styleName is required."),di(r.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),di(r.ascender,"When creating a new Font object, ascender is required."),di(r.descender,"When creating a new Font object, descender is required."),di(r.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:r.familyName||" "},fontSubfamily:{en:r.styleName||" "},fullName:{en:r.fullName||r.familyName+" "+r.styleName},postScriptName:{en:r.postScriptName||r.familyName+r.styleName},designer:{en:r.designer||" "},designerURL:{en:r.designerURL||" "},manufacturer:{en:r.manufacturer||" "},manufacturerURL:{en:r.manufacturerURL||" "},license:{en:r.license||" "},licenseURL:{en:r.licenseURL||" "},version:{en:r.version||"Version 0.1"},description:{en:r.description||" "},copyright:{en:r.copyright||" "},trademark:{en:r.trademark||" "}},this.unitsPerEm=r.unitsPerEm||1e3,this.ascender=r.ascender,this.descender=r.descender,this.createdTimestamp=r.createdTimestamp,this.tables={os2:{usWeightClass:r.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:r.widthClass||this.usWidthClasses.MEDIUM,fsSelection:r.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new hi.GlyphSet(this,r.glyphs||[]),this.encoding=new Pe(this),this.position=new Hu(this),this.substitution=new zu(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:this.outlinesFormat==="truetype"?this._hinting=new Ku(this):void 0}})}He.prototype.hasChar=function(r){return this.encoding.charToGlyphIndex(r)!==null},He.prototype.charToGlyphIndex=function(r){return this.encoding.charToGlyphIndex(r)},He.prototype.charToGlyph=function(r){let l=this.charToGlyphIndex(r),S=this.glyphs.get(l);return S||(S=this.glyphs.get(0)),S},He.prototype.stringToGlyphs=function(r,l){l=l||this.defaultRenderOptions;let S=[];for(let I=0;I<r.length;I+=1){let H=r[I];S.push(this.charToGlyphIndex(H))}let C=S.length;if(l.features){let I=l.script||this.substitution.getDefaultScriptName(),H=[];l.features.liga&&(H=H.concat(this.substitution.getFeature("liga",I,l.language))),l.features.rlig&&(H=H.concat(this.substitution.getFeature("rlig",I,l.language)));for(let B=0;B<C;B+=1)for(let j=0;j<H.length;j++){let X=H[j],Y=X.sub,J=Y.length,de=0;for(;de<J&&Y[de]===S[B+de];)de++;de===J&&(S.splice(B,J,X.by),C=C-J+1)}}let T=new Array(C),O=this.glyphs.get(0);for(let I=0;I<C;I+=1)T[I]=this.glyphs.get(S[I])||O;return T},He.prototype.nameToGlyphIndex=function(r){return this.glyphNames.nameToGlyphIndex(r)},He.prototype.nameToGlyph=function(r){let l=this.nameToGlyphIndex(r),S=this.glyphs.get(l);return S||(S=this.glyphs.get(0)),S},He.prototype.glyphIndexToName=function(r){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(r):""},He.prototype.getKerningValue=function(r,l){return r=r.index||r,l=l.index||l,this.kerningPairs[r+","+l]||0},He.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},He.prototype.forEachGlyph=function(r,l,S,C,T,O){l=l!==void 0?l:0,S=S!==void 0?S:0,C=C!==void 0?C:72,T=T||this.defaultRenderOptions;let I=1/this.unitsPerEm*C,H=this.stringToGlyphs(r,T),B;if(T.kerning){let j=T.script||this.position.getDefaultScriptName();B=this.position.getKerningTables(j,T.language)}for(let j=0;j<H.length;j+=1){let X=H[j];O.call(this,X,l,S,C,T),X.advanceWidth&&(l+=X.advanceWidth*I),T.kerning&&j<H.length-1&&(l+=(B?this.position.getKerningValue(B,X.index,H[j+1].index):this.getKerningValue(X,H[j+1]))*I),T.letterSpacing?l+=T.letterSpacing*C:T.tracking&&(l+=T.tracking/1e3*C)}return l},He.prototype.getPath=function(r,l,S,C,T){let O=new s;return this.forEachGlyph(r,l,S,C,T,function(I,H,B,j){let X=I.getPath(H,B,j,T,this);O.extend(X)}),O},He.prototype.getPaths=function(r,l,S,C,T){let O=[];return this.forEachGlyph(r,l,S,C,T,function(I,H,B,j){let X=I.getPath(H,B,j,T,this);O.push(X)}),O},He.prototype.getAdvanceWidth=function(r,l,S){return this.forEachGlyph(r,0,0,l,S,function(){})},He.prototype.draw=function(r,l,S,C,T,O){this.getPath(l,S,C,T,O).draw(r)},He.prototype.drawPoints=function(r,l,S,C,T,O){this.forEachGlyph(l,S,C,T,O,function(I,H,B,j){I.drawPoints(r,H,B,j)})},He.prototype.drawMetrics=function(r,l,S,C,T,O){this.forEachGlyph(l,S,C,T,O,function(I,H,B,j){I.drawMetrics(r,H,B,j)})},He.prototype.getEnglishName=function(r){let l=this.names[r];if(l)return l.en},He.prototype.validate=function(){let r=[],l=this;function S(T,O){T||r.push(O)}function C(T){let O=l.getEnglishName(T);S(O&&O.trim().length>0,"No English "+T+" specified.")}C("fontFamily"),C("weightName"),C("manufacturer"),C("copyright"),C("version"),S(this.unitsPerEm>0,"No unitsPerEm specified.")},He.prototype.toTables=function(){return Nu(this)},He.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},He.prototype.toArrayBuffer=function(){let r=this.toTables().encode(),l=new ArrayBuffer(r.length),S=new Uint8Array(l);for(let C=0;C<r.length;C++)S[C]=r[C];return l},He.prototype.download=function(r){let l=this.getEnglishName("fontFamily"),S=this.getEnglishName("fontSubfamily");r=r||l.replace(/\s/g,"")+"-"+S+".otf";let C=this.toArrayBuffer();if(typeof window!="undefined")window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,C.byteLength,function(T){T.root.getFile(r,{create:!0},function(O){O.createWriter(function(I){let H=new DataView(C),B=new Blob([H],{type:"font/opentype"});I.write(B),I.addEventListener("writeend",function(){location.href=O.toURL()},!1)})})},function(T){throw new Error(T.name+": "+T.message)});else{let T=o(89),O=function(I){let H=new Buffer(I.byteLength),B=new Uint8Array(I);for(let j=0;j<H.length;++j)H[j]=B[j];return H}(C);T.writeFileSync(r,O)}},He.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},He.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},He.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};let fl=He;function Yu(r,l,S){let C={},T=new he.Parser(r,l);return C.tag=T.parseTag(),C.minValue=T.parseFixed(),C.defaultValue=T.parseFixed(),C.maxValue=T.parseFixed(),T.skip("uShort",1),C.name=S[T.parseUShort()]||{},C}function Ju(r,l,S,C){let T={},O=new he.Parser(r,l);T.name=C[O.parseUShort()]||{},O.skip("uShort",1),T.coordinates={};for(let I=0;I<S.length;++I)T.coordinates[S[I].tag]=O.parseFixed();return T}let Zu=function(r,l,S){let C=new he.Parser(r,l),T=C.parseULong();b.argument(T===65536,"Unsupported fvar table version.");let O=C.parseOffset16();C.skip("uShort",1);let I=C.parseUShort(),H=C.parseUShort(),B=C.parseUShort(),j=C.parseUShort(),X=[];for(let de=0;de<I;de++)X.push(Yu(r,l+O+de*H,S));let Y=[],J=l+O+I*H;for(let de=0;de<B;de++)Y.push(Ju(r,J+de*j,X,S));return{axes:X,instances:Y}},It=new Array(10);It[1]=function(){let r=this.offset+this.relativeOffset,l=this.parseUShort();return l===1?{posFormat:1,coverage:this.parsePointer(Z.coverage),value:this.parseValueRecord()}:l===2?{posFormat:2,coverage:this.parsePointer(Z.coverage),values:this.parseValueRecordList()}:void b.assert(!1,"0x"+r.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},It[2]=function(){let r=this.offset+this.relativeOffset,l=this.parseUShort(),S=this.parsePointer(Z.coverage),C=this.parseUShort(),T=this.parseUShort();if(l===1)return{posFormat:l,coverage:S,valueFormat1:C,valueFormat2:T,pairSets:this.parseList(Z.pointer(Z.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(C),value2:this.parseValueRecord(T)}})))};if(l===2){let O=this.parsePointer(Z.classDef),I=this.parsePointer(Z.classDef),H=this.parseUShort(),B=this.parseUShort();return{posFormat:l,coverage:S,valueFormat1:C,valueFormat2:T,classDef1:O,classDef2:I,class1Count:H,class2Count:B,classRecords:this.parseList(H,Z.list(B,function(){return{value1:this.parseValueRecord(C),value2:this.parseValueRecord(T)}}))}}b.assert(!1,"0x"+r.toString(16)+": GPOS lookup type 2 format must be 1 or 2.")},It[3]=function(){return{error:"GPOS Lookup 3 not supported"}},It[4]=function(){return{error:"GPOS Lookup 4 not supported"}},It[5]=function(){return{error:"GPOS Lookup 5 not supported"}},It[6]=function(){return{error:"GPOS Lookup 6 not supported"}},It[7]=function(){return{error:"GPOS Lookup 7 not supported"}},It[8]=function(){return{error:"GPOS Lookup 8 not supported"}},It[9]=function(){return{error:"GPOS Lookup 9 not supported"}},new Array(10);let Qu=function(r,l){let S=new Z(r,l=l||0),C=S.parseVersion(1);return b.argument(C===1||C===1.1,"Unsupported GPOS table version "+C),C===1?{version:C,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(It)}:{version:C,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(It),variations:S.parseFeatureVariationsList()}},ed=function(r,l){let S=new he.Parser(r,l),C=S.parseUShort();if(C===0)return function(T){let O={};T.skip("uShort");let I=T.parseUShort();b.argument(I===0,"Unsupported kern sub-table version."),T.skip("uShort",2);let H=T.parseUShort();T.skip("uShort",3);for(let B=0;B<H;B+=1){let j=T.parseUShort(),X=T.parseUShort(),Y=T.parseShort();O[j+","+X]=Y}return O}(S);if(C===1)return function(T){let O={};T.skip("uShort"),T.parseULong()>1&&console.warn("Only the first kern subtable is supported."),T.skip("uLong");let I=255&T.parseUShort();if(T.skip("uShort"),I===0){let H=T.parseUShort();T.skip("uShort",3);for(let B=0;B<H;B+=1){let j=T.parseUShort(),X=T.parseUShort(),Y=T.parseShort();O[j+","+X]=Y}}return O}(S);throw new Error("Unsupported kern table version ("+C+").")},td=function(r,l,S,C){let T=new he.Parser(r,l),O=C?T.parseUShort:T.parseULong,I=[];for(let H=0;H<S+1;H+=1){let B=O.call(T);C&&(B*=2),I.push(B)}return I};function rd(r,l){o(89).readFile(r,function(S,C){if(S)return l(S.message);l(null,Ga(C))})}function id(r,l){let S=new XMLHttpRequest;S.open("get",r,!0),S.responseType="arraybuffer",S.onload=function(){return S.response?l(null,S.response):l("Font could not be loaded: "+S.statusText)},S.onerror=function(){l("Font could not be loaded")},S.send()}function pl(r,l){let S=[],C=12;for(let T=0;T<l;T+=1){let O=he.getTag(r,C),I=he.getULong(r,C+4),H=he.getULong(r,C+8),B=he.getULong(r,C+12);S.push({tag:O,checksum:I,offset:H,length:B,compression:!1}),C+=16}return S}function Ve(r,l){if(l.compression==="WOFF"){let S=new Uint8Array(r.buffer,l.offset+2,l.compressedLength-2),C=new Uint8Array(l.length);if(p()(S,C),C.byteLength!==l.length)throw new Error("Decompression error: "+l.tag+" decompressed length doesn't match recorded length");return{data:new DataView(C.buffer,0),offset:0}}return{data:r,offset:l.offset}}function Cn(r){let l,S,C=new fl({empty:!0}),T=new DataView(r,0),O,I=[],H=he.getTag(T,0);if(H===String.fromCharCode(0,1,0,0)||H==="true"||H==="typ1")C.outlinesFormat="truetype",O=he.getUShort(T,4),I=pl(T,O);else if(H==="OTTO")C.outlinesFormat="cff",O=he.getUShort(T,4),I=pl(T,O);else{if(H!=="wOFF")throw new Error("Unsupported OpenType signature "+H);{let pe=he.getTag(T,4);if(pe===String.fromCharCode(0,1,0,0))C.outlinesFormat="truetype";else{if(pe!=="OTTO")throw new Error("Unsupported OpenType flavor "+H);C.outlinesFormat="cff"}O=he.getUShort(T,12),I=function(ue,ge){let Fe=[],Te=44;for(let Xe=0;Xe<ge;Xe+=1){let ot=he.getTag(ue,Te),_t=he.getULong(ue,Te+4),rt=he.getULong(ue,Te+8),ct=he.getULong(ue,Te+12),Qe;Qe=rt<ct&&"WOFF",Fe.push({tag:ot,offset:_t,compression:Qe,compressedLength:rt,length:ct}),Te+=20}return Fe}(T,O)}}let B,j,X,Y,J,de,ae,be,ie,le,ye;for(let pe=0;pe<O;pe+=1){let ue=I[pe],ge;switch(ue.tag){case"cmap":ge=Ve(T,ue),C.tables.cmap=we(ge.data,ge.offset),C.encoding=new gt(C.tables.cmap);break;case"cvt ":ge=Ve(T,ue),ye=new he.Parser(ge.data,ge.offset),C.tables.cvt=ye.parseShortList(ue.length/2);break;case"fvar":j=ue;break;case"fpgm":ge=Ve(T,ue),ye=new he.Parser(ge.data,ge.offset),C.tables.fpgm=ye.parseByteList(ue.length);break;case"head":ge=Ve(T,ue),C.tables.head=du(ge.data,ge.offset),C.unitsPerEm=C.tables.head.unitsPerEm,l=C.tables.head.indexToLocFormat;break;case"hhea":ge=Ve(T,ue),C.tables.hhea=pu(ge.data,ge.offset),C.ascender=C.tables.hhea.ascender,C.descender=C.tables.hhea.descender,C.numberOfHMetrics=C.tables.hhea.numberOfHMetrics;break;case"hmtx":de=ue;break;case"ltag":ge=Ve(T,ue),S=yu(ge.data,ge.offset);break;case"maxp":ge=Ve(T,ue),C.tables.maxp=bu(ge.data,ge.offset),C.numGlyphs=C.tables.maxp.numGlyphs;break;case"name":ie=ue;break;case"OS/2":ge=Ve(T,ue),C.tables.os2=Tu(ge.data,ge.offset);break;case"post":ge=Ve(T,ue),C.tables.post=Mu(ge.data,ge.offset),C.glyphNames=new Be(C.tables.post);break;case"prep":ge=Ve(T,ue),ye=new he.Parser(ge.data,ge.offset),C.tables.prep=ye.parseByteList(ue.length);break;case"glyf":X=ue;break;case"loca":be=ue;break;case"CFF ":B=ue;break;case"kern":ae=ue;break;case"GPOS":Y=ue;break;case"GSUB":J=ue;break;case"meta":le=ue}}let Le=Ve(T,ie);if(C.tables.name=Eu(Le.data,Le.offset,S),C.names=C.tables.name,X&&be){let pe=l===0,ue=Ve(T,be),ge=td(ue.data,ue.offset,C.numGlyphs,pe),Fe=Ve(T,X);C.glyphs=va.parse(Fe.data,Fe.offset,ge,C)}else{if(!B)throw new Error("Font doesn't contain TrueType or CFF outlines.");{let pe=Ve(T,B);hu(pe.data,pe.offset,C)}}let Oe=Ve(T,de);if(_u(Oe.data,Oe.offset,C.numberOfHMetrics,C.numGlyphs,C.glyphs),function(pe){let ue,ge=pe.tables.cmap.glyphIndexMap,Fe=Object.keys(ge);for(let Te=0;Te<Fe.length;Te+=1){let Xe=Fe[Te],ot=ge[Xe];ue=pe.glyphs.get(ot),ue.addUnicode(parseInt(Xe))}for(let Te=0;Te<pe.glyphs.length;Te+=1)ue=pe.glyphs.get(Te),pe.cffEncoding?pe.isCIDFont?ue.name="gid"+Te:ue.name=pe.cffEncoding.charset[Te]:pe.glyphNames.names&&(ue.name=pe.glyphNames.glyphIndexToName(Te))}(C),ae){let pe=Ve(T,ae);C.kerningPairs=ed(pe.data,pe.offset)}else C.kerningPairs={};if(Y){let pe=Ve(T,Y);C.tables.gpos=Qu(pe.data,pe.offset)}if(J){let pe=Ve(T,J);C.tables.gsub=Du(pe.data,pe.offset)}if(j){let pe=Ve(T,j);C.tables.fvar=Zu(pe.data,pe.offset,C.names)}if(le){let pe=Ve(T,le);C.tables.meta=Iu(pe.data,pe.offset),C.metas=C.tables.meta}return C}function sd(r,l){(typeof window=="undefined"?rd:id)(r,function(S,C){if(S)return l(S);let T;try{T=Cn(C)}catch(O){return l(O,null)}return l(null,T)})}function nd(r){return Cn(Ga(o(89).readFileSync(r)))}},896:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(978);class p extends m.Writable{constructor(){super(...arguments),this.offset=0,this._waiters=[],this._closed=!1}_write(d,f,s){let g=0,L=()=>{for(;this._waiters.length>0;){let b=this._waiters[0];if(this._buffer){let R=this._buffer.size-this._buffer.offset;if(!(R+d.length>=b.size)){if(!b.skip){let E=Buffer.alloc(R+d.length);this._buffer.buf.copy(E,0,this._buffer.offset,this._buffer.size),d.copy(E,R,0,d.length),this._buffer.buf=E}this._buffer.offset=0,this._buffer.size=R+d.length,s();break}if(b.skip)this._buffer=void 0,b.resolve();else{let E=Math.min(R,b.size),w=Buffer.alloc(b.size);this._buffer.buf.copy(w,0,this._buffer.offset,this._buffer.offset+E),d.copy(w,E,0,b.size-E),b.resolve(w)}if(this.offset+=b.size,this._waiters.shift(),this._buffer=void 0,R+d.length===b.size){s();break}g+=b.size-R}else{if(!(d.length-g>=b.size)){this._buffer={buf:b.skip?void 0:d.slice(g),offset:0,size:d.length-g},g=d.length,s();break}if(b.skip?b.resolve():b.resolve(d.slice(g,g+b.size)),this.offset+=b.size,this._waiters.shift(),g+=b.size,d.length===g){s();break}}}this._processTrigger=d.length-g>0?L:void 0};L()}_destroy(d,f){this._processTrigger=void 0;for(let s of this._waiters)s.reject(d||new Error("stream destroyed"));this._waiters=[],this._closed=!0}_final(d){this._processTrigger=void 0;for(let f of this._waiters)f.reject(new Error("not enough data in stream"));this._waiters=[],this._closed=!0}read(d){return new Promise((f,s)=>{this._closed&&s(new Error("stream is closed")),this._waiters.push({resolve:f,reject:s,size:d,skip:!1}),this._processTrigger&&this._processTrigger()})}skip(d){return new Promise((f,s)=>{this._closed&&s(new Error("stream is closed")),this._waiters.push({resolve:f,reject:s,size:d,skip:!0}),this._processTrigger&&this._processTrigger()})}}function i(){return new p}h.exports=Object.assign(i,{default:i}),a.default=i},311:h=>{function a(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function o(F,$){this.source=F,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=$,this.destLen=0,this.ltree=new a,this.dtree=new a}var m=new a,p=new a,i=new Uint8Array(30),e=new Uint16Array(30),d=new Uint8Array(30),f=new Uint16Array(30),s=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g=new a,L=new Uint8Array(320);function b(F,$,A,U){var N,z;for(N=0;N<A;++N)F[N]=0;for(N=0;N<30-A;++N)F[N+A]=N/A|0;for(z=U,N=0;N<30;++N)$[N]=z,z+=1<<F[N]}var R=new Uint16Array(16);function E(F,$,A,U){var N,z;for(N=0;N<16;++N)F.table[N]=0;for(N=0;N<U;++N)F.table[$[A+N]]++;for(F.table[0]=0,z=0,N=0;N<16;++N)R[N]=z,z+=F.table[N];for(N=0;N<U;++N)$[A+N]&&(F.trans[R[$[A+N]]++]=N)}function w(F){F.bitcount--||(F.tag=F.source[F.sourceIndex++],F.bitcount=7);var $=1&F.tag;return F.tag>>>=1,$}function k(F,$,A){if(!$)return A;for(;F.bitcount<24;)F.tag|=F.source[F.sourceIndex++]<<F.bitcount,F.bitcount+=8;var U=F.tag&65535>>>16-$;return F.tag>>>=$,F.bitcount-=$,U+A}function M(F,$){for(;F.bitcount<24;)F.tag|=F.source[F.sourceIndex++]<<F.bitcount,F.bitcount+=8;var A=0,U=0,N=0,z=F.tag;do U=2*U+(1&z),z>>>=1,++N,A+=$.table[N],U-=$.table[N];while(U>=0);return F.tag=z,F.bitcount-=N,$.trans[A+U]}function D(F,$,A){var U,N,z,K,Q,oe;for(U=k(F,5,257),N=k(F,5,1),z=k(F,4,4),K=0;K<19;++K)L[K]=0;for(K=0;K<z;++K){var ee=k(F,3,0);L[s[K]]=ee}for(E(g,L,0,19),Q=0;Q<U+N;){var ne=M(F,g);switch(ne){case 16:var G=L[Q-1];for(oe=k(F,2,3);oe;--oe)L[Q++]=G;break;case 17:for(oe=k(F,3,3);oe;--oe)L[Q++]=0;break;case 18:for(oe=k(F,7,11);oe;--oe)L[Q++]=0;break;default:L[Q++]=ne}}E($,L,0,U),E(A,L,U,N)}function P(F,$,A){for(;;){var U,N,z,K,Q=M(F,$);if(Q===256)return 0;if(Q<256)F.dest[F.destLen++]=Q;else for(U=k(F,i[Q-=257],e[Q]),N=M(F,A),K=z=F.destLen-k(F,d[N],f[N]);K<z+U;++K)F.dest[F.destLen++]=F.dest[K]}}function W(F){for(var $,A;F.bitcount>8;)F.sourceIndex--,F.bitcount-=8;if(($=256*($=F.source[F.sourceIndex+1])+F.source[F.sourceIndex])!==(65535&~(256*F.source[F.sourceIndex+3]+F.source[F.sourceIndex+2])))return-3;for(F.sourceIndex+=4,A=$;A;--A)F.dest[F.destLen++]=F.source[F.sourceIndex++];return F.bitcount=0,0}(function(F,$){var A;for(A=0;A<7;++A)F.table[A]=0;for(F.table[7]=24,F.table[8]=152,F.table[9]=112,A=0;A<24;++A)F.trans[A]=256+A;for(A=0;A<144;++A)F.trans[24+A]=A;for(A=0;A<8;++A)F.trans[168+A]=280+A;for(A=0;A<112;++A)F.trans[176+A]=144+A;for(A=0;A<5;++A)$.table[A]=0;for($.table[5]=32,A=0;A<32;++A)$.trans[A]=A})(m,p),b(i,e,4,3),b(d,f,2,1),i[28]=0,e[28]=258,h.exports=function(F,$){var A,U,N=new o(F,$);do{switch(A=w(N),k(N,2,0)){case 0:U=W(N);break;case 1:U=P(N,m,p);break;case 2:D(N,N.ltree,N.dtree),U=P(N,N.ltree,N.dtree);break;default:U=-3}if(U!==0)throw new Error("Data error")}while(!A);return N.destLen<N.dest.length?typeof N.dest.slice=="function"?N.dest.slice(0,N.destLen):N.dest.subarray(0,N.destLen):N.dest}},371:h=>{"use strict";h.exports=function(a){a.prototype[Symbol.iterator]=function*(){for(let o=this.head;o;o=o.next)yield o.value}}},411:(h,a,o)=>{"use strict";function m(f){var s=this;if(s instanceof m||(s=new m),s.tail=null,s.head=null,s.length=0,f&&typeof f.forEach=="function")f.forEach(function(b){s.push(b)});else if(arguments.length>0)for(var g=0,L=arguments.length;g<L;g++)s.push(arguments[g]);return s}function p(f,s,g){var L=s===f.head?new d(g,null,s,f):new d(g,s,s.next,f);return L.next===null&&(f.tail=L),L.prev===null&&(f.head=L),f.length++,L}function i(f,s){f.tail=new d(s,f.tail,null,f),f.head||(f.head=f.tail),f.length++}function e(f,s){f.head=new d(s,null,f.head,f),f.tail||(f.tail=f.head),f.length++}function d(f,s,g,L){if(!(this instanceof d))return new d(f,s,g,L);this.list=L,this.value=f,s?(s.next=this,this.prev=s):this.prev=null,g?(g.prev=this,this.next=g):this.next=null}h.exports=m,m.Node=d,m.create=m,m.prototype.removeNode=function(f){if(f.list!==this)throw new Error("removing node which does not belong to this list");var s=f.next,g=f.prev;return s&&(s.prev=g),g&&(g.next=s),f===this.head&&(this.head=s),f===this.tail&&(this.tail=g),f.list.length--,f.next=null,f.prev=null,f.list=null,s},m.prototype.unshiftNode=function(f){if(f!==this.head){f.list&&f.list.removeNode(f);var s=this.head;f.list=this,f.next=s,s&&(s.prev=f),this.head=f,this.tail||(this.tail=f),this.length++}},m.prototype.pushNode=function(f){if(f!==this.tail){f.list&&f.list.removeNode(f);var s=this.tail;f.list=this,f.prev=s,s&&(s.next=f),this.tail=f,this.head||(this.head=f),this.length++}},m.prototype.push=function(){for(var f=0,s=arguments.length;f<s;f++)i(this,arguments[f]);return this.length},m.prototype.unshift=function(){for(var f=0,s=arguments.length;f<s;f++)e(this,arguments[f]);return this.length},m.prototype.pop=function(){if(this.tail){var f=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,f}},m.prototype.shift=function(){if(this.head){var f=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,f}},m.prototype.forEach=function(f,s){s=s||this;for(var g=this.head,L=0;g!==null;L++)f.call(s,g.value,L,this),g=g.next},m.prototype.forEachReverse=function(f,s){s=s||this;for(var g=this.tail,L=this.length-1;g!==null;L--)f.call(s,g.value,L,this),g=g.prev},m.prototype.get=function(f){for(var s=0,g=this.head;g!==null&&s<f;s++)g=g.next;if(s===f&&g!==null)return g.value},m.prototype.getReverse=function(f){for(var s=0,g=this.tail;g!==null&&s<f;s++)g=g.prev;if(s===f&&g!==null)return g.value},m.prototype.map=function(f,s){s=s||this;for(var g=new m,L=this.head;L!==null;)g.push(f.call(s,L.value,this)),L=L.next;return g},m.prototype.mapReverse=function(f,s){s=s||this;for(var g=new m,L=this.tail;L!==null;)g.push(f.call(s,L.value,this)),L=L.prev;return g},m.prototype.reduce=function(f,s){var g,L=this.head;if(arguments.length>1)g=s;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");L=this.head.next,g=this.head.value}for(var b=0;L!==null;b++)g=f(g,L.value,b),L=L.next;return g},m.prototype.reduceReverse=function(f,s){var g,L=this.tail;if(arguments.length>1)g=s;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");L=this.tail.prev,g=this.tail.value}for(var b=this.length-1;L!==null;b--)g=f(g,L.value,b),L=L.prev;return g},m.prototype.toArray=function(){for(var f=new Array(this.length),s=0,g=this.head;g!==null;s++)f[s]=g.value,g=g.next;return f},m.prototype.toArrayReverse=function(){for(var f=new Array(this.length),s=0,g=this.tail;g!==null;s++)f[s]=g.value,g=g.prev;return f},m.prototype.slice=function(f,s){(s=s||this.length)<0&&(s+=this.length),(f=f||0)<0&&(f+=this.length);var g=new m;if(s<f||s<0)return g;f<0&&(f=0),s>this.length&&(s=this.length);for(var L=0,b=this.head;b!==null&&L<f;L++)b=b.next;for(;b!==null&&L<s;L++,b=b.next)g.push(b.value);return g},m.prototype.sliceReverse=function(f,s){(s=s||this.length)<0&&(s+=this.length),(f=f||0)<0&&(f+=this.length);var g=new m;if(s<f||s<0)return g;f<0&&(f=0),s>this.length&&(s=this.length);for(var L=this.length,b=this.tail;b!==null&&L>s;L--)b=b.prev;for(;b!==null&&L>f;L--,b=b.prev)g.push(b.value);return g},m.prototype.splice=function(f,s,...g){f>this.length&&(f=this.length-1),f<0&&(f=this.length+f);for(var L=0,b=this.head;b!==null&&L<f;L++)b=b.next;var R=[];for(L=0;b&&L<s;L++)R.push(b.value),b=this.removeNode(b);for(b===null&&(b=this.tail),b!==this.head&&b!==this.tail&&(b=b.prev),L=0;L<g.length;L++)b=p(this,b,g[L]);return R},m.prototype.reverse=function(){for(var f=this.head,s=this.tail,g=f;g!==null;g=g.prev){var L=g.prev;g.prev=g.next,g.next=L}return this.head=s,this.tail=f,this};try{o(371)(m)}catch(f){}},109:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let m=o(98),p=o(104),i;a.default=async function(d,f){var s,g;if(!i){if(typeof navigator!="undefined"&&"fonts"in navigator){try{let R=await((g=(s=navigator.permissions).request)===null||g===void 0?void 0:g.call(s,{name:"local-fonts"}));if(R&&R.state!=="granted")throw new Error("Permission to access local fonts not granted.")}catch(R){if(R.name!=="TypeError")throw R}let b={};try{let R=await navigator.fonts.query();for(let E of R)b.hasOwnProperty(E.family)||(b[E.family]=[]),b[E.family].push(E);i=Promise.resolve(b)}catch(R){console.error(R.name,R.message)}}else if(typeof process!="object"&&"queryLocalFonts"in window){let b={};try{let R=await window.queryLocalFonts();for(let E of R)b.hasOwnProperty(E.family)||(b[E.family]=[]),b[E.family].push(E);i=Promise.resolve(b)}catch(R){console.error(R.name,R.message)}}i||(i=Promise.resolve({}))}let L=await i;for(let b of(0,p.default)(d)){if(e.includes(b))return;if(L.hasOwnProperty(b)&&L[b].length>0){let R=L[b][0];if("blob"in R){let E=await R.blob(),w=await E.arrayBuffer();return(0,m.loadBuffer)(w,{cacheSize:f})}return}}};let e=["serif","sans-serif","cursive","fantasy","monospace","system-ui","emoji","math","fangsong"]},833:(h,a,o)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.enableLigatures=void 0;let m=o(109);a.enableLigatures=function(p,i=[]){let e,d,f,s=0;return p.registerCharacterJoiner(g=>{let L=p.options.fontFamily;if(L&&(s===0||e!==L)){d=void 0,s=1,e=L;let b=e;(0,m.default)(b,1e5).then(R=>{b===p.options.fontFamily&&(s=2,d=R,R&&p.refresh(0,p.rows-1))}).catch(R=>{b===p.options.fontFamily&&(s=3,p.options.logLevel==="debug"&&console.debug(f,new Error("Failure while loading font")),d=void 0,f=R)})}return d&&s===2?d.findLigatureRanges(g).map(b=>[b[0],b[1]]):function(b,R){let E=[];for(let w=0;w<b.length;w++)for(let k=0;k<R.length;k++)if(b.startsWith(R[k],w)){E.push([w,w+R[k].length]),w+=R[k].length-1;break}return E}(g,i)})}},104:(h,a)=>{"use strict";function o(e,d){let f="",s=!1;for(;e.offset<e.input.length;){let g=e.input[e.offset++];if(s)/[\dA-Fa-f]/.test(g)?(e.offset--,f+=p(e)):g!==`
`&&(f+=g),s=!1;else switch(g){case d:return f;case"\\":s=!0;break;default:f+=g}}throw new Error("Unterminated string")}function m(e){let d="",f=!1;for(;e.offset<e.input.length;){let s=e.input[e.offset++];if(f)/[\dA-Fa-f]/.test(s)?(e.offset--,d+=p(e)):d+=s,f=!1;else switch(s){case"\\":f=!0;break;case",":return d;default:/\s/.test(s)?d.endsWith(" ")||(d+=" "):d+=s}}return d}function p(e){let d="";for(;e.offset<e.input.length;){let f=e.input[e.offset++];if(/\s/.test(f))return i(d);if(d.length>=6||!/[\dA-Fa-f]/.test(f))return e.offset--,i(d);d+=f}return i(d)}function i(e){return String.fromCodePoint(parseInt(e,16))}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){if(typeof e!="string")throw new Error("Font family must be a string");let d={input:e,offset:0},f=[],s="";for(;d.offset<d.input.length;){let g=d.input[d.offset++];switch(g){case"'":case'"':s+=o(d,g);break;case",":f.push(s),s="";break;default:/\s/.test(g)||(d.offset--,s+=m(d),f.push(s),s="")}}return f}},89:h=>{"use strict";h.exports=c},56:h=>{"use strict";h.exports=_},978:h=>{"use strict";h.exports=x},269:h=>{"use strict";h.exports=v},82:()=>{},456:()=>{}},t={};function n(h){var a=t[h];if(a!==void 0)return a.exports;var o=t[h]={exports:{}};return y[h].call(o.exports,o,o.exports,n),o.exports}n.n=h=>{var a=h&&h.__esModule?()=>h.default:()=>h;return n.d(a,{a}),a},n.d=(h,a)=>{for(var o in a)n.o(a,o)&&!n.o(h,o)&&Object.defineProperty(h,o,{enumerable:!0,get:a[o]})},n.o=(h,a)=>Object.prototype.hasOwnProperty.call(h,a),n.r=h=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})};var u={};return(()=>{"use strict";var h=u;Object.defineProperty(h,"__esModule",{value:!0}),h.LigaturesAddon=void 0;let a=n(833);h.LigaturesAddon=class{constructor(o){this._fallbackLigatures=((o==null?void 0:o.fallbackLigatures)||["<--","<---","<<-","<-","->","->>","-->","--->","<==","<===","<<=","<=","=>","=>>","==>","===>",">=",">>=","<->","<-->","<--->","<---->","<=>","<==>","<===>","<====>","-------->","<~~","<~","~>","~~>","::",":::","==","!=","===","!==",":=",":-",":+","<*","<*>","*>","<|","<|>","|>","+:","-:","=:",":>","++","+++","<!--","<!---","<***>"]).sort((m,p)=>p.length-m.length)}activate(o){this._terminal=o,this._characterJoinerId=(0,a.enableLigatures)(o,this._fallbackLigatures)}dispose(){var o;this._characterJoinerId!==void 0&&((o=this._terminal)===null||o===void 0||o.deregisterCharacterJoiner(this._characterJoinerId),this._characterJoinerId=void 0)}}})(),u})()})});var Ch=ze((en,Jo)=>{(function(c,_){typeof en=="object"&&typeof Jo=="object"?Jo.exports=_():typeof define=="function"&&define.amd?define([],_):typeof en=="object"?en.SearchAddon=_():c.SearchAddon=_()})(self,function(){return(()=>{"use strict";var c={345:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===n)return void this._listeners.splice(u,1)}}})),this._event}fire(n,u){let h=[];for(let a=0;a<this._listeners.length;a++)h.push(this._listeners[a]);for(let a=0;a<h.length;a++)h[a].call(void 0,n,u)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},t.forwardEvent=function(n,u){return n(h=>u.fire(h))}},859:(y,t)=>{function n(u){for(let h of u)h.dispose();u.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){let h=this._disposables.indexOf(u);h!==-1&&this._disposables.splice(h,1)}},t.toDisposable=function(u){return{dispose:u}},t.disposeArray=n,t.getDisposeArrayDisposable=function(u){return{dispose:()=>n(u)}}}},_={};function v(y){var t=_[y];if(t!==void 0)return t.exports;var n=_[y]={exports:{}};return c[y](n,n.exports,v),n.exports}var x={};return(()=>{var y=x;Object.defineProperty(y,"__esModule",{value:!0}),y.SearchAddon=void 0;let t=v(345),n=v(859),u=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class h extends n.Disposable{constructor(){super(...arguments),this._linesCacheTimeoutId=0,this._onDidChangeResults=this.register(new t.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event}activate(o){this._terminal=o,this._onDataDisposable=this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this._onResizeDisposable=this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,n.toDisposable)(()=>{var m,p;this.clearDecorations(),(m=this._onDataDisposable)===null||m===void 0||m.dispose(),(p=this._onResizeDisposable)===null||p===void 0||p.dispose()}))}_updateMatches(){var o;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&(!((o=this._lastSearchOptions)===null||o===void 0)&&o.decorations)&&(this._highlightTimeout=setTimeout(()=>{var m,p;this.findPrevious(this._cachedSearchTerm,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0})),this._resultIndex=this._searchResults?this._searchResults.size-1:-1,this._onDidChangeResults.fire({resultIndex:this._resultIndex,resultCount:(p=(m=this._searchResults)===null||m===void 0?void 0:m.size)!==null&&p!==void 0?p:-1})},200))}clearDecorations(o){var m,p,i,e;(m=this._selectedDecoration)===null||m===void 0||m.dispose(),(p=this._searchResults)===null||p===void 0||p.clear(),(i=this._resultDecorations)===null||i===void 0||i.forEach(d=>{for(let f of d)f.dispose()}),(e=this._resultDecorations)===null||e===void 0||e.clear(),this._searchResults=void 0,this._resultDecorations=void 0,o||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){var o;(o=this._selectedDecoration)===null||o===void 0||o.dispose(),this._selectedDecoration=void 0}findNext(o,m){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._lastSearchOptions=m,m!=null&&m.decorations&&(this._resultIndex===void 0&&this._cachedSearchTerm!==void 0&&o===this._cachedSearchTerm||this._highlightAllMatches(o,m)),this._fireResults(o,this._findNextAndSelect(o,m),m)}_highlightAllMatches(o,m){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!o||o.length===0)return void this.clearDecorations();m=m||{},this.clearDecorations(!0),this._searchResults=new Map,this._resultDecorations=new Map;let p=this._resultDecorations,i=this._find(o,0,0,m);for(;i&&!this._searchResults.get(`${i.row}-${i.col}`);)if(this._searchResults.set(`${i.row}-${i.col}`,i),i=this._find(o,i.col+i.term.length>=this._terminal.cols?i.row+1:i.row,i.col+i.term.length>=this._terminal.cols?0:i.col+1,m),this._searchResults.size>1e3)return this.clearDecorations(),void(this._resultIndex=void 0);this._searchResults.forEach(e=>{let d=this._createResultDecoration(e,m.decorations);if(d){let f=p.get(d.marker.line)||[];f.push(d),p.set(d.marker.line,f)}})}_find(o,m,p,i){var e;if(!this._terminal||!o||o.length===0)return(e=this._terminal)===null||e===void 0||e.clearSelection(),void this.clearDecorations();if(p>this._terminal.cols)throw new Error(`Invalid col: ${p} to search in terminal of ${this._terminal.cols} cols`);let d;this._initLinesCache();let f={startRow:m,startCol:p};if(d=this._findInLine(o,f,i),!d)for(let s=m+1;s<this._terminal.buffer.active.baseY+this._terminal.rows&&(f.startRow=s,f.startCol=0,d=this._findInLine(o,f,i),!d);s++);return d}_findNextAndSelect(o,m){var p;if(!this._terminal||!o||o.length===0)return(p=this._terminal)===null||p===void 0||p.clearSelection(),this.clearDecorations(),this._cachedSearchTerm=void 0,this._resultIndex=-1,!1;this._cachedSearchTerm!==o&&(this._resultIndex=void 0,this._terminal.clearSelection());let i,e=0,d=0;if(this._terminal.hasSelection()){let g=!!m&&m.incremental;i=this._terminal.getSelectionPosition(),d=g?i.start.y:i.end.y,e=g?i.start.x:i.end.x}this._initLinesCache();let f={startRow:d,startCol:e},s=this._findInLine(o,f,m);if(!s)for(let g=d+1;g<this._terminal.buffer.active.baseY+this._terminal.rows&&(f.startRow=g,f.startCol=0,s=this._findInLine(o,f,m),!s);g++);if(!s&&d!==0)for(let g=0;g<d&&(f.startRow=g,f.startCol=0,s=this._findInLine(o,f,m),!s);g++);return!s&&i&&(f.startRow=i.start.y,f.startCol=0,s=this._findInLine(o,f,m)),this._searchResults&&(this._searchResults.size===0?this._resultIndex=-1:this._resultIndex===void 0?this._resultIndex=0:(this._resultIndex++,this._resultIndex>=this._searchResults.size&&(this._resultIndex=0))),this._selectResult(s,m==null?void 0:m.decorations,m==null?void 0:m.noScroll)}findPrevious(o,m){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._lastSearchOptions=m,m!=null&&m.decorations&&(this._resultIndex===void 0&&this._cachedSearchTerm!==void 0&&o===this._cachedSearchTerm||this._highlightAllMatches(o,m)),this._fireResults(o,this._findPreviousAndSelect(o,m),m)}_fireResults(o,m,p){var i;return p!=null&&p.decorations&&(this._resultIndex!==void 0&&((i=this._searchResults)===null||i===void 0?void 0:i.size)!==void 0?this._onDidChangeResults.fire({resultIndex:this._resultIndex,resultCount:this._searchResults.size}):this._onDidChangeResults.fire(void 0)),this._cachedSearchTerm=o,m}_findPreviousAndSelect(o,m){var p;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let i;if(!this._terminal||!o||o.length===0)return i=void 0,(p=this._terminal)===null||p===void 0||p.clearSelection(),this.clearDecorations(),this._resultIndex=-1,!1;this._cachedSearchTerm!==o&&(this._resultIndex=void 0,this._terminal.clearSelection());let e=this._terminal.buffer.active.baseY+this._terminal.rows,d=this._terminal.cols,f=!0,s=!!m&&m.incremental,g;this._terminal.hasSelection()&&(g=this._terminal.getSelectionPosition(),e=g.start.y,d=g.start.x),this._initLinesCache();let L={startRow:e,startCol:d};if(s?(i=this._findInLine(o,L,m,!1),i&&i.row===e&&i.col===d||(g&&(L.startRow=g.end.y,L.startCol=g.end.x),i=this._findInLine(o,L,m,!0))):i=this._findInLine(o,L,m,f),!i){L.startCol=Math.max(L.startCol,this._terminal.cols);for(let b=e-1;b>=0&&(L.startRow=b,i=this._findInLine(o,L,m,f),!i);b--);}if(!i&&e!==this._terminal.buffer.active.baseY+this._terminal.rows)for(let b=this._terminal.buffer.active.baseY+this._terminal.rows;b>=e&&(L.startRow=b,i=this._findInLine(o,L,m,f),!i);b--);return this._searchResults&&(this._searchResults.size===0?this._resultIndex=-1:this._resultIndex===void 0||this._resultIndex<0?this._resultIndex=this._searchResults.size-1:(this._resultIndex--,this._resultIndex===-1&&(this._resultIndex=this._searchResults.size-1))),!(i||!g)||this._selectResult(i,m==null?void 0:m.decorations,m==null?void 0:m.noScroll)}_initLinesCache(){let o=this._terminal;this._linesCache||(this._linesCache=new Array(o.buffer.active.length),this._cursorMoveListener=o.onCursorMove(()=>this._destroyLinesCache()),this._resizeListener=o.onResize(()=>this._destroyLinesCache())),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(o,m,p){return(o===0||u.includes(m[o-1]))&&(o+p.length===m.length||u.includes(m[o+p.length]))}_findInLine(o,m,p={},i=!1){var e;let d=this._terminal,f=m.startRow,s=m.startCol,g=d.buffer.active.getLine(f);if(g!=null&&g.isWrapped)return i?void(m.startCol+=d.cols):(m.startRow--,m.startCol+=d.cols,this._findInLine(o,m,p));let L=(e=this._linesCache)===null||e===void 0?void 0:e[f];L||(L=this._translateBufferLineToStringWithWrap(f,!0),this._linesCache&&(this._linesCache[f]=L));let[b,R]=L,E=this._bufferColsToStringOffset(f,s),w=p.caseSensitive?o:o.toLowerCase(),k=p.caseSensitive?b:b.toLowerCase(),M=-1;if(p.regex){let D=RegExp(w,"g"),P;if(i)for(;P=D.exec(k.slice(0,E));)M=D.lastIndex-P[0].length,o=P[0],D.lastIndex-=o.length-1;else P=D.exec(k.slice(E)),P&&P[0].length>0&&(M=E+(D.lastIndex-P[0].length),o=P[0])}else i?E-w.length>=0&&(M=k.lastIndexOf(w,E-w.length)):M=k.indexOf(w,E);if(M>=0){if(p.wholeWord&&!this._isWholeWord(M,k,o))return;let D=0;for(;D<R.length-1&&M>=R[D+1];)D++;let P=D;for(;P<R.length-1&&M+o.length>=R[P+1];)P++;let W=M-R[D],F=M+o.length-R[P],$=this._stringLengthToBufferSize(f+D,W);return{term:o,col:$,row:f+D,size:this._stringLengthToBufferSize(f+P,F)-$+d.cols*(P-D)}}}_stringLengthToBufferSize(o,m){let p=this._terminal.buffer.active.getLine(o);if(!p)return 0;for(let i=0;i<m;i++){let e=p.getCell(i);if(!e)break;let d=e.getChars();d.length>1&&(m-=d.length-1);let f=p.getCell(i+1);f&&f.getWidth()===0&&m++}return m}_bufferColsToStringOffset(o,m){let p=this._terminal,i=o,e=0,d=p.buffer.active.getLine(i);for(;m>0&&d;){for(let f=0;f<m&&f<p.cols;f++){let s=d.getCell(f);if(!s)break;s.getWidth()&&(e+=s.getCode()===0?1:s.getChars().length)}if(i++,d=p.buffer.active.getLine(i),d&&!d.isWrapped)break;m-=p.cols}return e}_translateBufferLineToStringWithWrap(o,m){var p;let i=this._terminal,e=[],d=[0],f=i.buffer.active.getLine(o);for(;f;){let s=i.buffer.active.getLine(o+1),g=!!s&&s.isWrapped,L=f.translateToString(!g&&m);if(g&&s){let b=f.getCell(f.length-1);b&&b.getCode()===0&&b.getWidth()===1&&((p=s.getCell(0))===null||p===void 0?void 0:p.getWidth())===2&&(L=L.slice(0,-1))}if(e.push(L),!g)break;d.push(d[d.length-1]+L.length),o++,f=s}return[e.join(""),d]}_selectResult(o,m,p){var i,e;let d=this._terminal;if(this.clearActiveDecoration(),!o)return d.clearSelection(),!1;if(d.select(o.col,o.row,o.size),m){let f=d.registerMarker(-d.buffer.active.baseY-d.buffer.active.cursorY+o.row);f&&(this._selectedDecoration=d.registerDecoration({marker:f,x:o.col,width:o.size,backgroundColor:m.activeMatchBackground,layer:"top",overviewRulerOptions:{color:m.activeMatchColorOverviewRuler}}),(i=this._selectedDecoration)===null||i===void 0||i.onRender(s=>this._applyStyles(s,m.activeMatchBorder,!0)),(e=this._selectedDecoration)===null||e===void 0||e.onDispose(()=>f.dispose()))}if(!p&&(o.row>=d.buffer.active.viewportY+d.rows||o.row<d.buffer.active.viewportY)){let f=o.row-d.buffer.active.viewportY;f-=Math.floor(d.rows/2),d.scrollLines(f)}return!0}_applyStyles(o,m,p){o.clientWidth<=0||(o.classList.contains("xterm-find-result-decoration")||(o.classList.add("xterm-find-result-decoration"),m&&(o.style.outline=`1px solid ${m}`)),p&&o.classList.add("xterm-find-active-result-decoration"))}_createResultDecoration(o,m){var p;let i=this._terminal,e=i.registerMarker(-i.buffer.active.baseY-i.buffer.active.cursorY+o.row);if(!e)return;let d=i.registerDecoration({marker:e,x:o.col,width:o.size,backgroundColor:m.matchBackground,overviewRulerOptions:!((p=this._resultDecorations)===null||p===void 0)&&p.get(e.line)?void 0:{color:m.matchOverviewRuler,position:"center"}});return d==null||d.onRender(f=>this._applyStyles(f,m.matchBorder,!1)),d==null||d.onDispose(()=>e.dispose()),d}}y.SearchAddon=h})(),x})()})});var xh=ze((os,Zo)=>{(function(c,_){typeof os=="object"&&typeof Zo=="object"?Zo.exports=_():typeof define=="function"&&define.amd?define([],_):typeof os=="object"?os.Unicode11Addon=_():c.Unicode11Addon=_()})(os,function(){return(()=>{"use strict";var c={433:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV11=void 0;let n=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],u=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],h=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],a=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]],o;function m(p,i){let e,d=0,f=i.length-1;if(p<i[0][0]||p>i[f][1])return!1;for(;f>=d;)if(e=d+f>>1,p>i[e][1])d=e+1;else{if(!(p<i[e][0]))return!0;f=e-1}return!1}t.UnicodeV11=class{constructor(){if(this.version="11",!o){o=new Uint8Array(65536),o.fill(1),o[0]=0,o.fill(0,1,32),o.fill(0,127,160);for(let p=0;p<n.length;++p)o.fill(0,n[p][0],n[p][1]+1);for(let p=0;p<h.length;++p)o.fill(2,h[p][0],h[p][1]+1)}}wcwidth(p){return p<32?0:p<127?1:p<65536?o[p]:m(p,u)?0:m(p,a)?2:1}}}},_={};function v(y){var t=_[y];if(t!==void 0)return t.exports;var n=_[y]={exports:{}};return c[y](n,n.exports,v),n.exports}var x={};return(()=>{var y=x;Object.defineProperty(y,"__esModule",{value:!0}),y.Unicode11Addon=void 0;let t=v(433);y.Unicode11Addon=class{activate(n){n.unicode.register(new t.UnicodeV11)}dispose(){}}})(),x})()})});var Lh=ze((tn,Qo)=>{(function(c,_){typeof tn=="object"&&typeof Qo=="object"?Qo.exports=_():typeof define=="function"&&define.amd?define([],_):typeof tn=="object"?tn.WebLinksAddon=_():c.WebLinksAddon=_()})(self,function(){return(()=>{"use strict";var c={6:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkComputer=t.WebLinkProvider=void 0,t.WebLinkProvider=class{constructor(u,h,a,o={}){this._terminal=u,this._regex=h,this._handler=a,this._options=o}provideLinks(u,h){let a=n.computeLink(u,this._regex,this._terminal,this._handler);h(this._addCallbacks(a))}_addCallbacks(u){return u.map(h=>(h.leave=this._options.leave,h.hover=(a,o)=>{if(this._options.hover){let{range:m}=h;this._options.hover(a,o,m)}},h))}};class n{static computeLink(h,a,o,m){let p=new RegExp(a.source,(a.flags||"")+"g"),[i,e]=n._getWindowedLineStrings(h-1,o),d=i.join(""),f,s=[];for(;f=p.exec(d);){let g=f[0];try{let k=new URL(g),M=decodeURI(k.toString());if(g!==M&&g+"/"!==M)continue}catch(k){continue}let[L,b]=n._mapStrIdx(o,e,0,f.index),[R,E]=n._mapStrIdx(o,L,b,g.length);if(L===-1||b===-1||R===-1||E===-1)continue;let w={start:{x:b+1,y:L+1},end:{x:E,y:R+1}};s.push({range:w,text:g,activate:m})}return s}static _getWindowedLineStrings(h,a){let o,m=h,p=h,i=0,e="",d=[];if(o=a.buffer.active.getLine(h)){let f=o.translateToString(!0);if(o.isWrapped&&f[0]!==" "){for(i=0;(o=a.buffer.active.getLine(--m))&&i<2048&&(e=o.translateToString(!0),i+=e.length,d.push(e),o.isWrapped&&e.indexOf(" ")===-1););d.reverse()}for(d.push(f),i=0;(o=a.buffer.active.getLine(++p))&&o.isWrapped&&i<2048&&(e=o.translateToString(!0),i+=e.length,d.push(e),e.indexOf(" ")===-1););}return[d,m]}static _mapStrIdx(h,a,o,m){let p=h.buffer.active,i=p.getNullCell(),e=o;for(;m;){let d=p.getLine(a);if(!d)return[-1,-1];for(let f=e;f<d.length;++f){d.getCell(f,i);let s=i.getChars();if(i.getWidth()&&(m-=s.length||1,f===d.length-1&&s==="")){let g=p.getLine(a+1);g&&g.isWrapped&&(g.getCell(0,i),i.getWidth()===2&&(m+=1))}if(m<0)return[a,f]}a++,e=0}return[a,e]}}t.LinkComputer=n}},_={};function v(y){var t=_[y];if(t!==void 0)return t.exports;var n=_[y]={exports:{}};return c[y](n,n.exports,v),n.exports}var x={};return(()=>{var y=x;Object.defineProperty(y,"__esModule",{value:!0}),y.WebLinksAddon=void 0;let t=v(6),n=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function u(h,a){let o=window.open();if(o){try{o.opener=null}catch(m){}o.location.href=a}else console.warn("Opening link blocked as opener could not be cleared")}y.WebLinksAddon=class{constructor(h=u,a={}){this._handler=h,this._options=a}activate(h){this._terminal=h;let a=this._options,o=a.urlRegex||n;this._linkProvider=this._terminal.registerLinkProvider(new t.WebLinkProvider(this._terminal,o,this._handler,a))}dispose(){var h;(h=this._linkProvider)===null||h===void 0||h.dispose()}}})(),x})()})});var Eh=ze((rn,ea)=>{(function(c,_){typeof rn=="object"&&typeof ea=="object"?ea.exports=_():typeof define=="function"&&define.amd?define([],_):typeof rn=="object"?rn.WebglAddon=_():c.WebglAddon=_()})(self,function(){return(()=>{"use strict";var c={965:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlyphRenderer=void 0;let u=n(381),h=n(855),a=n(859),o=n(374),m=n(509),p=11,i=p*Float32Array.BYTES_PER_ELEMENT,e,d=0,f=0,s=0;class g extends a.Disposable{constructor(b,R,E){super(),this._terminal=b,this._gl=R,this._dimensions=E,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let w=this._gl;m.TextureAtlas.maxAtlasPages===void 0&&(m.TextureAtlas.maxAtlasPages=Math.min(32,(0,o.throwIfFalsy)(w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS))),m.TextureAtlas.maxTextureSize=(0,o.throwIfFalsy)(w.getParameter(w.MAX_TEXTURE_SIZE))),this._program=(0,o.throwIfFalsy)((0,u.createProgram)(w,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(F){let $="";for(let A=1;A<F;A++)$+=` else if (v_texpage == ${A}) { outColor = texture(u_texture[${A}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${F}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${$}
}`}(m.TextureAtlas.maxAtlasPages))),this.register((0,a.toDisposable)(()=>w.deleteProgram(this._program))),this._projectionLocation=(0,o.throwIfFalsy)(w.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,o.throwIfFalsy)(w.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,o.throwIfFalsy)(w.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=w.createVertexArray(),w.bindVertexArray(this._vertexArrayObject);let k=new Float32Array([0,0,1,0,0,1,1,1]),M=w.createBuffer();this.register((0,a.toDisposable)(()=>w.deleteBuffer(M))),w.bindBuffer(w.ARRAY_BUFFER,M),w.bufferData(w.ARRAY_BUFFER,k,w.STATIC_DRAW),w.enableVertexAttribArray(0),w.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let D=new Uint8Array([0,1,2,3]),P=w.createBuffer();this.register((0,a.toDisposable)(()=>w.deleteBuffer(P))),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,P),w.bufferData(w.ELEMENT_ARRAY_BUFFER,D,w.STATIC_DRAW),this._attributesBuffer=(0,o.throwIfFalsy)(w.createBuffer()),this.register((0,a.toDisposable)(()=>w.deleteBuffer(this._attributesBuffer))),w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.enableVertexAttribArray(2),w.vertexAttribPointer(2,2,w.FLOAT,!1,i,0),w.vertexAttribDivisor(2,1),w.enableVertexAttribArray(3),w.vertexAttribPointer(3,2,w.FLOAT,!1,i,2*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(3,1),w.enableVertexAttribArray(4),w.vertexAttribPointer(4,1,w.FLOAT,!1,i,4*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(4,1),w.enableVertexAttribArray(5),w.vertexAttribPointer(5,2,w.FLOAT,!1,i,5*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(5,1),w.enableVertexAttribArray(6),w.vertexAttribPointer(6,2,w.FLOAT,!1,i,7*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(6,1),w.enableVertexAttribArray(1),w.vertexAttribPointer(1,2,w.FLOAT,!1,i,9*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(1,1),w.useProgram(this._program);let W=new Int32Array(m.TextureAtlas.maxAtlasPages);for(let F=0;F<m.TextureAtlas.maxAtlasPages;F++)W[F]=F;w.uniform1iv(this._textureLocation,W),w.uniformMatrix4fv(this._projectionLocation,!1,u.PROJECTION_MATRIX),this._atlasTextures=[];for(let F=0;F<m.TextureAtlas.maxAtlasPages;F++){let $=new u.GLTexture((0,o.throwIfFalsy)(w.createTexture()));this.register((0,a.toDisposable)(()=>w.deleteTexture($.texture))),w.activeTexture(w.TEXTURE0+F),w.bindTexture(w.TEXTURE_2D,$.texture),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,1,1,0,w.RGBA,w.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[F]=$}w.enable(w.BLEND),w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(b,R,E,w,k,M,D,P){this._updateCell(this._vertices.attributes,b,R,E,w,k,M,D,P)}_updateCell(b,R,E,w,k,M,D,P,W){d=(E*this._terminal.cols+R)*p,w!==h.NULL_CELL_CODE&&w!==void 0?this._atlas&&(e=P&&P.length>1?this._atlas.getRasterizedGlyphCombinedChar(P,k,M,D):this._atlas.getRasterizedGlyph(w,k,M,D),f=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),k!==W&&e.offset.x>f?(s=e.offset.x-f,b[d]=-(e.offset.x-s)+this._dimensions.device.char.left,b[d+1]=-e.offset.y+this._dimensions.device.char.top,b[d+2]=(e.size.x-s)/this._dimensions.device.canvas.width,b[d+3]=e.size.y/this._dimensions.device.canvas.height,b[d+4]=e.texturePage,b[d+5]=e.texturePositionClipSpace.x+s/this._atlas.pages[e.texturePage].canvas.width,b[d+6]=e.texturePositionClipSpace.y,b[d+7]=e.sizeClipSpace.x-s/this._atlas.pages[e.texturePage].canvas.width,b[d+8]=e.sizeClipSpace.y):(b[d]=-e.offset.x+this._dimensions.device.char.left,b[d+1]=-e.offset.y+this._dimensions.device.char.top,b[d+2]=e.size.x/this._dimensions.device.canvas.width,b[d+3]=e.size.y/this._dimensions.device.canvas.height,b[d+4]=e.texturePage,b[d+5]=e.texturePositionClipSpace.x,b[d+6]=e.texturePositionClipSpace.y,b[d+7]=e.sizeClipSpace.x,b[d+8]=e.sizeClipSpace.y)):b.fill(0,d,d+p-1-2)}clear(){let b=this._terminal,R=b.cols*b.rows*p;this._vertices.count!==R?this._vertices.attributes=new Float32Array(R):this._vertices.attributes.fill(0);let E=0;for(;E<this._vertices.attributesBuffers.length;E++)this._vertices.count!==R?this._vertices.attributesBuffers[E]=new Float32Array(R):this._vertices.attributesBuffers[E].fill(0);this._vertices.count=R,E=0;for(let w=0;w<b.rows;w++)for(let k=0;k<b.cols;k++)this._vertices.attributes[E+9]=k/b.cols,this._vertices.attributes[E+10]=w/b.rows,E+=p}handleResize(){let b=this._gl;b.viewport(0,0,b.canvas.width,b.canvas.height),b.uniform2f(this._resolutionLocation,b.canvas.width,b.canvas.height),this.clear()}render(b){if(!this._atlas)return;let R=this._gl;R.useProgram(this._program),R.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let E=this._vertices.attributesBuffers[this._activeBuffer],w=0;for(let k=0;k<b.lineLengths.length;k++){let M=k*this._terminal.cols*p,D=this._vertices.attributes.subarray(M,M+b.lineLengths[k]*p);E.set(D,w),w+=D.length}R.bindBuffer(R.ARRAY_BUFFER,this._attributesBuffer),R.bufferData(R.ARRAY_BUFFER,E.subarray(0,w),R.STREAM_DRAW);for(let k=0;k<this._atlas.pages.length;k++)this._atlas.pages[k].version!==this._atlasTextures[k].version&&this._bindAtlasPageTexture(R,this._atlas,k);R.drawElementsInstanced(R.TRIANGLE_STRIP,4,R.UNSIGNED_BYTE,0,w/p)}setAtlas(b){this._atlas=b;for(let R of this._atlasTextures)R.version=-1}_bindAtlasPageTexture(b,R,E){b.activeTexture(b.TEXTURE0+E),b.bindTexture(b.TEXTURE_2D,this._atlasTextures[E].texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,R.pages[E].canvas),b.generateMipmap(b.TEXTURE_2D),this._atlasTextures[E].version=R.pages[E].version}setDimensions(b){this._dimensions=b}}t.GlyphRenderer=g},742:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RectangleRenderer=void 0;let u=n(381),h=n(310),a=n(859),o=n(237),m=n(374),p=8*Float32Array.BYTES_PER_ELEMENT,i=0,e=!1,d=0,f=0,s=0,g=0,L=0,b=0;class R extends a.Disposable{constructor(w,k,M,D){super(),this._terminal=w,this._gl=k,this._dimensions=M,this._themeService=D,this._vertices={count:0,attributes:new Float32Array(160)};let P=this._gl;this._program=(0,m.throwIfFalsy)((0,u.createProgram)(P,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,a.toDisposable)(()=>P.deleteProgram(this._program))),this._projectionLocation=(0,m.throwIfFalsy)(P.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=P.createVertexArray(),P.bindVertexArray(this._vertexArrayObject);let W=new Float32Array([0,0,1,0,0,1,1,1]),F=P.createBuffer();this.register((0,a.toDisposable)(()=>P.deleteBuffer(F))),P.bindBuffer(P.ARRAY_BUFFER,F),P.bufferData(P.ARRAY_BUFFER,W,P.STATIC_DRAW),P.enableVertexAttribArray(3),P.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let $=new Uint8Array([0,1,2,3]),A=P.createBuffer();this.register((0,a.toDisposable)(()=>P.deleteBuffer(A))),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,A),P.bufferData(P.ELEMENT_ARRAY_BUFFER,$,P.STATIC_DRAW),this._attributesBuffer=(0,m.throwIfFalsy)(P.createBuffer()),this.register((0,a.toDisposable)(()=>P.deleteBuffer(this._attributesBuffer))),P.bindBuffer(P.ARRAY_BUFFER,this._attributesBuffer),P.enableVertexAttribArray(0),P.vertexAttribPointer(0,2,P.FLOAT,!1,p,0),P.vertexAttribDivisor(0,1),P.enableVertexAttribArray(1),P.vertexAttribPointer(1,2,P.FLOAT,!1,p,2*Float32Array.BYTES_PER_ELEMENT),P.vertexAttribDivisor(1,1),P.enableVertexAttribArray(2),P.vertexAttribPointer(2,4,P.FLOAT,!1,p,4*Float32Array.BYTES_PER_ELEMENT),P.vertexAttribDivisor(2,1),this._updateCachedColors(D.colors),this.register(this._themeService.onChangeColors(U=>{this._updateCachedColors(U),this._updateViewportRectangle()}))}render(){let w=this._gl;w.useProgram(this._program),w.bindVertexArray(this._vertexArrayObject),w.uniformMatrix4fv(this._projectionLocation,!1,u.PROJECTION_MATRIX),w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.bufferData(w.ARRAY_BUFFER,this._vertices.attributes,w.DYNAMIC_DRAW),w.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,w.UNSIGNED_BYTE,0,this._vertices.count)}handleResize(){this._updateViewportRectangle()}setDimensions(w){this._dimensions=w}_updateCachedColors(w){this._bgFloat=this._colorToFloat32Array(w.background)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(w){let k=this._terminal,M=this._vertices,D,P,W,F,$,A,U,N,z,K,Q,oe=1;for(D=0;D<k.rows;D++){for(W=-1,F=0,$=0,A=!1,P=0;P<k.cols;P++)U=(D*k.cols+P)*h.RENDER_MODEL_INDICIES_PER_CELL,N=w.cells[U+h.RENDER_MODEL_BG_OFFSET],z=w.cells[U+h.RENDER_MODEL_FG_OFFSET],K=!!(67108864&z),(N!==F||z!==$&&(A||K))&&((F!==0||A&&$!==0)&&(Q=8*oe++,this._updateRectangle(M,Q,$,F,W,P,D)),W=P,F=N,$=z,A=K);(F!==0||A&&$!==0)&&(Q=8*oe++,this._updateRectangle(M,Q,$,F,W,k.cols,D))}M.count=oe}_updateRectangle(w,k,M,D,P,W,F){if(e=!1,67108864&M)switch(50331648&M){case 16777216:case 33554432:i=this._themeService.colors.ansi[255&M].rgba;break;case 50331648:i=(16777215&M)<<8;break;default:i=this._themeService.colors.foreground.rgba}else switch(50331648&D){case 16777216:case 33554432:i=this._themeService.colors.ansi[255&D].rgba;break;case 50331648:i=(16777215&D)<<8;break;default:i=this._themeService.colors.background.rgba,e=!0}w.attributes.length<k+4&&(w.attributes=(0,u.expandFloat32Array)(w.attributes,this._terminal.rows*this._terminal.cols*8)),d=P*this._dimensions.device.cell.width,f=F*this._dimensions.device.cell.height,s=(i>>24&255)/255,g=(i>>16&255)/255,L=(i>>8&255)/255,b=!e&&134217728&D?o.DIM_OPACITY:1,this._addRectangle(w.attributes,k,d,f,(W-P)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,s,g,L,b)}_addRectangle(w,k,M,D,P,W,F,$,A,U){w[k]=M/this._dimensions.device.canvas.width,w[k+1]=D/this._dimensions.device.canvas.height,w[k+2]=P/this._dimensions.device.canvas.width,w[k+3]=W/this._dimensions.device.canvas.height,w[k+4]=F,w[k+5]=$,w[k+6]=A,w[k+7]=U}_addRectangleFloat(w,k,M,D,P,W,F){w[k]=M/this._dimensions.device.canvas.width,w[k+1]=D/this._dimensions.device.canvas.height,w[k+2]=P/this._dimensions.device.canvas.width,w[k+3]=W/this._dimensions.device.canvas.height,w[k+4]=F[0],w[k+5]=F[1],w[k+6]=F[2],w[k+7]=F[3]}_colorToFloat32Array(w){return new Float32Array([(w.rgba>>24&255)/255,(w.rgba>>16&255)/255,(w.rgba>>8&255)/255,(255&w.rgba)/255])}}t.RectangleRenderer=R},310:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderModel=t.COMBINED_CHAR_BIT_MASK=t.RENDER_MODEL_EXT_OFFSET=t.RENDER_MODEL_FG_OFFSET=t.RENDER_MODEL_BG_OFFSET=t.RENDER_MODEL_INDICIES_PER_CELL=void 0;let u=n(296);t.RENDER_MODEL_INDICIES_PER_CELL=4,t.RENDER_MODEL_BG_OFFSET=1,t.RENDER_MODEL_FG_OFFSET=2,t.RENDER_MODEL_EXT_OFFSET=3,t.COMBINED_CHAR_BIT_MASK=2147483648,t.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,u.createSelectionRenderModel)()}resize(h,a){let o=h*a*t.RENDER_MODEL_INDICIES_PER_CELL;o!==this.cells.length&&(this.cells=new Uint32Array(o),this.lineLengths=new Uint32Array(a))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JoinedCellData=t.WebglRenderer=void 0;let u=n(820),h=n(274),a=n(627),o=n(56),m=n(374),p=n(147),i=n(782),e=n(855),d=n(345),f=n(859),s=n(965),g=n(742),L=n(461),b=n(733),R=n(310);class E extends f.Disposable{constructor(M,D,P,W,F,$,A,U,N){super(),this._terminal=M,this._characterJoinerService=D,this._charSizeService=P,this._coreBrowserService=W,this._decorationService=$,this._optionsService=A,this._themeService=U,this._model=new R.RenderModel,this._workCell=new i.CellData,this._onChangeTextureAtlas=this.register(new d.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new d.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new d.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new d.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new h.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new b.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,A,this._themeService),new L.CursorRenderLayer(M,this._core.screenElement,3,this._onRequestRedraw,this._coreBrowserService,F,A,this._themeService)],this.dimensions=(0,m.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register(A.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let z={antialias:!1,depth:!1,preserveDrawingBuffer:N};if(this._gl=this._canvas.getContext("webgl2",z),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextlost",K=>{console.log("webglcontextlost event received"),K.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(K)},3e3)})),this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextrestored",K=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,a.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,o.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(K,Q)=>this._setCanvasDevicePixelDimensions(K,Q))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer,this._glyphRenderer]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,f.toDisposable)(()=>{var K;for(let Q of this._renderLayers)Q.dispose();(K=this._canvas.parentElement)===null||K===void 0||K.removeChild(this._canvas),(0,a.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var M;return(M=this._charAtlas)===null||M===void 0?void 0:M.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(M,D){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let P of this._renderLayers)P.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.setDimensions(this.dimensions),this._rectangleRenderer.handleResize(),this._glyphRenderer.setDimensions(this.dimensions),this._glyphRenderer.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(let M of this._renderLayers)M.handleBlur(this._terminal);this._requestRedrawViewport()}handleFocus(){for(let M of this._renderLayers)M.handleFocus(this._terminal);this._requestRedrawViewport()}handleSelectionChanged(M,D,P){for(let W of this._renderLayers)W.handleSelectionChanged(this._terminal,M,D,P);this._model.selection.update(this._terminal,M,D,P),this._requestRedrawViewport()}handleCursorMove(){for(let M of this._renderLayers)M.handleCursorMove(this._terminal)}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas()}_initializeWebGLState(){var M,D;return(M=this._rectangleRenderer)===null||M===void 0||M.dispose(),(D=this._glyphRenderer)===null||D===void 0||D.dispose(),this._rectangleRenderer=this.register(new g.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService)),this._glyphRenderer=this.register(new s.GlyphRenderer(this._terminal,this._gl,this.dimensions)),this.handleCharSizeChanged(),[this._rectangleRenderer,this._glyphRenderer]}_refreshCharAtlas(){var M;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let D=(0,a.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==D&&((M=this._charAtlasDisposable)===null||M===void 0||M.dispose(),this._onChangeTextureAtlas.fire(D.pages[0].canvas),this._charAtlasDisposable=(0,f.getDisposeArrayDisposable)([(0,d.forwardEvent)(D.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,d.forwardEvent)(D.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=D,this._charAtlas.warmUp(),this._glyphRenderer.setAtlas(this._charAtlas)}_clearModel(M){this._model.clear(),M&&this._glyphRenderer.clear()}clearTextureAtlas(){var M;(M=this._charAtlas)===null||M===void 0||M.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(let M of this._renderLayers)M.reset(this._terminal)}registerCharacterJoiner(M){return-1}deregisterCharacterJoiner(M){return!1}renderRows(M,D){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let P of this._renderLayers)P.handleGridChanged(this._terminal,M,D);this._glyphRenderer.beginFrame()&&this._clearModel(!0),this._updateModel(M,D),this._rectangleRenderer.render(),this._glyphRenderer.render(this._model)}_updateModel(M,D){let P=this._core,W,F,$,A,U,N,z,K,Q,oe,ee,ne,G,V=this._workCell;for(F=M;F<=D&&($=F+P.buffer.ydisp,A=P.buffer.lines.get($),A);F++)for(this._model.lineLengths[F]=0,U=this._characterJoinerService.getJoinedCharacters($),ne=0;ne<P.cols;ne++)if(W=this._cellColorResolver.result.bg,A.loadCell(ne,V),ne===0&&(W=this._cellColorResolver.result.bg),N=!1,z=ne,U.length>0&&ne===U[0][0]&&(N=!0,K=U.shift(),V=new w(V,A.translateToString(!0,K[0],K[1]),K[1]-K[0]),z=K[1]-1),Q=V.getChars(),oe=V.getCode(),ee=(F*P.cols+ne)*R.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(V,ne,$),oe!==e.NULL_CELL_CODE&&(this._model.lineLengths[F]=ne+1),(this._model.cells[ee]!==oe||this._model.cells[ee+R.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[ee+R.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[ee+R.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(Q.length>1&&(oe|=R.COMBINED_CHAR_BIT_MASK),this._model.cells[ee]=oe,this._model.cells[ee+R.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[ee+R.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[ee+R.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.updateCell(ne,F,oe,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,Q,W),N))for(V=this._workCell,ne++;ne<z;ne++)G=(F*P.cols+ne)*R.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.updateCell(ne,F,e.NULL_CELL_CODE,0,0,0,e.NULL_CELL_CHAR,0),this._model.cells[G]=e.NULL_CELL_CODE,this._model.cells[G+R.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[G+R.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[G+R.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;this._rectangleRenderer.updateBackgrounds(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(M,D){this._canvas.width===M&&this._canvas.height===D||(this._canvas.width=M,this._canvas.height=D,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}}t.WebglRenderer=E;class w extends p.AttributeData{constructor(M,D,P){super(),this.content=0,this.combinedData="",this.fg=M.fg,this.bg=M.bg,this.combinedData=D,this._width=P}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(M){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=w},381:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GLTexture=t.expandFloat32Array=t.createShader=t.createProgram=t.PROJECTION_MATRIX=void 0;let u=n(374);function h(a,o,m){let p=(0,u.throwIfFalsy)(a.createShader(o));if(a.shaderSource(p,m),a.compileShader(p),a.getShaderParameter(p,a.COMPILE_STATUS))return p;console.error(a.getShaderInfoLog(p)),a.deleteShader(p)}t.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),t.createProgram=function(a,o,m){let p=(0,u.throwIfFalsy)(a.createProgram());if(a.attachShader(p,(0,u.throwIfFalsy)(h(a,a.VERTEX_SHADER,o))),a.attachShader(p,(0,u.throwIfFalsy)(h(a,a.FRAGMENT_SHADER,m))),a.linkProgram(p),a.getProgramParameter(p,a.LINK_STATUS))return p;console.error(a.getProgramInfoLog(p)),a.deleteProgram(p)},t.createShader=h,t.expandFloat32Array=function(a,o){let m=Math.min(2*a.length,o),p=new Float32Array(m);for(let i=0;i<a.length;i++)p[i]=a[i];return p},t.GLTexture=class{constructor(a){this.texture=a,this.version=-1}}},592:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;let u=n(627),h=n(237),a=n(374),o=n(859);class m extends o.Disposable{constructor(i,e,d,f,s,g,L,b){super(),this._container=e,this._alpha=s,this._coreBrowserService=g,this._optionsService=L,this._themeService=b,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${d}-layer`),this._canvas.style.zIndex=f.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(R=>{this._refreshCharAtlas(i,R),this.reset(i)})),this.register((0,o.toDisposable)(()=>{var R;this._canvas.remove(),(R=this._charAtlas)===null||R===void 0||R.dispose()}))}_initCanvas(){this._ctx=(0,a.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(i){}handleFocus(i){}handleCursorMove(i){}handleGridChanged(i,e,d){}handleSelectionChanged(i,e,d,f=!1){}_setTransparency(i,e){if(e===this._alpha)return;let d=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,d),this._refreshCharAtlas(i,this._themeService.colors),this.handleGridChanged(i,0,i.rows-1)}_refreshCharAtlas(i,e){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,u.acquireTextureAtlas)(i,this._optionsService.rawOptions,e,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(i,e){this._deviceCellWidth=e.device.cell.width,this._deviceCellHeight=e.device.cell.height,this._deviceCharWidth=e.device.char.width,this._deviceCharHeight=e.device.char.height,this._deviceCharLeft=e.device.char.left,this._deviceCharTop=e.device.char.top,this._canvas.width=e.device.canvas.width,this._canvas.height=e.device.canvas.height,this._canvas.style.width=`${e.css.canvas.width}px`,this._canvas.style.height=`${e.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(i,this._themeService.colors)}_fillCells(i,e,d,f){this._ctx.fillRect(i*this._deviceCellWidth,e*this._deviceCellHeight,d*this._deviceCellWidth,f*this._deviceCellHeight)}_fillBottomLineAtCells(i,e,d=1){this._ctx.fillRect(i*this._deviceCellWidth,(e+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,d*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillLeftLineAtCell(i,e,d){this._ctx.fillRect(i*this._deviceCellWidth,e*this._deviceCellHeight,this._coreBrowserService.dpr*d,this._deviceCellHeight)}_strokeRectAtCell(i,e,d,f){this._ctx.lineWidth=this._coreBrowserService.dpr,this._ctx.strokeRect(i*this._deviceCellWidth+this._coreBrowserService.dpr/2,e*this._deviceCellHeight+this._coreBrowserService.dpr/2,d*this._deviceCellWidth-this._coreBrowserService.dpr,f*this._deviceCellHeight-this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(i,e,d,f){this._alpha?this._ctx.clearRect(i*this._deviceCellWidth,e*this._deviceCellHeight,d*this._deviceCellWidth,f*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(i*this._deviceCellWidth,e*this._deviceCellHeight,d*this._deviceCellWidth,f*this._deviceCellHeight))}_fillCharTrueColor(i,e,d,f){this._ctx.font=this._getFont(i,!1,!1),this._ctx.textBaseline=h.TEXT_BASELINE,this._clipCell(d,f,e.getWidth()),this._ctx.fillText(e.getChars(),d*this._deviceCellWidth+this._deviceCharLeft,f*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(i,e,d){this._ctx.beginPath(),this._ctx.rect(i*this._deviceCellWidth,e*this._deviceCellHeight,d*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(i,e,d){return`${d?"italic":""} ${e?i.options.fontWeightBold:i.options.fontWeight} ${i.options.fontSize*this._coreBrowserService.dpr}px ${i.options.fontFamily}`}}t.BaseRenderLayer=m},461:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;let u=n(592),h=n(782),a=n(859);class o extends u.BaseRenderLayer{constructor(i,e,d,f,s,g,L,b){super(i,e,"cursor",d,!0,s,L,b),this._onRequestRefreshRowsEvent=f,this._coreService=g,this._cell=new h.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this)},this._handleOptionsChanged(i),this.register(L.onOptionChange(()=>this._handleOptionsChanged(i))),this.register((0,a.toDisposable)(()=>{var R;(R=this._cursorBlinkStateManager)===null||R===void 0||R.dispose(),this._cursorBlinkStateManager=void 0}))}resize(i,e){super.resize(i,e),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(i){var e;this._clearCursor(),(e=this._cursorBlinkStateManager)===null||e===void 0||e.restartBlinkAnimation(i),this._handleOptionsChanged(i)}handleBlur(i){var e;(e=this._cursorBlinkStateManager)===null||e===void 0||e.pause(),this._onRequestRefreshRowsEvent.fire({start:i.buffer.active.cursorY,end:i.buffer.active.cursorY})}handleFocus(i){var e;(e=this._cursorBlinkStateManager)===null||e===void 0||e.resume(i),this._onRequestRefreshRowsEvent.fire({start:i.buffer.active.cursorY,end:i.buffer.active.cursorY})}_handleOptionsChanged(i){var e;i.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new m(()=>{this._render(i,!0)},this._coreBrowserService)):((e=this._cursorBlinkStateManager)===null||e===void 0||e.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:i.buffer.active.cursorY,end:i.buffer.active.cursorY})}handleCursorMove(i){var e;(e=this._cursorBlinkStateManager)===null||e===void 0||e.restartBlinkAnimation(i)}handleGridChanged(i,e,d){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(i,!1):this._cursorBlinkStateManager.restartBlinkAnimation(i)}_render(i,e){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();let d=i.buffer.active.baseY+i.buffer.active.cursorY,f=d-i.buffer.active.viewportY,s=Math.min(i.buffer.active.cursorX,i.cols-1);if(f<0||f>=i.rows)this._clearCursor();else if(i._core.buffer.lines.get(d).loadCell(s,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;let g=i.options.cursorStyle;return g&&g!=="block"?this._cursorRenderers[g](i,s,f,this._cell):this._renderBlurCursor(i,s,f,this._cell),this._ctx.restore(),this._state.x=s,this._state.y=f,this._state.isFocused=!1,this._state.style=g,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===s&&this._state.y===f&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===i.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[i.options.cursorStyle||"block"](i,s,f,this._cell),this._ctx.restore(),this._state.x=s,this._state.y=f,this._state.isFocused=!1,this._state.style=i.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(i,e,d,f){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(e,d,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(i,e,d,f){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(e,d,f.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(i,f,e,d),this._ctx.restore()}_renderUnderlineCursor(i,e,d,f){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(e,d),this._ctx.restore()}_renderBlurCursor(i,e,d,f){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(e,d,f.getWidth(),1),this._ctx.restore()}}t.CursorRenderLayer=o;class m{constructor(i,e){this._renderCallback=i,this._coreBrowserService=e,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(i){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(i=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let e=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,e>0)return void this._restartInterval(e)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let e=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(e)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},i)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(i){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation(i)}}},733:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;let u=n(197),h=n(237),a=n(592);class o extends a.BaseRenderLayer{constructor(p,i,e,d,f,s,g){super(e,p,"link",i,!0,f,s,g),this.register(d.onShowLinkUnderline(L=>this._handleShowLinkUnderline(L))),this.register(d.onHideLinkUnderline(L=>this._handleHideLinkUnderline(L)))}resize(p,i){super.resize(p,i),this._state=void 0}reset(p){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let p=this._state.y2-this._state.y1-1;p>0&&this._clearCells(0,this._state.y1+1,this._state.cols,p),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(p){if(p.fg===h.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:p.fg!==void 0&&(0,u.is256Color)(p.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[p.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,p.y1===p.y2)this._fillBottomLineAtCells(p.x1,p.y1,p.x2-p.x1);else{this._fillBottomLineAtCells(p.x1,p.y1,p.cols-p.x1);for(let i=p.y1+1;i<p.y2;i++)this._fillBottomLineAtCells(0,i,p.cols);this._fillBottomLineAtCells(0,p.y2,p.x2)}this._state=p}_handleHideLinkUnderline(p){this._clearCurrentLink()}}t.LinkRenderLayer=o},820:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(n,u,h,a){n.addEventListener(u,h,a);let o=!1;return{dispose:()=>{o||(o=!0,n.removeEventListener(u,h,a))}}}},274:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellColorResolver=void 0;let n,u=0,h=0,a=!1,o=!1,m=!1;t.CellColorResolver=class{constructor(p,i,e,d,f){this._terminal=p,this._selectionRenderModel=i,this._decorationService=e,this._coreBrowserService=d,this._themeService=f,this.result={fg:0,bg:0,ext:0}}resolve(p,i,e){this.result.bg=p.bg,this.result.fg=p.fg,this.result.ext=268435456&p.bg?p.extended.ext:0,h=0,u=0,o=!1,a=!1,m=!1,n=this._themeService.colors,this._decorationService.forEachDecorationAtCell(i,e,"bottom",d=>{d.backgroundColorRGB&&(h=d.backgroundColorRGB.rgba>>8&16777215,o=!0),d.foregroundColorRGB&&(u=d.foregroundColorRGB.rgba>>8&16777215,a=!0)}),m=this._selectionRenderModel.isCellSelected(this._terminal,i,e),m&&(h=(this._coreBrowserService.isFocused?n.selectionBackgroundOpaque:n.selectionInactiveBackgroundOpaque).rgba>>8&16777215,o=!0,n.selectionForeground&&(u=n.selectionForeground.rgba>>8&16777215,a=!0)),this._decorationService.forEachDecorationAtCell(i,e,"top",d=>{d.backgroundColorRGB&&(h=d.backgroundColorRGB.rgba>>8&16777215,o=!0),d.foregroundColorRGB&&(u=d.foregroundColorRGB.rgba>>8&16777215,a=!0)}),o&&(h=m?-16777216&p.bg&-134217729|h|50331648:-16777216&p.bg|h|50331648),a&&(u=-16777216&p.fg&-67108865|u|50331648),67108864&this.result.fg&&(o&&!a&&(u=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&n.background.rgba>>8|50331648,a=!0),!o&&a&&(h=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&n.foreground.rgba>>8|50331648,o=!0)),n=void 0,this.result.bg=o?h:this.result.bg,this.result.fg=a?u:this.result.fg}}},627:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireTextureAtlas=void 0;let u=n(509),h=n(197),a=[];t.acquireTextureAtlas=function(o,m,p,i,e,d,f,s){let g=(0,h.generateConfig)(i,e,d,f,m,p,s);for(let R=0;R<a.length;R++){let E=a[R],w=E.ownedBy.indexOf(o);if(w>=0){if((0,h.configEquals)(E.config,g))return E.atlas;E.ownedBy.length===1?(E.atlas.dispose(),a.splice(R,1)):E.ownedBy.splice(w,1);break}}for(let R=0;R<a.length;R++){let E=a[R];if((0,h.configEquals)(E.config,g))return E.ownedBy.push(o),E.atlas}let L=o._core,b={atlas:new u.TextureAtlas(document,g,L.unicodeService),config:g,ownedBy:[o]};return a.push(b),b.atlas},t.removeTerminalFromCache=function(o){for(let m=0;m<a.length;m++){let p=a[m].ownedBy.indexOf(o);if(p!==-1){a[m].ownedBy.length===1?(a[m].atlas.dispose(),a.splice(m,1)):a[m].ownedBy.splice(p,1);break}}}},197:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;let u=n(160);t.generateConfig=function(h,a,o,m,p,i,e){let d={foreground:i.foreground,background:i.background,cursor:u.NULL_COLOR,cursorAccent:u.NULL_COLOR,selectionForeground:u.NULL_COLOR,selectionBackgroundTransparent:u.NULL_COLOR,selectionBackgroundOpaque:u.NULL_COLOR,selectionInactiveBackgroundTransparent:u.NULL_COLOR,selectionInactiveBackgroundOpaque:u.NULL_COLOR,ansi:i.ansi.slice(),contrastCache:i.contrastCache};return{customGlyphs:p.customGlyphs,devicePixelRatio:e,letterSpacing:p.letterSpacing,lineHeight:p.lineHeight,deviceCellWidth:h,deviceCellHeight:a,deviceCharWidth:o,deviceCharHeight:m,fontFamily:p.fontFamily,fontSize:p.fontSize,fontWeight:p.fontWeight,fontWeightBold:p.fontWeightBold,allowTransparency:p.allowTransparency,drawBoldTextInBrightColors:p.drawBoldTextInBrightColors,minimumContrastRatio:p.minimumContrastRatio,colors:d}},t.configEquals=function(h,a){for(let o=0;o<h.colors.ansi.length;o++)if(h.colors.ansi[o].rgba!==a.colors.ansi[o].rgba)return!1;return h.devicePixelRatio===a.devicePixelRatio&&h.customGlyphs===a.customGlyphs&&h.lineHeight===a.lineHeight&&h.letterSpacing===a.letterSpacing&&h.fontFamily===a.fontFamily&&h.fontSize===a.fontSize&&h.fontWeight===a.fontWeight&&h.fontWeightBold===a.fontWeightBold&&h.allowTransparency===a.allowTransparency&&h.deviceCharWidth===a.deviceCharWidth&&h.deviceCharHeight===a.deviceCharHeight&&h.drawBoldTextInBrightColors===a.drawBoldTextInBrightColors&&h.minimumContrastRatio===a.minimumContrastRatio&&h.colors.foreground.rgba===a.colors.foreground.rgba&&h.colors.background.rgba===a.colors.background.rgba},t.is256Color=function(h){return(50331648&h)==16777216||(50331648&h)==33554432}},237:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;let u=n(399);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},860:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.powerlineDefinitions=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;let u=n(374);t.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let h={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(i,e)=>`M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e}`},"\u2551":{1:(i,e)=>`M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u2552":{1:(i,e)=>`M.5,1 L.5,${.5-e} L1,${.5-e} M.5,${.5+e} L1,${.5+e}`},"\u2553":{1:(i,e)=>`M${.5-i},1 L${.5-i},.5 L1,.5 M${.5+i},.5 L${.5+i},1`},"\u2554":{1:(i,e)=>`M1,${.5-e} L${.5-i},${.5-e} L${.5-i},1 M1,${.5+e} L${.5+i},${.5+e} L${.5+i},1`},"\u2555":{1:(i,e)=>`M0,${.5-e} L.5,${.5-e} L.5,1 M0,${.5+e} L.5,${.5+e}`},"\u2556":{1:(i,e)=>`M${.5+i},1 L${.5+i},.5 L0,.5 M${.5-i},.5 L${.5-i},1`},"\u2557":{1:(i,e)=>`M0,${.5+e} L${.5-i},${.5+e} L${.5-i},1 M0,${.5-e} L${.5+i},${.5-e} L${.5+i},1`},"\u2558":{1:(i,e)=>`M.5,0 L.5,${.5+e} L1,${.5+e} M.5,${.5-e} L1,${.5-e}`},"\u2559":{1:(i,e)=>`M1,.5 L${.5-i},.5 L${.5-i},0 M${.5+i},.5 L${.5+i},0`},"\u255A":{1:(i,e)=>`M1,${.5-e} L${.5+i},${.5-e} L${.5+i},0 M1,${.5+e} L${.5-i},${.5+e} L${.5-i},0`},"\u255B":{1:(i,e)=>`M0,${.5+e} L.5,${.5+e} L.5,0 M0,${.5-e} L.5,${.5-e}`},"\u255C":{1:(i,e)=>`M0,.5 L${.5+i},.5 L${.5+i},0 M${.5-i},.5 L${.5-i},0`},"\u255D":{1:(i,e)=>`M0,${.5-e} L${.5-i},${.5-e} L${.5-i},0 M0,${.5+e} L${.5+i},${.5+e} L${.5+i},0`},"\u255E":{1:(i,e)=>`M.5,0 L.5,1 M.5,${.5-e} L1,${.5-e} M.5,${.5+e} L1,${.5+e}`},"\u255F":{1:(i,e)=>`M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1 M${.5+i},.5 L1,.5`},"\u2560":{1:(i,e)=>`M${.5-i},0 L${.5-i},1 M1,${.5+e} L${.5+i},${.5+e} L${.5+i},1 M1,${.5-e} L${.5+i},${.5-e} L${.5+i},0`},"\u2561":{1:(i,e)=>`M.5,0 L.5,1 M0,${.5-e} L.5,${.5-e} M0,${.5+e} L.5,${.5+e}`},"\u2562":{1:(i,e)=>`M0,.5 L${.5-i},.5 M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u2563":{1:(i,e)=>`M${.5+i},0 L${.5+i},1 M0,${.5+e} L${.5-i},${.5+e} L${.5-i},1 M0,${.5-e} L${.5-i},${.5-e} L${.5-i},0`},"\u2564":{1:(i,e)=>`M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e} M.5,${.5+e} L.5,1`},"\u2565":{1:(i,e)=>`M0,.5 L1,.5 M${.5-i},.5 L${.5-i},1 M${.5+i},.5 L${.5+i},1`},"\u2566":{1:(i,e)=>`M0,${.5-e} L1,${.5-e} M0,${.5+e} L${.5-i},${.5+e} L${.5-i},1 M1,${.5+e} L${.5+i},${.5+e} L${.5+i},1`},"\u2567":{1:(i,e)=>`M.5,0 L.5,${.5-e} M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e}`},"\u2568":{1:(i,e)=>`M0,.5 L1,.5 M${.5-i},.5 L${.5-i},0 M${.5+i},.5 L${.5+i},0`},"\u2569":{1:(i,e)=>`M0,${.5+e} L1,${.5+e} M0,${.5-e} L${.5-i},${.5-e} L${.5-i},0 M1,${.5-e} L${.5+i},${.5-e} L${.5+i},0`},"\u256A":{1:(i,e)=>`M.5,0 L.5,1 M0,${.5-e} L1,${.5-e} M0,${.5+e} L1,${.5+e}`},"\u256B":{1:(i,e)=>`M0,.5 L1,.5 M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u256C":{1:(i,e)=>`M0,${.5+e} L${.5-i},${.5+e} L${.5-i},1 M1,${.5+e} L${.5+i},${.5+e} L${.5+i},1 M0,${.5-e} L${.5-i},${.5-e} L${.5-i},0 M1,${.5-e} L${.5+i},${.5-e} L${.5+i},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(i,e)=>`M.5,1 L.5,${.5+e/.15*.5} C.5,${.5+e/.15*.5},.5,.5,1,.5`},"\u256E":{1:(i,e)=>`M.5,1 L.5,${.5+e/.15*.5} C.5,${.5+e/.15*.5},.5,.5,0,.5`},"\u256F":{1:(i,e)=>`M.5,0 L.5,${.5-e/.15*.5} C.5,${.5-e/.15*.5},.5,.5,0,.5`},"\u2570":{1:(i,e)=>`M.5,0 L.5,${.5-e/.15*.5} C.5,${.5-e/.15*.5},.5,.5,1,.5`}},t.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},t.powerlineDefinitions["\uE0BB"]=t.powerlineDefinitions["\uE0B9"],t.powerlineDefinitions["\uE0BF"]=t.powerlineDefinitions["\uE0BD"],t.tryDrawCustomChar=function(i,e,d,f,s,g,L,b){let R=t.blockElementDefinitions[e];if(R)return function(M,D,P,W,F,$){for(let A=0;A<D.length;A++){let U=D[A],N=F/8,z=$/8;M.fillRect(P+U.x*N,W+U.y*z,U.w*N,U.h*z)}}(i,R,d,f,s,g),!0;let E=h[e];if(E)return function(M,D,P,W,F,$){let A=a.get(D);A||(A=new Map,a.set(D,A));let U=M.fillStyle;if(typeof U!="string")throw new Error(`Unexpected fillStyle type "${U}"`);let N=A.get(U);if(!N){let z=D[0].length,K=D.length,Q=document.createElement("canvas");Q.width=z,Q.height=K;let oe=(0,u.throwIfFalsy)(Q.getContext("2d")),ee=new ImageData(z,K),ne,G,V,q;if(U.startsWith("#"))ne=parseInt(U.slice(1,3),16),G=parseInt(U.slice(3,5),16),V=parseInt(U.slice(5,7),16),q=U.length>7&&parseInt(U.slice(7,9),16)||1;else{if(!U.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${U}" when drawing pattern glyph`);[ne,G,V,q]=U.substring(5,U.length-1).split(",").map(te=>parseFloat(te))}for(let te=0;te<K;te++)for(let ce=0;ce<z;ce++)ee.data[4*(te*z+ce)]=ne,ee.data[4*(te*z+ce)+1]=G,ee.data[4*(te*z+ce)+2]=V,ee.data[4*(te*z+ce)+3]=D[te][ce]*(255*q);oe.putImageData(ee,0,0),N=(0,u.throwIfFalsy)(M.createPattern(Q,null)),A.set(U,N)}M.fillStyle=N,M.fillRect(P,W,F,$)}(i,E,d,f,s,g),!0;let w=t.boxDrawingDefinitions[e];if(w)return function(M,D,P,W,F,$,A){M.strokeStyle=M.fillStyle;for(let[U,N]of Object.entries(D)){let z;M.beginPath(),M.lineWidth=A*Number.parseInt(U),z=typeof N=="function"?N(.15,.15/$*F):N;for(let K of z.split(" ")){let Q=K[0],oe=m[Q];if(!oe){console.error(`Could not find drawing instructions for "${Q}"`);continue}let ee=K.substring(1).split(",");ee[0]&&ee[1]&&oe(M,p(ee,F,$,P,W,!0,A))}M.stroke(),M.closePath()}}(i,w,d,f,s,g,b),!0;let k=t.powerlineDefinitions[e];return!!k&&(function(M,D,P,W,F,$,A,U){var N,z;let K=new Path2D;K.rect(P,W,F,$),M.clip(K),M.beginPath();let Q=A/12;M.lineWidth=U*Q;for(let oe of D.d.split(" ")){let ee=oe[0],ne=m[ee];if(!ne){console.error(`Could not find drawing instructions for "${ee}"`);continue}let G=oe.substring(1).split(",");G[0]&&G[1]&&ne(M,p(G,F,$,P,W,!1,U,((N=D.leftPadding)!==null&&N!==void 0?N:0)*(Q/2),((z=D.rightPadding)!==null&&z!==void 0?z:0)*(Q/2)))}D.type===1?(M.strokeStyle=M.fillStyle,M.stroke()):M.fill(),M.closePath()}(i,k,d,f,s,g,L,b),!0)};let a=new Map;function o(i,e,d=0){return Math.max(Math.min(i,e),d)}let m={C:(i,e)=>i.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]),L:(i,e)=>i.lineTo(e[0],e[1]),M:(i,e)=>i.moveTo(e[0],e[1])};function p(i,e,d,f,s,g,L,b=0,R=0){let E=i.map(w=>parseFloat(w)||parseInt(w));if(E.length<2)throw new Error("Too few arguments for instruction");for(let w=0;w<E.length;w+=2)E[w]*=e-b*L-R*L,g&&E[w]!==0&&(E[w]=o(Math.round(E[w]+.5)-.5,e,0)),E[w]+=f+b*L;for(let w=1;w<E.length;w+=2)E[w]*=d,g&&E[w]!==0&&(E[w]=o(Math.round(E[w]+.5)-.5,d,0)),E[w]+=s;return E}},56:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.observeDevicePixelDimensions=void 0;let u=n(859);t.observeDevicePixelDimensions=function(h,a,o){let m=new a.ResizeObserver(p=>{let i=p.find(f=>f.target===h);if(!i)return;if(!("devicePixelContentBoxSize"in i))return m==null||m.disconnect(),void(m=void 0);let e=i.devicePixelContentBoxSize[0].inlineSize,d=i.devicePixelContentBoxSize[0].blockSize;e>0&&d>0&&o(e,d)});try{m.observe(h,{box:["device-pixel-content-box"]})}catch(p){m.disconnect(),m=void 0}return(0,u.toDisposable)(()=>m==null?void 0:m.disconnect())}},374:(y,t)=>{function n(u){return 57508<=u&&u<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderDimensions=t.excludeFromContrastRatioDemands=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},t.isPowerlineGlyph=n,t.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},t.excludeFromContrastRatioDemands=function(u){return n(u)||function(h){return 9472<=h&&h<=9631}(u)},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSelectionRenderModel=void 0;class n{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(h,a,o,m=!1){if(this.selectionStart=a,this.selectionEnd=o,!a||!o||a[0]===o[0]&&a[1]===o[1])return void this.clear();let p=a[1]-h.buffer.active.viewportY,i=o[1]-h.buffer.active.viewportY,e=Math.max(p,0),d=Math.min(i,h.rows-1);e>=h.rows||d<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=p,this.viewportEndRow=i,this.viewportCappedStartRow=e,this.viewportCappedEndRow=d,this.startCol=a[0],this.endCol=o[0])}isCellSelected(h,a,o){return!!this.hasSelection&&(o-=h.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?a>=this.startCol&&o>=this.viewportCappedStartRow&&a<this.endCol&&o<=this.viewportCappedEndRow:a<this.startCol&&o>=this.viewportCappedStartRow&&a>=this.endCol&&o<=this.viewportCappedEndRow:o>this.viewportStartRow&&o<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&o===this.viewportStartRow&&a>=this.startCol&&a<this.endCol||this.viewportStartRow<this.viewportEndRow&&o===this.viewportEndRow&&a<this.endCol||this.viewportStartRow<this.viewportEndRow&&o===this.viewportStartRow&&a>=this.startCol)}}t.createSelectionRenderModel=function(){return new n}},509:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextureAtlas=void 0;let u=n(237),h=n(855),a=n(147),o=n(160),m=n(860),p=n(374),i=n(485),e=n(385),d=n(345),f={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},s;class g{constructor(w,k,M){this._document=w,this._config=k,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new i.FourKeyMap,this._cacheMapCombined=new i.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new a.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new d.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new d.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=R(w,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,p.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}get pages(){return this._pages}dispose(){for(let w of this.pages)w.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let w=new e.IdleTaskQueue;for(let k=33;k<126;k++)w.enqueue(()=>{if(!this._cacheMap.get(k,h.DEFAULT_COLOR,h.DEFAULT_COLOR,h.DEFAULT_EXT)){let M=this._drawToCache(k,h.DEFAULT_COLOR,h.DEFAULT_COLOR,h.DEFAULT_EXT);this._cacheMap.set(k,h.DEFAULT_COLOR,h.DEFAULT_COLOR,h.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let w of this._pages)w.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){g.maxAtlasPages&&this._pages.length>=Math.max(4,g.maxAtlasPages/2)&&queueMicrotask(()=>{let k=this._pages.filter(A=>2*A.canvas.width<=(g.maxTextureSize||4096)).sort((A,U)=>U.canvas.width!==A.canvas.width?U.canvas.width-A.canvas.width:U.percentageUsed-A.percentageUsed),M=-1,D=0;for(let A=0;A<k.length;A++)if(k[A].canvas.width!==D)M=A,D=k[A].canvas.width;else if(A-M==3)break;let P=k.slice(M,M+4),W=P.map(A=>A.glyphs[0].texturePage).sort((A,U)=>A>U?1:-1),F=W[0],$=this._mergePages(P,F);$.version++,this._pages[F]=$;for(let A=W.length-1;A>=1;A--)this._deletePage(W[A]);this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire($.canvas)});let w=new L(this._document,this._textureSize);return this._pages.push(w),this._activePages.push(w),this._onAddTextureAtlasCanvas.fire(w.canvas),w}_mergePages(w,k){let M=2*w[0].canvas.width,D=new L(this._document,M,w);for(let[P,W]of w.entries()){let F=P*W.canvas.width%M,$=Math.floor(P/2)*W.canvas.height;D.ctx.drawImage(W.canvas,F,$);for(let U of W.glyphs)U.texturePage=k,U.sizeClipSpace.x=U.size.x/M,U.sizeClipSpace.y=U.size.y/M,U.texturePosition.x+=F,U.texturePosition.y+=$,U.texturePositionClipSpace.x=U.texturePosition.x/M,U.texturePositionClipSpace.y=U.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(W.canvas);let A=this._activePages.indexOf(W);A!==-1&&this._activePages.splice(A,1)}return D}_deletePage(w){this._pages.splice(w,1);for(let k=w;k<this._pages.length;k++){let M=this._pages[k];for(let D of M.glyphs)D.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(w,k,M,D){return this._getFromCacheMap(this._cacheMapCombined,w,k,M,D)}getRasterizedGlyph(w,k,M,D){return this._getFromCacheMap(this._cacheMap,w,k,M,D)}_getFromCacheMap(w,k,M,D,P){return s=w.get(k,M,D,P),s||(s=this._drawToCache(k,M,D,P),w.set(k,M,D,P,s)),s}_getColorFromAnsiIndex(w){if(w>=this._config.colors.ansi.length)throw new Error("No color found for idx "+w);return this._config.colors.ansi[w]}_getBackgroundColor(w,k,M,D){if(this._config.allowTransparency)return o.NULL_COLOR;let P;switch(w){case 16777216:case 33554432:P=this._getColorFromAnsiIndex(k);break;case 50331648:let W=a.AttributeData.toColorRGB(k);P=o.rgba.toColor(W[0],W[1],W[2]);break;default:P=M?this._config.colors.foreground:this._config.colors.background}return D&&(P=o.color.blend(this._config.colors.background,o.color.multiplyOpacity(P,u.DIM_OPACITY))),P}_getForegroundColor(w,k,M,D,P,W,F,$,A,U){let N=this._getMinimumContrastColor(w,k,M,D,P,W,!1,A,U);if(N)return N;let z;switch(P){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&A&&W<8&&(W+=8),z=this._getColorFromAnsiIndex(W);break;case 50331648:let K=a.AttributeData.toColorRGB(W);z=o.rgba.toColor(K[0],K[1],K[2]);break;default:z=F?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(z=o.color.opaque(z)),$&&(z=o.color.multiplyOpacity(z,u.DIM_OPACITY)),z}_resolveBackgroundRgba(w,k,M){switch(w){case 16777216:case 33554432:return this._getColorFromAnsiIndex(k).rgba;case 50331648:return k<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(w,k,M,D){switch(w){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&D&&k<8&&(k+=8),this._getColorFromAnsiIndex(k).rgba;case 50331648:return k<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(w,k,M,D,P,W,F,$,A){if(this._config.minimumContrastRatio===1||A)return;let U=this._config.colors.contrastCache.getColor(w,D);if(U!==void 0)return U||void 0;let N=this._resolveBackgroundRgba(k,M,F),z=this._resolveForegroundRgba(P,W,F,$),K=o.rgba.ensureContrastRatio(N,z,this._config.minimumContrastRatio);if(!K)return void this._config.colors.contrastCache.setColor(w,D,null);let Q=o.rgba.toColor(K>>24&255,K>>16&255,K>>8&255);return this._config.colors.contrastCache.setColor(w,D,Q),Q}_drawToCache(w,k,M,D){let P=typeof w=="number"?String.fromCharCode(w):w,W=this._config.deviceCellWidth*Math.max(P.length,2)+4;this._tmpCanvas.width<W&&(this._tmpCanvas.width=W);let F=this._config.deviceCellHeight+8;if(this._tmpCanvas.height<F&&(this._tmpCanvas.height=F),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=k,this._workAttributeData.extended.ext=D,this._workAttributeData.isInvisible())return f;let $=!!this._workAttributeData.isBold(),A=!!this._workAttributeData.isInverse(),U=!!this._workAttributeData.isDim(),N=!!this._workAttributeData.isItalic(),z=!!this._workAttributeData.isUnderline(),K=!!this._workAttributeData.isStrikethrough(),Q=this._workAttributeData.getFgColor(),oe=this._workAttributeData.getFgColorMode(),ee=this._workAttributeData.getBgColor(),ne=this._workAttributeData.getBgColorMode();if(A){let fe=Q;Q=ee,ee=fe;let Se=oe;oe=ne,ne=Se}let G=this._getBackgroundColor(ne,ee,A,U);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=G.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let V=$?this._config.fontWeightBold:this._config.fontWeight,q=N?"italic":"";this._tmpCtx.font=`${q} ${V} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=u.TEXT_BASELINE;let te=P.length===1&&(0,p.isPowerlineGlyph)(P.charCodeAt(0)),ce=P.length===1&&(0,p.isRestrictedPowerlineGlyph)(P.charCodeAt(0)),Ee=this._getForegroundColor(k,ne,ee,M,oe,Q,A,U,$,(0,p.excludeFromContrastRatioDemands)(P.charCodeAt(0)));this._tmpCtx.fillStyle=Ee.css;let re=ce?0:4,ke=!1;this._config.customGlyphs!==!1&&(ke=(0,m.tryDrawCustomChar)(this._tmpCtx,P,re,re,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Z,Me=!te;if(Z=typeof w=="number"?this._unicodeService.wcwidth(w):this._unicodeService.getStringCellWidth(w),z){this._tmpCtx.save();let fe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Se=fe%2==1?.5:0;if(this._tmpCtx.lineWidth=fe,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Me=!1,this._tmpCtx.strokeStyle=`rgb(${a.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Me=!1;let Be=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&Be<8&&(Be+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(Be).css}this._tmpCtx.beginPath();let De=re,Pe=Math.ceil(re+this._config.deviceCharHeight)-Se,gt=re+this._config.deviceCharHeight+fe-Se,nt=Math.ceil(re+this._config.deviceCharHeight+2*fe)-Se;for(let Be=0;Be<Z;Be++){this._tmpCtx.save();let Re=De+Be*this._config.deviceCellWidth,je=De+(Be+1)*this._config.deviceCellWidth,Vt=Re+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Re,Pe),this._tmpCtx.lineTo(je,Pe),this._tmpCtx.moveTo(Re,nt),this._tmpCtx.lineTo(je,nt);break;case 3:let St=fe<=1?nt:Math.ceil(re+this._config.deviceCharHeight-fe/2)-Se,Rt=fe<=1?Pe:Math.ceil(re+this._config.deviceCharHeight+fe/2)-Se,Xr=new Path2D;Xr.rect(Re,Pe,this._config.deviceCellWidth,nt-Pe),this._tmpCtx.clip(Xr),this._tmpCtx.moveTo(Re-this._config.deviceCellWidth/2,gt),this._tmpCtx.bezierCurveTo(Re-this._config.deviceCellWidth/2,Rt,Re,Rt,Re,gt),this._tmpCtx.bezierCurveTo(Re,St,Vt,St,Vt,gt),this._tmpCtx.bezierCurveTo(Vt,Rt,je,Rt,je,gt),this._tmpCtx.bezierCurveTo(je,St,je+this._config.deviceCellWidth/2,St,je+this._config.deviceCellWidth/2,gt);break;case 4:this._tmpCtx.setLineDash([2*this._config.devicePixelRatio,this._config.devicePixelRatio]),this._tmpCtx.moveTo(Re,Pe),this._tmpCtx.lineTo(je,Pe);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Re,Pe),this._tmpCtx.lineTo(je,Pe);break;default:this._tmpCtx.moveTo(Re,Pe),this._tmpCtx.lineTo(je,Pe)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ke&&this._config.fontSize>=12&&!this._config.allowTransparency&&P!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let Be=this._tmpCtx.measureText(P);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in Be&&Be.actualBoundingBoxDescent>0){this._tmpCtx.save();let Re=new Path2D;Re.rect(De,Pe-Math.ceil(fe/2),this._config.deviceCellWidth,nt-Pe+Math.ceil(fe/2)),this._tmpCtx.clip(Re),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=G.css,this._tmpCtx.strokeText(P,re,re+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(ke||this._tmpCtx.fillText(P,re,re+this._config.deviceCharHeight),P==="_"&&!this._config.allowTransparency){let fe=b(this._tmpCtx.getImageData(re,re,this._config.deviceCellWidth,this._config.deviceCellHeight),G,Ee,Me);if(fe)for(let Se=1;Se<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=G.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(P,re,re+this._config.deviceCharHeight-Se),fe=b(this._tmpCtx.getImageData(re,re,this._config.deviceCellWidth,this._config.deviceCellHeight),G,Ee,Me),fe);Se++);}if(K){let fe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),Se=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=fe,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(re,re+Math.floor(this._config.deviceCharHeight/2)-Se),this._tmpCtx.lineTo(re+this._config.deviceCharWidth*Z,re+Math.floor(this._config.deviceCharHeight/2)-Se),this._tmpCtx.stroke()}this._tmpCtx.restore();let he=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),qt;if(qt=this._config.allowTransparency?function(fe){for(let Se=0;Se<fe.data.length;Se+=4)if(fe.data[Se+3]>0)return!1;return!0}(he):b(he,G,Ee,Me),qt)return f;let we=this._findGlyphBoundingBox(he,this._workBoundingBox,W,ce,ke,re),me,ve;for(;;){if(this._activePages.length===0){let fe=this._createNewPage();me=fe,ve=fe.currentRow,ve.height=we.size.y;break}me=this._activePages[this._activePages.length-1],ve=me.currentRow;for(let fe of this._activePages)we.size.y<=fe.currentRow.height&&(me=fe,ve=fe.currentRow);for(let fe=this._activePages.length-1;fe>=0;fe--)for(let Se of this._activePages[fe].fixedRows)Se.height<=ve.height&&we.size.y<=Se.height&&(me=this._activePages[fe],ve=Se);if(ve.y+we.size.y>=me.canvas.height||ve.height>we.size.y+2){let fe=!1;if(me.currentRow.y+me.currentRow.height+we.size.y>=me.canvas.height){let Se;for(let De of this._activePages)if(De.currentRow.y+De.currentRow.height+we.size.y<De.canvas.height){Se=De;break}if(Se)me=Se;else{let De=this._createNewPage();me=De,ve=De.currentRow,ve.height=we.size.y,fe=!0}}fe||(me.currentRow.height>0&&me.fixedRows.push(me.currentRow),ve={x:0,y:me.currentRow.y+me.currentRow.height,height:we.size.y},me.fixedRows.push(ve),me.currentRow={x:0,y:ve.y+ve.height,height:0})}if(ve.x+we.size.x<=me.canvas.width)break;ve===me.currentRow?(ve.x=0,ve.y+=ve.height,ve.height=0):me.fixedRows.splice(me.fixedRows.indexOf(ve),1)}return we.texturePage=this._pages.indexOf(me),we.texturePosition.x=ve.x,we.texturePosition.y=ve.y,we.texturePositionClipSpace.x=ve.x/me.canvas.width,we.texturePositionClipSpace.y=ve.y/me.canvas.height,we.sizeClipSpace.x/=me.canvas.width,we.sizeClipSpace.y/=me.canvas.height,ve.height=Math.max(ve.height,we.size.y),ve.x+=we.size.x,me.ctx.putImageData(he,we.texturePosition.x-this._workBoundingBox.left,we.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,we.size.x,we.size.y),me.addGlyph(we),me.version++,we}_findGlyphBoundingBox(w,k,M,D,P,W){k.top=0;let F=D?this._config.deviceCellHeight:this._tmpCanvas.height,$=D?this._config.deviceCellWidth:M,A=!1;for(let U=0;U<F;U++){for(let N=0;N<$;N++){let z=U*this._tmpCanvas.width*4+4*N+3;if(w.data[z]!==0){k.top=U,A=!0;break}}if(A)break}k.left=0,A=!1;for(let U=0;U<W+$;U++){for(let N=0;N<F;N++){let z=N*this._tmpCanvas.width*4+4*U+3;if(w.data[z]!==0){k.left=U,A=!0;break}}if(A)break}k.right=$,A=!1;for(let U=W+$-1;U>=W;U--){for(let N=0;N<F;N++){let z=N*this._tmpCanvas.width*4+4*U+3;if(w.data[z]!==0){k.right=U,A=!0;break}}if(A)break}k.bottom=F,A=!1;for(let U=F-1;U>=0;U--){for(let N=0;N<$;N++){let z=U*this._tmpCanvas.width*4+4*N+3;if(w.data[z]!==0){k.bottom=U,A=!0;break}}if(A)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:k.right-k.left+1,y:k.bottom-k.top+1},sizeClipSpace:{x:k.right-k.left+1,y:k.bottom-k.top+1},offset:{x:-k.left+W+(D||P?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-k.top+W+(D||P?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}t.TextureAtlas=g;class L{constructor(w,k,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let D of M)this._glyphs.push(...D.glyphs),this._usedPixels+=D._usedPixels;this.canvas=R(w,k,k),this.ctx=(0,p.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(w){this._glyphs.push(w),this._usedPixels+=w.size.x*w.size.y}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function b(E,w,k,M){let D=w.rgba>>>24,P=w.rgba>>>16&255,W=w.rgba>>>8&255,F=k.rgba>>>24,$=k.rgba>>>16&255,A=k.rgba>>>8&255,U=Math.floor((Math.abs(D-F)+Math.abs(P-$)+Math.abs(W-A))/12),N=!0;for(let z=0;z<E.data.length;z+=4)E.data[z]===D&&E.data[z+1]===P&&E.data[z+2]===W||M&&Math.abs(E.data[z]-D)+Math.abs(E.data[z+1]-P)+Math.abs(E.data[z+2]-W)<U?E.data[z+3]=0:N=!1;return N}function R(E,w,k){let M=E.createElement("canvas");return M.width=w,M.height=k,M}},160:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;let u=n(399),h=0,a=0,o=0,m=0;var p,i,e;function d(s){let g=s.toString(16);return g.length<2?"0"+g:g}function f(s,g){return s<g?(g+.05)/(s+.05):(s+.05)/(g+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},function(s){s.toCss=function(g,L,b,R){return R!==void 0?`#${d(g)}${d(L)}${d(b)}${d(R)}`:`#${d(g)}${d(L)}${d(b)}`},s.toRgba=function(g,L,b,R=255){return(g<<24|L<<16|b<<8|R)>>>0}}(p=t.channels||(t.channels={})),function(s){function g(L,b){return m=Math.round(255*b),[h,a,o]=e.toChannels(L.rgba),{css:p.toCss(h,a,o,m),rgba:p.toRgba(h,a,o,m)}}s.blend=function(L,b){if(m=(255&b.rgba)/255,m===1)return{css:b.css,rgba:b.rgba};let R=b.rgba>>24&255,E=b.rgba>>16&255,w=b.rgba>>8&255,k=L.rgba>>24&255,M=L.rgba>>16&255,D=L.rgba>>8&255;return h=k+Math.round((R-k)*m),a=M+Math.round((E-M)*m),o=D+Math.round((w-D)*m),{css:p.toCss(h,a,o),rgba:p.toRgba(h,a,o)}},s.isOpaque=function(L){return(255&L.rgba)==255},s.ensureContrastRatio=function(L,b,R){let E=e.ensureContrastRatio(L.rgba,b.rgba,R);if(E)return e.toColor(E>>24&255,E>>16&255,E>>8&255)},s.opaque=function(L){let b=(255|L.rgba)>>>0;return[h,a,o]=e.toChannels(b),{css:p.toCss(h,a,o),rgba:b}},s.opacity=g,s.multiplyOpacity=function(L,b){return m=255&L.rgba,g(L,m*b/255)},s.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(t.color||(t.color={})),function(s){let g,L;if(!u.isNode){let b=document.createElement("canvas");b.width=1,b.height=1;let R=b.getContext("2d",{willReadFrequently:!0});R&&(g=R,g.globalCompositeOperation="copy",L=g.createLinearGradient(0,0,1,1))}s.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return h=parseInt(b.slice(1,2).repeat(2),16),a=parseInt(b.slice(2,3).repeat(2),16),o=parseInt(b.slice(3,4).repeat(2),16),e.toColor(h,a,o);case 5:return h=parseInt(b.slice(1,2).repeat(2),16),a=parseInt(b.slice(2,3).repeat(2),16),o=parseInt(b.slice(3,4).repeat(2),16),m=parseInt(b.slice(4,5).repeat(2),16),e.toColor(h,a,o,m);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}let R=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(R)return h=parseInt(R[1]),a=parseInt(R[2]),o=parseInt(R[3]),m=Math.round(255*(R[5]===void 0?1:parseFloat(R[5]))),e.toColor(h,a,o,m);if(!g||!L)throw new Error("css.toColor: Unsupported css format");if(g.fillStyle=L,g.fillStyle=b,typeof g.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(g.fillRect(0,0,1,1),[h,a,o,m]=g.getImageData(0,0,1,1).data,m!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(h,a,o,m),css:b}}}(t.css||(t.css={})),function(s){function g(L,b,R){let E=L/255,w=b/255,k=R/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))}s.relativeLuminance=function(L){return g(L>>16&255,L>>8&255,255&L)},s.relativeLuminance2=g}(i=t.rgb||(t.rgb={})),function(s){function g(b,R,E){let w=b>>24&255,k=b>>16&255,M=b>>8&255,D=R>>24&255,P=R>>16&255,W=R>>8&255,F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));for(;F<E&&(D>0||P>0||W>0);)D-=Math.max(0,Math.ceil(.1*D)),P-=Math.max(0,Math.ceil(.1*P)),W-=Math.max(0,Math.ceil(.1*W)),F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));return(D<<24|P<<16|W<<8|255)>>>0}function L(b,R,E){let w=b>>24&255,k=b>>16&255,M=b>>8&255,D=R>>24&255,P=R>>16&255,W=R>>8&255,F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));for(;F<E&&(D<255||P<255||W<255);)D=Math.min(255,D+Math.ceil(.1*(255-D))),P=Math.min(255,P+Math.ceil(.1*(255-P))),W=Math.min(255,W+Math.ceil(.1*(255-W))),F=f(i.relativeLuminance2(D,P,W),i.relativeLuminance2(w,k,M));return(D<<24|P<<16|W<<8|255)>>>0}s.ensureContrastRatio=function(b,R,E){let w=i.relativeLuminance(b>>8),k=i.relativeLuminance(R>>8);if(f(w,k)<E){if(k<w){let P=g(b,R,E),W=f(w,i.relativeLuminance(P>>8));if(W<E){let F=L(b,R,E);return W>f(w,i.relativeLuminance(F>>8))?P:F}return P}let M=L(b,R,E),D=f(w,i.relativeLuminance(M>>8));if(D<E){let P=g(b,R,E);return D>f(w,i.relativeLuminance(P>>8))?M:P}return M}},s.reduceLuminance=g,s.increaseLuminance=L,s.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},s.toColor=function(b,R,E,w){return{css:p.toCss(b,R,E,w),rgba:p.toRgba(b,R,E,w)}}}(e=t.rgba||(t.rgba={})),t.toPaddedHex=d,t.contrastRatio=f},345:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===n)return void this._listeners.splice(u,1)}}})),this._event}fire(n,u){let h=[];for(let a=0;a<this._listeners.length;a++)h.push(this._listeners[a]);for(let a=0;a<h.length;a++)h[a].call(void 0,n,u)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},t.forwardEvent=function(n,u){return n(h=>u.fire(h))}},859:(y,t)=>{function n(u){for(let h of u)h.dispose();u.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){let h=this._disposables.indexOf(u);h!==-1&&this._disposables.splice(h,1)}},t.toDisposable=function(u){return{dispose:u}},t.disposeArray=n,t.getDisposeArrayDisposable=function(u){return{dispose:()=>n(u)}}},485:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(h,a,o){this._data[h]||(this._data[h]={}),this._data[h][a]=o}get(h,a){return this._data[h]?this._data[h][a]:void 0}clear(){this._data={}}}t.TwoKeyMap=n,t.FourKeyMap=class{constructor(){this._data=new n}set(u,h,a,o,m){this._data.get(u,h)||this._data.set(u,h,new n),this._data.get(u,h).set(a,o,m)}get(u,h,a,o){var m;return(m=this._data.get(u,h))===null||m===void 0?void 0:m.get(a,o)}clear(){this._data.clear()}}},399:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode=typeof navigator=="undefined";let n=t.isNode?"node":navigator.userAgent,u=t.isNode?"node":navigator.platform;t.isFirefox=n.includes("Firefox"),t.isLegacyEdge=n.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(n),t.getSafariVersion=function(){if(!t.isSafari)return 0;let h=n.match(/Version\/(\d+)/);return h===null||h.length<2?0:parseInt(h[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),t.isIpad=u==="iPad",t.isIphone=u==="iPhone",t.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),t.isLinux=u.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(n)},385:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;let u=n(399);class h{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let p=0,i=0,e=m.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),i=Math.max(p,i),d=m.timeRemaining(),1.5*i>d)return e-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(e-p))}ms`),void this._start();e=d}this.clear()}}class a extends h{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){let p=Date.now()+m;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}t.PriorityTaskQueue=a,t.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends h{_requestCallback(o){return requestIdleCallback(o)}_cancelCallback(o){cancelIdleCallback(o)}}:a,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(o){this._queue.clear(),this._queue.enqueue(o)}flush(){this._queue.flush()}}},147:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(a){return[a>>>16&255,a>>>8&255,255&a]}static fromColorRGB(a){return(255&a[0])<<16|(255&a[1])<<8|255&a[2]}clone(){let a=new n;return a.fg=this.fg,a.bg=this.bg,a.extended=this.extended.clone(),a}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}t.AttributeData=n;class u{constructor(a=0,o=0){this._ext=0,this._urlId=0,this._ext=a,this._urlId=o}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(a){this._ext=a}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(a){this._ext&=-469762049,this._ext|=a<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(a){this._ext&=-67108864,this._ext|=67108863&a}get urlId(){return this._urlId}set urlId(a){this._urlId=a}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}t.ExtendedAttrs=u},782:(y,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;let u=n(133),h=n(855),a=n(147);class o extends a.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new a.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let i=new o;return i.setFromCharData(p),i}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[h.CHAR_DATA_ATTR_INDEX],this.bg=0;let i=!1;if(p[h.CHAR_DATA_CHAR_INDEX].length>2)i=!0;else if(p[h.CHAR_DATA_CHAR_INDEX].length===2){let e=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=e&&e<=56319){let d=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(e-55296)+d-56320+65536|p[h.CHAR_DATA_WIDTH_INDEX]<<22:i=!0}else i=!0}else this.content=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[h.CHAR_DATA_WIDTH_INDEX]<<22;i&&(this.combinedData=p[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[h.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},855:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},133:(y,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},t.utf32ToString=function(n,u=0,h=n.length){let a="";for(let o=u;o<h;++o){let m=n[o];m>65535?(m-=65536,a+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):a+=String.fromCharCode(m)}return a},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,u){let h=n.length;if(!h)return 0;let a=0,o=0;if(this._interim){let m=n.charCodeAt(o++);56320<=m&&m<=57343?u[a++]=1024*(this._interim-55296)+m-56320+65536:(u[a++]=this._interim,u[a++]=m),this._interim=0}for(let m=o;m<h;++m){let p=n.charCodeAt(m);if(55296<=p&&p<=56319){if(++m>=h)return this._interim=p,a;let i=n.charCodeAt(m);56320<=i&&i<=57343?u[a++]=1024*(p-55296)+i-56320+65536:(u[a++]=p,u[a++]=i)}else p!==65279&&(u[a++]=p)}return a}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,u){let h=n.length;if(!h)return 0;let a,o,m,p,i=0,e=0,d=0;if(this.interim[0]){let g=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let b,R=0;for(;(b=63&this.interim[++R])&&R<4;)L<<=6,L|=b;let E=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=E-R;for(;d<w;){if(d>=h)return 0;if(b=n[d++],(192&b)!=128){d--,g=!0;break}this.interim[R++]=b,L<<=6,L|=63&b}g||(E===2?L<128?d--:u[i++]=L:E===3?L<2048||L>=55296&&L<=57343||L===65279||(u[i++]=L):L<65536||L>1114111||(u[i++]=L)),this.interim.fill(0)}let f=h-4,s=d;for(;s<h;){for(;!(!(s<f)||128&(a=n[s])||128&(o=n[s+1])||128&(m=n[s+2])||128&(p=n[s+3]));)u[i++]=a,u[i++]=o,u[i++]=m,u[i++]=p,s+=4;if(a=n[s++],a<128)u[i++]=a;else if((224&a)==192){if(s>=h)return this.interim[0]=a,i;if(o=n[s++],(192&o)!=128){s--;continue}if(e=(31&a)<<6|63&o,e<128){s--;continue}u[i++]=e}else if((240&a)==224){if(s>=h)return this.interim[0]=a,i;if(o=n[s++],(192&o)!=128){s--;continue}if(s>=h)return this.interim[0]=a,this.interim[1]=o,i;if(m=n[s++],(192&m)!=128){s--;continue}if(e=(15&a)<<12|(63&o)<<6|63&m,e<2048||e>=55296&&e<=57343||e===65279)continue;u[i++]=e}else if((248&a)==240){if(s>=h)return this.interim[0]=a,i;if(o=n[s++],(192&o)!=128){s--;continue}if(s>=h)return this.interim[0]=a,this.interim[1]=o,i;if(m=n[s++],(192&m)!=128){s--;continue}if(s>=h)return this.interim[0]=a,this.interim[1]=o,this.interim[2]=m,i;if(p=n[s++],(192&p)!=128){s--;continue}if(e=(7&a)<<18|(63&o)<<12|(63&m)<<6|63&p,e<65536||e>1114111)continue;u[i++]=e}}return i}}}},_={};function v(y){var t=_[y];if(t!==void 0)return t.exports;var n=_[y]={exports:{}};return c[y](n,n.exports,v),n.exports}var x={};return(()=>{var y=x;Object.defineProperty(y,"__esModule",{value:!0}),y.WebglAddon=void 0;let t=v(345),n=v(859),u=v(399),h=v(666);class a extends n.Disposable{constructor(m){if(u.isSafari&&(0,u.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=m,this._onChangeTextureAtlas=this.register(new t.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new t.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new t.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new t.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(m){let p=m._core;if(!m.element)return void this.register(p.onWillOpen(()=>this.activate(m)));this._terminal=m;let i=p.coreService,e=p.optionsService,d=p,f=d._renderService,s=d._characterJoinerService,g=d._charSizeService,L=d._coreBrowserService,b=d._decorationService,R=d._themeService;this._renderer=this.register(new h.WebglRenderer(m,s,g,L,i,b,e,R,this._preserveDrawingBuffer)),this.register((0,t.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,t.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,t.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,t.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),f.setRenderer(this._renderer),this.register((0,n.toDisposable)(()=>{let E=this._terminal._core._renderService;E.setRenderer(this._terminal._core._createRenderer()),E.handleResize(m.cols,m.rows)}))}get textureAtlas(){var m;return(m=this._renderer)===null||m===void 0?void 0:m.textureAtlas}clearTextureAtlas(){var m;(m=this._renderer)===null||m===void 0||m.clearTextureAtlas()}}y.WebglAddon=a})(),x})()})});var ov={};Ue(ov,{TerminalPlugin:()=>fn,default:()=>nv});module.exports=dd(ov);var nu=require("obsidian");var ut=require("obsidian");var ks=require("obsidian");var Wi="utf-8";var _l=[0,"SIGINT","SIGTERM"],ml=500,vl=500;var vi=(()=>{let{userAgent:c}=navigator;return c.includes("like Mac")?"ios":c.includes("Android")?"android":c.includes("Mac")?"darwin":c.includes("Win")?"win32":c.includes("Linux")||c.includes("X11")?"linux":"unknown"})(),zi,_i,mi=class{constructor(){Ae(this,zi,Promise.resolve());Ae(this,_i,[])}async emit(..._){await Ce(this,zi);let v=Ce(this,_i).map(async x=>{await x(..._)});Ye(this,zi,Promise.allSettled(v)),await Promise.all(v)}listen(_){return Ce(this,_i).push(_),()=>{Ce(this,_i).remove(_)}}};zi=new WeakMap,_i=new WeakMap;var Ts=class{constructor(_){this.id=_}namespaced(_){return`${(_ instanceof ks.Plugin?_.manifest:_).id}:${this.id}`}};function Jt(c){return c instanceof Error?c:new Error(String(c))}function yl(c){let _=[];return async(...v)=>new Promise((x,y)=>{_.push({reject:y,resolve:x}),c(t=>{for(let n of _.splice(0))n.resolve(t)},t=>{for(let n of _.splice(0))n.reject(t)},...v)})}function Ln(c,_=""){let v=c.slice(Math.max(c.lastIndexOf("/"),c.lastIndexOf("\\"))+1);return v.endsWith(_)?v.slice(0,v.length-_.length):v}function bl(c,_){let v=c.codePointAt(0);if(typeof v=="undefined")return"";let x=String.fromCodePoint(v);return`${x.toLocaleUpperCase(_)}${c.slice(x.length)}`}function Sl(c,_,v,x){let y=c();return()=>x.replace(y,c()).replace(v,_())}function wl(c){return structuredClone(c)}function ji(c){return(_,v)=>{try{c(_,v)}catch(x){v(x)}}}function Cl(c){let _=Ln(c),v=_.lastIndexOf(".");return v===-1?"":_.slice(v)}function xl(c,_="text/plain; charset=UTF-8;",v=""){let x=document.createElement("a");x.target="_blank",x.download=v;let y=URL.createObjectURL(new Blob([c],{type:_}));try{x.href=y,x.click()}finally{URL.revokeObjectURL(y)}}async function yi(c){let _=await c();return new Promise(ji((v,x)=>{_.once("spawn",()=>{v(_)}).once("error",x)}))}function As(c){return Object.keys(c)}function Zt(c,_){return c.includes(_)}function Ll(c,_){return"__type"in _?_.__type===c:!1}function fd(c,_=0,v){let x=1e3*Math.max(_,0),y=new ks.Notice(c(),x);if(typeof v=="undefined")return y;let t=v.language.onChangeLanguage.listen(()=>y.setMessage(c()));try{x===0?v.register(t):window.setTimeout(t,x)}catch(n){console.warn(n),t()}return y}function Qt(c,_=0,v){_>=0&&fd(c,_,v)}function El(c,_,v=!1){let x=new IntersectionObserver((y,t)=>{var n;for(let u of v?y.reverse():[(n=y.last())!=null?n:{isIntersecting:!1}])if(u.isIntersecting){_(t,c,u);break}});return x.observe(c),x}function Rl(c){return window.open(c,"_blank","noreferrer")}function Dr(c,_=()=>"",v){var x;console.error(`${_()}
`,c),Qt(()=>`${_()}
${c.name}: ${c.message}`,(x=v==null?void 0:v.settings.errorNoticeTimeout)!=null?x:0,v)}function Tl(c){let _=c.getViewType(),v=c.getDisplayText(),x=document.querySelector(`.workspace-tab-header[data-type="${_}"]`);if(x===null)return!1;let y=x.querySelector(".workspace-tab-header-inner-title");if(y===null)return!1;let t=y.textContent;return t===null?!1:(y.textContent=v,x.ariaLabel=v,document.title=document.title.replace(t,v),!0)}async function Yr(c,_){return new Promise(ji((v,x)=>{let y=c.write(_,t=>{t?x(t):y&&v()});y||c.once("drain",v)}))}var En={};Ue(En,{commands:()=>pd,components:()=>gd,default:()=>wd,errors:()=>_d,menus:()=>md,name:()=>vd,notices:()=>yd,settings:()=>bd,types:()=>Sd});var pd={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},gd={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},_d={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},md={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},vd="Terminal",yd={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},bd={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Sd={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},wd={commands:pd,components:gd,errors:_d,menus:md,name:vd,notices:yd,settings:bd,types:Sd};var Rn={};Ue(Rn,{components:()=>Cd,default:()=>Ed,menus:()=>xd,settings:()=>Ld});var Cd={"terminal-icon":"terminal"},xd={"find-in-terminal-icon":"search","open-terminal-external-icon":"terminal-square","open-terminal-integrated-icon":"terminal","restart-terminal-icon":"reset","save-as-HTML-icon":"save"},Ld={"add-to-command-icon":"terminal","add-to-context-menu-icon":"menu","enable-Windows-conhost-workaround-icon":"code","error-notice-timeout-icon":"timer","executable-list-external-icon":"terminal-square","executable-list-integrated-icon":"terminal","hide-status-bar-icon":"eye-off","language-icon":"languages","notice-timeout-icon":"timer","preferred-renderer-icon":"brush","python-executable-icon":"scaling","reset-icon":"reset"},Ed={components:Cd,menus:xd,settings:Ld};var Tn={};Ue(Tn,{commands:()=>Rd,components:()=>Td,default:()=>Id,errors:()=>kd,menus:()=>Ad,name:()=>Md,notices:()=>Od,settings:()=>Dd,types:()=>Pd});var Rd={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Td={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},kd={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Ad={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Md="Terminal",Od={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Dd={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Pd={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},Id={commands:Rd,components:Td,errors:kd,menus:Ad,name:Md,notices:Od,settings:Dd,types:Pd};var kn={};Ue(kn,{commands:()=>Bd,components:()=>Fd,default:()=>jd,errors:()=>Ud,menus:()=>Nd,name:()=>Hd,notices:()=>Wd,settings:()=>zd,types:()=>$d});var Bd={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Fd={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},Ud={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Nd={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Hd="Terminal",Wd={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},zd={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},$d={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},jd={commands:Bd,components:Fd,errors:Ud,menus:Nd,name:Hd,notices:Wd,settings:zd,types:$d};var An={};Ue(An,{commands:()=>Gd,components:()=>qd,default:()=>Qd,errors:()=>Vd,menus:()=>Xd,name:()=>Kd,notices:()=>Yd,settings:()=>Jd,types:()=>Zd});var Gd={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},qd={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},Vd={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Xd={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Kd="Terminal",Yd={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Jd={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Zd={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},Qd={commands:Gd,components:qd,errors:Vd,menus:Xd,name:Kd,notices:Yd,settings:Jd,types:Zd};var Mn={};Ue(Mn,{commands:()=>ef,components:()=>tf,default:()=>cf,errors:()=>rf,menus:()=>sf,name:()=>nf,notices:()=>of,settings:()=>af,types:()=>lf});var ef={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},tf={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},rf={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},sf={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},nf="Terminal",of={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},af={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},lf={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},cf={commands:ef,components:tf,errors:rf,menus:sf,name:nf,notices:of,settings:af,types:lf};var On={};Ue(On,{commands:()=>hf,components:()=>uf,default:()=>vf,errors:()=>df,menus:()=>ff,name:()=>pf,notices:()=>gf,settings:()=>_f,types:()=>mf});var hf={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},uf={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},df={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},ff={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},pf="Terminal",gf={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},_f={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},mf={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},vf={commands:hf,components:uf,errors:df,menus:ff,name:pf,notices:gf,settings:_f,types:mf};var Dn={};Ue(Dn,{commands:()=>yf,components:()=>bf,default:()=>Rf,errors:()=>Sf,menus:()=>wf,name:()=>Cf,notices:()=>xf,settings:()=>Lf,types:()=>Ef});var yf={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},bf={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},Sf={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},wf={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Cf="Terminal",xf={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Lf={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Ef={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},Rf={commands:yf,components:bf,errors:Sf,menus:wf,name:Cf,notices:xf,settings:Lf,types:Ef};var Pn={};Ue(Pn,{commands:()=>Tf,components:()=>kf,default:()=>Bf,errors:()=>Af,menus:()=>Mf,name:()=>Of,notices:()=>Df,settings:()=>Pf,types:()=>If});var Tf={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},kf={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},Af={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Mf={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Of="Terminal",Df={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Pf={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},If={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},Bf={commands:Tf,components:kf,errors:Af,menus:Mf,name:Of,notices:Df,settings:Pf,types:If};var In={};Ue(In,{commands:()=>Ff,components:()=>Uf,default:()=>Gf,errors:()=>Nf,menus:()=>Hf,name:()=>Wf,notices:()=>zf,settings:()=>$f,types:()=>jf});var Ff={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Uf={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},Nf={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Hf={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Wf="Terminal",zf={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},$f={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},jf={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},Gf={commands:Ff,components:Uf,errors:Nf,menus:Hf,name:Wf,notices:zf,settings:$f,types:jf};var Bn={};Ue(Bn,{commands:()=>qf,components:()=>Vf,default:()=>ep,errors:()=>Xf,menus:()=>Kf,name:()=>Yf,notices:()=>Jf,settings:()=>Zf,types:()=>Qf});var qf={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Vf={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},Xf={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Kf={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Yf="Terminal",Jf={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Zf={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Qf={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},ep={commands:qf,components:Vf,errors:Xf,menus:Kf,name:Yf,notices:Jf,settings:Zf,types:Qf};var Fn={};Ue(Fn,{commands:()=>tp,components:()=>rp,default:()=>cp,errors:()=>ip,menus:()=>sp,name:()=>np,notices:()=>op,settings:()=>ap,types:()=>lp});var tp={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},rp={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},ip={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},sp={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},np="Terminal",op={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},ap={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},lp={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},cp={commands:tp,components:rp,errors:ip,menus:sp,name:np,notices:op,settings:ap,types:lp};var Un={};Ue(Un,{commands:()=>hp,components:()=>up,default:()=>vp,errors:()=>dp,menus:()=>fp,name:()=>pp,notices:()=>gp,settings:()=>_p,types:()=>mp});var hp={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},up={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},dp={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},fp={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},pp="Terminal",gp={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},_p={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},mp={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},vp={commands:hp,components:up,errors:dp,menus:fp,name:pp,notices:gp,settings:_p,types:mp};var Nn={};Ue(Nn,{am:()=>yp,cs:()=>bp,da:()=>Sp,de:()=>wp,default:()=>$p,en:()=>Cp,es:()=>xp,fa:()=>Lp,fr:()=>Ep,id:()=>Rp,it:()=>Tp,ja:()=>kp,ko:()=>Ap,nl:()=>Mp,no:()=>Op,pl:()=>Dp,pt:()=>Pp,"pt-BR":()=>Ip,ro:()=>Bp,ru:()=>Fp,sq:()=>Up,th:()=>Np,tr:()=>Hp,"zh-Hans":()=>Wp,"zh-Hant":()=>zp});var yp="\u12A0\u121B\u122D\u129B \u{1F6A7}",bp="\u010De\u0161tina \u{1F6A7}",Sp="Dansk \u{1F6A7}",wp="Deutsch \u{1F6A7}",Cp="English",xp="Espa\xF1ol \u{1F6A7}",Lp="\u0641\u0627\u0631\u0633\u06CC \u{1F6A7}",Ep="fran\xE7ais \u{1F6A7}",Rp="Bahasa Indonesia \u{1F6A7}",Tp="Italiano \u{1F6A7}",kp="\u65E5\u672C\u8A9E \u{1F6A7}",Ap="\uD55C\uAD6D\uC5B4 \u{1F6A7}",Mp="Nederlands \u{1F6A7}",Op="Norsk \u{1F6A7}",Dp="j\u0119zyk polski \u{1F6A7}",Pp="Portugu\xEAs \u{1F6A7}",Ip="Portugues do Brasil \u{1F6A7}",Bp="Rom\xE2n\u0103 \u{1F6A7}",Fp="\u0420\u0443\u0441\u0441\u043A\u0438\u0439 \u{1F6A7}",Up="Shqip \u{1F6A7}",Np="\u0E44\u0E17\u0E22 \u{1F6A7}",Hp="T\xFCrk\xE7e \u{1F6A7}",Wp="\u7B80\u4F53\u4E2D\u6587",zp="\u7E41\u9AD4\u4E2D\u6587",$p={am:yp,cs:bp,da:Sp,de:wp,en:Cp,es:xp,fa:Lp,fr:Ep,id:Rp,it:Tp,ja:kp,ko:Ap,nl:Mp,no:Op,pl:Dp,pt:Pp,"pt-BR":Ip,ro:Bp,ru:Fp,sq:Up,th:Np,tr:Hp,"zh-Hans":Wp,"zh-Hant":zp};var Hn={};Ue(Hn,{commands:()=>jp,components:()=>Gp,default:()=>Zp,errors:()=>qp,menus:()=>Vp,name:()=>Xp,notices:()=>Kp,settings:()=>Yp,types:()=>Jp});var jp={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Gp={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},qp={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Vp={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Xp="Terminal",Kp={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Yp={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Jp={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},Zp={commands:jp,components:Gp,errors:qp,menus:Vp,name:Xp,notices:Kp,settings:Yp,types:Jp};var Wn={};Ue(Wn,{commands:()=>Qp,components:()=>eg,default:()=>ag,errors:()=>tg,menus:()=>rg,name:()=>ig,notices:()=>sg,settings:()=>ng,types:()=>og});var Qp={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},eg={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},tg={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},rg={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},ig="Terminal",sg={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},ng={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},og={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},ag={commands:Qp,components:eg,errors:tg,menus:rg,name:ig,notices:sg,settings:ng,types:og};var zn={};Ue(zn,{commands:()=>lg,components:()=>cg,default:()=>_g,errors:()=>hg,menus:()=>ug,name:()=>dg,notices:()=>fg,settings:()=>pg,types:()=>gg});var lg={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},cg={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},hg={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},ug={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},dg="Terminal",fg={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},pg={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},gg={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},_g={commands:lg,components:cg,errors:hg,menus:ug,name:dg,notices:fg,settings:pg,types:gg};var $n={};Ue($n,{commands:()=>mg,components:()=>vg,default:()=>Lg,errors:()=>yg,menus:()=>bg,name:()=>Sg,notices:()=>wg,settings:()=>Cg,types:()=>xg});var mg={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},vg={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},yg={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},bg={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Sg="Terminal",wg={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Cg={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},xg={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},Lg={commands:mg,components:vg,errors:yg,menus:bg,name:Sg,notices:wg,settings:Cg,types:xg};var jn={};Ue(jn,{commands:()=>Eg,components:()=>Rg,default:()=>Pg,errors:()=>Tg,menus:()=>kg,name:()=>Ag,notices:()=>Mg,settings:()=>Og,types:()=>Dg});var Eg={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Rg={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},Tg={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},kg={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Ag="Terminal",Mg={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Og={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Dg={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},Pg={commands:Eg,components:Rg,errors:Tg,menus:kg,name:Ag,notices:Mg,settings:Og,types:Dg};var Gn={};Ue(Gn,{commands:()=>Ig,components:()=>Bg,default:()=>$g,errors:()=>Fg,menus:()=>Ug,name:()=>Ng,notices:()=>Hg,settings:()=>Wg,types:()=>zg});var Ig={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Bg={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},Fg={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Ug={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Ng="Terminal",Hg={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Wg={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},zg={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},$g={commands:Ig,components:Bg,errors:Fg,menus:Ug,name:Ng,notices:Hg,settings:Wg,types:zg};var qn={};Ue(qn,{commands:()=>jg,components:()=>Gg,default:()=>Zg,errors:()=>qg,menus:()=>Vg,name:()=>Xg,notices:()=>Kg,settings:()=>Yg,types:()=>Jg});var jg={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Gg={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},qg={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Vg={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Xg="Terminal",Kg={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Yg={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Jg={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},Zg={commands:jg,components:Gg,errors:qg,menus:Vg,name:Xg,notices:Kg,settings:Yg,types:Jg};var Vn={};Ue(Vn,{commands:()=>Qg,components:()=>e_,default:()=>a_,errors:()=>t_,menus:()=>r_,name:()=>i_,notices:()=>s_,settings:()=>n_,types:()=>o_});var Qg={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},e_={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},t_={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},r_={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},i_="Terminal",s_={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},n_={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},o_={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},a_={commands:Qg,components:e_,errors:t_,menus:r_,name:i_,notices:s_,settings:n_,types:o_};var Xn={};Ue(Xn,{commands:()=>l_,components:()=>c_,default:()=>__,errors:()=>h_,menus:()=>u_,name:()=>d_,notices:()=>f_,settings:()=>p_,types:()=>g_});var l_={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},c_={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},h_={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},u_={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},d_="Terminal",f_={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},p_={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},g_={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},__={commands:l_,components:c_,errors:h_,menus:u_,name:d_,notices:f_,settings:p_,types:g_};var Kn={};Ue(Kn,{commands:()=>m_,components:()=>v_,default:()=>L_,errors:()=>y_,menus:()=>b_,name:()=>S_,notices:()=>w_,settings:()=>C_,types:()=>x_});var m_={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},v_={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`\r
 * Restored history at {{- time}}\r
`}},y_={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},b_={"find-in-terminal":"Find in terminal","open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},S_="Terminal",w_={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},C_={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},x_={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"},terminals:{external:"External",integrated:"Integrated"}},L_={commands:m_,components:v_,errors:y_,menus:b_,name:S_,notices:w_,settings:C_,types:x_};var Yn={};Ue(Yn,{commands:()=>E_,components:()=>T_,default:()=>P_,errors:()=>R_,menus:()=>k_,name:()=>A_,notices:()=>M_,settings:()=>O_,types:()=>D_});var E_={"open-terminal-external-root":"\u5728\u5916\u90E8\u7EC8\u7AEF\u5F00\u555F\u6839\u76EE\u9332","open-terminal-external-current":"\u5728\u5916\u90E8\u7EC8\u7AEF\u5F00\u555F\u76EE\u524D\u76EE\u9332","open-terminal-integrated-root":"\u5728\u6574\u5408\u5F0F\u7EC8\u7AEF\u5F00\u555F\u6839\u76EE\u9332","open-terminal-integrated-current":"\u5728\u6574\u5408\u5F0F\u7EC8\u7AEF\u5F00\u555F\u76EE\u524D\u76EE\u9332"},R_={"cannot-find-status-bar":"\u627E\u4E0D\u5230\u72B6\u6001\u680F","error-spawning-terminal":"\u555F\u52A8\u7EC8\u7AEF\u65F6\u51FA\u9519","error-spawning-resizer":"\u555F\u52A8\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u65F6\u51FA\u9519","failed-to-kill-pseudoterminal":"\u7EC8\u6B62\u4F2A\u7EC8\u7AEF\u5931\u8D25","no-python-to-start-unix-pseudoterminal":"\u6CA1\u6709Python\u6765\u542F\u52A8Unix\u4F2A\u7EC8\u7AEF","resizer-disabled":"\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u5DF2\u7981\u7528","resizer-exited-unexpectedly":"\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u610F\u5916\u9000\u51FA\uFF1A{{- code}}","unsupported-platform":"\u4E0D\u652F\u6301\u6B64\u5E73\u53F0"},T_={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"\u7EC8\u7AEF\uFF1A{{- executable}}","restored-history":`\r
 * \u5DF2\u8FD8\u539F\u4E8E{{- time}}\u7684\u5386\u53F2\r
`}},k_={"find-in-terminal":"\u5728\u7EC8\u7AEF\u4E2D\u641C\u7D22","open-terminal-external":"\u5728\u5916\u90E8\u7EC8\u7AEF\u5F00\u555F","open-terminal-integrated":"\u5728\u6574\u5408\u5F0F\u7EC8\u7AEF\u5F00\u555F","restart-terminal":"\u91CD\u542F\u7EC8\u7AEF\uFF08\u548C\u7F29\u653E\u8FF8\u7A0B\uFF09","save-as-HTML":"\u50A8\u5B58\u4E3A HTML"},A_="\u7EC8\u7AEF",M_={"spawning-terminal":"\u7EC8\u7AEF\u555F\u52A8\u4E2D\uFF1A{{- executable}}","terminal-exited":"\u7EC8\u7AEF\u5DF2\u9000\u51FA\uFF1A{{- code}}"},O_={"add-to-command":"\u52A0\u5165\u81F3\u547D\u4EE4","add-to-context-menu":"\u52A0\u5165\u81F3\u53F3\u952E\u9009\u5355","advanced-settings":"\u9AD8\u7EA7\u8BBE\u7F6E","enable-Windows-conhost-workaround":"\u542F\u7528Microsoft Windows\u300Cconhost.exe\u300D\u89E3\u51B3\u65B9\u6CD5","enable-Windows-conhost-workaround-description":"\u5982\u679C\u6267\u884C\u300Cconhost.exe\u300D\u6CA1\u6709\u521B\u5EFA\u89C6\u7A97\uFF0C\u8BF7\u7981\u7528\u3002\u65E0\u4FDD\u8BC1\u8FD9\u4F1A\u8D77\u4F5C\u7528\u3002","error-notice-timeout":"\u9519\u8BEF\u901A\u77E5\u8D85\u65F6\uFF08\u79D2\uFF09","error-notice-timeout-description":"\u8BBE\u4E3A0\u79D2\u662F\u65E0\u8D85\u65F6\u3002\u8BBE\u4E3A\u8D1F\u6570\u4EE5\u7981\u7528\u901A\u77E5\u3002",executables:"\u53EF\u6267\u884C\u6587\u4EF6","hide-status-bar":"\u9690\u85CF\u72B6\u6001\u680F","hide-status-bar-options":{never:"\u4ECE\u4E0D",always:"\u603B\u662F",focused:"\u5F53\u805A\u7126\u7EC8\u7AEF\u65F6",running:"\u5F53\u6267\u884C\u7EC8\u7AEF\u65F6"},language:"\u8BED\u8A00","language-default":"\u4F7F\u7528\u5E94\u7528\u8BBE\u5B9A","language-description":"\u4EC5\u9002\u7528\u65BC\u6B64\u63D2\u4EF6\u3002\u6807\u6709\u{1F6A7}\u7684\u8BED\u8A00\u9700\u8981\u60A8\u5E2E\u52A9\u6765\u7FFB\u8BD1\uFF01","notice-timeout":"\u901A\u77E5\u8D85\u65F6\uFF08\u79D2\uFF09","notice-timeout-description":"\u8BBE\u4E3A0\u79D2\u662F\u65E0\u8D85\u65F6\u3002\u8BBE\u4E3A\u8D1F\u6570\u4EE5\u7981\u7528\u901A\u77E5\u3002","preferred-renderer":"\u9996\u9009\u6E32\u67D3\u5668","python-executable":"Python\u53EF\u6267\u884C\u6587\u4EF6","python-executable-description":"\u4E8EUnix\u542F\u52A8\u6574\u5408\u5F0F\u7EC8\u7AEF\u6240\u9700\u8981\u7684\u3002\u6E05\u9664\u6587\u672C\u6846\u4EE5\u7981\u7528Python\u3002","python-executable-placeholder":"\uFF08\u5DF2\u7981\u7528\uFF09",reset:"\u91CD\u8BBE","reset-all":"\u91CD\u8BBE\u5168\u90E8"},D_={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"\u753B\u5E03",dom:"\u6587\u4EF6\u7269\u4EF6\u6A21\u578B",webgl:"WebGL"},terminals:{external:"\u5916\u90E8",integrated:"\u6574\u5408\u5F0F"}},P_={commands:E_,errors:R_,components:T_,menus:k_,name:A_,notices:M_,settings:O_,types:D_};var Jn={};Ue(Jn,{commands:()=>I_,components:()=>B_,default:()=>$_,errors:()=>F_,menus:()=>U_,name:()=>N_,notices:()=>H_,settings:()=>W_,types:()=>z_});var I_={"open-terminal-external-root":"\u5728\u5916\u90E8\u7D42\u7AEF\u958B\u555F\u6839\u76EE\u9304","open-terminal-external-current":"\u5728\u5916\u90E8\u7D42\u7AEF\u958B\u555F\u76EE\u524D\u76EE\u9304","open-terminal-integrated-root":"\u5728\u6574\u5408\u5F0F\u7D42\u7AEF\u958B\u555F\u6839\u76EE\u9304","open-terminal-integrated-current":"\u5728\u6574\u5408\u5F0F\u7D42\u7AEF\u958B\u555F\u76EE\u524D\u76EE\u9304"},B_={find:{"search-results":"{{- index}}/{{- number}}","too-many-search-results":"?/1000+"},terminal:{"display-name":"\u7D42\u7AEF\uFF1A{{- executable}}","restored-history":`\r
 * \u5DF2\u9084\u539F\u65BC{{- time}}\u7684\u6B77\u53F2\r
`}},F_={"cannot-find-status-bar":"\u627E\u4E0D\u5230\u72C0\u614B\u6B04","error-spawning-terminal":"\u555F\u52D5\u7D42\u7AEF\u6642\u51FA\u932F","error-spawning-resizer":"\u555F\u52D5\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u6642\u51FA\u932F","failed-to-kill-pseudoterminal":"\u7D42\u6B62\u507D\u7D42\u7AEF\u5931\u6557","no-python-to-start-unix-pseudoterminal":"\u6C92\u6709Python\u4F86\u555F\u52D5Unix\u507D\u7D42\u7AEF","resizer-disabled":"\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u5DF2\u7981\u7528","resizer-exited-unexpectedly":"\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u610F\u5916\u9000\u51FA\uFF1A{{- code}}","unsupported-platform":"\u4E0D\u652F\u6301\u6B64\u5E73\u53F0"},U_={"find-in-terminal":"\u5728\u7D42\u7AEF\u4E2D\u641C\u5C0B","open-terminal-external":"\u5728\u5916\u90E8\u7D42\u7AEF\u958B\u555F","open-terminal-integrated":"\u5728\u6574\u5408\u5F0F\u7D42\u7AEF\u958B\u555F","restart-terminal":"\u91CD\u555F\u7D42\u7AEF\uFF08\u548C\u7E2E\u653E\u7A0B\u5F0F\uFF09","save-as-HTML":"\u5132\u5B58\u70BA HTML"},N_="\u7D42\u7AEF",H_={"spawning-terminal":"\u7D42\u7AEF\u555F\u52D5\u4E2D\uFF1A{{- executable}}","terminal-exited":"\u7D42\u7AEF\u5DF2\u9000\u51FA\uFF1A{{- code}}"},W_={"add-to-command":"\u52A0\u5165\u81F3\u547D\u4EE4","add-to-context-menu":"\u52A0\u5165\u81F3\u53F3\u9375\u9078\u55AE","advanced-settings":"\u9AD8\u7D1A\u8A2D\u7F6E","enable-Windows-conhost-workaround":"\u555F\u7528Microsoft Windows\u300Cconhost.exe\u300D\u89E3\u6C7A\u65B9\u6CD5","enable-Windows-conhost-workaround-description":"\u5982\u679C\u57F7\u884C\u300Cconhost.exe\u300D\u6C92\u6709\u5275\u5EFA\u8996\u7A97\uFF0C\u8ACB\u7981\u7528\u3002\u7121\u4FDD\u8B49\u9019\u6703\u8D77\u4F5C\u7528\u3002","error-notice-timeout":"\u932F\u8AA4\u901A\u77E5\u8D85\u6642\uFF08\u79D2\uFF09","error-notice-timeout-description":"\u8A2D\u70BA0\u79D2\u662F\u7121\u8D85\u6642\u3002\u8A2D\u70BA\u8CA0\u6578\u4EE5\u7981\u7528\u901A\u77E5\u3002",executables:"\u57F7\u884C\u6A94","hide-status-bar":"\u96B1\u85CF\u72C0\u614B\u6B04","hide-status-bar-options":{never:"\u5F9E\u4E0D",always:"\u7E3D\u662F",focused:"\u7576\u805A\u7126\u7D42\u7AEF\u6642",running:"\u7576\u57F7\u884C\u7D42\u7AEF\u6642"},language:"\u8A9E\u8A00","language-default":"\u4F7F\u7528\u61C9\u7528\u7A0B\u5F0F\u8A2D\u5B9A","language-description":"\u50C5\u9069\u7528\u65BC\u6B64\u5916\u639B\u7A0B\u5F0F\u3002\u6A19\u6709\u{1F6A7}\u7684\u8A9E\u8A00\u9700\u8981\u60A8\u5E6B\u52A9\u4F86\u7FFB\u8B6F\uFF01","notice-timeout":"\u901A\u77E5\u8D85\u6642\uFF08\u79D2\uFF09","notice-timeout-description":"\u8A2D\u70BA0\u79D2\u662F\u7121\u8D85\u6642\u3002\u8A2D\u70BA\u8CA0\u6578\u4EE5\u7981\u7528\u901A\u77E5\u3002","preferred-renderer":"\u9996\u9078\u6E32\u67D3\u5668","python-executable":"Python\u57F7\u884C\u6A94","python-executable-description":"\u65BCUnix\u555F\u52D5\u6574\u5408\u5F0F\u7D42\u7AEF\u6240\u9700\u8981\u7684\u3002\u6E05\u9664\u6587\u5B57\u57DF\u4EE5\u7981\u7528Python\u3002","python-executable-placeholder":"\uFF08\u5DF2\u7981\u7528\uFF09",reset:"\u91CD\u8A2D","reset-all":"\u91CD\u8A2D\u5168\u90E8"},z_={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},renderers:{canvas:"\u756B\u5E03",dom:"\u6587\u4EF6\u7269\u4EF6\u6A21\u578B",webgl:"WebGL"},terminals:{external:"\u5916\u90E8",integrated:"\u6574\u5408\u5F0F"}},$_={commands:I_,components:B_,errors:F_,menus:U_,name:N_,notices:H_,settings:W_,types:z_};var kl=!1,We="translation",Jr="en",Al={default:[Jr],zh:["zh-Hans",Jr],"zh-CN":["zh-Hans","zh",Jr],"zh-TW":["zh-Hant","zh",Jr]},Gi={am:{[We]:En},cs:{[We]:Tn},da:{[We]:kn},de:{[We]:An},en:{[We]:Mn,asset:Rn,language:Nn},es:{[We]:On},fa:{[We]:Dn},fr:{[We]:Pn},id:{[We]:In},it:{[We]:Bn},ja:{[We]:Fn},ko:{[We]:Un},nl:{[We]:Hn},no:{[We]:Wn},pl:{[We]:zn},pt:{[We]:$n},"pt-BR":{[We]:jn},ro:{[We]:Gn},ru:{[We]:qn},sq:{[We]:Vn},th:{[We]:Xn},tr:{[We]:Kn},"zh-Hans":{[We]:Yn},"zh-Hant":{[We]:Jn}};(function(_){})(Gi[Jr].language);var Zc=Yt(Ol());var Qc=Yt(Dl()),eh=Yt(Pl());var th=require("obsidian");var Jc={tmp:()=>Yc()};async function ri(c){return Zt(As(Jc),c)?Jc[c]():require(c)}var l0=ri("node:child_process");async function rh(c,_,v){let x=await yi(async()=>(await l0).spawn(c,v!=null?v:[],{cwd:_,detached:!0,shell:!0,stdio:["ignore","ignore","ignore"]}));try{x.unref()}catch(y){console.warn(y)}return x}var ii,Qi,qs,js=class{constructor(_,v,x,y,t,n){this.plugin=_;Ke(this,"terminal");Ke(this,"addons");Ke(this,"onExit");Ae(this,ii,void 0);Ae(this,Qi,!1);Ae(this,qs,yl((0,th.debounce)(async(_,v,x,y,t)=>{try{try{await(await Ce(this,ii)).resize(x,y)}catch(n){if(t)throw n}this.terminal.resize(x,y),_()}catch(n){v(n)}},ml,!1)));this.terminal=new Zc.Terminal(t);let{terminal:u}=this;u.open(v),this.addons=Object.assign({fit:new Qc.FitAddon,serialize:new eh.SerializeAddon},n);for(let h of Object.values(this.addons))u.loadAddon(h);typeof y!="undefined"&&(u.resize(y.columns,y.rows),u.write(y.data)),Ye(this,ii,(async()=>{let h=await x(u);return await h.pipe(u),h})()),this.onExit=Ce(this,ii).then(async h=>h.onExit).finally(()=>{Ye(this,Qi,!0)})}async close(){var _,v;if(Ce(this,Qi)||((v=(_=await Ce(this,ii).then(async x=>x.shell).catch(()=>null))==null?void 0:_.kill())==null||v)){this.terminal.dispose();return}throw new Error(this.plugin.language.i18n.t("errors.failed-to-kill-pseudoterminal"))}async resize(_=!0){let{fit:v}=this.addons,x=v.proposeDimensions();typeof x!="undefined"&&await Ce(this,qs).call(this,x.cols,x.rows,_)}serialize(){return{columns:this.terminal.cols,data:this.addons.serialize.serialize({excludeAltBuffer:!0,excludeModes:!0}),rows:this.terminal.rows}}};ii=new WeakMap,Qi=new WeakMap,qs=new WeakMap;var Gs=class extends Array{activate(_){}dispose(){for(let _ of this)_()}},Ei,Er=class{constructor(_,v){this.canvasSupplier=_;this.webglSupplier=v;Ke(this,"renderer",null);Ae(this,Ei,null)}use(_){var x;let v=Ce(this,Ei);if(v!==null)switch((x=this.renderer)==null||x.dispose(),_){case"dom":this.renderer=null;break;case"canvas":try{let y=this.canvasSupplier();v.loadAddon(this.renderer=y);break}catch(y){console.warn(y),this.use("dom")}break;case"webgl":{try{let y=this.webglSupplier(),t=y.onContextLoss(()=>{try{this.use("webgl")}finally{t.dispose()}});v.loadAddon(this.renderer=y)}catch(y){console.warn(y),this.use("canvas")}break}default:throw new TypeError(_)}}activate(_){Ye(this,Ei,_)}dispose(){var _;(_=this.renderer)==null||_.dispose(),Ye(this,Ei,null)}};Ei=new WeakMap;(_=>_.RENDERER_OPTIONS=["dom","canvas","webgl"])(Er||(Er={}));var ih=`# -*- coding: UTF-8
# dependencies: (none)

import fcntl as _fcntl
import os as _os
import pty as _pty
import selectors as _selectors
import struct as _struct
import sys as _sys
import termios as _termios
import typing as _typing

if _sys.platform != "win32":
    CHUNK_SIZE = 1024
    STDIN = _sys.stdin.fileno()
    STDOUT = _sys.stdout.fileno()
    CMDIO = 3

    pid: int
    pty_fd: int
    pid, pty_fd = _pty.fork()  # type: ignore
    if pid == 0:
        _os.execvpe(
            _sys.argv[1], _sys.argv[1:], _os.environ | {"TERM": "xterm-256color"}
        )

    def _write_all(fd: int, data: bytes) -> None:
        while data:
            data = data[_os.write(fd, data) :]

    with _selectors.DefaultSelector() as selector:
        running = True

        def pipe_pty():
            try:
                data = _os.read(pty_fd, CHUNK_SIZE)
            except OSError:
                data = b""
            if not data:
                selector.unregister(pty_fd)
                global running
                running = False
                return
            _write_all(STDOUT, data)

        def pipe_stdin():
            data = _os.read(STDIN, CHUNK_SIZE)
            if not data:
                selector.unregister(STDIN)
                return
            _write_all(pty_fd, data)

        def process_cmdio():
            data = _os.read(CMDIO, CHUNK_SIZE)
            if not data:
                selector.unregister(CMDIO)
                return
            for line in data.decode("UTF-8", "strict").splitlines():
                rows, columns = _typing.cast(
                    tuple[int, int],
                    tuple(int(ss.strip()) for ss in line.split("x", 2)),
                )
                _fcntl.ioctl(
                    pty_fd,
                    _termios.TIOCSWINSZ,
                    _struct.pack("HHHH", columns, rows, 0, 0),
                )

        selector.register(pty_fd, _selectors.EVENT_READ, pipe_pty)
        selector.register(STDIN, _selectors.EVENT_READ, pipe_stdin)
        selector.register(CMDIO, _selectors.EVENT_READ, process_cmdio)
        while running:
            for key, _ in selector.select():
                key.data()

    _sys.exit(_os.waitstatus_to_exitcode(_os.waitpid(pid, 0)[1]))
else:
    raise NotImplementedError(_sys.platform)
`;var sh=`# -*- coding: UTF-8 -*-\r
# dependencies: psutil, pywinctl\r
\r
import contextlib as _contextlib\r
import itertools as _itertools\r
import psutil as _psutil\r
import pywinctl as _pywinctl  # type: ignore\r
import pywintypes as _pywintypes\r
import sys as _sys\r
import time as _time\r
import types as _types\r
import typing as _typing\r
import win32api as _win32api\r
import win32con as _win32con\r
import win32console as _win32console\r
import win32file as _win32file\r
import win32gui as _win32gui\r
import win32process as _win32process\r
\r
if _sys.platform == "win32":\r
    LOOKUP_RETRY_INTERVAL = 1\r
    LOOKUP_RETRIES = 10\r
    RESIZE_ITERATIONS = 2\r
\r
    def main() -> None:\r
        pid = int(input("PID: "))\r
        print(f"received: {pid}")\r
        proc = _psutil.Process(pid)\r
        procs: _typing.Mapping[int, _psutil.Process] = {}\r
        windows: _typing.Sequence[_pywinctl.BaseWindow] = ()\r
        for tries in range(LOOKUP_RETRIES):\r
            procs = _types.MappingProxyType(\r
                {\r
                    proc.pid: proc\r
                    for proc in _itertools.chain((proc,), proc.children(recursive=True))\r
                }\r
            )\r
            print(f"process(es) (try {tries + 1}): {procs}")\r
            windows = _pywinctl.getAllWindows()\r
            print(f"window(s) (try {tries + 1}): {windows}")\r
            for win in windows:\r
                win_pid = win_to_pid(win)\r
                if win_pid in procs:\r
                    resizer(procs[win_pid], win)\r
                    return\r
            _time.sleep(LOOKUP_RETRY_INTERVAL)\r
        raise LookupError(procs, windows)\r
\r
    def win_to_pid(window: _pywinctl.Window) -> int:\r
        return _win32process.GetWindowThreadProcessId(window.getHandle())[1]\r
\r
    def resizer(process: _psutil.Process, window: _pywinctl.BaseWindow) -> None:\r
        print(f"window: {window}")\r
        r_in = resizer_in(process)\r
        r_out = resizer_out(process, window)\r
        next(r_out)\r
        for size in r_in:\r
            r_out.send(size)\r
\r
    def resizer_in(process: _psutil.Process) -> _typing.Iterator[tuple[int, int]]:\r
        while True:\r
            size0 = ""\r
            while not size0:  # stdin watchdog triggers this loop\r
                if not process.is_running():\r
                    return\r
                size0 = input("size: ")\r
            size = _typing.cast(\r
                tuple[int, int],\r
                tuple(int(s.strip()) for s in size0.split("x", 2)),\r
            )\r
            print(f"received: {'x'.join(map(str, size))}")\r
            yield size\r
\r
    def resizer_out(\r
        process: _psutil.Process, window: _pywinctl.BaseWindow\r
    ) -> _typing.Generator[None, tuple[int, int], None]:\r
        window.hide(True)\r
\r
        @_typing.final\r
        class ConsoleScreenBufferInfo(_typing.TypedDict):\r
            Size: _win32console.PyCOORDType\r
            CursorPosition: _win32console.PyCOORDType\r
            Attributes: int\r
            Window: _win32console.PySMALL_RECTType\r
            MaximumWindowSize: _win32console.PyCOORDType\r
\r
        def ignore_error(func: _typing.Callable[[], None]) -> bool:\r
            try:\r
                func()\r
                return True\r
            except _pywintypes.error:\r
                return False\r
\r
        @_contextlib.contextmanager\r
        def attach_console(\r
            pid: int,\r
        ) -> _typing.Iterator[_win32console.PyConsoleScreenBufferType]:\r
            try:\r
                _win32console.AttachConsole(pid)  # type: ignore\r
                yield (_win32console.PyConsoleScreenBufferType)(  # type: ignore\r
                    _win32file.CreateFile(\r
                        "CONOUT$",\r
                        _win32file.GENERIC_READ | _win32file.GENERIC_WRITE,\r
                        _win32file.FILE_SHARE_WRITE,\r
                        None,\r
                        _win32file.OPEN_EXISTING,\r
                        0,\r
                        None,\r
                    )  # GetStdHandle gives the piped handle instead of the console handle\r
                )\r
            finally:\r
                _win32console.FreeConsole()\r
\r
        def console_ctrl_handler(event: int) -> bool:\r
            if event in (\r
                _win32con.CTRL_C_EVENT,\r
                _win32con.CTRL_BREAK_EVENT,\r
                _win32con.CTRL_CLOSE_EVENT,\r
            ):\r
                return True\r
            return False\r
\r
        _win32console.FreeConsole()\r
        with attach_console(process.pid) as console:\r
            _win32api.SetConsoleCtrlHandler(console_ctrl_handler, True)\r
            while True:\r
                columns: int\r
                rows: int\r
                columns, rows = yield\r
                # iterate to resize accurately\r
                for iter in range(RESIZE_ITERATIONS):\r
                    info: ConsoleScreenBufferInfo = (\r
                        console.GetConsoleScreenBufferInfo()  # type: ignore\r
                    )\r
                    old_rect = window.getClientFrame()\r
                    old_actual_rect = window.size\r
                    old_cols: int = (\r
                        info["Window"].Right - info["Window"].Left + 1  # type: ignore\r
                    )\r
                    old_rows: int = (\r
                        info["Window"].Bottom - info["Window"].Top + 1  # type: ignore\r
                    )\r
                    old_width = old_rect.right - old_rect.left\r
                    old_height = old_rect.bottom - old_rect.top\r
                    size = (\r
                        int(old_width * columns / old_cols)\r
                        + old_actual_rect.width\r
                        - old_width,\r
                        int(old_height * rows / old_rows)\r
                        + old_actual_rect.height\r
                        - old_height,\r
                    )\r
                    print(f"pixel size (iteration {iter + 1}): {size}")\r
                    setters = [\r
                        # almost accurate, works for alternate screen buffer\r
                        lambda: _win32gui.SetWindowPos(\r
                            _typing.cast(int, window.getHandle()),\r
                            None,\r
                            0,\r
                            0,\r
                            *size,\r
                            _win32con.SWP_NOACTIVATE\r
                            | _win32con.SWP_NOREDRAW\r
                            | _win32con.SWP_NOZORDER,\r
                        ),\r
                        # accurate, SetConsoleWindowInfo does not work for alternate screen buffer\r
                        lambda: console.SetConsoleWindowInfo(  # type: ignore\r
                            True,\r
                            _win32console.PySMALL_RECTType(0, 0, columns - 1, old_rows - 1),  # type: ignore\r
                        ),\r
                        lambda: console.SetConsoleScreenBufferSize(\r
                            _win32console.PyCOORDType(columns, old_rows)  # type: ignore\r
                        ),\r
                        lambda: console.SetConsoleWindowInfo(  # type: ignore\r
                            True,\r
                            _win32console.PySMALL_RECTType(0, 0, columns - 1, rows - 1),  # type: ignore\r
                        ),\r
                        lambda: console.SetConsoleScreenBufferSize(\r
                            _win32console.PyCOORDType(columns, rows)  # type: ignore\r
                        ),\r
                    ]\r
                    if old_cols < columns:\r
                        setters[1], setters[2] = setters[2], setters[1]\r
                    if old_rows < rows:\r
                        setters[3], setters[4] = setters[4], setters[3]\r
                    for setter in setters:\r
                        ignore_error(setter)\r
                print(f"resized")\r
\r
    if __name__ == "__main__":\r
        main()\r
else:\r
    raise NotImplementedError(_sys.platform)\r
`;var Fo=ri("node:child_process"),u0=ri("node:fs"),nh=ri("node:process"),d0=ri("tmp");function oh(c){c.write(`${`
\x1B[2K`.repeat(c.rows)}\x1B[H`)}var ts,Ri,Xs,es=class{constructor(_,v,x,y){this.plugin=_;Ke(this,"shell");Ke(this,"conhost");Ke(this,"onExit");Ae(this,ts,(async()=>{let{plugin:_}=this,{settings:v,language:x}=_,{pythonExecutable:y}=v,{i18n:t}=x;if(y==="")return null;let n=await yi(async()=>(await Fo).spawn(y,["-c",sh],{env:{...(await nh).env,PYTHONIOENCODING:"UTF-8:backslashreplace"},stdio:["pipe","pipe","pipe"],windowsHide:!0}));try{try{n.stderr.on("data",u=>{console.error(u.toString(Wi))})}finally{n.once("exit",(u,h)=>{u!==0&&Qt(()=>t.t("errors.resizer-exited-unexpectedly",{code:u!=null?u:h}),v.errorNoticeTimeout,_)})}}catch(u){console.warn(u)}return n})());this.conhost=_.settings.enableWindowsConhostWorkaround;let{conhost:t}=this,n=(async()=>{var a,o,m;let[u,h]=await Ce(this,ts).then(p=>[p,null]).catch(p=>[null,Jt(p)]);try{let p=(await d0).fileSync({discardDescriptor:!0});try{let i=[...t?["C:\\Windows\\System32\\conhost.exe"]:[],"C:\\Windows\\System32\\cmd.exe","/C",`${xe(a=es,Ri,Xs).call(a,v)} ${(y!=null?y:[]).map(d=>{var f;return xe(f=es,Ri,Xs).call(f,d)}).join(" ")} & call echo %^ERRORLEVEL% >${xe(o=es,Ri,Xs).call(o,p.name)}`],e=await yi(async()=>(await Fo).spawn(i[0],i.slice(1),{cwd:x,stdio:["pipe","pipe","pipe"],windowsHide:u===null,windowsVerbatimArguments:!0}));try{let d=h;if(u!==null)try{await Yr(u.stdin,`${(m=e.pid)!=null?m:-1}
`);let f=window.setInterval(()=>{Yr(u.stdin,`
`).catch(s=>{console.trace(s)})},vl);try{u.once("exit",()=>{window.clearInterval(f)})}catch(s){throw window.clearInterval(f),s}}catch(f){d=Jt(f),u.kill()}d!==null&&Dr(d,()=>this.plugin.language.i18n.t("errors.error-spawning-resizer"),this.plugin)}catch(d){console.warn(d)}return[e,p]}catch(i){throw p.removeCallback(),i}}catch(p){throw u==null||u.kill(),p}})();this.shell=n.then(([u])=>u),this.onExit=n.then(async([u,h])=>new Promise(ji(a=>u.once("exit",(o,m)=>{(async()=>{var p,i;try{try{let e=parseInt((await u0).readFileSync(h.name,{encoding:Wi,flag:"r"}).trim(),10);a(isNaN(e)?(p=o!=null?o:m)!=null?p:NaN:e)}catch(e){throw a((i=o!=null?o:m)!=null?i:NaN),e}finally{h.removeCallback()}}catch(e){console.warn(e)}})()}))))}async resize(_,v){let x=await Ce(this,ts);if(x===null)throw new Error(this.plugin.language.i18n.t("errors.resizer-disabled"));await Yr(x.stdin,`${_}x${v}
`)}async pipe(_){let v=await this.shell;oh(_),v.stdout.once("data",y=>{v.stdout.on("data",t=>{_.write(t)}),!this.conhost&&_.write(y)}),v.stderr.on("data",y=>{_.write(y)});let x=_.onData(async y=>Yr(v.stdin,y));this.onExit.finally(()=>{x.dispose()})}},Vs=es;ts=new WeakMap,Ri=new WeakSet,Xs=function(_){return`"${_.replace('"','\\"')}"`.replace(/(?<meta>[()%!^"<>&|])/gu,"^$<meta>")},Ae(Vs,Ri);var Ks=class{constructor(_,v,x,y){this.plugin=_;Ke(this,"shell");Ke(this,"onExit");let{settings:t,language:n}=_,{pythonExecutable:u}=t;this.shell=yi(async()=>{if(u==="")throw new Error(n.i18n.t("errors.no-python-to-start-unix-pseudoterminal"));return(await Fo).spawn(u,["-c",ih,v].concat(y!=null?y:[]),{cwd:x,env:{...(await nh).env,PYTHONIOENCODING:`${Wi}:backslashreplace`},stdio:["pipe","pipe","pipe","pipe"],windowsHide:!0})}).then(h=>{try{h.stderr.on("data",a=>{console.error(a.toString(Wi))})}catch(a){console.warn(a)}return h}),this.onExit=this.shell.then(async h=>new Promise(ji(a=>h.once("exit",(o,m)=>{var p;a((p=o!=null?o:m)!=null?p:NaN)}))))}async pipe(_){let v=await this.shell;oh(_),v.stdout.on("data",y=>{_.write(y)}),v.stderr.on("data",y=>{_.write(y)});let x=_.onData(async y=>Yr(v.stdin,y));this.onExit.finally(()=>{x.dispose()})}async resize(_,v){await Yr((await this.shell).stdio[3],`${_}x${v}
`)}},Nr;(x=>(x.PLATFORM_PTYS={darwin:Ks,linux:Ks,win32:Vs},x.SUPPORTED_PLATFORMS=As(x.PLATFORM_PTYS),x.PLATFORM_PTY=Zt(x.SUPPORTED_PLATFORMS,vi)?x.PLATFORM_PTYS[vi]:null))(Nr||(Nr={}));var Wt;(y=>{y.HIDE_STATUS_BAR_OPTIONS=["never","always","focused","running"],y.PREFERRED_RENDERER_OPTIONS=Er.RENDERER_OPTIONS;async function v(t,n){Object.assign(t,await n.loadData())}y.load=v;async function x(t,n){await n.saveData(t)}y.save=x})(Wt||(Wt={}));var vt={addToCommand:!0,addToContextMenu:!0,enableWindowsConhostWorkaround:!0,errorNoticeTimeout:0,executables:{darwin:{extArgs:["$PWD"],extExe:"/System/Applications/Utilities/Terminal.app/Contents/macOS/Terminal",intArgs:[],intExe:"/bin/zsh"},linux:{extArgs:[],extExe:"xterm",intArgs:[],intExe:"/bin/sh"},win32:{extArgs:[],extExe:"C:\\Windows\\System32\\cmd.exe",intArgs:[],intExe:"C:\\Windows\\System32\\cmd.exe"}},hideStatusBar:"focused",language:"",noticeTimeout:5,preferredRenderer:"webgl",pythonExecutable:"python3"},yt,kt,rs,Uo,is,No,dt,Lt,Ys=class extends ut.PluginSettingTab{constructor(v){super(v.app,v);this.plugin=v;Ae(this,yt);Ae(this,rs);Ae(this,is);Ae(this,dt);v.register(v.language.onChangeLanguage.listen(()=>{this.display()}))}display(){let{containerEl:v,plugin:x}=this,{settings:y,language:t}=x,{i18n:n}=t;v.empty(),v.createEl("h1",{text:n.t("name")}),new ut.Setting(v).setName(n.t("settings.language")).setDesc(n.t("settings.language-description")).addDropdown(xe(this,yt,kt).call(this,()=>y.language,async u=>x.mutateSettings(h=>{h.language=u}),{pre:u=>{u.addOption("",n.t("settings.language-default")).addOptions(Object.fromEntries(Object.entries(Gi.en.language).filter(h=>h.every(a=>typeof a=="string"))))}})).addExtraButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(u=>{u.language=vt.language}),n.t("asset:settings.language-icon"))),new ut.Setting(v).setName(n.t("settings.reset-all")).addButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(u=>Object.assign(u,structuredClone(vt))))),new ut.Setting(v).setName(n.t("settings.add-to-command")).addToggle(xe(this,yt,kt).call(this,()=>y.addToCommand,async u=>x.mutateSettings(h=>{h.addToCommand=u}))).addExtraButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(u=>{u.addToCommand=vt.addToCommand}),n.t("asset:settings.add-to-command-icon"))),new ut.Setting(v).setName(n.t("settings.add-to-context-menu")).addToggle(xe(this,yt,kt).call(this,()=>y.addToContextMenu,async u=>x.mutateSettings(h=>{h.addToContextMenu=u}))).addExtraButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(u=>{u.addToContextMenu=vt.addToContextMenu}),n.t("asset:settings.add-to-context-menu-icon"))),new ut.Setting(v).setName(n.t("settings.hide-status-bar")).addDropdown(xe(this,yt,kt).call(this,()=>y.hideStatusBar,xe(this,rs,Uo).call(this,Wt.HIDE_STATUS_BAR_OPTIONS,async u=>x.mutateSettings(h=>{h.hideStatusBar=u})),{pre:u=>{u.addOptions(Object.fromEntries(Wt.HIDE_STATUS_BAR_OPTIONS.map(h=>[h,n.t(`settings.hide-status-bar-options.${h}`)])))}})).addExtraButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(u=>{u.hideStatusBar=vt.hideStatusBar}),n.t("asset:settings.hide-status-bar-icon"))),new ut.Setting(v).setName(n.t("settings.notice-timeout")).setDesc(n.t("settings.notice-timeout-description")).addText(xe(this,yt,kt).call(this,()=>y.noticeTimeout.toString(),xe(this,is,No).call(this,async u=>x.mutateSettings(h=>{h.noticeTimeout=u})))).addExtraButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(u=>{u.noticeTimeout=vt.noticeTimeout}),n.t("asset:settings.notice-timeout-icon"))),new ut.Setting(v).setName(n.t("settings.error-notice-timeout")).setDesc(n.t("settings.error-notice-timeout-description")).addText(xe(this,yt,kt).call(this,()=>y.errorNoticeTimeout.toString(),xe(this,is,No).call(this,async u=>x.mutateSettings(h=>{h.errorNoticeTimeout=u})))).addExtraButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(u=>{u.noticeTimeout=vt.noticeTimeout}),n.t("asset:settings.error-notice-timeout-icon"))),v.createEl("h3",{text:n.t("settings.executables")}),new ut.Setting(v).setName(n.t("settings.python-executable")).setDesc(n.t("settings.python-executable-description")).addText(xe(this,yt,kt).call(this,()=>y.pythonExecutable,async u=>x.mutateSettings(h=>{h.pythonExecutable=u}),{post:u=>{u.setPlaceholder(n.t("settings.python-executable-placeholder"))}})).addExtraButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(u=>{u.pythonExecutable=vt.pythonExecutable}),n.t("asset:settings.python-executable-icon")));for(let u of Nr.SUPPORTED_PLATFORMS)v.createEl("h4",{text:n.t(`types.platforms.${u}`)}),new ut.Setting(v).setName(n.t("types.terminals.external")).addText(xe(this,yt,kt).call(this,()=>y.executables[u].extExe,async h=>x.mutateSettings(a=>{a.executables[u].extExe=h}))).addExtraButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(h=>{h.executables[u].extExe=vt.executables[u].extExe}),n.t("asset:settings.executable-list-external-icon"))),new ut.Setting(v).setName(n.t("types.terminals.integrated")).addText(xe(this,yt,kt).call(this,()=>y.executables[u].intExe,async h=>x.mutateSettings(a=>{a.executables[u].intExe=h}))).addExtraButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(h=>{h.executables[u].intExe=vt.executables[u].intExe}),n.t("asset:settings.executable-list-integrated-icon"))),u==="win32"&&new ut.Setting(v).setName(n.t("settings.enable-Windows-conhost-workaround")).setDesc(n.t("settings.enable-Windows-conhost-workaround-description")).addToggle(xe(this,yt,kt).call(this,()=>y.enableWindowsConhostWorkaround,async h=>x.mutateSettings(a=>{a.enableWindowsConhostWorkaround=h}))).addExtraButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(h=>{h.enableWindowsConhostWorkaround=vt.enableWindowsConhostWorkaround}),n.t("asset:settings.enable-Windows-conhost-workaround-icon")));v.createEl("h3",{text:n.t("settings.advanced-settings")}),new ut.Setting(v).setName(n.t("settings.preferred-renderer")).addDropdown(xe(this,yt,kt).call(this,()=>y.preferredRenderer,xe(this,rs,Uo).call(this,Wt.PREFERRED_RENDERER_OPTIONS,async u=>x.mutateSettings(h=>{h.preferredRenderer=u})),{pre:u=>{u.addOptions(Object.fromEntries(Wt.PREFERRED_RENDERER_OPTIONS.map(h=>[h,bl(n.t(`types.renderers.${h}`),t.language)])))}})).addExtraButton(xe(this,dt,Lt).call(this,async()=>x.mutateSettings(u=>{u.preferredRenderer=vt.preferredRenderer}),n.t("asset:settings.preferred-renderer-icon")))}};yt=new WeakSet,kt=function(v,x,y={}){return t=>{var u,h;((u=y.pre)!=null?u:()=>{})(t);let n=async a=>{let o=await x(a,t,v);if(typeof o=="boolean"&&!o){t.setValue(v());return}await Wt.save(this.plugin.settings,this.plugin)};t.setValue(v()).onChange(n),((h=y.post)!=null?h:()=>{})(t,n)}},rs=new WeakSet,Uo=function(v,x){return async(y,t,n)=>{if(!Zt(v,y))return!1;let u=await x(y,t,n);return!(typeof u=="boolean"&&!u)}},is=new WeakSet,No=function(v,x=!1){return async(y,t,n)=>{let u=Number(y);if(!(x?Number.isSafeInteger(u):isFinite(u)))return!1;let h=await v(u,t,n);return!(typeof h=="boolean"&&!h)}},dt=new WeakSet,Lt=function(v,x=this.plugin.language.i18n.t("asset:settings.reset-icon"),y={}){return t=>{var u,h;((u=y.pre)!=null?u:()=>{})(t);let n=async()=>{let a=await v(t);if(typeof a=="boolean"&&!a)return;let o=Wt.save(this.plugin.settings,this.plugin);this.display(),await o};t.setTooltip(this.plugin.language.i18n.t("settings.reset")).setIcon(x).onClick(n),((h=y.post)!=null?h:()=>{})(t,n)}};function ss(c){var _,v,x,y;return{caseSensitive:(_=c.caseSensitive)!=null?_:!1,findText:(v=c.findText)!=null?v:"",regex:(x=c.regex)!=null?x:!1,wholeWord:(y=c.wholeWord)!=null?y:!1}}var Mi=require("obsidian");var Rh=Yt(lh());function Rr(){}function jo(c){return c()}function ch(){return Object.create(null)}function ni(c){c.forEach(jo)}function si(c){return typeof c=="function"}function dh(c,_){return c!=c?_==_:c!==_||c&&typeof c=="object"||typeof c=="function"}function fh(c){return Object.keys(c).length===0}function oi(c){return c==null?"":c}function ai(c){return c&&si(c.destroy)?c.destroy:Rr}var ph=!1;function f0(){ph=!0}function p0(){ph=!1}function qe(c,_){c.appendChild(_)}function gh(c,_,v){let x=g0(c);if(!x.getElementById(_)){let y=bt("style");y.id=_,y.textContent=v,_0(x,y)}}function g0(c){if(!c)return document;let _=c.getRootNode?c.getRootNode():c.ownerDocument;return _&&_.host?_:c.ownerDocument}function _0(c,_){return qe(c.head||c,_),_.sheet}function _h(c,_,v){c.insertBefore(_,v||null)}function Go(c){c.parentNode&&c.parentNode.removeChild(c)}function bt(c){return document.createElement(c)}function qo(c){return document.createTextNode(c)}function Hr(){return qo(" ")}function Wr(c,_,v,x){return c.addEventListener(_,v,x),()=>c.removeEventListener(_,v,x)}function Ze(c,_,v){v==null?c.removeAttribute(_):c.getAttribute(_)!==v&&c.setAttribute(_,v)}function m0(c){return Array.from(c.childNodes)}function mh(c,_){_=""+_,c.wholeText!==_&&(c.data=_)}function Vo(c,_){c.value=_==null?"":_}var Xo;function ns(c){Xo=c}var ki=[];var hh=[],Zs=[],uh=[],v0=Promise.resolve(),zo=!1;function y0(){zo||(zo=!0,v0.then(vh))}function $o(c){Zs.push(c)}var Wo=new Set,Ti=0;function vh(){if(Ti!==0)return;let c=Xo;do{try{for(;Ti<ki.length;){let _=ki[Ti];Ti++,ns(_),b0(_.$$)}}catch(_){throw ki.length=0,Ti=0,_}for(ns(null),ki.length=0,Ti=0;hh.length;)hh.pop()();for(let _=0;_<Zs.length;_+=1){let v=Zs[_];Wo.has(v)||(Wo.add(v),v())}Zs.length=0}while(ki.length);for(;uh.length;)uh.pop()();zo=!1,Wo.clear(),ns(c)}function b0(c){if(c.fragment!==null){c.update(),ni(c.before_update);let _=c.dirty;c.dirty=[-1],c.fragment&&c.fragment.p(c.ctx,_),c.after_update.forEach($o)}}var S0=new Set;function w0(c,_){c&&c.i&&(S0.delete(c),c.i(_))}var uy=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function C0(c,_,v,x){let{fragment:y,after_update:t}=c.$$;y&&y.m(_,v),x||$o(()=>{let n=c.$$.on_mount.map(jo).filter(si);c.$$.on_destroy?c.$$.on_destroy.push(...n):ni(n),c.$$.on_mount=[]}),t.forEach($o)}function yh(c,_){let v=c.$$;v.fragment!==null&&(ni(v.on_destroy),v.fragment&&v.fragment.d(_),v.on_destroy=v.fragment=null,v.ctx=[])}function x0(c,_){c.$$.dirty[0]===-1&&(ki.push(c),y0(),c.$$.dirty.fill(0)),c.$$.dirty[_/31|0]|=1<<_%31}function bh(c,_,v,x,y,t,n,u=[-1]){let h=Xo;ns(c);let a=c.$$={fragment:null,ctx:[],props:t,update:Rr,not_equal:y,bound:ch(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(_.context||(h?h.$$.context:[])),callbacks:ch(),dirty:u,skip_bound:!1,root:_.target||h.$$.root};n&&n(a.root);let o=!1;if(a.ctx=v?v(c,_.props||{},(m,p,...i)=>{let e=i.length?i[0]:p;return a.ctx&&y(a.ctx[m],a.ctx[m]=e)&&(!a.skip_bound&&a.bound[m]&&a.bound[m](e),o&&x0(c,m)),p}):[],a.update(),o=!0,ni(a.before_update),a.fragment=x?x(a.ctx):!1,_.target){if(_.hydrate){f0();let m=m0(_.target);a.fragment&&a.fragment.l(m),m.forEach(Go)}else a.fragment&&a.fragment.c();_.intro&&w0(c.$$.fragment),C0(c,_.target,_.anchor,_.customElement),p0(),vh()}ns(h)}var L0;typeof HTMLElement=="function"&&(L0=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:c}=this.$$;this.$$.on_disconnect=c.map(jo).filter(si);for(let _ in this.$$.slotted)this.appendChild(this.$$.slotted[_])}attributeChangedCallback(c,_,v){this[c]=v}disconnectedCallback(){ni(this.$$.on_disconnect)}$destroy(){yh(this,1),this.$destroy=Rr}$on(c,_){if(!si(_))return Rr;let v=this.$$.callbacks[c]||(this.$$.callbacks[c]=[]);return v.push(_),()=>{let x=v.indexOf(_);x!==-1&&v.splice(x,1)}}$set(c){this.$$set&&!fh(c)&&(this.$$.skip_bound=!0,this.$$set(c),this.$$.skip_bound=!1)}});var Qs=class{$destroy(){yh(this,1),this.$destroy=Rr}$on(_,v){if(!si(v))return Rr;let x=this.$$.callbacks[_]||(this.$$.callbacks[_]=[]);return x.push(v),()=>{let y=x.indexOf(v);y!==-1&&x.splice(y,1)}}$set(_){this.$$set&&!fh(_)&&(this.$$.skip_bound=!0,this.$$set(_),this.$$.skip_bound=!1)}};var li=require("obsidian");function R0(c){gh(c,"svelte-124jqje",".document-search-container.svelte-124jqje{margin:0}")}function T0(c){let _,v,x,y,t,n,u,h,a,o,m,p,i,e,d,f,s,g,L,b,R,E,w,k,M,D,P,W,F,$,A;return{c(){_=bt("div"),v=bt("div"),x=bt("div"),y=bt("button"),u=Hr(),h=bt("button"),m=Hr(),p=bt("button"),d=Hr(),f=bt("input"),s=Hr(),g=bt("div"),L=bt("button"),R=Hr(),E=bt("button"),k=Hr(),M=bt("div"),D=qo(c[4]),P=Hr(),W=bt("button"),Ze(y,"class",t=oi(`document-search-button${c[0].caseSensitive?" mod-cta":""}`)+" svelte-124jqje"),Ze(h,"class",a=oi(`document-search-button${c[0].wholeWord?" mod-cta":""}`)+" svelte-124jqje"),Ze(p,"class",i=oi(`document-search-button${c[0].regex?" mod-cta":""}`)+" svelte-124jqje"),Ze(x,"class","document-search-buttons"),Ze(f,"class","document-search-input"),Ze(f,"type","text"),Ze(f,"placeholder",c[1]),Ze(L,"class","document-search-button"),Ze(E,"class","document-search-button"),Ze(M,"class","document-search-results"),Ze(W,"class","document-search-close-button"),Ze(g,"class","document-search-buttons"),Ze(v,"class","document-search"),Ze(_,"class","document-search-container svelte-124jqje")},m(U,N){_h(U,_,N),qe(_,v),qe(v,x),qe(x,y),qe(x,u),qe(x,h),qe(x,m),qe(x,p),qe(v,d),qe(v,f),Vo(f,c[0].findText),qe(v,s),qe(v,g),qe(g,L),qe(g,R),qe(g,E),qe(g,k),qe(g,M),qe(M,D),qe(g,P),qe(g,W),$||(A=[Wr(y,"click",c[6]),ai(n=li.setIcon.call(null,y,"uppercase-lowercase-a")),Wr(h,"click",c[7]),ai(o=li.setIcon.call(null,h,"align-horizontal-space-around")),Wr(p,"click",c[8]),ai(e=li.setIcon.call(null,p,"regex")),Wr(f,"input",c[9]),Wr(L,"click",c[10]),ai(b=li.setIcon.call(null,L,"arrow-up")),Wr(E,"click",c[11]),ai(w=li.setIcon.call(null,E,"arrow-down")),Wr(W,"click",function(){si(c[2])&&c[2].apply(this,arguments)}),ai(F=li.setIcon.call(null,W,"x"))],$=!0)},p(U,[N]){c=U,N&1&&t!==(t=oi(`document-search-button${c[0].caseSensitive?" mod-cta":""}`)+" svelte-124jqje")&&Ze(y,"class",t),N&1&&a!==(a=oi(`document-search-button${c[0].wholeWord?" mod-cta":""}`)+" svelte-124jqje")&&Ze(h,"class",a),N&1&&i!==(i=oi(`document-search-button${c[0].regex?" mod-cta":""}`)+" svelte-124jqje")&&Ze(p,"class",i),N&2&&Ze(f,"placeholder",c[1]),N&1&&f.value!==c[0].findText&&Vo(f,c[0].findText),N&16&&mh(D,c[4])},i:Rr,o:Rr,d(U){U&&Go(_),$=!1,ni(A)}}}function k0(c,_,v){let{params:x={}}=_;x=ss(x);let{inputPlaceholder:y=""}=_,{onClose:t=()=>{}}=_,{onFind:n=(d,f)=>{}}=_,{onParamsChanged:u=d=>{}}=_,{searchResult:h=""}=_,a=()=>v(0,x.caseSensitive=!x.caseSensitive,x),o=()=>v(0,x.wholeWord=!x.wholeWord,x),m=()=>v(0,x.regex=!x.regex,x);function p(){x.findText=this.value,v(0,x)}let i=()=>n(1,ss(x)),e=()=>n(0,ss(x));return c.$$set=d=>{"params"in d&&v(0,x=d.params),"inputPlaceholder"in d&&v(1,y=d.inputPlaceholder),"onClose"in d&&v(2,t=d.onClose),"onFind"in d&&v(3,n=d.onFind),"onParamsChanged"in d&&v(5,u=d.onParamsChanged),"searchResult"in d&&v(4,h=d.searchResult)},c.$$.update=()=>{if(c.$$.dirty&33){e:u(ss(x))}},[x,y,t,n,h,u,a,o,m,p,i,e]}var Ko=class extends Qs{constructor(_){super(),bh(this,_,k0,T0,dh,{params:0,inputPlaceholder:1,onClose:2,onFind:3,onParamsChanged:5,searchResult:4},R0)}},Sh=Ko;var Th=Yt(wh()),kh=Yt(Ch());var Ah=Yt(xh()),Mh=Yt(Lh()),Oh=Yt(Eh());var Ai,ls,cs,jr,Et,zr,zt,as,Gr,ta,ra,ia,sa,hs,na,us,oa,sn,Dh,$r=class extends Mi.ItemView{constructor(v,x){super(x);this.plugin=v;Ae(this,Et);Ae(this,zt);Ae(this,Gr);Ae(this,hs);Ae(this,us);Ae(this,sn);Ae(this,Ai,null);Ae(this,ls,null);Ae(this,cs,!1);Ae(this,jr,{__type:$r.State.TYPE,args:[],cwd:"",executable:""})}async setState(v,x){await super.setState(v,x),Ll($r.State.TYPE,v)&&Object.assign(Ce(this,jr),v)}getState(){var x;let v=(x=Ce(this,Et,zr))==null?void 0:x.serialize();return typeof v!="undefined"&&(Ce(this,jr).serial=v),Object.assign(super.getState(),Ce(this,jr))}onResize(){var x;super.onResize();let{containerEl:v}=this;v.offsetWidth<=0||v.offsetHeight<=0||(x=Ce(this,Et,zr))==null||x.resize(!1).catch(y=>{console.warn(y)})}getDisplayText(){return this.plugin.language.i18n.t(`components.${$r.type.id}.display-name`,{executable:xe(this,us,oa).call(this)})}getIcon(){return this.plugin.language.i18n.t(`asset:components.${$r.type.id}-icon`)}getViewType(){return $r.namespacedViewType}onPaneMenu(v,x){super.onPaneMenu(v,x);let{plugin:y,containerEl:t,contentEl:n}=this,{i18n:u}=y.language;v.addSeparator().addItem(h=>h.setTitle(u.t("menus.find-in-terminal")).setIcon(u.t("asset:menus.find-in-terminal-icon")).setDisabled(Ce(this,zt,as)!==null).onClick(()=>{let a=(o,m,p=!1)=>{var d,f;let i=(d=Ce(this,Et,zr))==null?void 0:d.addons.search;if(typeof i=="undefined")return;(o===0?i.findNext.bind(i):i.findPrevious.bind(i))(m.findText,{caseSensitive:m.caseSensitive,decorations:{activeMatchColorOverviewRuler:"#00000000",matchOverviewRuler:"#00000000"},incremental:p,regex:m.regex,wholeWord:m.wholeWord}),m.findText===""&&((f=Ce(this,zt,as))==null||f.$set({searchResult:""}))};Ye(this,zt,new Sh({anchor:n,intro:!0,props:{onClose:()=>{Ye(this,zt,null,ia)},onFind:a,onParamsChanged:o=>{var m;(m=Ce(this,Et,zr))==null||m.addons.search.clearDecorations(),a(1,o)}},target:t}),ia)})).addItem(h=>h.setTitle(u.t("menus.restart-terminal")).setIcon(u.t("asset:menus.restart-terminal-icon")).onClick(()=>{xe(this,hs,na).call(this)})).addItem(h=>{var a;return h.setTitle(u.t("menus.save-as-HTML")).setIcon(u.t("asset:menus.save-as-HTML-icon")).setDisabled(typeof((a=Ce(this,Et,zr))==null?void 0:a.addons.serialize)=="undefined").onClick(()=>{var m;let o=(m=Ce(this,Et,zr))==null?void 0:m.addons.serialize;typeof o!="undefined"&&xl(o.serializeAsHTML({includeGlobalBackground:!1,onlySelection:!1}),"text/html; charset=UTF-8;",`${xe(this,us,oa).call(this)}.html`)})})}async onOpen(){await super.onOpen();let{app:v,language:x,statusBarHider:y}=this.plugin;this.registerEvent(v.workspace.on("active-leaf-change",t=>{if(t===this.leaf){Ye(this,Gr,!0,sa);return}Ye(this,Gr,!1,sa)})),this.register(x.onChangeLanguage.listen(()=>Tl(this))),this.register(y.hide(()=>xe(this,sn,Dh).call(this))),this.registerEvent(v.workspace.on("active-leaf-change",()=>{y.update()})),this.register(()=>{Ye(this,Et,null,ra)}),xe(this,hs,na).call(this)}},ft=$r;Ai=new WeakMap,ls=new WeakMap,cs=new WeakMap,jr=new WeakMap,Et=new WeakSet,zr=function(){return Ce(this,Ai)},zt=new WeakSet,as=function(){return Ce(this,ls)},Gr=new WeakSet,ta=function(){return Ce(this,cs)},ra=function(v){var x;if((x=Ce(this,Ai))==null||x.close().catch(y=>{Dr(Jt(y),()=>this.plugin.language.i18n.t("errors.failed-to-kill-pseudoterminal"),this.plugin)}),v!==null){let{plugin:y}=this,{app:t,language:n,settings:u}=y,{i18n:h}=n,{terminal:a,addons:o}=v,{requestSaveLayout:m}=t.workspace;a.unicode.activeVersion="11",o.renderer.use(u.preferredRenderer),o.disposer.push(y.on("mutate-settings",p=>p.preferredRenderer,p=>{o.renderer.use(p)})),v.onExit.then(p=>{Qt(()=>h.t("notices.terminal-exited",{code:p}),Zt(_l,p)?u.noticeTimeout:u.errorNoticeTimeout,y)},p=>{Dr(Jt(p),()=>h.t("errors.error-spawning-terminal"),y)}),v.terminal.onWriteParsed(m),v.terminal.onResize(m),Ce(this,Gr,ta)?v.terminal.focus():v.terminal.blur(),v.resize().catch(p=>{console.warn(p)}),v.addons.search.onDidChangeResults(p=>{let i=Ce(this,zt,as);if(i===null)return;if(typeof p=="undefined"){i.$set({searchResult:h.t("components.find.too-many-search-results")});return}let{resultIndex:e,resultCount:d}=p;i.$set({searchResult:h.t("components.find.search-results",{index:e+1,number:d})})})}Ye(this,Ai,v)},ia=function(v){var x;(x=Ce(this,zt,as))==null||x.$destroy(),Ye(this,ls,v)},sa=function(v){var y;let x=(y=Ce(this,Et,zr))==null?void 0:y.terminal;v?x==null||x.focus():x==null||x.blur(),Ye(this,cs,v)},hs=new WeakSet,na=function(){let{containerEl:v}=this;v.empty(),this.contentEl=v.createDiv({});let{contentEl:x}=this,y=El(x,t=>{try{let{plugin:n}=this,u=Ce(this,jr),{language:h}=n,{i18n:a}=h;Ye(this,Et,new $r.EMULATOR(n,x,o=>{if(typeof u.serial!="undefined"&&o.write(a.t("components.terminal.restored-history",{time:new Date().toLocaleString(h.language)})),Nr.PLATFORM_PTY===null)throw new Error(a.t("errors.unsupported-platform"));return new Nr.PLATFORM_PTY(n,u.executable,u.cwd,u.args)},u.serial,{allowProposedApi:!0},{disposer:new Gs,ligatures:new Th.LigaturesAddon({}),renderer:new Er(()=>new Rh.CanvasAddon,()=>new Oh.WebglAddon(!1)),search:new kh.SearchAddon,unicode11:new Ah.Unicode11Addon,webLinks:new Mh.WebLinksAddon((o,m)=>Rl(m),{})}),ra)}finally{t.disconnect()}});this.register(()=>{y.disconnect()})},us=new WeakSet,oa=function(){let{executable:v}=Ce(this,jr);return Ln(v,Cl(v))},sn=new WeakSet,Dh=function(){switch(this.plugin.settings.hideStatusBar){case"focused":return Ce(this,Gr,ta);case"running":return!0;default:return!1}},Ke(ft,"type",new Ts("terminal")),Ke(ft,"namespacedViewType");(v=>{v.EMULATOR=js;let _;(y=>y.TYPE="8d54e44a-32e7-4297-8ae2-cff88e92ce28")(_=v.State||(v.State={}))})(ft||(ft={}));function Ph(c){let _=["root","current"],v=["external","integrated"],{app:x,settings:y,language:t}=c,{i18n:n}=t,u=(h,a)=>o=>!1;if(c.registerView(ft.type.namespaced(c),h=>new ft(c,h)),Zt(Nr.SUPPORTED_PLATFORMS,vi)){let h=vi,a=x.vault.adapter,o=(p,i)=>{(async()=>{try{let e=y.executables[h];switch(i){case"external":{Qt(()=>n.t("notices.spawning-terminal",{executable:e.extExe}),y.noticeTimeout,c),await rh(e.extExe,p,e.extArgs);break}case"integrated":{Qt(()=>n.t("notices.spawning-terminal",{executable:e.intExe}),y.noticeTimeout,c);let{workspace:d}=x,f=d.getLeavesOfType(ft.type.namespaced(c)),s={__type:ft.State.TYPE,args:e.intArgs,cwd:p,executable:e.intExe};await(()=>{let g=f.last();return typeof g=="undefined"?d.getLeaf("split","horizontal"):(d.setActiveLeaf(g,{focus:!1}),d.getLeaf("tab"))})().setViewState({active:!0,state:s,type:ft.type.namespaced(c)});break}default:throw new TypeError(i)}}catch(e){Dr(Jt(e),()=>n.t("errors.error-spawning-terminal"),c)}})()},m=(p,i)=>{p.addSeparator();for(let e of v)p.addItem(d=>d.setTitle(n.t(`menus.open-terminal-${e}`)).setIcon(n.t(`asset:menus.open-terminal-${e}-icon`)).onClick(()=>{o(a.getFullPath(i.path),e)}))};u=(p,i)=>e=>{if(!y.addToCommand)return!1;switch(i){case"root":return e||o(a.getBasePath(),p),!0;case"current":{let d=x.workspace.getActiveFile();return d===null?!1:(e||o(a.getFullPath(d.parent.path),p),!0)}default:throw new TypeError(i)}},c.registerEvent(x.workspace.on("file-menu",(p,i)=>{y.addToContextMenu&&m(p,i instanceof Mi.TFolder?i:i.parent)})),c.registerEvent(x.workspace.on("editor-menu",(p,i,e)=>{!y.addToContextMenu||e instanceof Mi.MarkdownView||e.file===null||m(p,e.file.parent)}))}for(let h of v)for(let a of _){let o=`open-terminal-${h}-${a}`,m=()=>n.t(`commands.${o}`);c.addCommand({checkCallback:u(h,a),id:o,get name(){return m()},set name(p){m=Sl(()=>n.t(`commands.${o}`),()=>n.t("name"),n.t("name",{lng:Jr}),p)}})}}function lt(c){return lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},lt(c)}function At(c,_){if(!(c instanceof _))throw new TypeError("Cannot call a class as a function")}function aa(c,_){if(lt(c)!=="object"||c===null)return c;var v=c[Symbol.toPrimitive];if(v!==void 0){var x=v.call(c,_||"default");if(lt(x)!=="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(c)}function ds(c){var _=aa(c,"string");return lt(_)==="symbol"?_:String(_)}function Ih(c,_){for(var v=0;v<_.length;v++){var x=_[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(c,ds(x.key),x)}}function Mt(c,_,v){return _&&Ih(c.prototype,_),v&&Ih(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}function Bt(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function fs(c,_){return fs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,y){return x.__proto__=y,x},fs(c,_)}function Oi(c,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(_&&_.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),_&&fs(c,_)}function ci(c,_){if(_&&(lt(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bt(c)}function Ot(c){return Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},Ot(c)}function $t(c,_,v){return _=ds(_),_ in c?Object.defineProperty(c,_,{value:v,enumerable:!0,configurable:!0,writable:!0}):c[_]=v,c}function la(c){if(Array.isArray(c))return c}function ca(c){if(typeof Symbol!="undefined"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}function nn(c,_){(_==null||_>c.length)&&(_=c.length);for(var v=0,x=new Array(_);v<_;v++)x[v]=c[v];return x}function ha(c,_){if(c){if(typeof c=="string")return nn(c,_);var v=Object.prototype.toString.call(c).slice(8,-1);if(v==="Object"&&c.constructor&&(v=c.constructor.name),v==="Map"||v==="Set")return Array.from(c);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return nn(c,_)}}function ua(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function da(c){return la(c)||ca(c)||ha(c)||ua()}function Bh(c,_){var v=Object.keys(c);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);_&&(x=x.filter(function(y){return Object.getOwnPropertyDescriptor(c,y).enumerable})),v.push.apply(v,x)}return v}function Fh(c){for(var _=1;_<arguments.length;_++){var v=arguments[_]!=null?arguments[_]:{};_%2?Bh(Object(v),!0).forEach(function(x){$t(c,x,v[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(v)):Bh(Object(v)).forEach(function(x){Object.defineProperty(c,x,Object.getOwnPropertyDescriptor(v,x))})}return c}var A0={type:"logger",log:function(_){this.output("log",_)},warn:function(_){this.output("warn",_)},error:function(_){this.output("error",_)},output:function(_,v){console&&console[_]&&console[_].apply(console,v)}},M0=function(){function c(_){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};At(this,c),this.init(_,v)}return Mt(c,[{key:"init",value:function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=x.prefix||"i18next:",this.logger=v||A0,this.options=x,this.debug=x.debug}},{key:"setDebug",value:function(v){this.debug=v}},{key:"log",value:function(){for(var v=arguments.length,x=new Array(v),y=0;y<v;y++)x[y]=arguments[y];return this.forward(x,"log","",!0)}},{key:"warn",value:function(){for(var v=arguments.length,x=new Array(v),y=0;y<v;y++)x[y]=arguments[y];return this.forward(x,"warn","",!0)}},{key:"error",value:function(){for(var v=arguments.length,x=new Array(v),y=0;y<v;y++)x[y]=arguments[y];return this.forward(x,"error","")}},{key:"deprecate",value:function(){for(var v=arguments.length,x=new Array(v),y=0;y<v;y++)x[y]=arguments[y];return this.forward(x,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(v,x,y,t){return t&&!this.debug?null:(typeof v[0]=="string"&&(v[0]="".concat(y).concat(this.prefix," ").concat(v[0])),this.logger[x](v))}},{key:"create",value:function(v){return new c(this.logger,Fh(Fh({},{prefix:"".concat(this.prefix,":").concat(v,":")}),this.options))}},{key:"clone",value:function(v){return v=v||this.options,v.prefix=v.prefix||this.prefix,new c(this.logger,v)}}]),c}(),Gt=new M0,Vr=function(){function c(){At(this,c),this.observers={}}return Mt(c,[{key:"on",value:function(v,x){var y=this;return v.split(" ").forEach(function(t){y.observers[t]=y.observers[t]||[],y.observers[t].push(x)}),this}},{key:"off",value:function(v,x){if(this.observers[v]){if(!x){delete this.observers[v];return}this.observers[v]=this.observers[v].filter(function(y){return y!==x})}}},{key:"emit",value:function(v){for(var x=arguments.length,y=new Array(x>1?x-1:0),t=1;t<x;t++)y[t-1]=arguments[t];if(this.observers[v]){var n=[].concat(this.observers[v]);n.forEach(function(h){h.apply(void 0,y)})}if(this.observers["*"]){var u=[].concat(this.observers["*"]);u.forEach(function(h){h.apply(h,[v].concat(y))})}}}]),c}();function ps(){var c,_,v=new Promise(function(x,y){c=x,_=y});return v.resolve=c,v.reject=_,v}function Uh(c){return c==null?"":""+c}function O0(c,_,v){c.forEach(function(x){_[x]&&(v[x]=_[x])})}function pa(c,_,v){function x(u){return u&&u.indexOf("###")>-1?u.replace(/###/g,"."):u}function y(){return!c||typeof c=="string"}for(var t=typeof _!="string"?[].concat(_):_.split(".");t.length>1;){if(y())return{};var n=x(t.shift());!c[n]&&v&&(c[n]=new v),Object.prototype.hasOwnProperty.call(c,n)?c=c[n]:c={}}return y()?{}:{obj:c,k:x(t.shift())}}function Nh(c,_,v){var x=pa(c,_,Object),y=x.obj,t=x.k;y[t]=v}function D0(c,_,v,x){var y=pa(c,_,Object),t=y.obj,n=y.k;t[n]=t[n]||[],x&&(t[n]=t[n].concat(v)),x||t[n].push(v)}function ln(c,_){var v=pa(c,_),x=v.obj,y=v.k;if(x)return x[y]}function Hh(c,_,v){var x=ln(c,v);return x!==void 0?x:ln(_,v)}function eu(c,_,v){for(var x in _)x!=="__proto__"&&x!=="constructor"&&(x in c?typeof c[x]=="string"||c[x]instanceof String||typeof _[x]=="string"||_[x]instanceof String?v&&(c[x]=_[x]):eu(c[x],_[x],v):c[x]=_[x]);return c}function Di(c){return c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var P0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function I0(c){return typeof c=="string"?c.replace(/[&<>"'\/]/g,function(_){return P0[_]}):c}var hn=typeof window!="undefined"&&window.navigator&&typeof window.navigator.userAgentData=="undefined"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,B0=[" ",",","?","!",";"];function F0(c,_,v){_=_||"",v=v||"";var x=B0.filter(function(u){return _.indexOf(u)<0&&v.indexOf(u)<0});if(x.length===0)return!0;var y=new RegExp("(".concat(x.map(function(u){return u==="?"?"\\?":u}).join("|"),")")),t=!y.test(c);if(!t){var n=c.indexOf(v);n>0&&!y.test(c.substring(0,n))&&(t=!0)}return t}function Wh(c,_){var v=Object.keys(c);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);_&&(x=x.filter(function(y){return Object.getOwnPropertyDescriptor(c,y).enumerable})),v.push.apply(v,x)}return v}function on(c){for(var _=1;_<arguments.length;_++){var v=arguments[_]!=null?arguments[_]:{};_%2?Wh(Object(v),!0).forEach(function(x){$t(c,x,v[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(v)):Wh(Object(v)).forEach(function(x){Object.defineProperty(c,x,Object.getOwnPropertyDescriptor(v,x))})}return c}function U0(c){var _=N0();return function(){var x=Ot(c),y;if(_){var t=Ot(this).constructor;y=Reflect.construct(x,arguments,t)}else y=x.apply(this,arguments);return ci(this,y)}}function N0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}function tu(c,_){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(c){if(c[_])return c[_];for(var x=_.split(v),y=c,t=0;t<x.length;++t){if(!y||typeof y[x[t]]=="string"&&t+1<x.length)return;if(y[x[t]]===void 0){for(var n=2,u=x.slice(t,t+n).join(v),h=y[u];h===void 0&&x.length>t+n;)n++,u=x.slice(t,t+n).join(v),h=y[u];if(h===void 0)return;if(h===null)return null;if(_.endsWith(u)){if(typeof h=="string")return h;if(u&&typeof h[u]=="string")return h[u]}var a=x.slice(t+n).join(v);return a?tu(h,a,v):void 0}y=y[x[t]]}return y}}var H0=function(c){Oi(v,c);var _=U0(v);function v(x){var y,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return At(this,v),y=_.call(this),hn&&Vr.call(Bt(y)),y.data=x||{},y.options=t,y.options.keySeparator===void 0&&(y.options.keySeparator="."),y.options.ignoreJSONStructure===void 0&&(y.options.ignoreJSONStructure=!0),y}return Mt(v,[{key:"addNamespaces",value:function(y){this.options.ns.indexOf(y)<0&&this.options.ns.push(y)}},{key:"removeNamespaces",value:function(y){var t=this.options.ns.indexOf(y);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(y,t,n){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},h=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator,a=u.ignoreJSONStructure!==void 0?u.ignoreJSONStructure:this.options.ignoreJSONStructure,o=[y,t];n&&typeof n!="string"&&(o=o.concat(n)),n&&typeof n=="string"&&(o=o.concat(h?n.split(h):n)),y.indexOf(".")>-1&&(o=y.split("."));var m=ln(this.data,o);return m||!a||typeof n!="string"?m:tu(this.data&&this.data[y]&&this.data[y][t],n,h)}},{key:"addResource",value:function(y,t,n,u){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},a=this.options.keySeparator;a===void 0&&(a=".");var o=[y,t];n&&(o=o.concat(a?n.split(a):n)),y.indexOf(".")>-1&&(o=y.split("."),u=t,t=o[1]),this.addNamespaces(t),Nh(this.data,o,u),h.silent||this.emit("added",y,t,n,u)}},{key:"addResources",value:function(y,t,n){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var h in n)(typeof n[h]=="string"||Object.prototype.toString.apply(n[h])==="[object Array]")&&this.addResource(y,t,h,n[h],{silent:!0});u.silent||this.emit("added",y,t,n)}},{key:"addResourceBundle",value:function(y,t,n,u,h){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},o=[y,t];y.indexOf(".")>-1&&(o=y.split("."),u=n,n=t,t=o[1]),this.addNamespaces(t);var m=ln(this.data,o)||{};u?eu(m,n,h):m=on(on({},m),n),Nh(this.data,o,m),a.silent||this.emit("added",y,t,n)}},{key:"removeResourceBundle",value:function(y,t){this.hasResourceBundle(y,t)&&delete this.data[y][t],this.removeNamespaces(t),this.emit("removed",y,t)}},{key:"hasResourceBundle",value:function(y,t){return this.getResource(y,t)!==void 0}},{key:"getResourceBundle",value:function(y,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?on(on({},{}),this.getResource(y,t)):this.getResource(y,t)}},{key:"getDataByLanguage",value:function(y){return this.data[y]}},{key:"hasLanguageSomeTranslations",value:function(y){var t=this.getDataByLanguage(y),n=t&&Object.keys(t)||[];return!!n.find(function(u){return t[u]&&Object.keys(t[u]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),v}(Vr),ru={processors:{},addPostProcessor:function(_){this.processors[_.name]=_},handle:function(_,v,x,y,t){var n=this;return _.forEach(function(u){n.processors[u]&&(v=n.processors[u].process(v,x,y,t))}),v}};function zh(c,_){var v=Object.keys(c);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);_&&(x=x.filter(function(y){return Object.getOwnPropertyDescriptor(c,y).enumerable})),v.push.apply(v,x)}return v}function pt(c){for(var _=1;_<arguments.length;_++){var v=arguments[_]!=null?arguments[_]:{};_%2?zh(Object(v),!0).forEach(function(x){$t(c,x,v[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(v)):zh(Object(v)).forEach(function(x){Object.defineProperty(c,x,Object.getOwnPropertyDescriptor(v,x))})}return c}function W0(c){var _=z0();return function(){var x=Ot(c),y;if(_){var t=Ot(this).constructor;y=Reflect.construct(x,arguments,t)}else y=x.apply(this,arguments);return ci(this,y)}}function z0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}var $h={},jh=function(c){Oi(v,c);var _=W0(v);function v(x){var y,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return At(this,v),y=_.call(this),hn&&Vr.call(Bt(y)),O0(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],x,Bt(y)),y.options=t,y.options.keySeparator===void 0&&(y.options.keySeparator="."),y.logger=Gt.create("translator"),y}return Mt(v,[{key:"changeLanguage",value:function(y){y&&(this.language=y)}},{key:"exists",value:function(y){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(y==null)return!1;var n=this.resolve(y,t);return n&&n.res!==void 0}},{key:"extractFromKey",value:function(y,t){var n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");var u=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,h=t.ns||this.options.defaultNS||[],a=n&&y.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!F0(y,n,u);if(a&&!o){var m=y.match(this.interpolator.nestingRegexp);if(m&&m.length>0)return{key:y,namespaces:h};var p=y.split(n);(n!==u||n===u&&this.options.ns.indexOf(p[0])>-1)&&(h=p.shift()),y=p.join(u)}return typeof h=="string"&&(h=[h]),{key:y,namespaces:h}}},{key:"translate",value:function(y,t,n){var u=this;if(lt(t)!=="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),y==null)return"";Array.isArray(y)||(y=[String(y)]);var h=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,a=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,o=this.extractFromKey(y[y.length-1],t),m=o.key,p=o.namespaces,i=p[p.length-1],e=t.lng||this.language,d=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(e&&e.toLowerCase()==="cimode"){if(d){var f=t.nsSeparator||this.options.nsSeparator;return h?(s.res="".concat(i).concat(f).concat(m),s):"".concat(i).concat(f).concat(m)}return h?(s.res=m,s):m}var s=this.resolve(y,t),g=s&&s.res,L=s&&s.usedKey||m,b=s&&s.exactUsedKey||m,R=Object.prototype.toString.apply(g),E=["[object Number]","[object Function]","[object RegExp]"],w=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,M=typeof g!="string"&&typeof g!="boolean"&&typeof g!="number";if(k&&g&&M&&E.indexOf(R)<0&&!(typeof w=="string"&&R==="[object Array]")){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var D=this.options.returnedObjectHandler?this.options.returnedObjectHandler(L,g,pt(pt({},t),{},{ns:p})):"key '".concat(m," (").concat(this.language,")' returned an object instead of string.");return h?(s.res=D,s):D}if(a){var P=R==="[object Array]",W=P?[]:{},F=P?b:L;for(var $ in g)if(Object.prototype.hasOwnProperty.call(g,$)){var A="".concat(F).concat(a).concat($);W[$]=this.translate(A,pt(pt({},t),{joinArrays:!1,ns:p})),W[$]===A&&(W[$]=g[$])}g=W}}else if(k&&typeof w=="string"&&R==="[object Array]")g=g.join(w),g&&(g=this.extendTranslation(g,y,t,n));else{var U=!1,N=!1,z=t.count!==void 0&&typeof t.count!="string",K=v.hasDefaultValue(t),Q=z?this.pluralResolver.getSuffix(e,t.count,t):"",oe=t["defaultValue".concat(Q)]||t.defaultValue;!this.isValidLookup(g)&&K&&(U=!0,g=oe),this.isValidLookup(g)||(N=!0,g=m);var ee=t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,ne=ee&&N?void 0:g,G=K&&oe!==g&&this.options.updateMissing;if(N||U||G){if(this.logger.log(G?"updateKey":"missingKey",e,i,m,G?oe:g),a){var V=this.resolve(m,pt(pt({},t),{},{keySeparator:!1}));V&&V.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var q=[],te=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&te&&te[0])for(var ce=0;ce<te.length;ce++)q.push(te[ce]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(t.lng||this.language):q.push(t.lng||this.language);var Ee=function(ke,Z,Me){var he=K&&Me!==g?Me:ne;u.options.missingKeyHandler?u.options.missingKeyHandler(ke,i,Z,he,G,t):u.backendConnector&&u.backendConnector.saveMissing&&u.backendConnector.saveMissing(ke,i,Z,he,G,t),u.emit("missingKey",ke,i,Z,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&z?q.forEach(function(re){u.pluralResolver.getSuffixes(re,t).forEach(function(ke){Ee([re],m+ke,t["defaultValue".concat(ke)]||oe)})}):Ee(q,m,oe))}g=this.extendTranslation(g,y,t,s,n),N&&g===m&&this.options.appendNamespaceToMissingKey&&(g="".concat(i,":").concat(m)),(N||U)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(i,":").concat(m):m,U?g:void 0):g=this.options.parseMissingKeyHandler(g))}return h?(s.res=g,s):g}},{key:"extendTranslation",value:function(y,t,n,u,h){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)y=this.i18nFormat.parse(y,pt(pt({},this.options.interpolation.defaultVariables),n),u.usedLng,u.usedNS,u.usedKey,{resolved:u});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(pt(pt({},n),{interpolation:pt(pt({},this.options.interpolation),n.interpolation)}));var o=typeof y=="string"&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),m;if(o){var p=y.match(this.interpolator.nestingRegexp);m=p&&p.length}var i=n.replace&&typeof n.replace!="string"?n.replace:n;if(this.options.interpolation.defaultVariables&&(i=pt(pt({},this.options.interpolation.defaultVariables),i)),y=this.interpolator.interpolate(y,i,n.lng||this.language,n),o){var e=y.match(this.interpolator.nestingRegexp),d=e&&e.length;m<d&&(n.nest=!1)}n.nest!==!1&&(y=this.interpolator.nest(y,function(){for(var g=arguments.length,L=new Array(g),b=0;b<g;b++)L[b]=arguments[b];return h&&h[0]===L[0]&&!n.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(L[0]," in key: ").concat(t[0])),null):a.translate.apply(a,L.concat([t]))},n)),n.interpolation&&this.interpolator.reset()}var f=n.postProcess||this.options.postProcess,s=typeof f=="string"?[f]:f;return y!=null&&s&&s.length&&n.applyPostProcessor!==!1&&(y=ru.handle(s,y,t,this.options&&this.options.postProcessPassResolved?pt({i18nResolved:u},n):n,this)),y}},{key:"resolve",value:function(y){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u,h,a,o,m;return typeof y=="string"&&(y=[y]),y.forEach(function(p){if(!t.isValidLookup(u)){var i=t.extractFromKey(p,n),e=i.key;h=e;var d=i.namespaces;t.options.fallbackNS&&(d=d.concat(t.options.fallbackNS));var f=n.count!==void 0&&typeof n.count!="string",s=f&&!n.ordinal&&n.count===0&&t.pluralResolver.shouldUseIntlApi(),g=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",L=n.lngs?n.lngs:t.languageUtils.toResolveHierarchy(n.lng||t.language,n.fallbackLng);d.forEach(function(b){t.isValidLookup(u)||(m=b,!$h["".concat(L[0],"-").concat(b)]&&t.utils&&t.utils.hasLoadedNamespace&&!t.utils.hasLoadedNamespace(m)&&($h["".concat(L[0],"-").concat(b)]=!0,t.logger.warn('key "'.concat(h,'" for languages "').concat(L.join(", "),`" won't get resolved as namespace "`).concat(m,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),L.forEach(function(R){if(!t.isValidLookup(u)){o=R;var E=[e];if(t.i18nFormat&&t.i18nFormat.addLookupKeys)t.i18nFormat.addLookupKeys(E,e,R,b,n);else{var w;f&&(w=t.pluralResolver.getSuffix(R,n.count,n));var k="".concat(t.options.pluralSeparator,"zero");if(f&&(E.push(e+w),s&&E.push(e+k)),g){var M="".concat(e).concat(t.options.contextSeparator).concat(n.context);E.push(M),f&&(E.push(M+w),s&&E.push(M+k))}}for(var D;D=E.pop();)t.isValidLookup(u)||(a=D,u=t.getResource(R,b,D,n))}}))})}}),{res:u,usedKey:h,exactUsedKey:a,usedLng:o,usedNS:m}}},{key:"isValidLookup",value:function(y){return y!==void 0&&!(!this.options.returnNull&&y===null)&&!(!this.options.returnEmptyString&&y==="")}},{key:"getResource",value:function(y,t,n){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(y,t,n,u):this.resourceStore.getResource(y,t,n,u)}}],[{key:"hasDefaultValue",value:function(y){var t="defaultValue";for(var n in y)if(Object.prototype.hasOwnProperty.call(y,n)&&t===n.substring(0,t.length)&&y[n]!==void 0)return!0;return!1}}]),v}(Vr);function fa(c){return c.charAt(0).toUpperCase()+c.slice(1)}var Gh=function(){function c(_){At(this,c),this.options=_,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Gt.create("languageUtils")}return Mt(c,[{key:"getScriptPartFromCode",value:function(v){if(!v||v.indexOf("-")<0)return null;var x=v.split("-");return x.length===2||(x.pop(),x[x.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(x.join("-"))}},{key:"getLanguagePartFromCode",value:function(v){if(!v||v.indexOf("-")<0)return v;var x=v.split("-");return this.formatLanguageCode(x[0])}},{key:"formatLanguageCode",value:function(v){if(typeof v=="string"&&v.indexOf("-")>-1){var x=["hans","hant","latn","cyrl","cans","mong","arab"],y=v.split("-");return this.options.lowerCaseLng?y=y.map(function(t){return t.toLowerCase()}):y.length===2?(y[0]=y[0].toLowerCase(),y[1]=y[1].toUpperCase(),x.indexOf(y[1].toLowerCase())>-1&&(y[1]=fa(y[1].toLowerCase()))):y.length===3&&(y[0]=y[0].toLowerCase(),y[1].length===2&&(y[1]=y[1].toUpperCase()),y[0]!=="sgn"&&y[2].length===2&&(y[2]=y[2].toUpperCase()),x.indexOf(y[1].toLowerCase())>-1&&(y[1]=fa(y[1].toLowerCase())),x.indexOf(y[2].toLowerCase())>-1&&(y[2]=fa(y[2].toLowerCase()))),y.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?v.toLowerCase():v}},{key:"isSupportedCode",value:function(v){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(v=this.getLanguagePartFromCode(v)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(v)>-1}},{key:"getBestMatchFromCodes",value:function(v){var x=this;if(!v)return null;var y;return v.forEach(function(t){if(!y){var n=x.formatLanguageCode(t);(!x.options.supportedLngs||x.isSupportedCode(n))&&(y=n)}}),!y&&this.options.supportedLngs&&v.forEach(function(t){if(!y){var n=x.getLanguagePartFromCode(t);if(x.isSupportedCode(n))return y=n;y=x.options.supportedLngs.find(function(u){if(u.indexOf(n)===0)return u})}}),y||(y=this.getFallbackCodes(this.options.fallbackLng)[0]),y}},{key:"getFallbackCodes",value:function(v,x){if(!v)return[];if(typeof v=="function"&&(v=v(x)),typeof v=="string"&&(v=[v]),Object.prototype.toString.apply(v)==="[object Array]")return v;if(!x)return v.default||[];var y=v[x];return y||(y=v[this.getScriptPartFromCode(x)]),y||(y=v[this.formatLanguageCode(x)]),y||(y=v[this.getLanguagePartFromCode(x)]),y||(y=v.default),y||[]}},{key:"toResolveHierarchy",value:function(v,x){var y=this,t=this.getFallbackCodes(x||this.options.fallbackLng||[],v),n=[],u=function(a){a&&(y.isSupportedCode(a)?n.push(a):y.logger.warn("rejecting language code not found in supportedLngs: ".concat(a)))};return typeof v=="string"&&v.indexOf("-")>-1?(this.options.load!=="languageOnly"&&u(this.formatLanguageCode(v)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&u(this.getScriptPartFromCode(v)),this.options.load!=="currentOnly"&&u(this.getLanguagePartFromCode(v))):typeof v=="string"&&u(this.formatLanguageCode(v)),t.forEach(function(h){n.indexOf(h)<0&&u(y.formatLanguageCode(h))}),n}}]),c}(),$0=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],j0={1:function(_){return Number(_>1)},2:function(_){return Number(_!=1)},3:function(_){return 0},4:function(_){return Number(_%10==1&&_%100!=11?0:_%10>=2&&_%10<=4&&(_%100<10||_%100>=20)?1:2)},5:function(_){return Number(_==0?0:_==1?1:_==2?2:_%100>=3&&_%100<=10?3:_%100>=11?4:5)},6:function(_){return Number(_==1?0:_>=2&&_<=4?1:2)},7:function(_){return Number(_==1?0:_%10>=2&&_%10<=4&&(_%100<10||_%100>=20)?1:2)},8:function(_){return Number(_==1?0:_==2?1:_!=8&&_!=11?2:3)},9:function(_){return Number(_>=2)},10:function(_){return Number(_==1?0:_==2?1:_<7?2:_<11?3:4)},11:function(_){return Number(_==1||_==11?0:_==2||_==12?1:_>2&&_<20?2:3)},12:function(_){return Number(_%10!=1||_%100==11)},13:function(_){return Number(_!==0)},14:function(_){return Number(_==1?0:_==2?1:_==3?2:3)},15:function(_){return Number(_%10==1&&_%100!=11?0:_%10>=2&&(_%100<10||_%100>=20)?1:2)},16:function(_){return Number(_%10==1&&_%100!=11?0:_!==0?1:2)},17:function(_){return Number(_==1||_%10==1&&_%100!=11?0:1)},18:function(_){return Number(_==0?0:_==1?1:2)},19:function(_){return Number(_==1?0:_==0||_%100>1&&_%100<11?1:_%100>10&&_%100<20?2:3)},20:function(_){return Number(_==1?0:_==0||_%100>0&&_%100<20?1:2)},21:function(_){return Number(_%100==1?1:_%100==2?2:_%100==3||_%100==4?3:0)},22:function(_){return Number(_==1?0:_==2?1:(_<0||_>10)&&_%10==0?2:3)}},G0=["v1","v2","v3"],qh={zero:0,one:1,two:2,few:3,many:4,other:5};function q0(){var c={};return $0.forEach(function(_){_.lngs.forEach(function(v){c[v]={numbers:_.nr,plurals:j0[_.fc]}})}),c}var V0=function(){function c(_){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};At(this,c),this.languageUtils=_,this.options=v,this.logger=Gt.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl=="undefined"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=q0()}return Mt(c,[{key:"addRule",value:function(v,x){this.rules[v]=x}},{key:"getRule",value:function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(v,{type:x.ordinal?"ordinal":"cardinal"})}catch(y){return}return this.rules[v]||this.rules[this.languageUtils.getLanguagePartFromCode(v)]}},{key:"needsPlural",value:function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=this.getRule(v,x);return this.shouldUseIntlApi()?y&&y.resolvedOptions().pluralCategories.length>1:y&&y.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(v,x){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(v,y).map(function(t){return"".concat(x).concat(t)})}},{key:"getSuffixes",value:function(v){var x=this,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=this.getRule(v,y);return t?this.shouldUseIntlApi()?t.resolvedOptions().pluralCategories.sort(function(n,u){return qh[n]-qh[u]}).map(function(n){return"".concat(x.options.prepend).concat(n)}):t.numbers.map(function(n){return x.getSuffix(v,n,y)}):[]}},{key:"getSuffix",value:function(v,x){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=this.getRule(v,y);return t?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(t.select(x)):this.getSuffixRetroCompatible(t,x):(this.logger.warn("no plural rule found for: ".concat(v)),"")}},{key:"getSuffixRetroCompatible",value:function(v,x){var y=this,t=v.noAbs?v.plurals(x):v.plurals(Math.abs(x)),n=v.numbers[t];this.options.simplifyPluralSuffix&&v.numbers.length===2&&v.numbers[0]===1&&(n===2?n="plural":n===1&&(n=""));var u=function(){return y.options.prepend&&n.toString()?y.options.prepend+n.toString():n.toString()};return this.options.compatibilityJSON==="v1"?n===1?"":typeof n=="number"?"_plural_".concat(n.toString()):u():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&v.numbers.length===2&&v.numbers[0]===1?u():this.options.prepend&&t.toString()?this.options.prepend+t.toString():t.toString()}},{key:"shouldUseIntlApi",value:function(){return!G0.includes(this.options.compatibilityJSON)}}]),c}();function Vh(c,_){var v=Object.keys(c);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);_&&(x=x.filter(function(y){return Object.getOwnPropertyDescriptor(c,y).enumerable})),v.push.apply(v,x)}return v}function Ft(c){for(var _=1;_<arguments.length;_++){var v=arguments[_]!=null?arguments[_]:{};_%2?Vh(Object(v),!0).forEach(function(x){$t(c,x,v[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(v)):Vh(Object(v)).forEach(function(x){Object.defineProperty(c,x,Object.getOwnPropertyDescriptor(v,x))})}return c}var X0=function(){function c(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};At(this,c),this.logger=Gt.create("interpolator"),this.options=_,this.format=_.interpolation&&_.interpolation.format||function(v){return v},this.init(_)}return Mt(c,[{key:"init",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};v.interpolation||(v.interpolation={escapeValue:!0});var x=v.interpolation;this.escape=x.escape!==void 0?x.escape:I0,this.escapeValue=x.escapeValue!==void 0?x.escapeValue:!0,this.useRawValueToEscape=x.useRawValueToEscape!==void 0?x.useRawValueToEscape:!1,this.prefix=x.prefix?Di(x.prefix):x.prefixEscaped||"{{",this.suffix=x.suffix?Di(x.suffix):x.suffixEscaped||"}}",this.formatSeparator=x.formatSeparator?x.formatSeparator:x.formatSeparator||",",this.unescapePrefix=x.unescapeSuffix?"":x.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":x.unescapeSuffix||"",this.nestingPrefix=x.nestingPrefix?Di(x.nestingPrefix):x.nestingPrefixEscaped||Di("$t("),this.nestingSuffix=x.nestingSuffix?Di(x.nestingSuffix):x.nestingSuffixEscaped||Di(")"),this.nestingOptionsSeparator=x.nestingOptionsSeparator?x.nestingOptionsSeparator:x.nestingOptionsSeparator||",",this.maxReplaces=x.maxReplaces?x.maxReplaces:1e3,this.alwaysFormat=x.alwaysFormat!==void 0?x.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var v="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(v,"g");var x="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(x,"g");var y="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(y,"g")}},{key:"interpolate",value:function(v,x,y,t){var n=this,u,h,a,o=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function m(f){return f.replace(/\$/g,"$$$$")}var p=function(s){if(s.indexOf(n.formatSeparator)<0){var g=Hh(x,o,s);return n.alwaysFormat?n.format(g,void 0,y,Ft(Ft(Ft({},t),x),{},{interpolationkey:s})):g}var L=s.split(n.formatSeparator),b=L.shift().trim(),R=L.join(n.formatSeparator).trim();return n.format(Hh(x,o,b),R,y,Ft(Ft(Ft({},t),x),{},{interpolationkey:b}))};this.resetRegExp();var i=t&&t.missingInterpolationHandler||this.options.missingInterpolationHandler,e=t&&t.interpolation&&t.interpolation.skipOnVariables!==void 0?t.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,d=[{regex:this.regexpUnescape,safeValue:function(s){return m(s)}},{regex:this.regexp,safeValue:function(s){return n.escapeValue?m(n.escape(s)):m(s)}}];return d.forEach(function(f){for(a=0;u=f.regex.exec(v);){var s=u[1].trim();if(h=p(s),h===void 0)if(typeof i=="function"){var g=i(v,u,t);h=typeof g=="string"?g:""}else if(t&&t.hasOwnProperty(s))h="";else if(e){h=u[0];continue}else n.logger.warn("missed to pass in variable ".concat(s," for interpolating ").concat(v)),h="";else typeof h!="string"&&!n.useRawValueToEscape&&(h=Uh(h));var L=f.safeValue(h);if(v=v.replace(u[0],L),e?(f.regex.lastIndex+=h.length,f.regex.lastIndex-=u[0].length):f.regex.lastIndex=0,a++,a>=n.maxReplaces)break}}),v}},{key:"nest",value:function(v,x){var y=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,u,h;function a(i,e){var d=this.nestingOptionsSeparator;if(i.indexOf(d)<0)return i;var f=i.split(new RegExp("".concat(d,"[ ]*{"))),s="{".concat(f[1]);i=f[0],s=this.interpolate(s,h);var g=s.match(/'/g),L=s.match(/"/g);(g&&g.length%2===0&&!L||L.length%2!==0)&&(s=s.replace(/'/g,'"'));try{h=JSON.parse(s),e&&(h=Ft(Ft({},e),h))}catch(b){return this.logger.warn("failed parsing options string in nesting for key ".concat(i),b),"".concat(i).concat(d).concat(s)}return delete h.defaultValue,i}for(;n=this.nestingRegexp.exec(v);){var o=[];h=Ft({},t),h=h.replace&&typeof h.replace!="string"?h.replace:h,h.applyPostProcessor=!1,delete h.defaultValue;var m=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){var p=n[1].split(this.formatSeparator).map(function(i){return i.trim()});n[1]=p.shift(),o=p,m=!0}if(u=x(a.call(this,n[1].trim(),h),h),u&&n[0]===v&&typeof u!="string")return u;typeof u!="string"&&(u=Uh(u)),u||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(v)),u=""),m&&(u=o.reduce(function(i,e){return y.format(i,e,t.lng,Ft(Ft({},t),{},{interpolationkey:n[1].trim()}))},u.trim())),v=v.replace(n[0],u),this.regexp.lastIndex=0}return v}}]),c}();function Xh(c,_){var v=Object.keys(c);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);_&&(x=x.filter(function(y){return Object.getOwnPropertyDescriptor(c,y).enumerable})),v.push.apply(v,x)}return v}function qr(c){for(var _=1;_<arguments.length;_++){var v=arguments[_]!=null?arguments[_]:{};_%2?Xh(Object(v),!0).forEach(function(x){$t(c,x,v[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(v)):Xh(Object(v)).forEach(function(x){Object.defineProperty(c,x,Object.getOwnPropertyDescriptor(v,x))})}return c}function K0(c){var _=c.toLowerCase().trim(),v={};if(c.indexOf("(")>-1){var x=c.split("(");_=x[0].toLowerCase().trim();var y=x[1].substring(0,x[1].length-1);if(_==="currency"&&y.indexOf(":")<0)v.currency||(v.currency=y.trim());else if(_==="relativetime"&&y.indexOf(":")<0)v.range||(v.range=y.trim());else{var t=y.split(";");t.forEach(function(n){if(n){var u=n.split(":"),h=da(u),a=h[0],o=h.slice(1),m=o.join(":").trim().replace(/^'+|'+$/g,"");v[a.trim()]||(v[a.trim()]=m),m==="false"&&(v[a.trim()]=!1),m==="true"&&(v[a.trim()]=!0),isNaN(m)||(v[a.trim()]=parseInt(m,10))}})}}return{formatName:_,formatOptions:v}}function Pi(c){var _={};return function(x,y,t){var n=y+JSON.stringify(t),u=_[n];return u||(u=c(y,t),_[n]=u),u(x)}}var Y0=function(){function c(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};At(this,c),this.logger=Gt.create("formatter"),this.options=_,this.formats={number:Pi(function(v,x){var y=new Intl.NumberFormat(v,x);return function(t){return y.format(t)}}),currency:Pi(function(v,x){var y=new Intl.NumberFormat(v,qr(qr({},x),{},{style:"currency"}));return function(t){return y.format(t)}}),datetime:Pi(function(v,x){var y=new Intl.DateTimeFormat(v,qr({},x));return function(t){return y.format(t)}}),relativetime:Pi(function(v,x){var y=new Intl.RelativeTimeFormat(v,qr({},x));return function(t){return y.format(t,x.range||"day")}}),list:Pi(function(v,x){var y=new Intl.ListFormat(v,qr({},x));return function(t){return y.format(t)}})},this.init(_)}return Mt(c,[{key:"init",value:function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},y=x.interpolation;this.formatSeparator=y.formatSeparator?y.formatSeparator:y.formatSeparator||","}},{key:"add",value:function(v,x){this.formats[v.toLowerCase().trim()]=x}},{key:"addCached",value:function(v,x){this.formats[v.toLowerCase().trim()]=Pi(x)}},{key:"format",value:function(v,x,y,t){var n=this,u=x.split(this.formatSeparator),h=u.reduce(function(a,o){var m=K0(o),p=m.formatName,i=m.formatOptions;if(n.formats[p]){var e=a;try{var d=t&&t.formatParams&&t.formatParams[t.interpolationkey]||{},f=d.locale||d.lng||t.locale||t.lng||y;e=n.formats[p](a,f,qr(qr(qr({},i),t),d))}catch(s){n.logger.warn(s)}return e}else n.logger.warn("there was no format function for ".concat(p));return a},v);return h}}]),c}();function Kh(c,_){var v=Object.keys(c);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);_&&(x=x.filter(function(y){return Object.getOwnPropertyDescriptor(c,y).enumerable})),v.push.apply(v,x)}return v}function Yh(c){for(var _=1;_<arguments.length;_++){var v=arguments[_]!=null?arguments[_]:{};_%2?Kh(Object(v),!0).forEach(function(x){$t(c,x,v[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(v)):Kh(Object(v)).forEach(function(x){Object.defineProperty(c,x,Object.getOwnPropertyDescriptor(v,x))})}return c}function J0(c){var _=Z0();return function(){var x=Ot(c),y;if(_){var t=Ot(this).constructor;y=Reflect.construct(x,arguments,t)}else y=x.apply(this,arguments);return ci(this,y)}}function Z0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}function Q0(c,_){c.pending[_]!==void 0&&(delete c.pending[_],c.pendingCount--)}var ev=function(c){Oi(v,c);var _=J0(v);function v(x,y,t){var n,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return At(this,v),n=_.call(this),hn&&Vr.call(Bt(n)),n.backend=x,n.store=y,n.services=t,n.languageUtils=t.languageUtils,n.options=u,n.logger=Gt.create("backendConnector"),n.waitingReads=[],n.maxParallelReads=u.maxParallelReads||10,n.readingCalls=0,n.maxRetries=u.maxRetries>=0?u.maxRetries:5,n.retryTimeout=u.retryTimeout>=1?u.retryTimeout:350,n.state={},n.queue=[],n.backend&&n.backend.init&&n.backend.init(t,u.backend,u),n}return Mt(v,[{key:"queueLoad",value:function(y,t,n,u){var h=this,a={},o={},m={},p={};return y.forEach(function(i){var e=!0;t.forEach(function(d){var f="".concat(i,"|").concat(d);!n.reload&&h.store.hasResourceBundle(i,d)?h.state[f]=2:h.state[f]<0||(h.state[f]===1?o[f]===void 0&&(o[f]=!0):(h.state[f]=1,e=!1,o[f]===void 0&&(o[f]=!0),a[f]===void 0&&(a[f]=!0),p[d]===void 0&&(p[d]=!0)))}),e||(m[i]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:u}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(m),toLoadNamespaces:Object.keys(p)}}},{key:"loaded",value:function(y,t,n){var u=y.split("|"),h=u[0],a=u[1];t&&this.emit("failedLoading",h,a,t),n&&this.store.addResourceBundle(h,a,n),this.state[y]=t?-1:2;var o={};this.queue.forEach(function(m){D0(m.loaded,[h],a),Q0(m,y),t&&m.errors.push(t),m.pendingCount===0&&!m.done&&(Object.keys(m.loaded).forEach(function(p){o[p]||(o[p]={});var i=m.loaded[p];i.length&&i.forEach(function(e){o[p][e]===void 0&&(o[p][e]=!0)})}),m.done=!0,m.errors.length?m.callback(m.errors):m.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(function(m){return!m.done})}},{key:"read",value:function(y,t,n){var u=this,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!y.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:y,ns:t,fcName:n,tried:h,wait:a,callback:o});return}this.readingCalls++;var m=function(d,f){if(u.readingCalls--,u.waitingReads.length>0){var s=u.waitingReads.shift();u.read(s.lng,s.ns,s.fcName,s.tried,s.wait,s.callback)}if(d&&f&&h<u.maxRetries){setTimeout(function(){u.read.call(u,y,t,n,h+1,a*2,o)},a);return}o(d,f)},p=this.backend[n].bind(this.backend);if(p.length===2){try{var i=p(y,t);i&&typeof i.then=="function"?i.then(function(e){return m(null,e)}).catch(m):m(null,i)}catch(e){m(e)}return}return p(y,t,m)}},{key:"prepareLoading",value:function(y,t){var n=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),h&&h();typeof y=="string"&&(y=this.languageUtils.toResolveHierarchy(y)),typeof t=="string"&&(t=[t]);var a=this.queueLoad(y,t,u,h);if(!a.toLoad.length)return a.pending.length||h(),null;a.toLoad.forEach(function(o){n.loadOne(o)})}},{key:"load",value:function(y,t,n){this.prepareLoading(y,t,{},n)}},{key:"reload",value:function(y,t,n){this.prepareLoading(y,t,{reload:!0},n)}},{key:"loadOne",value:function(y){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",u=y.split("|"),h=u[0],a=u[1];this.read(h,a,"read",void 0,void 0,function(o,m){o&&t.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(h," failed"),o),!o&&m&&t.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(h),m),t.loaded(y,o,m)})}},{key:"saveMissing",value:function(y,t,n,u,h){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){var m=Yh(Yh({},a),{},{isUpdate:h}),p=this.backend.create.bind(this.backend);if(p.length<6)try{var i;p.length===5?i=p(y,t,n,u,m):i=p(y,t,n,u),i&&typeof i.then=="function"?i.then(function(e){return o(null,e)}).catch(o):o(null,i)}catch(e){o(e)}else p(y,t,n,u,o,m)}!y||!y[0]||this.store.addResource(y[0],t,n,u)}}}]),v}(Vr);function Jh(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(_){var v={};if(lt(_[1])==="object"&&(v=_[1]),typeof _[1]=="string"&&(v.defaultValue=_[1]),typeof _[2]=="string"&&(v.tDescription=_[2]),lt(_[2])==="object"||lt(_[3])==="object"){var x=_[3]||_[2];Object.keys(x).forEach(function(y){v[y]=x[y]})}return v},interpolation:{escapeValue:!0,format:function(_,v,x,y){return _},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Zh(c){return typeof c.ns=="string"&&(c.ns=[c.ns]),typeof c.fallbackLng=="string"&&(c.fallbackLng=[c.fallbackLng]),typeof c.fallbackNS=="string"&&(c.fallbackNS=[c.fallbackNS]),c.supportedLngs&&c.supportedLngs.indexOf("cimode")<0&&(c.supportedLngs=c.supportedLngs.concat(["cimode"])),c}function Qh(c,_){var v=Object.keys(c);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);_&&(x=x.filter(function(y){return Object.getOwnPropertyDescriptor(c,y).enumerable})),v.push.apply(v,x)}return v}function jt(c){for(var _=1;_<arguments.length;_++){var v=arguments[_]!=null?arguments[_]:{};_%2?Qh(Object(v),!0).forEach(function(x){$t(c,x,v[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(v)):Qh(Object(v)).forEach(function(x){Object.defineProperty(c,x,Object.getOwnPropertyDescriptor(v,x))})}return c}function tv(c){var _=rv();return function(){var x=Ot(c),y;if(_){var t=Ot(this).constructor;y=Reflect.construct(x,arguments,t)}else y=x.apply(this,arguments);return ci(this,y)}}function rv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}function an(){}function iv(c){var _=Object.getOwnPropertyNames(Object.getPrototypeOf(c));_.forEach(function(v){typeof c[v]=="function"&&(c[v]=c[v].bind(c))})}var cn=function(c){Oi(v,c);var _=tv(v);function v(){var x,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(At(this,v),x=_.call(this),hn&&Vr.call(Bt(x)),x.options=Zh(y),x.services={},x.logger=Gt,x.modules={external:[]},iv(Bt(x)),t&&!x.isInitialized&&!y.isClone){if(!x.options.initImmediate)return x.init(y,t),ci(x,Bt(x));setTimeout(function(){x.init(y,t)},0)}return x}return Mt(v,[{key:"init",value:function(){var y=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;typeof t=="function"&&(n=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(typeof t.ns=="string"?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var u=Jh();this.options=jt(jt(jt({},u),this.options),Zh(t)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=jt(jt({},u.interpolation),this.options.interpolation)),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);function h(s){return s?typeof s=="function"?new s:s:null}if(!this.options.isClone){this.modules.logger?Gt.init(h(this.modules.logger),this.options):Gt.init(null,this.options);var a;this.modules.formatter?a=this.modules.formatter:typeof Intl!="undefined"&&(a=Y0);var o=new Gh(this.options);this.store=new H0(this.options.resources,this.options);var m=this.services;m.logger=Gt,m.resourceStore=this.store,m.languageUtils=o,m.pluralResolver=new V0(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a&&(!this.options.interpolation.format||this.options.interpolation.format===u.interpolation.format)&&(m.formatter=h(a),m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new X0(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new ev(h(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",function(s){for(var g=arguments.length,L=new Array(g>1?g-1:0),b=1;b<g;b++)L[b-1]=arguments[b];y.emit.apply(y,[s].concat(L))}),this.modules.languageDetector&&(m.languageDetector=h(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=h(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new jh(this.services,this.options),this.translator.on("*",function(s){for(var g=arguments.length,L=new Array(g>1?g-1:0),b=1;b<g;b++)L[b-1]=arguments[b];y.emit.apply(y,[s].concat(L))}),this.modules.external.forEach(function(s){s.init&&s.init(y)})}if(this.format=this.options.interpolation.format,n||(n=an),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var i=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];i.forEach(function(s){y[s]=function(){var g;return(g=y.store)[s].apply(g,arguments)}});var e=["addResource","addResources","addResourceBundle","removeResourceBundle"];e.forEach(function(s){y[s]=function(){var g;return(g=y.store)[s].apply(g,arguments),y}});var d=ps(),f=function(){var g=function(b,R){y.isInitialized&&!y.initializedStoreOnce&&y.logger.warn("init: i18next is already initialized. You should call init just once!"),y.isInitialized=!0,y.options.isClone||y.logger.log("initialized",y.options),y.emit("initialized",y.options),d.resolve(R),n(b,R)};if(y.languages&&y.options.compatibilityAPI!=="v1"&&!y.isInitialized)return g(null,y.t.bind(y));y.changeLanguage(y.options.lng,g)};return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),d}},{key:"loadResources",value:function(y){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:an,u=n,h=typeof y=="string"?y:this.language;if(typeof y=="function"&&(u=y),!this.options.resources||this.options.partialBundledLanguages){if(h&&h.toLowerCase()==="cimode")return u();var a=[],o=function(i){if(i){var e=t.services.languageUtils.toResolveHierarchy(i);e.forEach(function(d){a.indexOf(d)<0&&a.push(d)})}};if(h)o(h);else{var m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.forEach(function(p){return o(p)})}this.options.preload&&this.options.preload.forEach(function(p){return o(p)}),this.services.backendConnector.load(a,this.options.ns,function(p){!p&&!t.resolvedLanguage&&t.language&&t.setResolvedLanguage(t.language),u(p)})}else u(null)}},{key:"reloadResources",value:function(y,t,n){var u=ps();return y||(y=this.languages),t||(t=this.options.ns),n||(n=an),this.services.backendConnector.reload(y,t,function(h){u.resolve(),n(h)}),u}},{key:"use",value:function(y){if(!y)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!y.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return y.type==="backend"&&(this.modules.backend=y),(y.type==="logger"||y.log&&y.warn&&y.error)&&(this.modules.logger=y),y.type==="languageDetector"&&(this.modules.languageDetector=y),y.type==="i18nFormat"&&(this.modules.i18nFormat=y),y.type==="postProcessor"&&ru.addPostProcessor(y),y.type==="formatter"&&(this.modules.formatter=y),y.type==="3rdParty"&&this.modules.external.push(y),this}},{key:"setResolvedLanguage",value:function(y){if(!(!y||!this.languages)&&!(["cimode","dev"].indexOf(y)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(y,t){var n=this;this.isLanguageChangingTo=y;var u=ps();this.emit("languageChanging",y);var h=function(p){n.language=p,n.languages=n.services.languageUtils.toResolveHierarchy(p),n.resolvedLanguage=void 0,n.setResolvedLanguage(p)},a=function(p,i){i?(h(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,u.resolve(function(){return n.t.apply(n,arguments)}),t&&t(p,function(){return n.t.apply(n,arguments)})},o=function(p){!y&&!p&&n.services.languageDetector&&(p=[]);var i=typeof p=="string"?p:n.services.languageUtils.getBestMatchFromCodes(p);i&&(n.language||h(i),n.translator.language||n.translator.changeLanguage(i),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage&&n.services.languageDetector.cacheUserLanguage(i)),n.loadResources(i,function(e){a(e,i)})};return!y&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!y&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(y),u}},{key:"getFixedT",value:function(y,t,n){var u=this,h=function a(o,m){var p;if(lt(m)!=="object"){for(var i=arguments.length,e=new Array(i>2?i-2:0),d=2;d<i;d++)e[d-2]=arguments[d];p=u.options.overloadTranslationOptionHandler([o,m].concat(e))}else p=jt({},m);p.lng=p.lng||a.lng,p.lngs=p.lngs||a.lngs,p.ns=p.ns||a.ns,p.keyPrefix=p.keyPrefix||n||a.keyPrefix;var f=u.options.keySeparator||".",s;return p.keyPrefix&&Array.isArray(o)?s=o.map(function(g){return"".concat(p.keyPrefix).concat(f).concat(g)}):s=p.keyPrefix?"".concat(p.keyPrefix).concat(f).concat(o):o,u.t(s,p)};return typeof y=="string"?h.lng=y:h.lngs=y,h.ns=t,h.keyPrefix=n,h}},{key:"t",value:function(){var y;return this.translator&&(y=this.translator).translate.apply(y,arguments)}},{key:"exists",value:function(){var y;return this.translator&&(y=this.translator).exists.apply(y,arguments)}},{key:"setDefaultNamespace",value:function(y){this.options.defaultNS=y}},{key:"hasLoadedNamespace",value:function(y){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var u=this.resolvedLanguage||this.languages[0],h=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(u.toLowerCase()==="cimode")return!0;var o=function(i,e){var d=t.services.backendConnector.state["".concat(i,"|").concat(e)];return d===-1||d===2};if(n.precheck){var m=n.precheck(this,o);if(m!==void 0)return m}return!!(this.hasResourceBundle(u,y)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(u,y)&&(!h||o(a,y)))}},{key:"loadNamespaces",value:function(y,t){var n=this,u=ps();return this.options.ns?(typeof y=="string"&&(y=[y]),y.forEach(function(h){n.options.ns.indexOf(h)<0&&n.options.ns.push(h)}),this.loadResources(function(h){u.resolve(),t&&t(h)}),u):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(y,t){var n=ps();typeof y=="string"&&(y=[y]);var u=this.options.preload||[],h=y.filter(function(a){return u.indexOf(a)<0});return h.length?(this.options.preload=u.concat(h),this.loadResources(function(a){n.resolve(),t&&t(a)}),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(y){if(y||(y=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!y)return"rtl";var t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new Gh(Jh());return t.indexOf(n.getLanguagePartFromCode(y))>-1||y.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var y=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:an,u=jt(jt(jt({},this.options),t),{isClone:!0}),h=new v(u);(t.debug!==void 0||t.prefix!==void 0)&&(h.logger=h.logger.clone(t));var a=["store","services","language"];return a.forEach(function(o){h[o]=y[o]}),h.services=jt({},this.services),h.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},h.translator=new jh(h.services,h.options),h.translator.on("*",function(o){for(var m=arguments.length,p=new Array(m>1?m-1:0),i=1;i<m;i++)p[i-1]=arguments[i];h.emit.apply(h,[o].concat(p))}),h.init(u,n),h.translator.options=h.options,h.translator.backendConnector.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},h}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),v}(Vr);$t(cn,"createInstance",function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;return new cn(c,_)});var tt=cn.createInstance();tt.createInstance=cn.createInstance;var kb=tt.createInstance,Ab=tt.dir,Mb=tt.init,Ob=tt.loadResources,Db=tt.reloadResources,Pb=tt.use,Ib=tt.changeLanguage,Bb=tt.getFixedT,Fb=tt.t,Ub=tt.exists,Nb=tt.setDefaultNamespace,Hb=tt.hasLoadedNamespace,Wb=tt.loadNamespaces,zb=tt.loadLanguages;var iu=require("obsidian");var sv=(async()=>{try{let c=tt.createInstance({cleanCode:!0,defaultNS:We,fallbackLng:Al,initImmediate:!0,nonExplicitSupportedLngs:!0,resources:Gi,returnNull:kl});return await c.init(),c}catch(c){throw Dr(Jt(c),()=>"i18n error"),c}})(),gs,_s,ga,un=class{constructor(_){this.plugin=_;Ae(this,_s);Ke(this,"onChangeLanguage",new mi);Ae(this,gs,tt)}get i18n(){return Ce(this,gs)}get language(){let{language:_}=this.plugin.settings;return _===""?iu.moment.locale():_}async load(){Ye(this,gs,await sv),await xe(this,_s,ga).call(this,this.language),this.plugin.register(this.plugin.on("mutate-settings",()=>this.language,async _=>xe(this,_s,ga).call(this,_)))}};gs=new WeakMap,_s=new WeakSet,ga=async function(_){await this.i18n.changeLanguage(_),await this.onChangeLanguage.emit()};function su(c){let _=document.querySelector("div.status-bar");return _!==null&&(c!=null?c:()=>{})(_),_}var Ii,ms,_a,vs,ma,dn=class{constructor(_){this.plugin=_;Ae(this,ms);Ae(this,vs);Ae(this,Ii,[])}load(){let{plugin:_}=this;_.app.workspace.onLayoutReady(()=>{su(v=>{let x=new MutationObserver(()=>{xe(this,ms,_a).call(this,v)});_.register(()=>{try{x.disconnect()}finally{xe(this,vs,ma).call(this,v)}}),this.update(),x.observe(v,{attributeFilter:["style"]})})===null&&Qt(()=>_.language.i18n.t("errors.cannot-find-status-bar"),_.settings.errorNoticeTimeout,_)}),_.on("mutate-settings",v=>v.hideStatusBar,()=>{this.update()})}hide(_){return Ce(this,Ii).push(_),this.update(),()=>{Ce(this,Ii).remove(_),this.update()}}update(){su(_=>{xe(this,vs,ma).call(this,_),xe(this,ms,_a).call(this,_)})}};Ii=new WeakMap,ms=new WeakSet,_a=function(_){(this.plugin.settings.hideStatusBar==="always"||Ce(this,Ii).some(v=>v()))&&(_.style.visibility="hidden")},vs=new WeakSet,ma=function(_){_.style.visibility=""};var ys,bs,fn=class extends nu.Plugin{constructor(v,x){ft.namespacedViewType=ft.type.namespaced(x);super(v,x);Ke(this,"language",new un(this));Ke(this,"statusBarHider",new dn(this));Ae(this,ys,wl(vt));Ae(this,bs,new mi)}get settings(){return Ce(this,ys)}async mutateSettings(v){await v(Ce(this,ys)),await Ce(this,bs).emit(this.settings)}on(v,x,y){let t=x(this.settings);return Ce(this,bs).listen(async n=>{let u=x(n),h=t;h!==u&&(t=u,await y(u,h,n))})}onload(){(async()=>{try{super.onload(),await Wt.load(this.settings,this),await this.language.load(),this.statusBarHider.load(),this.addSettingTab(new Ys(this)),Ph(this)}catch(v){console.error(v)}})()}};ys=new WeakMap,bs=new WeakMap;var nv=fn;
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD.
If you want to view the source, please visit the repository of this plugin.
*/
